\hypertarget{stb__image_8h_source}{}\doxysection{stb\+\_\+image.\+h}
\label{stb__image_8h_source}\index{source/Rendering/SOIL2/stb\_image.h@{source/Rendering/SOIL2/stb\_image.h}}
\mbox{\hyperlink{stb__image_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/* stb\_image -\/ v2.08 -\/ public domain image loader -\/ http://nothings.org/stb\_image.h}}
\DoxyCodeLine{2 \textcolor{comment}{                                     no warranty implied; use at your own risk}}
\DoxyCodeLine{3 \textcolor{comment}{}}
\DoxyCodeLine{4 \textcolor{comment}{   Do this:}}
\DoxyCodeLine{5 \textcolor{comment}{      \#define STB\_IMAGE\_IMPLEMENTATION}}
\DoxyCodeLine{6 \textcolor{comment}{   before you include this file in *one* C or C++ file to create the implementation.}}
\DoxyCodeLine{7 \textcolor{comment}{}}
\DoxyCodeLine{8 \textcolor{comment}{   // i.e. it should look like this:}}
\DoxyCodeLine{9 \textcolor{comment}{   \#include ...}}
\DoxyCodeLine{10 \textcolor{comment}{   \#include ...}}
\DoxyCodeLine{11 \textcolor{comment}{   \#include ...}}
\DoxyCodeLine{12 \textcolor{comment}{   \#define STB\_IMAGE\_IMPLEMENTATION}}
\DoxyCodeLine{13 \textcolor{comment}{   \#include "{}stb\_image.h"{}}}
\DoxyCodeLine{14 \textcolor{comment}{}}
\DoxyCodeLine{15 \textcolor{comment}{   You can \#define STBI\_ASSERT(x) before the \#include to avoid using assert.h.}}
\DoxyCodeLine{16 \textcolor{comment}{   And \#define STBI\_MALLOC, STBI\_REALLOC, and STBI\_FREE to avoid using malloc,realloc,free}}
\DoxyCodeLine{17 \textcolor{comment}{}}
\DoxyCodeLine{18 \textcolor{comment}{}}
\DoxyCodeLine{19 \textcolor{comment}{   QUICK NOTES:}}
\DoxyCodeLine{20 \textcolor{comment}{      Primarily of interest to game developers and other people who can}}
\DoxyCodeLine{21 \textcolor{comment}{          avoid problematic images and only need the trivial interface}}
\DoxyCodeLine{22 \textcolor{comment}{}}
\DoxyCodeLine{23 \textcolor{comment}{      JPEG baseline \& progressive (12 bpc/arithmetic not supported, same as stock IJG lib)}}
\DoxyCodeLine{24 \textcolor{comment}{      PNG 1/2/4/8-\/bit-\/per-\/channel (16 bpc not supported)}}
\DoxyCodeLine{25 \textcolor{comment}{}}
\DoxyCodeLine{26 \textcolor{comment}{      TGA (not sure what subset, if a subset)}}
\DoxyCodeLine{27 \textcolor{comment}{      BMP non-\/1bpp, non-\/RLE}}
\DoxyCodeLine{28 \textcolor{comment}{      PSD (composited view only, no extra channels, 8/16 bit-\/per-\/channel)}}
\DoxyCodeLine{29 \textcolor{comment}{}}
\DoxyCodeLine{30 \textcolor{comment}{      GIF (*comp always reports as 4-\/channel)}}
\DoxyCodeLine{31 \textcolor{comment}{      HDR (radiance rgbE format)}}
\DoxyCodeLine{32 \textcolor{comment}{      PIC (Softimage PIC)}}
\DoxyCodeLine{33 \textcolor{comment}{      PNM (PPM and PGM binary only)}}
\DoxyCodeLine{34 \textcolor{comment}{}}
\DoxyCodeLine{35 \textcolor{comment}{      Animated GIF still needs a proper API, but here's one way to do it:}}
\DoxyCodeLine{36 \textcolor{comment}{          http://gist.github.com/urraka/685d9a6340b26b830d49}}
\DoxyCodeLine{37 \textcolor{comment}{}}
\DoxyCodeLine{38 \textcolor{comment}{      -\/ decode from memory or through FILE (define STBI\_NO\_STDIO to remove code)}}
\DoxyCodeLine{39 \textcolor{comment}{      -\/ decode from arbitrary I/O callbacks}}
\DoxyCodeLine{40 \textcolor{comment}{      -\/ SIMD acceleration on x86/x64 (SSE2) and ARM (NEON)}}
\DoxyCodeLine{41 \textcolor{comment}{}}
\DoxyCodeLine{42 \textcolor{comment}{   Full documentation under "{}DOCUMENTATION"{} below.}}
\DoxyCodeLine{43 \textcolor{comment}{}}
\DoxyCodeLine{44 \textcolor{comment}{}}
\DoxyCodeLine{45 \textcolor{comment}{   Revision 2.00 release notes:}}
\DoxyCodeLine{46 \textcolor{comment}{}}
\DoxyCodeLine{47 \textcolor{comment}{      -\/ Progressive JPEG is now supported.}}
\DoxyCodeLine{48 \textcolor{comment}{}}
\DoxyCodeLine{49 \textcolor{comment}{      -\/ PPM and PGM binary formats are now supported, thanks to Ken Miller.}}
\DoxyCodeLine{50 \textcolor{comment}{}}
\DoxyCodeLine{51 \textcolor{comment}{      -\/ x86 platforms now make use of SSE2 SIMD instructions for}}
\DoxyCodeLine{52 \textcolor{comment}{        JPEG decoding, and ARM platforms can use NEON SIMD if requested.}}
\DoxyCodeLine{53 \textcolor{comment}{        This work was done by Fabian "{}ryg"{} Giesen. SSE2 is used by}}
\DoxyCodeLine{54 \textcolor{comment}{        default, but NEON must be enabled explicitly; see docs.}}
\DoxyCodeLine{55 \textcolor{comment}{}}
\DoxyCodeLine{56 \textcolor{comment}{        With other JPEG optimizations included in this version, we see}}
\DoxyCodeLine{57 \textcolor{comment}{        2x speedup on a JPEG on an x86 machine, and a 1.5x speedup}}
\DoxyCodeLine{58 \textcolor{comment}{        on a JPEG on an ARM machine, relative to previous versions of this}}
\DoxyCodeLine{59 \textcolor{comment}{        library. The same results will not obtain for all JPGs and for all}}
\DoxyCodeLine{60 \textcolor{comment}{        x86/ARM machines. (Note that progressive JPEGs are significantly}}
\DoxyCodeLine{61 \textcolor{comment}{        slower to decode than regular JPEGs.) This doesn't mean that this}}
\DoxyCodeLine{62 \textcolor{comment}{        is the fastest JPEG decoder in the land; rather, it brings it}}
\DoxyCodeLine{63 \textcolor{comment}{        closer to parity with standard libraries. If you want the fastest}}
\DoxyCodeLine{64 \textcolor{comment}{        decode, look elsewhere. (See "{}Philosophy"{} section of docs below.)}}
\DoxyCodeLine{65 \textcolor{comment}{}}
\DoxyCodeLine{66 \textcolor{comment}{        See final bullet items below for more info on SIMD.}}
\DoxyCodeLine{67 \textcolor{comment}{}}
\DoxyCodeLine{68 \textcolor{comment}{      -\/ Added STBI\_MALLOC, STBI\_REALLOC, and STBI\_FREE macros for replacing}}
\DoxyCodeLine{69 \textcolor{comment}{        the memory allocator. Unlike other STBI libraries, these macros don't}}
\DoxyCodeLine{70 \textcolor{comment}{        support a context parameter, so if you need to pass a context in to}}
\DoxyCodeLine{71 \textcolor{comment}{        the allocator, you'll have to store it in a global or a thread-\/local}}
\DoxyCodeLine{72 \textcolor{comment}{        variable.}}
\DoxyCodeLine{73 \textcolor{comment}{}}
\DoxyCodeLine{74 \textcolor{comment}{      -\/ Split existing STBI\_NO\_HDR flag into two flags, STBI\_NO\_HDR and}}
\DoxyCodeLine{75 \textcolor{comment}{        STBI\_NO\_LINEAR.}}
\DoxyCodeLine{76 \textcolor{comment}{            STBI\_NO\_HDR:     suppress implementation of .hdr reader format}}
\DoxyCodeLine{77 \textcolor{comment}{            STBI\_NO\_LINEAR:  suppress high-\/dynamic-\/range light-\/linear float API}}
\DoxyCodeLine{78 \textcolor{comment}{}}
\DoxyCodeLine{79 \textcolor{comment}{      -\/ You can suppress implementation of any of the decoders to reduce}}
\DoxyCodeLine{80 \textcolor{comment}{        your code footprint by \#defining one or more of the following}}
\DoxyCodeLine{81 \textcolor{comment}{        symbols before creating the implementation.}}
\DoxyCodeLine{82 \textcolor{comment}{}}
\DoxyCodeLine{83 \textcolor{comment}{            STBI\_NO\_JPEG}}
\DoxyCodeLine{84 \textcolor{comment}{            STBI\_NO\_PNG}}
\DoxyCodeLine{85 \textcolor{comment}{            STBI\_NO\_BMP}}
\DoxyCodeLine{86 \textcolor{comment}{            STBI\_NO\_PSD}}
\DoxyCodeLine{87 \textcolor{comment}{            STBI\_NO\_TGA}}
\DoxyCodeLine{88 \textcolor{comment}{            STBI\_NO\_GIF}}
\DoxyCodeLine{89 \textcolor{comment}{            STBI\_NO\_HDR}}
\DoxyCodeLine{90 \textcolor{comment}{            STBI\_NO\_PIC}}
\DoxyCodeLine{91 \textcolor{comment}{            STBI\_NO\_PNM   (.ppm and .pgm)}}
\DoxyCodeLine{92 \textcolor{comment}{}}
\DoxyCodeLine{93 \textcolor{comment}{      -\/ You can request *only* certain decoders and suppress all other ones}}
\DoxyCodeLine{94 \textcolor{comment}{        (this will be more forward-\/compatible, as addition of new decoders}}
\DoxyCodeLine{95 \textcolor{comment}{        doesn't require you to disable them explicitly):}}
\DoxyCodeLine{96 \textcolor{comment}{}}
\DoxyCodeLine{97 \textcolor{comment}{            STBI\_ONLY\_JPEG}}
\DoxyCodeLine{98 \textcolor{comment}{            STBI\_ONLY\_PNG}}
\DoxyCodeLine{99 \textcolor{comment}{            STBI\_ONLY\_BMP}}
\DoxyCodeLine{100 \textcolor{comment}{            STBI\_ONLY\_PSD}}
\DoxyCodeLine{101 \textcolor{comment}{            STBI\_ONLY\_TGA}}
\DoxyCodeLine{102 \textcolor{comment}{            STBI\_ONLY\_GIF}}
\DoxyCodeLine{103 \textcolor{comment}{            STBI\_ONLY\_HDR}}
\DoxyCodeLine{104 \textcolor{comment}{            STBI\_ONLY\_PIC}}
\DoxyCodeLine{105 \textcolor{comment}{            STBI\_ONLY\_PNM   (.ppm and .pgm)}}
\DoxyCodeLine{106 \textcolor{comment}{}}
\DoxyCodeLine{107 \textcolor{comment}{         Note that you can define multiples of these, and you will get all}}
\DoxyCodeLine{108 \textcolor{comment}{         of them ("{}only x"{} and "{}only y"{} is interpreted to mean "{}only x\&y"{}).}}
\DoxyCodeLine{109 \textcolor{comment}{}}
\DoxyCodeLine{110 \textcolor{comment}{       -\/ If you use STBI\_NO\_PNG (or \_ONLY\_ without PNG), and you still}}
\DoxyCodeLine{111 \textcolor{comment}{         want the zlib decoder to be available, \#define STBI\_SUPPORT\_ZLIB}}
\DoxyCodeLine{112 \textcolor{comment}{}}
\DoxyCodeLine{113 \textcolor{comment}{      -\/ Compilation of all SIMD code can be suppressed with}}
\DoxyCodeLine{114 \textcolor{comment}{            \#define STBI\_NO\_SIMD}}
\DoxyCodeLine{115 \textcolor{comment}{        It should not be necessary to disable SIMD unless you have issues}}
\DoxyCodeLine{116 \textcolor{comment}{        compiling (e.g. using an x86 compiler which doesn't support SSE}}
\DoxyCodeLine{117 \textcolor{comment}{        intrinsics or that doesn't support the method used to detect}}
\DoxyCodeLine{118 \textcolor{comment}{        SSE2 support at run-\/time), and even those can be reported as}}
\DoxyCodeLine{119 \textcolor{comment}{        bugs so I can refine the built-\/in compile-\/time checking to be}}
\DoxyCodeLine{120 \textcolor{comment}{        smarter.}}
\DoxyCodeLine{121 \textcolor{comment}{}}
\DoxyCodeLine{122 \textcolor{comment}{      -\/ The old STBI\_SIMD system which allowed installing a user-\/defined}}
\DoxyCodeLine{123 \textcolor{comment}{        IDCT etc. has been removed. If you need this, don't upgrade. My}}
\DoxyCodeLine{124 \textcolor{comment}{        assumption is that almost nobody was doing this, and those who}}
\DoxyCodeLine{125 \textcolor{comment}{        were will find the built-\/in SIMD more satisfactory anyway.}}
\DoxyCodeLine{126 \textcolor{comment}{}}
\DoxyCodeLine{127 \textcolor{comment}{      -\/ RGB values computed for JPEG images are slightly different from}}
\DoxyCodeLine{128 \textcolor{comment}{        previous versions of stb\_image. (This is due to using less}}
\DoxyCodeLine{129 \textcolor{comment}{        integer precision in SIMD.) The C code has been adjusted so}}
\DoxyCodeLine{130 \textcolor{comment}{        that the same RGB values will be computed regardless of whether}}
\DoxyCodeLine{131 \textcolor{comment}{        SIMD support is available, so your app should always produce}}
\DoxyCodeLine{132 \textcolor{comment}{        consistent results. But these results are slightly different from}}
\DoxyCodeLine{133 \textcolor{comment}{        previous versions. (Specifically, about 3\% of available YCbCr values}}
\DoxyCodeLine{134 \textcolor{comment}{        will compute different RGB results from pre-\/1.49 versions by +-\/1;}}
\DoxyCodeLine{135 \textcolor{comment}{        most of the deviating values are one smaller in the G channel.)}}
\DoxyCodeLine{136 \textcolor{comment}{}}
\DoxyCodeLine{137 \textcolor{comment}{      -\/ If you must produce consistent results with previous versions of}}
\DoxyCodeLine{138 \textcolor{comment}{        stb\_image, \#define STBI\_JPEG\_OLD and you will get the same results}}
\DoxyCodeLine{139 \textcolor{comment}{        you used to; however, you will not get the SIMD speedups for}}
\DoxyCodeLine{140 \textcolor{comment}{        the YCbCr-\/to-\/RGB conversion step (although you should still see}}
\DoxyCodeLine{141 \textcolor{comment}{        significant JPEG speedup from the other changes).}}
\DoxyCodeLine{142 \textcolor{comment}{}}
\DoxyCodeLine{143 \textcolor{comment}{        Please note that STBI\_JPEG\_OLD is a temporary feature; it will be}}
\DoxyCodeLine{144 \textcolor{comment}{        removed in future versions of the library. It is only intended for}}
\DoxyCodeLine{145 \textcolor{comment}{        near-\/term back-\/compatibility use.}}
\DoxyCodeLine{146 \textcolor{comment}{}}
\DoxyCodeLine{147 \textcolor{comment}{}}
\DoxyCodeLine{148 \textcolor{comment}{   Latest revision history:}}
\DoxyCodeLine{149 \textcolor{comment}{      2.08  (2015-\/09-\/13) fix to 2.07 cleanup, reading RGB PSD as RGBA}}
\DoxyCodeLine{150 \textcolor{comment}{      2.07  (2015-\/09-\/13) partial animated GIF support}}
\DoxyCodeLine{151 \textcolor{comment}{                         limited 16-\/bit PSD support}}
\DoxyCodeLine{152 \textcolor{comment}{                         minor bugs, code cleanup, and compiler warnings}}
\DoxyCodeLine{153 \textcolor{comment}{      2.06  (2015-\/04-\/19) fix bug where PSD returns wrong '*comp' value}}
\DoxyCodeLine{154 \textcolor{comment}{      2.05  (2015-\/04-\/19) fix bug in progressive JPEG handling, fix warning}}
\DoxyCodeLine{155 \textcolor{comment}{      2.04  (2015-\/04-\/15) try to re-\/enable SIMD on MinGW 64-\/bit}}
\DoxyCodeLine{156 \textcolor{comment}{      2.03  (2015-\/04-\/12) additional corruption checking}}
\DoxyCodeLine{157 \textcolor{comment}{                         stbi\_set\_flip\_vertically\_on\_load}}
\DoxyCodeLine{158 \textcolor{comment}{                         fix NEON support; fix mingw support}}
\DoxyCodeLine{159 \textcolor{comment}{      2.02  (2015-\/01-\/19) fix incorrect assert, fix warning}}
\DoxyCodeLine{160 \textcolor{comment}{      2.01  (2015-\/01-\/17) fix various warnings}}
\DoxyCodeLine{161 \textcolor{comment}{      2.00b (2014-\/12-\/25) fix STBI\_MALLOC in progressive JPEG}}
\DoxyCodeLine{162 \textcolor{comment}{      2.00  (2014-\/12-\/25) optimize JPEG, including x86 SSE2 \& ARM NEON SIMD}}
\DoxyCodeLine{163 \textcolor{comment}{                         progressive JPEG}}
\DoxyCodeLine{164 \textcolor{comment}{                         PGM/PPM support}}
\DoxyCodeLine{165 \textcolor{comment}{                         STBI\_MALLOC,STBI\_REALLOC,STBI\_FREE}}
\DoxyCodeLine{166 \textcolor{comment}{                         STBI\_NO\_*, STBI\_ONLY\_*}}
\DoxyCodeLine{167 \textcolor{comment}{                         GIF bugfix}}
\DoxyCodeLine{168 \textcolor{comment}{      1.48  (2014-\/12-\/14) fix incorrectly-\/named assert()}}
\DoxyCodeLine{169 \textcolor{comment}{      1.47  (2014-\/12-\/14) 1/2/4-\/bit PNG support (both grayscale and paletted)}}
\DoxyCodeLine{170 \textcolor{comment}{                         optimize PNG}}
\DoxyCodeLine{171 \textcolor{comment}{                         fix bug in interlaced PNG with user-\/specified channel count}}
\DoxyCodeLine{172 \textcolor{comment}{}}
\DoxyCodeLine{173 \textcolor{comment}{   See end of file for full revision history.}}
\DoxyCodeLine{174 \textcolor{comment}{}}
\DoxyCodeLine{175 \textcolor{comment}{}}
\DoxyCodeLine{176 \textcolor{comment}{ ============================    Contributors    =========================}}
\DoxyCodeLine{177 \textcolor{comment}{}}
\DoxyCodeLine{178 \textcolor{comment}{ Image formats                                Bug fixes \& warning fixes}}
\DoxyCodeLine{179 \textcolor{comment}{    Sean Barrett (jpeg, png, bmp)                Marc LeBlanc}}
\DoxyCodeLine{180 \textcolor{comment}{    Nicolas Schulz (hdr, psd)                    Christpher Lloyd}}
\DoxyCodeLine{181 \textcolor{comment}{    Jonathan Dummer (tga)                        Dave Moore}}
\DoxyCodeLine{182 \textcolor{comment}{    Jean-\/Marc Lienher (gif)                      Won Chun}}
\DoxyCodeLine{183 \textcolor{comment}{    Tom Seddon (pic)                             the Horde3D community}}
\DoxyCodeLine{184 \textcolor{comment}{    Thatcher Ulrich (psd)                        Janez Zemva}}
\DoxyCodeLine{185 \textcolor{comment}{    Ken Miller (pgm, ppm)                        Jonathan Blow}}
\DoxyCodeLine{186 \textcolor{comment}{    urraka@github (animated gif)                 Laurent Gomila}}
\DoxyCodeLine{187 \textcolor{comment}{                                                 Aruelien Pocheville}}
\DoxyCodeLine{188 \textcolor{comment}{                                                 Ryamond Barbiero}}
\DoxyCodeLine{189 \textcolor{comment}{                                                 David Woo}}
\DoxyCodeLine{190 \textcolor{comment}{ Extensions, features                            Martin Golini}}
\DoxyCodeLine{191 \textcolor{comment}{    Jetro Lauha (stbi\_info)                      Roy Eltham}}
\DoxyCodeLine{192 \textcolor{comment}{    Martin "{}SpartanJ"{} Golini (stbi\_info)         Luke Graham}}
\DoxyCodeLine{193 \textcolor{comment}{    James "{}moose2000"{} Brown (iPhone PNG)         Thomas Ruf}}
\DoxyCodeLine{194 \textcolor{comment}{    Ben "{}Disch"{} Wenger (io callbacks)            John Bartholomew}}
\DoxyCodeLine{195 \textcolor{comment}{    Omar Cornut (1/2/4-\/bit PNG)                  Ken Hamada}}
\DoxyCodeLine{196 \textcolor{comment}{    Nicolas Guillemot (vertical flip)            Cort Stratton}}
\DoxyCodeLine{197 \textcolor{comment}{    Richard Mitton (16-\/bit PSD)                  Blazej Dariusz Roszkowski}}
\DoxyCodeLine{198 \textcolor{comment}{                                                 Thibault Reuille}}
\DoxyCodeLine{199 \textcolor{comment}{                                                 Paul Du Bois}}
\DoxyCodeLine{200 \textcolor{comment}{                                                 Guillaume George}}
\DoxyCodeLine{201 \textcolor{comment}{                                                 Jerry Jansson}}
\DoxyCodeLine{202 \textcolor{comment}{                                                 Hayaki Saito}}
\DoxyCodeLine{203 \textcolor{comment}{                                                 Johan Duparc}}
\DoxyCodeLine{204 \textcolor{comment}{                                                 Ronny Chevalier}}
\DoxyCodeLine{205 \textcolor{comment}{ Optimizations \& bugfixes                        Michal Cichon}}
\DoxyCodeLine{206 \textcolor{comment}{    Fabian "{}ryg"{} Giesen                          Tero Hanninen}}
\DoxyCodeLine{207 \textcolor{comment}{    Arseny Kapoulkine                            Sergio Gonzalez}}
\DoxyCodeLine{208 \textcolor{comment}{                                                 Cass Everitt}}
\DoxyCodeLine{209 \textcolor{comment}{                                                 Engin Manap}}
\DoxyCodeLine{210 \textcolor{comment}{  If your name should be here but                Martins Mozeiko}}
\DoxyCodeLine{211 \textcolor{comment}{  isn't, let Sean know.                          Joseph Thomson}}
\DoxyCodeLine{212 \textcolor{comment}{                                                 Phil Jordan}}
\DoxyCodeLine{213 \textcolor{comment}{                                                 Nathan Reed}}
\DoxyCodeLine{214 \textcolor{comment}{                                                 Michaelangel007@github}}
\DoxyCodeLine{215 \textcolor{comment}{                                                 Nick Verigakis}}
\DoxyCodeLine{216 \textcolor{comment}{}}
\DoxyCodeLine{217 \textcolor{comment}{LICENSE}}
\DoxyCodeLine{218 \textcolor{comment}{}}
\DoxyCodeLine{219 \textcolor{comment}{This software is in the public domain. Where that dedication is not}}
\DoxyCodeLine{220 \textcolor{comment}{recognized, you are granted a perpetual, irrevocable license to copy,}}
\DoxyCodeLine{221 \textcolor{comment}{distribute, and modify this file as you see fit.}}
\DoxyCodeLine{222 \textcolor{comment}{}}
\DoxyCodeLine{223 \textcolor{comment}{*/}}
\DoxyCodeLine{224 }
\DoxyCodeLine{225 \textcolor{preprocessor}{\#ifndef STBI\_INCLUDE\_STB\_IMAGE\_H}}
\DoxyCodeLine{226 \textcolor{preprocessor}{\#define STBI\_INCLUDE\_STB\_IMAGE\_H}}
\DoxyCodeLine{227 }
\DoxyCodeLine{228 \textcolor{comment}{// DOCUMENTATION}}
\DoxyCodeLine{229 \textcolor{comment}{//}}
\DoxyCodeLine{230 \textcolor{comment}{// Limitations:}}
\DoxyCodeLine{231 \textcolor{comment}{//    -\/ no 16-\/bit-\/per-\/channel PNG}}
\DoxyCodeLine{232 \textcolor{comment}{//    -\/ no 12-\/bit-\/per-\/channel JPEG}}
\DoxyCodeLine{233 \textcolor{comment}{//    -\/ no JPEGs with arithmetic coding}}
\DoxyCodeLine{234 \textcolor{comment}{//    -\/ no 1-\/bit BMP}}
\DoxyCodeLine{235 \textcolor{comment}{//    -\/ GIF always returns *comp=4}}
\DoxyCodeLine{236 \textcolor{comment}{//}}
\DoxyCodeLine{237 \textcolor{comment}{// Basic usage (see HDR discussion below for HDR usage):}}
\DoxyCodeLine{238 \textcolor{comment}{//    int x,y,n;}}
\DoxyCodeLine{239 \textcolor{comment}{//    unsigned char *data = stbi\_load(filename, \&x, \&y, \&n, 0);}}
\DoxyCodeLine{240 \textcolor{comment}{//    // ... process data if not NULL ...}}
\DoxyCodeLine{241 \textcolor{comment}{//    // ... x = width, y = height, n = \# 8-\/bit components per pixel ...}}
\DoxyCodeLine{242 \textcolor{comment}{//    // ... replace '0' with '1'..'4' to force that many components per pixel}}
\DoxyCodeLine{243 \textcolor{comment}{//    // ... but 'n' will always be the number that it would have been if you said 0}}
\DoxyCodeLine{244 \textcolor{comment}{//    stbi\_image\_free(data)}}
\DoxyCodeLine{245 \textcolor{comment}{//}}
\DoxyCodeLine{246 \textcolor{comment}{// Standard parameters:}}
\DoxyCodeLine{247 \textcolor{comment}{//    int *x       -\/-\/ outputs image width in pixels}}
\DoxyCodeLine{248 \textcolor{comment}{//    int *y       -\/-\/ outputs image height in pixels}}
\DoxyCodeLine{249 \textcolor{comment}{//    int *comp    -\/-\/ outputs \# of image components in image file}}
\DoxyCodeLine{250 \textcolor{comment}{//    int req\_comp -\/-\/ if non-\/zero, \# of image components requested in result}}
\DoxyCodeLine{251 \textcolor{comment}{//}}
\DoxyCodeLine{252 \textcolor{comment}{// The return value from an image loader is an 'unsigned char *' which points}}
\DoxyCodeLine{253 \textcolor{comment}{// to the pixel data, or NULL on an allocation failure or if the image is}}
\DoxyCodeLine{254 \textcolor{comment}{// corrupt or invalid. The pixel data consists of *y scanlines of *x pixels,}}
\DoxyCodeLine{255 \textcolor{comment}{// with each pixel consisting of N interleaved 8-\/bit components; the first}}
\DoxyCodeLine{256 \textcolor{comment}{// pixel pointed to is top-\/left-\/most in the image. There is no padding between}}
\DoxyCodeLine{257 \textcolor{comment}{// image scanlines or between pixels, regardless of format. The number of}}
\DoxyCodeLine{258 \textcolor{comment}{// components N is 'req\_comp' if req\_comp is non-\/zero, or *comp otherwise.}}
\DoxyCodeLine{259 \textcolor{comment}{// If req\_comp is non-\/zero, *comp has the number of components that \_would\_}}
\DoxyCodeLine{260 \textcolor{comment}{// have been output otherwise. E.g. if you set req\_comp to 4, you will always}}
\DoxyCodeLine{261 \textcolor{comment}{// get RGBA output, but you can check *comp to see if it's trivially opaque}}
\DoxyCodeLine{262 \textcolor{comment}{// because e.g. there were only 3 channels in the source image.}}
\DoxyCodeLine{263 \textcolor{comment}{//}}
\DoxyCodeLine{264 \textcolor{comment}{// An output image with N components has the following components interleaved}}
\DoxyCodeLine{265 \textcolor{comment}{// in this order in each pixel:}}
\DoxyCodeLine{266 \textcolor{comment}{//}}
\DoxyCodeLine{267 \textcolor{comment}{//     N=\#comp     components}}
\DoxyCodeLine{268 \textcolor{comment}{//       1           grey}}
\DoxyCodeLine{269 \textcolor{comment}{//       2           grey, alpha}}
\DoxyCodeLine{270 \textcolor{comment}{//       3           red, green, blue}}
\DoxyCodeLine{271 \textcolor{comment}{//       4           red, green, blue, alpha}}
\DoxyCodeLine{272 \textcolor{comment}{//}}
\DoxyCodeLine{273 \textcolor{comment}{// If image loading fails for any reason, the return value will be NULL,}}
\DoxyCodeLine{274 \textcolor{comment}{// and *x, *y, *comp will be unchanged. The function stbi\_failure\_reason()}}
\DoxyCodeLine{275 \textcolor{comment}{// can be queried for an extremely brief, end-\/user unfriendly explanation}}
\DoxyCodeLine{276 \textcolor{comment}{// of why the load failed. Define STBI\_NO\_FAILURE\_STRINGS to avoid}}
\DoxyCodeLine{277 \textcolor{comment}{// compiling these strings at all, and STBI\_FAILURE\_USERMSG to get slightly}}
\DoxyCodeLine{278 \textcolor{comment}{// more user-\/friendly ones.}}
\DoxyCodeLine{279 \textcolor{comment}{//}}
\DoxyCodeLine{280 \textcolor{comment}{// Paletted PNG, BMP, GIF, and PIC images are automatically depalettized.}}
\DoxyCodeLine{281 \textcolor{comment}{//}}
\DoxyCodeLine{282 \textcolor{comment}{// ===========================================================================}}
\DoxyCodeLine{283 \textcolor{comment}{//}}
\DoxyCodeLine{284 \textcolor{comment}{// Philosophy}}
\DoxyCodeLine{285 \textcolor{comment}{//}}
\DoxyCodeLine{286 \textcolor{comment}{// stb libraries are designed with the following priorities:}}
\DoxyCodeLine{287 \textcolor{comment}{//}}
\DoxyCodeLine{288 \textcolor{comment}{//    1. easy to use}}
\DoxyCodeLine{289 \textcolor{comment}{//    2. easy to maintain}}
\DoxyCodeLine{290 \textcolor{comment}{//    3. good performance}}
\DoxyCodeLine{291 \textcolor{comment}{//}}
\DoxyCodeLine{292 \textcolor{comment}{// Sometimes I let "{}good performance"{} creep up in priority over "{}easy to maintain"{},}}
\DoxyCodeLine{293 \textcolor{comment}{// and for best performance I may provide less-\/easy-\/to-\/use APIs that give higher}}
\DoxyCodeLine{294 \textcolor{comment}{// performance, in addition to the easy to use ones. Nevertheless, it's important}}
\DoxyCodeLine{295 \textcolor{comment}{// to keep in mind that from the standpoint of you, a client of this library,}}
\DoxyCodeLine{296 \textcolor{comment}{// all you care about is \#1 and \#3, and stb libraries do not emphasize \#3 above all.}}
\DoxyCodeLine{297 \textcolor{comment}{//}}
\DoxyCodeLine{298 \textcolor{comment}{// Some secondary priorities arise directly from the first two, some of which}}
\DoxyCodeLine{299 \textcolor{comment}{// make more explicit reasons why performance can't be emphasized.}}
\DoxyCodeLine{300 \textcolor{comment}{//}}
\DoxyCodeLine{301 \textcolor{comment}{//    -\/ Portable ("{}ease of use"{})}}
\DoxyCodeLine{302 \textcolor{comment}{//    -\/ Small footprint ("{}easy to maintain"{})}}
\DoxyCodeLine{303 \textcolor{comment}{//    -\/ No dependencies ("{}ease of use"{})}}
\DoxyCodeLine{304 \textcolor{comment}{//}}
\DoxyCodeLine{305 \textcolor{comment}{// ===========================================================================}}
\DoxyCodeLine{306 \textcolor{comment}{//}}
\DoxyCodeLine{307 \textcolor{comment}{// I/O callbacks}}
\DoxyCodeLine{308 \textcolor{comment}{//}}
\DoxyCodeLine{309 \textcolor{comment}{// I/O callbacks allow you to read from arbitrary sources, like packaged}}
\DoxyCodeLine{310 \textcolor{comment}{// files or some other source. Data read from callbacks are processed}}
\DoxyCodeLine{311 \textcolor{comment}{// through a small internal buffer (currently 128 bytes) to try to reduce}}
\DoxyCodeLine{312 \textcolor{comment}{// overhead.}}
\DoxyCodeLine{313 \textcolor{comment}{//}}
\DoxyCodeLine{314 \textcolor{comment}{// The three functions you must define are "{}read"{} (reads some bytes of data),}}
\DoxyCodeLine{315 \textcolor{comment}{// "{}skip"{} (skips some bytes of data), "{}eof"{} (reports if the stream is at the end).}}
\DoxyCodeLine{316 \textcolor{comment}{//}}
\DoxyCodeLine{317 \textcolor{comment}{// ===========================================================================}}
\DoxyCodeLine{318 \textcolor{comment}{//}}
\DoxyCodeLine{319 \textcolor{comment}{// SIMD support}}
\DoxyCodeLine{320 \textcolor{comment}{//}}
\DoxyCodeLine{321 \textcolor{comment}{// The JPEG decoder will try to automatically use SIMD kernels on x86 when}}
\DoxyCodeLine{322 \textcolor{comment}{// supported by the compiler. For ARM Neon support, you must explicitly}}
\DoxyCodeLine{323 \textcolor{comment}{// request it.}}
\DoxyCodeLine{324 \textcolor{comment}{//}}
\DoxyCodeLine{325 \textcolor{comment}{// (The old do-\/it-\/yourself SIMD API is no longer supported in the current}}
\DoxyCodeLine{326 \textcolor{comment}{// code.)}}
\DoxyCodeLine{327 \textcolor{comment}{//}}
\DoxyCodeLine{328 \textcolor{comment}{// On x86, SSE2 will automatically be used when available based on a run-\/time}}
\DoxyCodeLine{329 \textcolor{comment}{// test; if not, the generic C versions are used as a fall-\/back. On ARM targets,}}
\DoxyCodeLine{330 \textcolor{comment}{// the typical path is to have separate builds for NEON and non-\/NEON devices}}
\DoxyCodeLine{331 \textcolor{comment}{// (at least this is true for iOS and Android). Therefore, the NEON support is}}
\DoxyCodeLine{332 \textcolor{comment}{// toggled by a build flag: define STBI\_NEON to get NEON loops.}}
\DoxyCodeLine{333 \textcolor{comment}{//}}
\DoxyCodeLine{334 \textcolor{comment}{// The output of the JPEG decoder is slightly different from versions where}}
\DoxyCodeLine{335 \textcolor{comment}{// SIMD support was introduced (that is, for versions before 1.49). The}}
\DoxyCodeLine{336 \textcolor{comment}{// difference is only +-\/1 in the 8-\/bit RGB channels, and only on a small}}
\DoxyCodeLine{337 \textcolor{comment}{// fraction of pixels. You can force the pre-\/1.49 behavior by defining}}
\DoxyCodeLine{338 \textcolor{comment}{// STBI\_JPEG\_OLD, but this will disable some of the SIMD decoding path}}
\DoxyCodeLine{339 \textcolor{comment}{// and hence cost some performance.}}
\DoxyCodeLine{340 \textcolor{comment}{//}}
\DoxyCodeLine{341 \textcolor{comment}{// If for some reason you do not want to use any of SIMD code, or if}}
\DoxyCodeLine{342 \textcolor{comment}{// you have issues compiling it, you can disable it entirely by}}
\DoxyCodeLine{343 \textcolor{comment}{// defining STBI\_NO\_SIMD.}}
\DoxyCodeLine{344 \textcolor{comment}{//}}
\DoxyCodeLine{345 \textcolor{comment}{// ===========================================================================}}
\DoxyCodeLine{346 \textcolor{comment}{//}}
\DoxyCodeLine{347 \textcolor{comment}{// HDR image support   (disable by defining STBI\_NO\_HDR)}}
\DoxyCodeLine{348 \textcolor{comment}{//}}
\DoxyCodeLine{349 \textcolor{comment}{// stb\_image now supports loading HDR images in general, and currently}}
\DoxyCodeLine{350 \textcolor{comment}{// the Radiance .HDR file format, although the support is provided}}
\DoxyCodeLine{351 \textcolor{comment}{// generically. You can still load any file through the existing interface;}}
\DoxyCodeLine{352 \textcolor{comment}{// if you attempt to load an HDR file, it will be automatically remapped to}}
\DoxyCodeLine{353 \textcolor{comment}{// LDR, assuming gamma 2.2 and an arbitrary scale factor defaulting to 1;}}
\DoxyCodeLine{354 \textcolor{comment}{// both of these constants can be reconfigured through this interface:}}
\DoxyCodeLine{355 \textcolor{comment}{//}}
\DoxyCodeLine{356 \textcolor{comment}{//     stbi\_hdr\_to\_ldr\_gamma(2.2f);}}
\DoxyCodeLine{357 \textcolor{comment}{//     stbi\_hdr\_to\_ldr\_scale(1.0f);}}
\DoxyCodeLine{358 \textcolor{comment}{//}}
\DoxyCodeLine{359 \textcolor{comment}{// (note, do not use \_inverse\_ constants; stbi\_image will invert them}}
\DoxyCodeLine{360 \textcolor{comment}{// appropriately).}}
\DoxyCodeLine{361 \textcolor{comment}{//}}
\DoxyCodeLine{362 \textcolor{comment}{// Additionally, there is a new, parallel interface for loading files as}}
\DoxyCodeLine{363 \textcolor{comment}{// (linear) floats to preserve the full dynamic range:}}
\DoxyCodeLine{364 \textcolor{comment}{//}}
\DoxyCodeLine{365 \textcolor{comment}{//    float *data = stbi\_loadf(filename, \&x, \&y, \&n, 0);}}
\DoxyCodeLine{366 \textcolor{comment}{//}}
\DoxyCodeLine{367 \textcolor{comment}{// If you load LDR images through this interface, those images will}}
\DoxyCodeLine{368 \textcolor{comment}{// be promoted to floating point values, run through the inverse of}}
\DoxyCodeLine{369 \textcolor{comment}{// constants corresponding to the above:}}
\DoxyCodeLine{370 \textcolor{comment}{//}}
\DoxyCodeLine{371 \textcolor{comment}{//     stbi\_ldr\_to\_hdr\_scale(1.0f);}}
\DoxyCodeLine{372 \textcolor{comment}{//     stbi\_ldr\_to\_hdr\_gamma(2.2f);}}
\DoxyCodeLine{373 \textcolor{comment}{//}}
\DoxyCodeLine{374 \textcolor{comment}{// Finally, given a filename (or an open file or memory block-\/-\/see header}}
\DoxyCodeLine{375 \textcolor{comment}{// file for details) containing image data, you can query for the "{}most}}
\DoxyCodeLine{376 \textcolor{comment}{// appropriate"{} interface to use (that is, whether the image is HDR or}}
\DoxyCodeLine{377 \textcolor{comment}{// not), using:}}
\DoxyCodeLine{378 \textcolor{comment}{//}}
\DoxyCodeLine{379 \textcolor{comment}{//     stbi\_is\_hdr(char *filename);}}
\DoxyCodeLine{380 \textcolor{comment}{//}}
\DoxyCodeLine{381 \textcolor{comment}{// ===========================================================================}}
\DoxyCodeLine{382 \textcolor{comment}{//}}
\DoxyCodeLine{383 \textcolor{comment}{// iPhone PNG support:}}
\DoxyCodeLine{384 \textcolor{comment}{//}}
\DoxyCodeLine{385 \textcolor{comment}{// By default we convert iphone-\/formatted PNGs back to RGB, even though}}
\DoxyCodeLine{386 \textcolor{comment}{// they are internally encoded differently. You can disable this conversion}}
\DoxyCodeLine{387 \textcolor{comment}{// by by calling stbi\_convert\_iphone\_png\_to\_rgb(0), in which case}}
\DoxyCodeLine{388 \textcolor{comment}{// you will always just get the native iphone "{}format"{} through (which}}
\DoxyCodeLine{389 \textcolor{comment}{// is BGR stored in RGB).}}
\DoxyCodeLine{390 \textcolor{comment}{//}}
\DoxyCodeLine{391 \textcolor{comment}{// Call stbi\_set\_unpremultiply\_on\_load(1) as well to force a divide per}}
\DoxyCodeLine{392 \textcolor{comment}{// pixel to remove any premultiplied alpha *only* if the image file explicitly}}
\DoxyCodeLine{393 \textcolor{comment}{// says there's premultiplied data (currently only happens in iPhone images,}}
\DoxyCodeLine{394 \textcolor{comment}{// and only if iPhone convert-\/to-\/rgb processing is on).}}
\DoxyCodeLine{395 \textcolor{comment}{//}}
\DoxyCodeLine{396 }
\DoxyCodeLine{397 }
\DoxyCodeLine{398 \textcolor{preprocessor}{\#ifndef STBI\_NO\_STDIO}}
\DoxyCodeLine{399 \textcolor{preprocessor}{\#include <stdio.h>}}
\DoxyCodeLine{400 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STBI\_NO\_STDIO}}
\DoxyCodeLine{401 }
\DoxyCodeLine{402 \textcolor{preprocessor}{\#define STBI\_VERSION 1}}
\DoxyCodeLine{403 }
\DoxyCodeLine{404 \textcolor{keyword}{enum}}
\DoxyCodeLine{405 \{}
\DoxyCodeLine{406    \mbox{\hyperlink{stb__image_8h_abed82baf7f470b522273a3e37c24c600a0177ac2c5002f4f251bb766d41752029}{STBI\_default}} = 0, \textcolor{comment}{// only used for req\_comp}}
\DoxyCodeLine{407 }
\DoxyCodeLine{408    \mbox{\hyperlink{stb__image_8h_abed82baf7f470b522273a3e37c24c600ad1eb95ca1fa7706bf732bf35a0ed40aa}{STBI\_grey}}       = 1,}
\DoxyCodeLine{409    \mbox{\hyperlink{stb__image_8h_abed82baf7f470b522273a3e37c24c600af5829d16d4cca6077465c5abd346e2f8}{STBI\_grey\_alpha}} = 2,}
\DoxyCodeLine{410    \mbox{\hyperlink{stb__image_8h_abed82baf7f470b522273a3e37c24c600aa59123e5d0af25f9b1539f5cf1facddf}{STBI\_rgb}}        = 3,}
\DoxyCodeLine{411    \mbox{\hyperlink{stb__image_8h_abed82baf7f470b522273a3e37c24c600aa7b1af0c9f0310c3ada2aa29a32de293}{STBI\_rgb\_alpha}}  = 4}
\DoxyCodeLine{412 \};}
\DoxyCodeLine{413 }
\DoxyCodeLine{414 \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}};}
\DoxyCodeLine{415 }
\DoxyCodeLine{416 \textcolor{preprocessor}{\#ifdef \_\_cplusplus}}
\DoxyCodeLine{417 \textcolor{keyword}{extern} \textcolor{stringliteral}{"{}C"{}} \{}
\DoxyCodeLine{418 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{419 }
\DoxyCodeLine{420 \textcolor{preprocessor}{\#ifdef STB\_IMAGE\_STATIC}}
\DoxyCodeLine{421 \textcolor{preprocessor}{\#define STBIDEF static}}
\DoxyCodeLine{422 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{423 \textcolor{preprocessor}{\#define STBIDEF extern}}
\DoxyCodeLine{424 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{425 }
\DoxyCodeLine{427 \textcolor{comment}{//}}
\DoxyCodeLine{428 \textcolor{comment}{// PRIMARY API -\/ works on images of any type}}
\DoxyCodeLine{429 \textcolor{comment}{//}}
\DoxyCodeLine{430 }
\DoxyCodeLine{431 \textcolor{comment}{//}}
\DoxyCodeLine{432 \textcolor{comment}{// load image by filename, open file, or memory buffer}}
\DoxyCodeLine{433 \textcolor{comment}{//}}
\DoxyCodeLine{434 }
\DoxyCodeLine{435 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{436 \{}
\DoxyCodeLine{437    int      (*read)  (\textcolor{keywordtype}{void} *user,\textcolor{keywordtype}{char} *data,\textcolor{keywordtype}{int} size);   \textcolor{comment}{// fill 'data' with 'size' bytes.  return number of bytes actually read}}
\DoxyCodeLine{438    void     (*skip)  (\textcolor{keywordtype}{void} *user,\textcolor{keywordtype}{int} n);                 \textcolor{comment}{// skip the next 'n' bytes, or 'unget' the last -\/n bytes if negative}}
\DoxyCodeLine{439    int      (*eof)   (\textcolor{keywordtype}{void} *user);                       \textcolor{comment}{// returns nonzero if we are at end of file/data}}
\DoxyCodeLine{440 \} \mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}};}
\DoxyCodeLine{441 }
\DoxyCodeLine{442 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{stb__image_8h_a88d971acf5946e6196d56ef235245fb5}{stbi\_load}}               (\textcolor{keywordtype}{char}              \textcolor{keyword}{const} *filename,           \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp);}
\DoxyCodeLine{443 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{stb__image_8h_a9f51ff5c8b32ef0777153ac699dd5849}{stbi\_load\_from\_memory}}   (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}           \textcolor{keyword}{const} *buffer, \textcolor{keywordtype}{int} len   , \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp);}
\DoxyCodeLine{444 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{stb__image_8h_a2a731c44bec9f217beea03a44896b47c}{stbi\_load\_from\_callbacks}}(\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} \textcolor{keyword}{const} *clbk  , \textcolor{keywordtype}{void} *user, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp);}
\DoxyCodeLine{445 }
\DoxyCodeLine{446 \textcolor{preprocessor}{\#ifndef STBI\_NO\_STDIO}}
\DoxyCodeLine{447 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{stb__image_8h_ae90dc4d380193fd2583f48c1b2fd8748}{stbi\_load\_from\_file}}  (FILE *f,                  \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp);}
\DoxyCodeLine{448 \textcolor{comment}{// for stbi\_load\_from\_file, file pointer is left pointing immediately after image}}
\DoxyCodeLine{449 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{450 }
\DoxyCodeLine{451 \textcolor{preprocessor}{\#ifndef STBI\_NO\_LINEAR}}
\DoxyCodeLine{452    \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{float} *\mbox{\hyperlink{stb__image_8h_a72bbd253d4ce89eeced48ef1f3630526}{stbi\_loadf}}                 (\textcolor{keywordtype}{char} \textcolor{keyword}{const} *filename,           \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp);}
\DoxyCodeLine{453    \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{float} *\mbox{\hyperlink{stb__image_8h_a80a2d6390909ac95e792a1daf2dcfef7}{stbi\_loadf\_from\_memory}}     (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \textcolor{keyword}{const} *buffer, \textcolor{keywordtype}{int} len, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp);}
\DoxyCodeLine{454    \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{float} *\mbox{\hyperlink{stb__image_8h_a566ed261e95b8bfa4053cac61066ae47}{stbi\_loadf\_from\_callbacks}}  (\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} \textcolor{keyword}{const} *clbk, \textcolor{keywordtype}{void} *user, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp);}
\DoxyCodeLine{455 }
\DoxyCodeLine{456 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_STDIO}}
\DoxyCodeLine{457    \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{float} *\mbox{\hyperlink{stb__image_8h_ad1383f8b3e989e14b1013183e061e1ab}{stbi\_loadf\_from\_file}}  (FILE *f,                \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp);}
\DoxyCodeLine{458 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{459 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{460 }
\DoxyCodeLine{461 \textcolor{preprocessor}{\#ifndef STBI\_NO\_HDR}}
\DoxyCodeLine{462    \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void}   \mbox{\hyperlink{stb__image_8h_ab18889e43518d6b4421b705782bb1b5e}{stbi\_hdr\_to\_ldr\_gamma}}(\textcolor{keywordtype}{float} gamma);}
\DoxyCodeLine{463    \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void}   \mbox{\hyperlink{stb__image_8h_ae21cc1184eeb5cc814699f1ed62c5258}{stbi\_hdr\_to\_ldr\_scale}}(\textcolor{keywordtype}{float} \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}});}
\DoxyCodeLine{464 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{465 }
\DoxyCodeLine{466 \textcolor{preprocessor}{\#ifndef STBI\_NO\_LINEAR}}
\DoxyCodeLine{467    \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void}   \mbox{\hyperlink{stb__image_8h_a1feccdcf726dcc6b5502e3efa85b7dbb}{stbi\_ldr\_to\_hdr\_gamma}}(\textcolor{keywordtype}{float} gamma);}
\DoxyCodeLine{468    \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void}   \mbox{\hyperlink{stb__image_8h_af946583656a362a316b40c0421c20561}{stbi\_ldr\_to\_hdr\_scale}}(\textcolor{keywordtype}{float} \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}});}
\DoxyCodeLine{469 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STBI\_NO\_HDR}}
\DoxyCodeLine{470 }
\DoxyCodeLine{471 \textcolor{comment}{// stbi\_is\_hdr is always defined, but always returns false if STBI\_NO\_HDR}}
\DoxyCodeLine{472 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}    \mbox{\hyperlink{stb__image_8h_af0e94f316fe1848f632517ca3c11d077}{stbi\_is\_hdr\_from\_callbacks}}(\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} \textcolor{keyword}{const} *clbk, \textcolor{keywordtype}{void} *user);}
\DoxyCodeLine{473 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}    \mbox{\hyperlink{stb__image_8h_a5cbc6f5cbb3b2d0d87ee959fcee9d23e}{stbi\_is\_hdr\_from\_memory}}(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \textcolor{keyword}{const} *buffer, \textcolor{keywordtype}{int} len);}
\DoxyCodeLine{474 \textcolor{preprocessor}{\#ifndef STBI\_NO\_STDIO}}
\DoxyCodeLine{475 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}      \mbox{\hyperlink{stb__image_8h_ae70f9a302f7e87fd971075e7f758d55c}{stbi\_is\_hdr}}          (\textcolor{keywordtype}{char} \textcolor{keyword}{const} *filename);}
\DoxyCodeLine{476 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}      \mbox{\hyperlink{stb__image_8h_aaf10d41631e1e9214fde1688bdbd8524}{stbi\_is\_hdr\_from\_file}}(FILE *f);}
\DoxyCodeLine{477 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STBI\_NO\_STDIO}}
\DoxyCodeLine{478 }
\DoxyCodeLine{479 }
\DoxyCodeLine{480 \textcolor{comment}{// get a VERY brief reason for failure}}
\DoxyCodeLine{481 \textcolor{comment}{// NOT THREADSAFE}}
\DoxyCodeLine{482 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keyword}{const} \textcolor{keywordtype}{char} *\mbox{\hyperlink{stb__image_8h_ac72f312f610a7df1519ea0f2a2f94be9}{stbi\_failure\_reason}}  (\textcolor{keywordtype}{void});}
\DoxyCodeLine{483 }
\DoxyCodeLine{484 \textcolor{comment}{// free the loaded image -\/-\/ this is just free()}}
\DoxyCodeLine{485 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void}     \mbox{\hyperlink{stb__image_8h_ad3e11bb44412a7ba348acfbad09caacb}{stbi\_image\_free}}      (\textcolor{keywordtype}{void} *retval\_from\_stbi\_load);}
\DoxyCodeLine{486 }
\DoxyCodeLine{487 \textcolor{comment}{// get image dimensions \& components without fully decoding}}
\DoxyCodeLine{488 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}      \mbox{\hyperlink{stb__image_8h_acfef077febce3bc3f1f339de478f3315}{stbi\_info\_from\_memory}}(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \textcolor{keyword}{const} *buffer, \textcolor{keywordtype}{int} len, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{489 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}      \mbox{\hyperlink{stb__image_8h_a86291c64cb663f41a34647d5e1abf363}{stbi\_info\_from\_callbacks}}(\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} \textcolor{keyword}{const} *clbk, \textcolor{keywordtype}{void} *user, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{490 }
\DoxyCodeLine{491 \textcolor{preprocessor}{\#ifndef STBI\_NO\_STDIO}}
\DoxyCodeLine{492 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}      \mbox{\hyperlink{stb__image_8h_aede708cca1304520b2afcf4d5eb61d70}{stbi\_info}}            (\textcolor{keywordtype}{char} \textcolor{keyword}{const} *filename,     \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{493 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}      \mbox{\hyperlink{stb__image_8h_a28abedef4a0a93909332080df6be0021}{stbi\_info\_from\_file}}  (FILE *f,                  \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{494 }
\DoxyCodeLine{495 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{496 }
\DoxyCodeLine{497 }
\DoxyCodeLine{498 }
\DoxyCodeLine{499 \textcolor{comment}{// for image formats that explicitly notate that they have premultiplied alpha,}}
\DoxyCodeLine{500 \textcolor{comment}{// we just return the colors as stored in the file. set this flag to force}}
\DoxyCodeLine{501 \textcolor{comment}{// unpremultiplication. results are undefined if the unpremultiply overflow.}}
\DoxyCodeLine{502 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void} \mbox{\hyperlink{stb__image_8h_a3f02e0053e1c8d08a3ed436e6a82c7c9}{stbi\_set\_unpremultiply\_on\_load}}(\textcolor{keywordtype}{int} flag\_true\_if\_should\_unpremultiply);}
\DoxyCodeLine{503 }
\DoxyCodeLine{504 \textcolor{comment}{// indicate whether we should process iphone images back to canonical format,}}
\DoxyCodeLine{505 \textcolor{comment}{// or just pass them through "{}as-\/is"{}}}
\DoxyCodeLine{506 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void} \mbox{\hyperlink{stb__image_8h_a23525ef2b882f3de426b47ecf8d9151b}{stbi\_convert\_iphone\_png\_to\_rgb}}(\textcolor{keywordtype}{int} flag\_true\_if\_should\_convert);}
\DoxyCodeLine{507 }
\DoxyCodeLine{508 \textcolor{comment}{// flip the image vertically, so the first pixel in the output array is the bottom left}}
\DoxyCodeLine{509 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void} \mbox{\hyperlink{stb__image_8h_ab89c177fc52f1bb2dc1c05e48129a0a4}{stbi\_set\_flip\_vertically\_on\_load}}(\textcolor{keywordtype}{int} flag\_true\_if\_should\_flip);}
\DoxyCodeLine{510 }
\DoxyCodeLine{511 \textcolor{comment}{// ZLIB client -\/ used by PNG, available for other purposes}}
\DoxyCodeLine{512 }
\DoxyCodeLine{513 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{char} *\mbox{\hyperlink{stb__image_8h_acba137e5310f3c0fe9bb198e4bee3dce}{stbi\_zlib\_decode\_malloc\_guesssize}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *buffer, \textcolor{keywordtype}{int} len, \textcolor{keywordtype}{int} initial\_size, \textcolor{keywordtype}{int} *outlen);}
\DoxyCodeLine{514 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{char} *\mbox{\hyperlink{stb__image_8h_adc3de199aa29f7370a699ad545155541}{stbi\_zlib\_decode\_malloc\_guesssize\_headerflag}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *buffer, \textcolor{keywordtype}{int} len, \textcolor{keywordtype}{int} initial\_size, \textcolor{keywordtype}{int} *outlen, \textcolor{keywordtype}{int} parse\_header);}
\DoxyCodeLine{515 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{char} *\mbox{\hyperlink{stb__image_8h_afec644d4e1a3cd858dfe0f9c55a1e55c}{stbi\_zlib\_decode\_malloc}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *buffer, \textcolor{keywordtype}{int} len, \textcolor{keywordtype}{int} *outlen);}
\DoxyCodeLine{516 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}   \mbox{\hyperlink{stb__image_8h_ae8447830c49bc17f8491e12c1f0ded48}{stbi\_zlib\_decode\_buffer}}(\textcolor{keywordtype}{char} *obuffer, \textcolor{keywordtype}{int} olen, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *ibuffer, \textcolor{keywordtype}{int} ilen);}
\DoxyCodeLine{517 }
\DoxyCodeLine{518 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{char} *\mbox{\hyperlink{stb__image_8h_ad6b5cd73a89037832ee2b2872a17bd1b}{stbi\_zlib\_decode\_noheader\_malloc}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *buffer, \textcolor{keywordtype}{int} len, \textcolor{keywordtype}{int} *outlen);}
\DoxyCodeLine{519 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}   \mbox{\hyperlink{stb__image_8h_a0d12efc011adfff7521f3b924feb0b0e}{stbi\_zlib\_decode\_noheader\_buffer}}(\textcolor{keywordtype}{char} *obuffer, \textcolor{keywordtype}{int} olen, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *ibuffer, \textcolor{keywordtype}{int} ilen);}
\DoxyCodeLine{520 }
\DoxyCodeLine{521 \textcolor{preprocessor}{\#ifndef STBI\_NO\_DDS}}
\DoxyCodeLine{522 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{stbi___d_d_s_8h}{stbi\_DDS.h}}"{}}}
\DoxyCodeLine{523 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{524 }
\DoxyCodeLine{525 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PVR}}
\DoxyCodeLine{526 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{stbi__pvr_8h}{stbi\_pvr.h}}"{}}}
\DoxyCodeLine{527 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{528 }
\DoxyCodeLine{529 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PKM}}
\DoxyCodeLine{530 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{stbi__pkm_8h}{stbi\_pkm.h}}"{}}}
\DoxyCodeLine{531 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{532 }
\DoxyCodeLine{533 \textcolor{preprocessor}{\#ifndef STBI\_NO\_EXT}}
\DoxyCodeLine{534 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{stbi__ext_8h}{stbi\_ext.h}}"{}}}
\DoxyCodeLine{535 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{536 }
\DoxyCodeLine{537 \textcolor{preprocessor}{\#ifdef \_\_cplusplus}}
\DoxyCodeLine{538 \}}
\DoxyCodeLine{539 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{540 }
\DoxyCodeLine{541 \textcolor{comment}{//}}
\DoxyCodeLine{542 \textcolor{comment}{//}}
\DoxyCodeLine{544 \textcolor{comment}{}\textcolor{preprocessor}{\#endif }\textcolor{comment}{// STBI\_INCLUDE\_STB\_IMAGE\_H}}
\DoxyCodeLine{545 }
\DoxyCodeLine{546 \textcolor{preprocessor}{\#ifdef STB\_IMAGE\_IMPLEMENTATION}}
\DoxyCodeLine{547 }
\DoxyCodeLine{548 \textcolor{preprocessor}{\#if defined(STBI\_ONLY\_JPEG) || defined(STBI\_ONLY\_PNG) || defined(STBI\_ONLY\_BMP) \(\backslash\)}}
\DoxyCodeLine{549 \textcolor{preprocessor}{  || defined(STBI\_ONLY\_TGA) || defined(STBI\_ONLY\_GIF) || defined(STBI\_ONLY\_PSD) \(\backslash\)}}
\DoxyCodeLine{550 \textcolor{preprocessor}{  || defined(STBI\_ONLY\_HDR) || defined(STBI\_ONLY\_PIC) || defined(STBI\_ONLY\_PNM) \(\backslash\)}}
\DoxyCodeLine{551 \textcolor{preprocessor}{  || defined(STBI\_ONLY\_ZLIB)}}
\DoxyCodeLine{552 \textcolor{preprocessor}{   \#ifndef STBI\_ONLY\_JPEG}}
\DoxyCodeLine{553 \textcolor{preprocessor}{   \#define STBI\_NO\_JPEG}}
\DoxyCodeLine{554 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{555 \textcolor{preprocessor}{   \#ifndef STBI\_ONLY\_PNG}}
\DoxyCodeLine{556 \textcolor{preprocessor}{   \#define STBI\_NO\_PNG}}
\DoxyCodeLine{557 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{558 \textcolor{preprocessor}{   \#ifndef STBI\_ONLY\_BMP}}
\DoxyCodeLine{559 \textcolor{preprocessor}{   \#define STBI\_NO\_BMP}}
\DoxyCodeLine{560 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{561 \textcolor{preprocessor}{   \#ifndef STBI\_ONLY\_PSD}}
\DoxyCodeLine{562 \textcolor{preprocessor}{   \#define STBI\_NO\_PSD}}
\DoxyCodeLine{563 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{564 \textcolor{preprocessor}{   \#ifndef STBI\_ONLY\_TGA}}
\DoxyCodeLine{565 \textcolor{preprocessor}{   \#define STBI\_NO\_TGA}}
\DoxyCodeLine{566 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{567 \textcolor{preprocessor}{   \#ifndef STBI\_ONLY\_GIF}}
\DoxyCodeLine{568 \textcolor{preprocessor}{   \#define STBI\_NO\_GIF}}
\DoxyCodeLine{569 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{570 \textcolor{preprocessor}{   \#ifndef STBI\_ONLY\_HDR}}
\DoxyCodeLine{571 \textcolor{preprocessor}{   \#define STBI\_NO\_HDR}}
\DoxyCodeLine{572 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{573 \textcolor{preprocessor}{   \#ifndef STBI\_ONLY\_PIC}}
\DoxyCodeLine{574 \textcolor{preprocessor}{   \#define STBI\_NO\_PIC}}
\DoxyCodeLine{575 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{576 \textcolor{preprocessor}{   \#ifndef STBI\_ONLY\_PNM}}
\DoxyCodeLine{577 \textcolor{preprocessor}{   \#define STBI\_NO\_PNM}}
\DoxyCodeLine{578 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{579 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{580 }
\DoxyCodeLine{581 \textcolor{preprocessor}{\#if defined(STBI\_NO\_PNG) \&\& !defined(STBI\_SUPPORT\_ZLIB) \&\& !defined(STBI\_NO\_ZLIB)}}
\DoxyCodeLine{582 \textcolor{preprocessor}{\#define STBI\_NO\_ZLIB}}
\DoxyCodeLine{583 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{584 }
\DoxyCodeLine{585 }
\DoxyCodeLine{586 \textcolor{preprocessor}{\#include <stdarg.h>}}
\DoxyCodeLine{587 \textcolor{preprocessor}{\#include <stddef.h>} \textcolor{comment}{// ptrdiff\_t on osx}}
\DoxyCodeLine{588 \textcolor{preprocessor}{\#include <stdlib.h>}}
\DoxyCodeLine{589 \textcolor{preprocessor}{\#include <string.h>}}
\DoxyCodeLine{590 }
\DoxyCodeLine{591 \textcolor{preprocessor}{\#if !defined(STBI\_NO\_LINEAR) || !defined(STBI\_NO\_HDR)}}
\DoxyCodeLine{592 \textcolor{preprocessor}{\#include <math.h>}  \textcolor{comment}{// ldexp}}
\DoxyCodeLine{593 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{594 }
\DoxyCodeLine{595 \textcolor{preprocessor}{\#ifndef STBI\_NO\_STDIO}}
\DoxyCodeLine{596 \textcolor{preprocessor}{\#include <stdio.h>}}
\DoxyCodeLine{597 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{598 }
\DoxyCodeLine{599 \textcolor{preprocessor}{\#ifndef STBI\_ASSERT}}
\DoxyCodeLine{600 \textcolor{preprocessor}{\#include <assert.h>}}
\DoxyCodeLine{601 \textcolor{preprocessor}{\#define STBI\_ASSERT(x) assert(x)}}
\DoxyCodeLine{602 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{603 }
\DoxyCodeLine{604 }
\DoxyCodeLine{605 \textcolor{preprocessor}{\#ifndef \_MSC\_VER}}
\DoxyCodeLine{606 \textcolor{preprocessor}{   \#ifdef \_\_cplusplus}}
\DoxyCodeLine{607 \textcolor{preprocessor}{   \#define stbi\_inline inline}}
\DoxyCodeLine{608 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{609 \textcolor{preprocessor}{   \#define stbi\_inline}}
\DoxyCodeLine{610 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{611 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{612 \textcolor{preprocessor}{   \#define stbi\_inline \_\_forceinline}}
\DoxyCodeLine{613 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{614 }
\DoxyCodeLine{615 }
\DoxyCodeLine{616 \textcolor{preprocessor}{\#ifdef \_MSC\_VER}}
\DoxyCodeLine{617 \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} \mbox{\hyperlink{stb__image_8h_a38c41d822de912df31fb56df26a9cb8c}{stbi\_\_uint16}};}
\DoxyCodeLine{618 \textcolor{keyword}{typedef}   \textcolor{keywordtype}{signed} \textcolor{keywordtype}{short} \mbox{\hyperlink{stb__image_8h_ae4cbd54705261d6f2d44b97ca536f14f}{stbi\_\_int16}};}
\DoxyCodeLine{619 \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}   \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}};}
\DoxyCodeLine{620 \textcolor{keyword}{typedef}   \textcolor{keywordtype}{signed} \textcolor{keywordtype}{int}   \mbox{\hyperlink{stb__image_8h_aa22ffdc0f962b06610737eaab3ac6b63}{stbi\_\_int32}};}
\DoxyCodeLine{621 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{622 \textcolor{preprocessor}{\#include <stdint.h>}}
\DoxyCodeLine{623 \textcolor{keyword}{typedef} uint16\_t \mbox{\hyperlink{stb__image_8h_a38c41d822de912df31fb56df26a9cb8c}{stbi\_\_uint16}};}
\DoxyCodeLine{624 \textcolor{keyword}{typedef} int16\_t  \mbox{\hyperlink{stb__image_8h_ae4cbd54705261d6f2d44b97ca536f14f}{stbi\_\_int16}};}
\DoxyCodeLine{625 \textcolor{keyword}{typedef} uint32\_t \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}};}
\DoxyCodeLine{626 \textcolor{keyword}{typedef} int32\_t  \mbox{\hyperlink{stb__image_8h_aa22ffdc0f962b06610737eaab3ac6b63}{stbi\_\_int32}};}
\DoxyCodeLine{627 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{628 }
\DoxyCodeLine{629 \textcolor{comment}{// should produce compiler error if size is wrong}}
\DoxyCodeLine{630 \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} \mbox{\hyperlink{stb__image_8h_a88d07433d887bfad2b4b8a302f47f240}{validate\_uint32}}[\textcolor{keyword}{sizeof}(\mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}})==4 ? 1 : -\/1];}
\DoxyCodeLine{631 }
\DoxyCodeLine{632 \textcolor{preprocessor}{\#ifdef \_MSC\_VER}}
\DoxyCodeLine{633 \textcolor{preprocessor}{\#define STBI\_NOTUSED(v)  (void)(v)}}
\DoxyCodeLine{634 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{635 \textcolor{preprocessor}{\#define STBI\_NOTUSED(v)  (void)sizeof(v)}}
\DoxyCodeLine{636 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{637 }
\DoxyCodeLine{638 \textcolor{preprocessor}{\#ifdef \_MSC\_VER}}
\DoxyCodeLine{639 \textcolor{preprocessor}{\#define STBI\_HAS\_LROTL}}
\DoxyCodeLine{640 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{641 }
\DoxyCodeLine{642 \textcolor{preprocessor}{\#ifdef STBI\_HAS\_LROTL}}
\DoxyCodeLine{643 \textcolor{preprocessor}{   \#define stbi\_lrot(x,y)  \_lrotl(x,y)}}
\DoxyCodeLine{644 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{645 \textcolor{preprocessor}{   \#define stbi\_lrot(x,y)  (((x) << (y)) | ((x) >> (32 -\/ (y))))}}
\DoxyCodeLine{646 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{647 }
\DoxyCodeLine{648 \textcolor{preprocessor}{\#if defined(STBI\_MALLOC) \&\& defined(STBI\_FREE) \&\& defined(STBI\_REALLOC)}}
\DoxyCodeLine{649 \textcolor{comment}{// ok}}
\DoxyCodeLine{650 \textcolor{preprocessor}{\#elif !defined(STBI\_MALLOC) \&\& !defined(STBI\_FREE) \&\& !defined(STBI\_REALLOC)}}
\DoxyCodeLine{651 \textcolor{comment}{// ok}}
\DoxyCodeLine{652 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{653 \textcolor{preprocessor}{\#error "{}Must define all or none of STBI\_MALLOC, STBI\_FREE, and STBI\_REALLOC."{}}}
\DoxyCodeLine{654 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{655 }
\DoxyCodeLine{656 \textcolor{preprocessor}{\#ifndef STBI\_MALLOC}}
\DoxyCodeLine{657 \textcolor{preprocessor}{\#define STBI\_MALLOC(sz)    malloc(sz)}}
\DoxyCodeLine{658 \textcolor{preprocessor}{\#define STBI\_REALLOC(p,sz) realloc(p,sz)}}
\DoxyCodeLine{659 \textcolor{preprocessor}{\#define STBI\_FREE(p)       free(p)}}
\DoxyCodeLine{660 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{661 }
\DoxyCodeLine{662 \textcolor{comment}{// x86/x64 detection}}
\DoxyCodeLine{663 \textcolor{preprocessor}{\#if defined(\_\_x86\_64\_\_) || defined(\_M\_X64)}}
\DoxyCodeLine{664 \textcolor{preprocessor}{\#define STBI\_\_X64\_TARGET}}
\DoxyCodeLine{665 \textcolor{preprocessor}{\#elif defined(\_\_i386) || defined(\_M\_IX86)}}
\DoxyCodeLine{666 \textcolor{preprocessor}{\#define STBI\_\_X86\_TARGET}}
\DoxyCodeLine{667 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{668 }
\DoxyCodeLine{669 \textcolor{preprocessor}{\#if defined(\_\_GNUC\_\_) \&\& (defined(STBI\_\_X86\_TARGET) || defined(STBI\_\_X64\_TARGET)) \&\& !defined(\_\_SSE2\_\_) \&\& !defined(STBI\_NO\_SIMD)}}
\DoxyCodeLine{670 \textcolor{comment}{// NOTE: not clear do we actually need this for the 64-\/bit path?}}
\DoxyCodeLine{671 \textcolor{comment}{// gcc doesn't support sse2 intrinsics unless you compile with -\/msse2,}}
\DoxyCodeLine{672 \textcolor{comment}{// (but compiling with -\/msse2 allows the compiler to use SSE2 everywhere;}}
\DoxyCodeLine{673 \textcolor{comment}{// this is just broken and gcc are jerks for not fixing it properly}}
\DoxyCodeLine{674 \textcolor{comment}{// http://www.virtualdub.org/blog/pivot/entry.php?id=363 )}}
\DoxyCodeLine{675 \textcolor{preprocessor}{\#define STBI\_NO\_SIMD}}
\DoxyCodeLine{676 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{677 }
\DoxyCodeLine{678 \textcolor{preprocessor}{\#if defined(\_\_MINGW32\_\_) \&\& !defined(\_\_x86\_64\_\_) \&\& !defined(STBI\_NO\_SIMD)}}
\DoxyCodeLine{679 \textcolor{preprocessor}{\#define STBI\_MINGW\_ENABLE\_SSE2}}
\DoxyCodeLine{680 \textcolor{preprocessor}{\#define STBI\_FORCE\_STACK\_ALIGN \_\_attribute\_\_((force\_align\_arg\_pointer))}}
\DoxyCodeLine{681 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{682 \textcolor{preprocessor}{\#define STBI\_FORCE\_STACK\_ALIGN}}
\DoxyCodeLine{683 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{684 }
\DoxyCodeLine{685 \textcolor{preprocessor}{\#if defined(\_\_MINGW32\_\_) \&\& defined(STBI\_\_X86\_TARGET) \&\& !defined(STBI\_MINGW\_ENABLE\_SSE2) \&\& !defined(STBI\_NO\_SIMD)}}
\DoxyCodeLine{686 \textcolor{comment}{// Note that \_\_MINGW32\_\_ doesn't actually mean 32-\/bit, so we have to avoid STBI\_\_X64\_TARGET}}
\DoxyCodeLine{687 \textcolor{comment}{//}}
\DoxyCodeLine{688 \textcolor{comment}{// 32-\/bit MinGW wants ESP to be 16-\/byte aligned, but this is not in the}}
\DoxyCodeLine{689 \textcolor{comment}{// Windows ABI and VC++ as well as Windows DLLs don't maintain that invariant.}}
\DoxyCodeLine{690 \textcolor{comment}{// As a result, enabling SSE2 on 32-\/bit MinGW is dangerous when not}}
\DoxyCodeLine{691 \textcolor{comment}{// simultaneously enabling "{}-\/mstackrealign"{}.}}
\DoxyCodeLine{692 \textcolor{comment}{//}}
\DoxyCodeLine{693 \textcolor{comment}{// See https://github.com/nothings/stb/issues/81 for more information.}}
\DoxyCodeLine{694 \textcolor{comment}{//}}
\DoxyCodeLine{695 \textcolor{comment}{// So default to no SSE2 on 32-\/bit MinGW. If you've read this far and added}}
\DoxyCodeLine{696 \textcolor{comment}{// -\/mstackrealign to your build settings, feel free to \#define STBI\_MINGW\_ENABLE\_SSE2.}}
\DoxyCodeLine{697 \textcolor{preprocessor}{\#define STBI\_NO\_SIMD}}
\DoxyCodeLine{698 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{699 }
\DoxyCodeLine{700 \textcolor{preprocessor}{\#if !defined(STBI\_NO\_SIMD) \&\& defined(STBI\_\_X86\_TARGET)}}
\DoxyCodeLine{701 \textcolor{preprocessor}{\#define STBI\_SSE2}}
\DoxyCodeLine{702 \textcolor{preprocessor}{\#include <emmintrin.h>}}
\DoxyCodeLine{703 }
\DoxyCodeLine{704 \textcolor{preprocessor}{\#ifdef \_MSC\_VER}}
\DoxyCodeLine{705 }
\DoxyCodeLine{706 \textcolor{preprocessor}{\#if \_MSC\_VER >= 1400  }\textcolor{comment}{// not VC6}}
\DoxyCodeLine{707 \textcolor{preprocessor}{\#include <intrin.h>} \textcolor{comment}{// \_\_cpuid}}
\DoxyCodeLine{708 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_cpuid3(\textcolor{keywordtype}{void})}
\DoxyCodeLine{709 \{}
\DoxyCodeLine{710    \textcolor{keywordtype}{int} info[4];}
\DoxyCodeLine{711    \_\_cpuid(info,1);}
\DoxyCodeLine{712    \textcolor{keywordflow}{return} info[3];}
\DoxyCodeLine{713 \}}
\DoxyCodeLine{714 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{715 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_cpuid3(\textcolor{keywordtype}{void})}
\DoxyCodeLine{716 \{}
\DoxyCodeLine{717    \textcolor{keywordtype}{int} res;}
\DoxyCodeLine{718    \_\_asm \{}
\DoxyCodeLine{719       mov  eax,1}
\DoxyCodeLine{720       cpuid}
\DoxyCodeLine{721       mov  res,edx}
\DoxyCodeLine{722    \}}
\DoxyCodeLine{723    \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{724 \}}
\DoxyCodeLine{725 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{726 }
\DoxyCodeLine{727 \textcolor{preprocessor}{\#define STBI\_SIMD\_ALIGN(type, name) \_\_declspec(align(16)) type name}}
\DoxyCodeLine{728 }
\DoxyCodeLine{729 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_sse2\_available()}
\DoxyCodeLine{730 \{}
\DoxyCodeLine{731    \textcolor{keywordtype}{int} info3 = stbi\_\_cpuid3();}
\DoxyCodeLine{732    \textcolor{keywordflow}{return} ((info3 >> 26) \& 1) != 0;}
\DoxyCodeLine{733 \}}
\DoxyCodeLine{734 \textcolor{preprocessor}{\#else }\textcolor{comment}{// assume GCC-\/style if not VC++}}
\DoxyCodeLine{735 \textcolor{preprocessor}{\#define STBI\_SIMD\_ALIGN(type, name) type name \_\_attribute\_\_((aligned(16)))}}
\DoxyCodeLine{736 }
\DoxyCodeLine{737 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_sse2\_available()}
\DoxyCodeLine{738 \{}
\DoxyCodeLine{739 \textcolor{preprocessor}{\#if defined(\_\_GNUC\_\_) \&\& (\_\_GNUC\_\_ * 100 + \_\_GNUC\_MINOR\_\_) >= 408 }\textcolor{comment}{// GCC 4.8 or later}}
\DoxyCodeLine{740    \textcolor{comment}{// GCC 4.8+ has a nice way to do this}}
\DoxyCodeLine{741    \textcolor{keywordflow}{return} \_\_builtin\_cpu\_supports(\textcolor{stringliteral}{"{}sse2"{}});}
\DoxyCodeLine{742 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{743    \textcolor{comment}{// portable way to do this, preferably without using GCC inline ASM?}}
\DoxyCodeLine{744    \textcolor{comment}{// just bail for now.}}
\DoxyCodeLine{745    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{746 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{747 \}}
\DoxyCodeLine{748 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{749 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{750 }
\DoxyCodeLine{751 \textcolor{comment}{// ARM NEON}}
\DoxyCodeLine{752 \textcolor{preprocessor}{\#if defined(STBI\_NO\_SIMD) \&\& defined(STBI\_NEON)}}
\DoxyCodeLine{753 \textcolor{preprocessor}{\#undef STBI\_NEON}}
\DoxyCodeLine{754 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{755 }
\DoxyCodeLine{756 \textcolor{preprocessor}{\#ifdef STBI\_NEON}}
\DoxyCodeLine{757 \textcolor{preprocessor}{\#include <arm\_neon.h>}}
\DoxyCodeLine{758 \textcolor{comment}{// assume GCC or Clang on ARM targets}}
\DoxyCodeLine{759 \textcolor{preprocessor}{\#define STBI\_SIMD\_ALIGN(type, name) type name \_\_attribute\_\_((aligned(16)))}}
\DoxyCodeLine{760 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{761 }
\DoxyCodeLine{762 \textcolor{preprocessor}{\#ifndef STBI\_SIMD\_ALIGN}}
\DoxyCodeLine{763 \textcolor{preprocessor}{\#define STBI\_SIMD\_ALIGN(type, name) type name}}
\DoxyCodeLine{764 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{765 }
\DoxyCodeLine{767 \textcolor{comment}{//}}
\DoxyCodeLine{768 \textcolor{comment}{//  stbi\_\_context struct and start\_xxx functions}}
\DoxyCodeLine{769 }
\DoxyCodeLine{770 \textcolor{comment}{// stbi\_\_context structure is our basic context used by all images, so it}}
\DoxyCodeLine{771 \textcolor{comment}{// contains all the IO context, plus some basic image information}}
\DoxyCodeLine{772 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{773 \{}
\DoxyCodeLine{774    \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}} \mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}}, img\_y;}
\DoxyCodeLine{775    \textcolor{keywordtype}{int} \mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}}, img\_out\_n;}
\DoxyCodeLine{776 }
\DoxyCodeLine{777    \mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} \mbox{\hyperlink{structstbi____context_af29e836af996b4f948e4e89da2deb950}{io}};}
\DoxyCodeLine{778    \textcolor{keywordtype}{void} *\mbox{\hyperlink{structstbi____context_a1c42c824da190f71d058ef58fc7375fb}{io\_user\_data}};}
\DoxyCodeLine{779 }
\DoxyCodeLine{780    \textcolor{keywordtype}{int} \mbox{\hyperlink{structstbi____context_ac8add53b6eed43af69052f871fdebe3c}{read\_from\_callbacks}};}
\DoxyCodeLine{781    \textcolor{keywordtype}{int} \mbox{\hyperlink{structstbi____context_a3d37b5210bea81183b4720df7d6a92e0}{buflen}};}
\DoxyCodeLine{782    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} buffer\_start[128];}
\DoxyCodeLine{783 }
\DoxyCodeLine{784    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{structstbi____context_a2f6f99cb44681558cd74468ff9ccf9b2}{img\_buffer}}, *img\_buffer\_end;}
\DoxyCodeLine{785    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{structstbi____context_ade0a0d78fe4e066aa4edf995018741bc}{img\_buffer\_original}}, *img\_buffer\_original\_end;}
\DoxyCodeLine{786 \} \mbox{\hyperlink{structstbi____context}{stbi\_\_context}};}
\DoxyCodeLine{787 }
\DoxyCodeLine{788 }
\DoxyCodeLine{789 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_refill\_buffer(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s);}
\DoxyCodeLine{790 }
\DoxyCodeLine{791 \textcolor{comment}{// initialize a memory-\/decode context}}
\DoxyCodeLine{792 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_start\_mem(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \textcolor{keyword}{const} *buffer, \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{793 \{}
\DoxyCodeLine{794    s-\/>\mbox{\hyperlink{structstbi____context_af29e836af996b4f948e4e89da2deb950}{io}}.\mbox{\hyperlink{structstbi__io__callbacks_a623e46b3a2a019611601409926283a88}{read}} = NULL;}
\DoxyCodeLine{795    s-\/>\mbox{\hyperlink{structstbi____context_ac8add53b6eed43af69052f871fdebe3c}{read\_from\_callbacks}} = 0;}
\DoxyCodeLine{796    s-\/>\mbox{\hyperlink{structstbi____context_a2f6f99cb44681558cd74468ff9ccf9b2}{img\_buffer}} = s-\/>\mbox{\hyperlink{structstbi____context_ade0a0d78fe4e066aa4edf995018741bc}{img\_buffer\_original}} = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) buffer;}
\DoxyCodeLine{797    s-\/>\mbox{\hyperlink{structstbi____context_ae82a6eaacfa751b0e5110e2ad7432d7a}{img\_buffer\_end}} = s-\/>\mbox{\hyperlink{structstbi____context_a5a0ec873a2d601413443c1e95a19aba7}{img\_buffer\_original\_end}} = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) buffer+len;}
\DoxyCodeLine{798 \}}
\DoxyCodeLine{799 }
\DoxyCodeLine{800 \textcolor{comment}{// initialize a callback-\/based context}}
\DoxyCodeLine{801 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_start\_callbacks(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} *c, \textcolor{keywordtype}{void} *user)}
\DoxyCodeLine{802 \{}
\DoxyCodeLine{803    s-\/>\mbox{\hyperlink{structstbi____context_af29e836af996b4f948e4e89da2deb950}{io}} = *c;}
\DoxyCodeLine{804    s-\/>\mbox{\hyperlink{structstbi____context_a1c42c824da190f71d058ef58fc7375fb}{io\_user\_data}} = user;}
\DoxyCodeLine{805    s-\/>\mbox{\hyperlink{structstbi____context_a3d37b5210bea81183b4720df7d6a92e0}{buflen}} = \textcolor{keyword}{sizeof}(s-\/>\mbox{\hyperlink{structstbi____context_ad8908d7dcced42f211cc5fc22856dd1e}{buffer\_start}});}
\DoxyCodeLine{806    s-\/>\mbox{\hyperlink{structstbi____context_ac8add53b6eed43af69052f871fdebe3c}{read\_from\_callbacks}} = 1;}
\DoxyCodeLine{807    s-\/>\mbox{\hyperlink{structstbi____context_ade0a0d78fe4e066aa4edf995018741bc}{img\_buffer\_original}} = s-\/>\mbox{\hyperlink{structstbi____context_ad8908d7dcced42f211cc5fc22856dd1e}{buffer\_start}};}
\DoxyCodeLine{808    stbi\_\_refill\_buffer(s);}
\DoxyCodeLine{809    s-\/>\mbox{\hyperlink{structstbi____context_a5a0ec873a2d601413443c1e95a19aba7}{img\_buffer\_original\_end}} = s-\/>\mbox{\hyperlink{structstbi____context_ae82a6eaacfa751b0e5110e2ad7432d7a}{img\_buffer\_end}};}
\DoxyCodeLine{810 \}}
\DoxyCodeLine{811 }
\DoxyCodeLine{812 \textcolor{preprocessor}{\#ifndef STBI\_NO\_STDIO}}
\DoxyCodeLine{813 }
\DoxyCodeLine{814 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_stdio\_read(\textcolor{keywordtype}{void} *user, \textcolor{keywordtype}{char} *data, \textcolor{keywordtype}{int} size)}
\DoxyCodeLine{815 \{}
\DoxyCodeLine{816    \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int}) fread(data,1,size,(FILE*) user);}
\DoxyCodeLine{817 \}}
\DoxyCodeLine{818 }
\DoxyCodeLine{819 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_stdio\_skip(\textcolor{keywordtype}{void} *user, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{820 \{}
\DoxyCodeLine{821    fseek((FILE*) user, n, SEEK\_CUR);}
\DoxyCodeLine{822 \}}
\DoxyCodeLine{823 }
\DoxyCodeLine{824 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_stdio\_eof(\textcolor{keywordtype}{void} *user)}
\DoxyCodeLine{825 \{}
\DoxyCodeLine{826    \textcolor{keywordflow}{return} feof((FILE*) user);}
\DoxyCodeLine{827 \}}
\DoxyCodeLine{828 }
\DoxyCodeLine{829 \textcolor{keyword}{static} \mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} stbi\_\_stdio\_callbacks =}
\DoxyCodeLine{830 \{}
\DoxyCodeLine{831    stbi\_\_stdio\_read,}
\DoxyCodeLine{832    stbi\_\_stdio\_skip,}
\DoxyCodeLine{833    stbi\_\_stdio\_eof,}
\DoxyCodeLine{834 \};}
\DoxyCodeLine{835 }
\DoxyCodeLine{836 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_start\_file(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, FILE *f)}
\DoxyCodeLine{837 \{}
\DoxyCodeLine{838    stbi\_\_start\_callbacks(s, \&stbi\_\_stdio\_callbacks, (\textcolor{keywordtype}{void} *) f);}
\DoxyCodeLine{839 \}}
\DoxyCodeLine{840 }
\DoxyCodeLine{841 \textcolor{comment}{//static void stop\_file(stbi\_\_context *s) \{ \}}}
\DoxyCodeLine{842 }
\DoxyCodeLine{843 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// !STBI\_NO\_STDIO}}
\DoxyCodeLine{844 }
\DoxyCodeLine{845 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_rewind(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s)}
\DoxyCodeLine{846 \{}
\DoxyCodeLine{847    \textcolor{comment}{// conceptually rewind SHOULD rewind to the beginning of the stream,}}
\DoxyCodeLine{848    \textcolor{comment}{// but we just rewind to the beginning of the initial buffer, because}}
\DoxyCodeLine{849    \textcolor{comment}{// we only use it after doing 'test', which only ever looks at at most 92 bytes}}
\DoxyCodeLine{850    s-\/>\mbox{\hyperlink{structstbi____context_a2f6f99cb44681558cd74468ff9ccf9b2}{img\_buffer}} = s-\/>\mbox{\hyperlink{structstbi____context_ade0a0d78fe4e066aa4edf995018741bc}{img\_buffer\_original}};}
\DoxyCodeLine{851    s-\/>\mbox{\hyperlink{structstbi____context_ae82a6eaacfa751b0e5110e2ad7432d7a}{img\_buffer\_end}} = s-\/>\mbox{\hyperlink{structstbi____context_a5a0ec873a2d601413443c1e95a19aba7}{img\_buffer\_original\_end}};}
\DoxyCodeLine{852 \}}
\DoxyCodeLine{853 }
\DoxyCodeLine{854 \textcolor{preprocessor}{\#ifndef STBI\_NO\_JPEG}}
\DoxyCodeLine{855 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_jpeg\_test(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s);}
\DoxyCodeLine{856 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_jpeg\_load(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp);}
\DoxyCodeLine{857 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_jpeg\_info(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{858 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{859 }
\DoxyCodeLine{860 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PNG}}
\DoxyCodeLine{861 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_png\_test(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s);}
\DoxyCodeLine{862 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_png\_load(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp);}
\DoxyCodeLine{863 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_png\_info(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{864 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{865 }
\DoxyCodeLine{866 \textcolor{preprocessor}{\#ifndef STBI\_NO\_BMP}}
\DoxyCodeLine{867 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_bmp\_test(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s);}
\DoxyCodeLine{868 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_bmp\_load(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp);}
\DoxyCodeLine{869 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_bmp\_info(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{870 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{871 }
\DoxyCodeLine{872 \textcolor{preprocessor}{\#ifndef STBI\_NO\_TGA}}
\DoxyCodeLine{873 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_tga\_test(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s);}
\DoxyCodeLine{874 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_tga\_load(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp);}
\DoxyCodeLine{875 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_tga\_info(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{876 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{877 }
\DoxyCodeLine{878 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PSD}}
\DoxyCodeLine{879 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_psd\_test(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s);}
\DoxyCodeLine{880 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_psd\_load(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp);}
\DoxyCodeLine{881 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_psd\_info(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{882 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{883 }
\DoxyCodeLine{884 \textcolor{preprocessor}{\#ifndef STBI\_NO\_HDR}}
\DoxyCodeLine{885 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_hdr\_test(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s);}
\DoxyCodeLine{886 \textcolor{keyword}{static} \textcolor{keywordtype}{float}   *stbi\_\_hdr\_load(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp);}
\DoxyCodeLine{887 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_hdr\_info(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{888 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{889 }
\DoxyCodeLine{890 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PIC}}
\DoxyCodeLine{891 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_pic\_test(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s);}
\DoxyCodeLine{892 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_pic\_load(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp);}
\DoxyCodeLine{893 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_pic\_info(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{894 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{895 }
\DoxyCodeLine{896 \textcolor{preprocessor}{\#ifndef STBI\_NO\_GIF}}
\DoxyCodeLine{897 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_gif\_test(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s);}
\DoxyCodeLine{898 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_gif\_load(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp);}
\DoxyCodeLine{899 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_gif\_info(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{900 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{901 }
\DoxyCodeLine{902 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PNM}}
\DoxyCodeLine{903 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_pnm\_test(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s);}
\DoxyCodeLine{904 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_pnm\_load(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp);}
\DoxyCodeLine{905 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_pnm\_info(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{906 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{907 }
\DoxyCodeLine{908 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PNM}}
\DoxyCodeLine{909 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_pnm\_test(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s);}
\DoxyCodeLine{910 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_pnm\_load(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp);}
\DoxyCodeLine{911 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_pnm\_info(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp);}
\DoxyCodeLine{912 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{913 }
\DoxyCodeLine{914 \textcolor{preprocessor}{\#ifndef STBI\_NO\_DDS}}
\DoxyCodeLine{915 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{stbi___d_d_s_8h}{stbi\_DDS.h}}"{}}}
\DoxyCodeLine{916 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_dds\_test(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s);}
\DoxyCodeLine{917 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_dds\_load(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp);}
\DoxyCodeLine{918 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{919 }
\DoxyCodeLine{920 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PVR}}
\DoxyCodeLine{921 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{stbi__pvr_8h}{stbi\_pvr.h}}"{}}}
\DoxyCodeLine{922 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_pvr\_test(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s);}
\DoxyCodeLine{923 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_pvr\_load(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp);}
\DoxyCodeLine{924 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{925 }
\DoxyCodeLine{926 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PKM}}
\DoxyCodeLine{927 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{stbi__pkm_8h}{stbi\_pkm.h}}"{}}}
\DoxyCodeLine{928 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_pkm\_test(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s);}
\DoxyCodeLine{929 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_pkm\_load(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp);}
\DoxyCodeLine{930 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{931 }
\DoxyCodeLine{932 \textcolor{comment}{// this is not threadsafe}}
\DoxyCodeLine{933 \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{char} *stbi\_\_g\_failure\_reason;}
\DoxyCodeLine{934 }
\DoxyCodeLine{935 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keyword}{const} \textcolor{keywordtype}{char} *\mbox{\hyperlink{stb__image_8h_ac72f312f610a7df1519ea0f2a2f94be9}{stbi\_failure\_reason}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{936 \{}
\DoxyCodeLine{937    \textcolor{keywordflow}{return} stbi\_\_g\_failure\_reason;}
\DoxyCodeLine{938 \}}
\DoxyCodeLine{939 }
\DoxyCodeLine{940 \textcolor{keyword}{static} \textcolor{keywordtype}{int} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *str)}
\DoxyCodeLine{941 \{}
\DoxyCodeLine{942    stbi\_\_g\_failure\_reason = str;}
\DoxyCodeLine{943    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{944 \}}
\DoxyCodeLine{945 }
\DoxyCodeLine{946 \textcolor{keyword}{static} \textcolor{keywordtype}{void} *stbi\_\_malloc(\textcolor{keywordtype}{size\_t} size)}
\DoxyCodeLine{947 \{}
\DoxyCodeLine{948     \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a5d9e5717bb92709110f1a5d43392d42e}{STBI\_MALLOC}}(size);}
\DoxyCodeLine{949 \}}
\DoxyCodeLine{950 }
\DoxyCodeLine{951 \textcolor{comment}{// stbi\_\_err -\/ error}}
\DoxyCodeLine{952 \textcolor{comment}{// stbi\_\_errpf -\/ error returning pointer to float}}
\DoxyCodeLine{953 \textcolor{comment}{// stbi\_\_errpuc -\/ error returning pointer to unsigned char}}
\DoxyCodeLine{954 }
\DoxyCodeLine{955 \textcolor{preprocessor}{\#ifdef STBI\_NO\_FAILURE\_STRINGS}}
\DoxyCodeLine{956 \textcolor{preprocessor}{   \#define stbi\_\_err(x,y)  0}}
\DoxyCodeLine{957 \textcolor{preprocessor}{\#elif defined(STBI\_FAILURE\_USERMSG)}}
\DoxyCodeLine{958 \textcolor{preprocessor}{   \#define stbi\_\_err(x,y)  stbi\_\_err(y)}}
\DoxyCodeLine{959 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{960 \textcolor{preprocessor}{   \#define stbi\_\_err(x,y)  stbi\_\_err(x)}}
\DoxyCodeLine{961 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{962 }
\DoxyCodeLine{963 \textcolor{preprocessor}{\#define stbi\_\_errpf(x,y)   ((float *)(size\_t) (stbi\_\_err(x,y)?NULL:NULL))}}
\DoxyCodeLine{964 \textcolor{preprocessor}{\#define stbi\_\_errpuc(x,y)  ((unsigned char *)(size\_t) (stbi\_\_err(x,y)?NULL:NULL))}}
\DoxyCodeLine{965 }
\DoxyCodeLine{966 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void} \mbox{\hyperlink{stb__image_8h_ad3e11bb44412a7ba348acfbad09caacb}{stbi\_image\_free}}(\textcolor{keywordtype}{void} *retval\_from\_stbi\_load)}
\DoxyCodeLine{967 \{}
\DoxyCodeLine{968    \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(retval\_from\_stbi\_load);}
\DoxyCodeLine{969 \}}
\DoxyCodeLine{970 }
\DoxyCodeLine{971 \textcolor{preprocessor}{\#ifndef STBI\_NO\_LINEAR}}
\DoxyCodeLine{972 \textcolor{keyword}{static} \textcolor{keywordtype}{float}   *stbi\_\_ldr\_to\_hdr(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *data, \textcolor{keywordtype}{int} x, \textcolor{keywordtype}{int} y, \textcolor{keywordtype}{int} comp);}
\DoxyCodeLine{973 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{974 }
\DoxyCodeLine{975 \textcolor{preprocessor}{\#ifndef STBI\_NO\_HDR}}
\DoxyCodeLine{976 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_hdr\_to\_ldr(\textcolor{keywordtype}{float}   *data, \textcolor{keywordtype}{int} x, \textcolor{keywordtype}{int} y, \textcolor{keywordtype}{int} comp);}
\DoxyCodeLine{977 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{978 }
\DoxyCodeLine{979 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_vertically\_flip\_on\_load = 0;}
\DoxyCodeLine{980 }
\DoxyCodeLine{981 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void} \mbox{\hyperlink{stb__image_8h_ab89c177fc52f1bb2dc1c05e48129a0a4}{stbi\_set\_flip\_vertically\_on\_load}}(\textcolor{keywordtype}{int} flag\_true\_if\_should\_flip)}
\DoxyCodeLine{982 \{}
\DoxyCodeLine{983     stbi\_\_vertically\_flip\_on\_load = flag\_true\_if\_should\_flip;}
\DoxyCodeLine{984 \}}
\DoxyCodeLine{985 }
\DoxyCodeLine{986 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *stbi\_\_load\_main(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{987 \{}
\DoxyCodeLine{988 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_JPEG}}
\DoxyCodeLine{989    \textcolor{keywordflow}{if} (stbi\_\_jpeg\_test(s)) \textcolor{keywordflow}{return} stbi\_\_jpeg\_load(s,x,y,comp,req\_comp);}
\DoxyCodeLine{990 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{991 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_PNG}}
\DoxyCodeLine{992    \textcolor{keywordflow}{if} (stbi\_\_png\_test(s))  \textcolor{keywordflow}{return} stbi\_\_png\_load(s,x,y,comp,req\_comp);}
\DoxyCodeLine{993 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{994 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_BMP}}
\DoxyCodeLine{995    \textcolor{keywordflow}{if} (stbi\_\_bmp\_test(s))  \textcolor{keywordflow}{return} stbi\_\_bmp\_load(s,x,y,comp,req\_comp);}
\DoxyCodeLine{996 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{997 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_GIF}}
\DoxyCodeLine{998    \textcolor{keywordflow}{if} (stbi\_\_gif\_test(s))  \textcolor{keywordflow}{return} stbi\_\_gif\_load(s,x,y,comp,req\_comp);}
\DoxyCodeLine{999 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{1000 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_PSD}}
\DoxyCodeLine{1001    \textcolor{keywordflow}{if} (stbi\_\_psd\_test(s))  \textcolor{keywordflow}{return} stbi\_\_psd\_load(s,x,y,comp,req\_comp);}
\DoxyCodeLine{1002 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{1003 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_PIC}}
\DoxyCodeLine{1004    \textcolor{keywordflow}{if} (stbi\_\_pic\_test(s))  \textcolor{keywordflow}{return} stbi\_\_pic\_load(s,x,y,comp,req\_comp);}
\DoxyCodeLine{1005 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{1006 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_PNM}}
\DoxyCodeLine{1007    \textcolor{keywordflow}{if} (stbi\_\_pnm\_test(s))  \textcolor{keywordflow}{return} stbi\_\_pnm\_load(s,x,y,comp,req\_comp);}
\DoxyCodeLine{1008 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{1009 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_DDS}}
\DoxyCodeLine{1010    \textcolor{keywordflow}{if} (stbi\_\_dds\_test(s))  \textcolor{keywordflow}{return} stbi\_\_dds\_load(s,x,y,comp,req\_comp);}
\DoxyCodeLine{1011 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{1012 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_PVR}}
\DoxyCodeLine{1013    \textcolor{keywordflow}{if} (stbi\_\_pvr\_test(s))  \textcolor{keywordflow}{return} stbi\_\_pvr\_load(s,x,y,comp,req\_comp);}
\DoxyCodeLine{1014 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{1015 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_PKM}}
\DoxyCodeLine{1016    \textcolor{keywordflow}{if} (stbi\_\_pkm\_test(s))  \textcolor{keywordflow}{return} stbi\_\_pkm\_load(s,x,y,comp,req\_comp);}
\DoxyCodeLine{1017 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{1018 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_HDR}}
\DoxyCodeLine{1019    \textcolor{keywordflow}{if} (stbi\_\_hdr\_test(s)) \{}
\DoxyCodeLine{1020       \textcolor{keywordtype}{float} *hdr = stbi\_\_hdr\_load(s, x,y,comp,req\_comp);}
\DoxyCodeLine{1021       \textcolor{keywordflow}{return} stbi\_\_hdr\_to\_ldr(hdr, *x, *y, req\_comp ? req\_comp : *comp);}
\DoxyCodeLine{1022    \}}
\DoxyCodeLine{1023 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{1024 }
\DoxyCodeLine{1025 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_TGA}}
\DoxyCodeLine{1026    \textcolor{comment}{// test tga last because it's a crappy test!}}
\DoxyCodeLine{1027    \textcolor{keywordflow}{if} (stbi\_\_tga\_test(s))}
\DoxyCodeLine{1028       \textcolor{keywordflow}{return} stbi\_\_tga\_load(s,x,y,comp,req\_comp);}
\DoxyCodeLine{1029 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{1030 }
\DoxyCodeLine{1031    \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}unknown image type"{}}, \textcolor{stringliteral}{"{}Image not of any known type, or corrupt"{}});}
\DoxyCodeLine{1032 \}}
\DoxyCodeLine{1033 }
\DoxyCodeLine{1034 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *stbi\_\_load\_flip(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{1035 \{}
\DoxyCodeLine{1036    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *result = stbi\_\_load\_main(s, x, y, comp, req\_comp);}
\DoxyCodeLine{1037 }
\DoxyCodeLine{1038    \textcolor{keywordflow}{if} (stbi\_\_vertically\_flip\_on\_load \&\& result != NULL) \{}
\DoxyCodeLine{1039       \textcolor{keywordtype}{int} w = *x, h = *y;}
\DoxyCodeLine{1040       \textcolor{keywordtype}{int} depth = req\_comp ? req\_comp : *comp;}
\DoxyCodeLine{1041       \textcolor{keywordtype}{int} row,col,z;}
\DoxyCodeLine{1042       \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} temp;}
\DoxyCodeLine{1043 }
\DoxyCodeLine{1044       \textcolor{comment}{// @OPTIMIZE: use a bigger temp buffer and memcpy multiple pixels at once}}
\DoxyCodeLine{1045       \textcolor{keywordflow}{for} (row = 0; row < (h>>1); row++) \{}
\DoxyCodeLine{1046          \textcolor{keywordflow}{for} (col = 0; col < w; col++) \{}
\DoxyCodeLine{1047             \textcolor{keywordflow}{for} (z = 0; z < depth; z++) \{}
\DoxyCodeLine{1048                temp = result[(row * w + col) * depth + z];}
\DoxyCodeLine{1049                result[(row * w + col) * depth + z] = result[((h -\/ row -\/ 1) * w + col) * depth + z];}
\DoxyCodeLine{1050                result[((h -\/ row -\/ 1) * w + col) * depth + z] = temp;}
\DoxyCodeLine{1051             \}}
\DoxyCodeLine{1052          \}}
\DoxyCodeLine{1053       \}}
\DoxyCodeLine{1054    \}}
\DoxyCodeLine{1055 }
\DoxyCodeLine{1056    \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{1057 \}}
\DoxyCodeLine{1058 }
\DoxyCodeLine{1059 \textcolor{preprocessor}{\#ifndef STBI\_NO\_HDR}}
\DoxyCodeLine{1060 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_float\_postprocess(\textcolor{keywordtype}{float} *result, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{1061 \{}
\DoxyCodeLine{1062    \textcolor{keywordflow}{if} (stbi\_\_vertically\_flip\_on\_load \&\& result != NULL) \{}
\DoxyCodeLine{1063       \textcolor{keywordtype}{int} w = *x, h = *y;}
\DoxyCodeLine{1064       \textcolor{keywordtype}{int} depth = req\_comp ? req\_comp : *comp;}
\DoxyCodeLine{1065       \textcolor{keywordtype}{int} row,col,z;}
\DoxyCodeLine{1066       \textcolor{keywordtype}{float} temp;}
\DoxyCodeLine{1067 }
\DoxyCodeLine{1068       \textcolor{comment}{// @OPTIMIZE: use a bigger temp buffer and memcpy multiple pixels at once}}
\DoxyCodeLine{1069       \textcolor{keywordflow}{for} (row = 0; row < (h>>1); row++) \{}
\DoxyCodeLine{1070          \textcolor{keywordflow}{for} (col = 0; col < w; col++) \{}
\DoxyCodeLine{1071             \textcolor{keywordflow}{for} (z = 0; z < depth; z++) \{}
\DoxyCodeLine{1072                temp = result[(row * w + col) * depth + z];}
\DoxyCodeLine{1073                result[(row * w + col) * depth + z] = result[((h -\/ row -\/ 1) * w + col) * depth + z];}
\DoxyCodeLine{1074                result[((h -\/ row -\/ 1) * w + col) * depth + z] = temp;}
\DoxyCodeLine{1075             \}}
\DoxyCodeLine{1076          \}}
\DoxyCodeLine{1077       \}}
\DoxyCodeLine{1078    \}}
\DoxyCodeLine{1079 \}}
\DoxyCodeLine{1080 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{1081 }
\DoxyCodeLine{1082 \textcolor{preprocessor}{\#ifndef STBI\_NO\_STDIO}}
\DoxyCodeLine{1083 }
\DoxyCodeLine{1084 \textcolor{keyword}{static} FILE *stbi\_\_fopen(\textcolor{keywordtype}{char} \textcolor{keyword}{const} *filename, \textcolor{keywordtype}{char} \textcolor{keyword}{const} *mode)}
\DoxyCodeLine{1085 \{}
\DoxyCodeLine{1086    FILE *f;}
\DoxyCodeLine{1087 \textcolor{preprocessor}{\#if defined(\_MSC\_VER) \&\& \_MSC\_VER >= 1400}}
\DoxyCodeLine{1088    \textcolor{keywordflow}{if} (0 != fopen\_s(\&f, filename, mode))}
\DoxyCodeLine{1089       f=0;}
\DoxyCodeLine{1090 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{1091    f = fopen(filename, mode);}
\DoxyCodeLine{1092 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{1093    \textcolor{keywordflow}{return} f;}
\DoxyCodeLine{1094 \}}
\DoxyCodeLine{1095 }
\DoxyCodeLine{1096 }
\DoxyCodeLine{1097 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{stb__image_8h_a88d971acf5946e6196d56ef235245fb5}{stbi\_load}}(\textcolor{keywordtype}{char} \textcolor{keyword}{const} *filename, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{1098 \{}
\DoxyCodeLine{1099    FILE *f = stbi\_\_fopen(filename, \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{1100    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *result;}
\DoxyCodeLine{1101    \textcolor{keywordflow}{if} (!f) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}can't fopen"{}}, \textcolor{stringliteral}{"{}Unable to open file"{}});}
\DoxyCodeLine{1102    result = \mbox{\hyperlink{stb__image_8h_ae90dc4d380193fd2583f48c1b2fd8748}{stbi\_load\_from\_file}}(f,x,y,comp,req\_comp);}
\DoxyCodeLine{1103    fclose(f);}
\DoxyCodeLine{1104    \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{1105 \}}
\DoxyCodeLine{1106 }
\DoxyCodeLine{1107 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{stb__image_8h_ae90dc4d380193fd2583f48c1b2fd8748}{stbi\_load\_from\_file}}(FILE *f, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{1108 \{}
\DoxyCodeLine{1109    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *result;}
\DoxyCodeLine{1110    \mbox{\hyperlink{structstbi____context}{stbi\_\_context}} s;}
\DoxyCodeLine{1111    stbi\_\_start\_file(\&s,f);}
\DoxyCodeLine{1112    result = stbi\_\_load\_flip(\&s,x,y,comp,req\_comp);}
\DoxyCodeLine{1113    \textcolor{keywordflow}{if} (result) \{}
\DoxyCodeLine{1114       \textcolor{comment}{// need to 'unget' all the characters in the IO buffer}}
\DoxyCodeLine{1115       fseek(f, -\/ (\textcolor{keywordtype}{int}) (s.\mbox{\hyperlink{structstbi____context_ae82a6eaacfa751b0e5110e2ad7432d7a}{img\_buffer\_end}} -\/ s.\mbox{\hyperlink{structstbi____context_a2f6f99cb44681558cd74468ff9ccf9b2}{img\_buffer}}), SEEK\_CUR);}
\DoxyCodeLine{1116    \}}
\DoxyCodeLine{1117    \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{1118 \}}
\DoxyCodeLine{1119 \textcolor{preprocessor}{\#endif }}
\DoxyCodeLine{1120 }
\DoxyCodeLine{1121 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{stb__image_8h_a9f51ff5c8b32ef0777153ac699dd5849}{stbi\_load\_from\_memory}}(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \textcolor{keyword}{const} *buffer, \textcolor{keywordtype}{int} len, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{1122 \{}
\DoxyCodeLine{1123    \mbox{\hyperlink{structstbi____context}{stbi\_\_context}} s;}
\DoxyCodeLine{1124    stbi\_\_start\_mem(\&s,buffer,len);}
\DoxyCodeLine{1125    \textcolor{keywordflow}{return} stbi\_\_load\_flip(\&s,x,y,comp,req\_comp);}
\DoxyCodeLine{1126 \}}
\DoxyCodeLine{1127 }
\DoxyCodeLine{1128 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{stb__image_8h_a2a731c44bec9f217beea03a44896b47c}{stbi\_load\_from\_callbacks}}(\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} \textcolor{keyword}{const} *clbk, \textcolor{keywordtype}{void} *user, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{1129 \{}
\DoxyCodeLine{1130    \mbox{\hyperlink{structstbi____context}{stbi\_\_context}} s;}
\DoxyCodeLine{1131    stbi\_\_start\_callbacks(\&s, (\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} *) clbk, user);}
\DoxyCodeLine{1132    \textcolor{keywordflow}{return} stbi\_\_load\_flip(\&s,x,y,comp,req\_comp);}
\DoxyCodeLine{1133 \}}
\DoxyCodeLine{1134 }
\DoxyCodeLine{1135 \textcolor{preprocessor}{\#ifndef STBI\_NO\_LINEAR}}
\DoxyCodeLine{1136 \textcolor{keyword}{static} \textcolor{keywordtype}{float} *stbi\_\_loadf\_main(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{1137 \{}
\DoxyCodeLine{1138    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *data;}
\DoxyCodeLine{1139 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_HDR}}
\DoxyCodeLine{1140    \textcolor{keywordflow}{if} (stbi\_\_hdr\_test(s)) \{}
\DoxyCodeLine{1141       \textcolor{keywordtype}{float} *hdr\_data = stbi\_\_hdr\_load(s,x,y,comp,req\_comp);}
\DoxyCodeLine{1142       \textcolor{keywordflow}{if} (hdr\_data)}
\DoxyCodeLine{1143          stbi\_\_float\_postprocess(hdr\_data,x,y,comp,req\_comp);}
\DoxyCodeLine{1144       \textcolor{keywordflow}{return} hdr\_data;}
\DoxyCodeLine{1145    \}}
\DoxyCodeLine{1146 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{1147    data = stbi\_\_load\_flip(s, x, y, comp, req\_comp);}
\DoxyCodeLine{1148    \textcolor{keywordflow}{if} (data)}
\DoxyCodeLine{1149       \textcolor{keywordflow}{return} stbi\_\_ldr\_to\_hdr(data, *x, *y, req\_comp ? req\_comp : *comp);}
\DoxyCodeLine{1150    \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a747dfce8ff8728cf2d043dcb4df0757a}{stbi\_\_errpf}}(\textcolor{stringliteral}{"{}unknown image type"{}}, \textcolor{stringliteral}{"{}Image not of any known type, or corrupt"{}});}
\DoxyCodeLine{1151 \}}
\DoxyCodeLine{1152 }
\DoxyCodeLine{1153 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{float} *\mbox{\hyperlink{stb__image_8h_a80a2d6390909ac95e792a1daf2dcfef7}{stbi\_loadf\_from\_memory}}(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \textcolor{keyword}{const} *buffer, \textcolor{keywordtype}{int} len, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{1154 \{}
\DoxyCodeLine{1155    \mbox{\hyperlink{structstbi____context}{stbi\_\_context}} s;}
\DoxyCodeLine{1156    stbi\_\_start\_mem(\&s,buffer,len);}
\DoxyCodeLine{1157    \textcolor{keywordflow}{return} stbi\_\_loadf\_main(\&s,x,y,comp,req\_comp);}
\DoxyCodeLine{1158 \}}
\DoxyCodeLine{1159 }
\DoxyCodeLine{1160 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{float} *\mbox{\hyperlink{stb__image_8h_a566ed261e95b8bfa4053cac61066ae47}{stbi\_loadf\_from\_callbacks}}(\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} \textcolor{keyword}{const} *clbk, \textcolor{keywordtype}{void} *user, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{1161 \{}
\DoxyCodeLine{1162    \mbox{\hyperlink{structstbi____context}{stbi\_\_context}} s;}
\DoxyCodeLine{1163    stbi\_\_start\_callbacks(\&s, (\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} *) clbk, user);}
\DoxyCodeLine{1164    \textcolor{keywordflow}{return} stbi\_\_loadf\_main(\&s,x,y,comp,req\_comp);}
\DoxyCodeLine{1165 \}}
\DoxyCodeLine{1166 }
\DoxyCodeLine{1167 \textcolor{preprocessor}{\#ifndef STBI\_NO\_STDIO}}
\DoxyCodeLine{1168 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{float} *\mbox{\hyperlink{stb__image_8h_a72bbd253d4ce89eeced48ef1f3630526}{stbi\_loadf}}(\textcolor{keywordtype}{char} \textcolor{keyword}{const} *filename, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{1169 \{}
\DoxyCodeLine{1170    \textcolor{keywordtype}{float} *result;}
\DoxyCodeLine{1171    FILE *f = stbi\_\_fopen(filename, \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{1172    \textcolor{keywordflow}{if} (!f) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a747dfce8ff8728cf2d043dcb4df0757a}{stbi\_\_errpf}}(\textcolor{stringliteral}{"{}can't fopen"{}}, \textcolor{stringliteral}{"{}Unable to open file"{}});}
\DoxyCodeLine{1173    result = \mbox{\hyperlink{stb__image_8h_ad1383f8b3e989e14b1013183e061e1ab}{stbi\_loadf\_from\_file}}(f,x,y,comp,req\_comp);}
\DoxyCodeLine{1174    fclose(f);}
\DoxyCodeLine{1175    \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{1176 \}}
\DoxyCodeLine{1177 }
\DoxyCodeLine{1178 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{float} *\mbox{\hyperlink{stb__image_8h_ad1383f8b3e989e14b1013183e061e1ab}{stbi\_loadf\_from\_file}}(FILE *f, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{1179 \{}
\DoxyCodeLine{1180    \mbox{\hyperlink{structstbi____context}{stbi\_\_context}} s;}
\DoxyCodeLine{1181    stbi\_\_start\_file(\&s,f);}
\DoxyCodeLine{1182    \textcolor{keywordflow}{return} stbi\_\_loadf\_main(\&s,x,y,comp,req\_comp);}
\DoxyCodeLine{1183 \}}
\DoxyCodeLine{1184 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// !STBI\_NO\_STDIO}}
\DoxyCodeLine{1185 }
\DoxyCodeLine{1186 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// !STBI\_NO\_LINEAR}}
\DoxyCodeLine{1187 }
\DoxyCodeLine{1188 \textcolor{comment}{// these is-\/hdr-\/or-\/not is defined independent of whether STBI\_NO\_LINEAR is}}
\DoxyCodeLine{1189 \textcolor{comment}{// defined, for API simplicity; if STBI\_NO\_LINEAR is defined, it always}}
\DoxyCodeLine{1190 \textcolor{comment}{// reports false!}}
\DoxyCodeLine{1191 }
\DoxyCodeLine{1192 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int} \mbox{\hyperlink{stb__image_8h_a5cbc6f5cbb3b2d0d87ee959fcee9d23e}{stbi\_is\_hdr\_from\_memory}}(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \textcolor{keyword}{const} *buffer, \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{1193 \{}
\DoxyCodeLine{1194 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_HDR}}
\DoxyCodeLine{1195    \mbox{\hyperlink{structstbi____context}{stbi\_\_context}} s;}
\DoxyCodeLine{1196    stbi\_\_start\_mem(\&s,buffer,len);}
\DoxyCodeLine{1197    \textcolor{keywordflow}{return} stbi\_\_hdr\_test(\&s);}
\DoxyCodeLine{1198 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{1199    \mbox{\hyperlink{stb__image_8h_a3970ebac9a09e8116fa5855b334ca6ab}{STBI\_NOTUSED}}(buffer);}
\DoxyCodeLine{1200    \mbox{\hyperlink{stb__image_8h_a3970ebac9a09e8116fa5855b334ca6ab}{STBI\_NOTUSED}}(len);}
\DoxyCodeLine{1201    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1202 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{1203 \}}
\DoxyCodeLine{1204 }
\DoxyCodeLine{1205 \textcolor{preprocessor}{\#ifndef STBI\_NO\_STDIO}}
\DoxyCodeLine{1206 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}      \mbox{\hyperlink{stb__image_8h_ae70f9a302f7e87fd971075e7f758d55c}{stbi\_is\_hdr}}          (\textcolor{keywordtype}{char} \textcolor{keyword}{const} *filename)}
\DoxyCodeLine{1207 \{}
\DoxyCodeLine{1208    FILE *f = stbi\_\_fopen(filename, \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{1209    \textcolor{keywordtype}{int} result=0;}
\DoxyCodeLine{1210    \textcolor{keywordflow}{if} (f) \{}
\DoxyCodeLine{1211       result = \mbox{\hyperlink{stb__image_8h_aaf10d41631e1e9214fde1688bdbd8524}{stbi\_is\_hdr\_from\_file}}(f);}
\DoxyCodeLine{1212       fclose(f);}
\DoxyCodeLine{1213    \}}
\DoxyCodeLine{1214    \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{1215 \}}
\DoxyCodeLine{1216 }
\DoxyCodeLine{1217 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}      \mbox{\hyperlink{stb__image_8h_aaf10d41631e1e9214fde1688bdbd8524}{stbi\_is\_hdr\_from\_file}}(FILE *f)}
\DoxyCodeLine{1218 \{}
\DoxyCodeLine{1219 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_HDR}}
\DoxyCodeLine{1220    \mbox{\hyperlink{structstbi____context}{stbi\_\_context}} s;}
\DoxyCodeLine{1221    stbi\_\_start\_file(\&s,f);}
\DoxyCodeLine{1222    \textcolor{keywordflow}{return} stbi\_\_hdr\_test(\&s);}
\DoxyCodeLine{1223 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{1224    \mbox{\hyperlink{stb__image_8h_a3970ebac9a09e8116fa5855b334ca6ab}{STBI\_NOTUSED}}(f);}
\DoxyCodeLine{1225    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1226 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{1227 \}}
\DoxyCodeLine{1228 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// !STBI\_NO\_STDIO}}
\DoxyCodeLine{1229 }
\DoxyCodeLine{1230 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int}      \mbox{\hyperlink{stb__image_8h_af0e94f316fe1848f632517ca3c11d077}{stbi\_is\_hdr\_from\_callbacks}}(\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} \textcolor{keyword}{const} *clbk, \textcolor{keywordtype}{void} *user)}
\DoxyCodeLine{1231 \{}
\DoxyCodeLine{1232 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_HDR}}
\DoxyCodeLine{1233    \mbox{\hyperlink{structstbi____context}{stbi\_\_context}} s;}
\DoxyCodeLine{1234    stbi\_\_start\_callbacks(\&s, (\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} *) clbk, user);}
\DoxyCodeLine{1235    \textcolor{keywordflow}{return} stbi\_\_hdr\_test(\&s);}
\DoxyCodeLine{1236 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{1237    \mbox{\hyperlink{stb__image_8h_a3970ebac9a09e8116fa5855b334ca6ab}{STBI\_NOTUSED}}(clbk);}
\DoxyCodeLine{1238    \mbox{\hyperlink{stb__image_8h_a3970ebac9a09e8116fa5855b334ca6ab}{STBI\_NOTUSED}}(user);}
\DoxyCodeLine{1239    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1240 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{1241 \}}
\DoxyCodeLine{1242 }
\DoxyCodeLine{1243 \textcolor{keyword}{static} \textcolor{keywordtype}{float} stbi\_\_h2l\_gamma\_i=1.0f/2.2f, stbi\_\_h2l\_scale\_i=1.0f;}
\DoxyCodeLine{1244 \textcolor{keyword}{static} \textcolor{keywordtype}{float} stbi\_\_l2h\_gamma=2.2f, stbi\_\_l2h\_scale=1.0f;}
\DoxyCodeLine{1245 }
\DoxyCodeLine{1246 \textcolor{preprocessor}{\#ifndef STBI\_NO\_LINEAR}}
\DoxyCodeLine{1247 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void}   \mbox{\hyperlink{stb__image_8h_a1feccdcf726dcc6b5502e3efa85b7dbb}{stbi\_ldr\_to\_hdr\_gamma}}(\textcolor{keywordtype}{float} gamma) \{ stbi\_\_l2h\_gamma = gamma; \}}
\DoxyCodeLine{1248 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void}   \mbox{\hyperlink{stb__image_8h_af946583656a362a316b40c0421c20561}{stbi\_ldr\_to\_hdr\_scale}}(\textcolor{keywordtype}{float} \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}}) \{ stbi\_\_l2h\_scale = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}}; \}}
\DoxyCodeLine{1249 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{1250 }
\DoxyCodeLine{1251 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void}   \mbox{\hyperlink{stb__image_8h_ab18889e43518d6b4421b705782bb1b5e}{stbi\_hdr\_to\_ldr\_gamma}}(\textcolor{keywordtype}{float} gamma) \{ stbi\_\_h2l\_gamma\_i = 1/gamma; \}}
\DoxyCodeLine{1252 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void}   \mbox{\hyperlink{stb__image_8h_ae21cc1184eeb5cc814699f1ed62c5258}{stbi\_hdr\_to\_ldr\_scale}}(\textcolor{keywordtype}{float} \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}}) \{ stbi\_\_h2l\_scale\_i = 1/\mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}}; \}}
\DoxyCodeLine{1253 }
\DoxyCodeLine{1254 }
\DoxyCodeLine{1256 \textcolor{comment}{//}}
\DoxyCodeLine{1257 \textcolor{comment}{// Common code used by all image loaders}}
\DoxyCodeLine{1258 \textcolor{comment}{//}}
\DoxyCodeLine{1259 }
\DoxyCodeLine{1260 \textcolor{keyword}{enum}}
\DoxyCodeLine{1261 \{}
\DoxyCodeLine{1262    \mbox{\hyperlink{stb__image_8h_ab04a0655cd1e3bcac5e8f48c18df1a57a707d4eb401c81600fe01d18c101ba6c2}{STBI\_\_SCAN\_load}}=0,}
\DoxyCodeLine{1263    \mbox{\hyperlink{stb__image_8h_ab04a0655cd1e3bcac5e8f48c18df1a57a49475d1886e13403b20664a11e1e358b}{STBI\_\_SCAN\_type}},}
\DoxyCodeLine{1264    \mbox{\hyperlink{stb__image_8h_ab04a0655cd1e3bcac5e8f48c18df1a57a83675cb38c33efa3dd86b43996effea4}{STBI\_\_SCAN\_header}}}
\DoxyCodeLine{1265 \};}
\DoxyCodeLine{1266 }
\DoxyCodeLine{1267 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_refill\_buffer(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s)}
\DoxyCodeLine{1268 \{}
\DoxyCodeLine{1269    \textcolor{keywordtype}{int} n = (s-\/>\mbox{\hyperlink{structstbi____context_af29e836af996b4f948e4e89da2deb950}{io}}.\mbox{\hyperlink{structstbi__io__callbacks_a623e46b3a2a019611601409926283a88}{read}})(s-\/>\mbox{\hyperlink{structstbi____context_a1c42c824da190f71d058ef58fc7375fb}{io\_user\_data}},(\textcolor{keywordtype}{char}*)s-\/>\mbox{\hyperlink{structstbi____context_ad8908d7dcced42f211cc5fc22856dd1e}{buffer\_start}},s-\/>\mbox{\hyperlink{structstbi____context_a3d37b5210bea81183b4720df7d6a92e0}{buflen}});}
\DoxyCodeLine{1270    \textcolor{keywordflow}{if} (n == 0) \{}
\DoxyCodeLine{1271       \textcolor{comment}{// at end of file, treat same as if from memory, but need to handle case}}
\DoxyCodeLine{1272       \textcolor{comment}{// where s-\/>img\_buffer isn't pointing to safe memory, e.g. 0-\/byte file}}
\DoxyCodeLine{1273       s-\/>\mbox{\hyperlink{structstbi____context_ac8add53b6eed43af69052f871fdebe3c}{read\_from\_callbacks}} = 0;}
\DoxyCodeLine{1274       s-\/>\mbox{\hyperlink{structstbi____context_a2f6f99cb44681558cd74468ff9ccf9b2}{img\_buffer}} = s-\/>\mbox{\hyperlink{structstbi____context_ad8908d7dcced42f211cc5fc22856dd1e}{buffer\_start}};}
\DoxyCodeLine{1275       s-\/>\mbox{\hyperlink{structstbi____context_ae82a6eaacfa751b0e5110e2ad7432d7a}{img\_buffer\_end}} = s-\/>\mbox{\hyperlink{structstbi____context_ad8908d7dcced42f211cc5fc22856dd1e}{buffer\_start}}+1;}
\DoxyCodeLine{1276       *s-\/>\mbox{\hyperlink{structstbi____context_a2f6f99cb44681558cd74468ff9ccf9b2}{img\_buffer}} = 0;}
\DoxyCodeLine{1277    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1278       s-\/>\mbox{\hyperlink{structstbi____context_a2f6f99cb44681558cd74468ff9ccf9b2}{img\_buffer}} = s-\/>\mbox{\hyperlink{structstbi____context_ad8908d7dcced42f211cc5fc22856dd1e}{buffer\_start}};}
\DoxyCodeLine{1279       s-\/>\mbox{\hyperlink{structstbi____context_ae82a6eaacfa751b0e5110e2ad7432d7a}{img\_buffer\_end}} = s-\/>\mbox{\hyperlink{structstbi____context_ad8908d7dcced42f211cc5fc22856dd1e}{buffer\_start}} + n;}
\DoxyCodeLine{1280    \}}
\DoxyCodeLine{1281 \}}
\DoxyCodeLine{1282 }
\DoxyCodeLine{1283 \mbox{\hyperlink{stb__image_8h_a952111e72ed4262552e413e5938089b8}{stbi\_inline}} \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} stbi\_\_get8(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s)}
\DoxyCodeLine{1284 \{}
\DoxyCodeLine{1285    \textcolor{keywordflow}{if} (s-\/>\mbox{\hyperlink{structstbi____context_a2f6f99cb44681558cd74468ff9ccf9b2}{img\_buffer}} < s-\/>\mbox{\hyperlink{structstbi____context_ae82a6eaacfa751b0e5110e2ad7432d7a}{img\_buffer\_end}})}
\DoxyCodeLine{1286       \textcolor{keywordflow}{return} *s-\/>\mbox{\hyperlink{structstbi____context_a2f6f99cb44681558cd74468ff9ccf9b2}{img\_buffer}}++;}
\DoxyCodeLine{1287    \textcolor{keywordflow}{if} (s-\/>\mbox{\hyperlink{structstbi____context_ac8add53b6eed43af69052f871fdebe3c}{read\_from\_callbacks}}) \{}
\DoxyCodeLine{1288       stbi\_\_refill\_buffer(s);}
\DoxyCodeLine{1289       \textcolor{keywordflow}{return} *s-\/>\mbox{\hyperlink{structstbi____context_a2f6f99cb44681558cd74468ff9ccf9b2}{img\_buffer}}++;}
\DoxyCodeLine{1290    \}}
\DoxyCodeLine{1291    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1292 \}}
\DoxyCodeLine{1293 }
\DoxyCodeLine{1294 \mbox{\hyperlink{stb__image_8h_a952111e72ed4262552e413e5938089b8}{stbi\_inline}} \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_at\_eof(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s)}
\DoxyCodeLine{1295 \{}
\DoxyCodeLine{1296    \textcolor{keywordflow}{if} (s-\/>\mbox{\hyperlink{structstbi____context_af29e836af996b4f948e4e89da2deb950}{io}}.\mbox{\hyperlink{structstbi__io__callbacks_a623e46b3a2a019611601409926283a88}{read}}) \{}
\DoxyCodeLine{1297       \textcolor{keywordflow}{if} (!(s-\/>\mbox{\hyperlink{structstbi____context_af29e836af996b4f948e4e89da2deb950}{io}}.\mbox{\hyperlink{structstbi__io__callbacks_a319639db2f76e715eed7a7a974136832}{eof}})(s-\/>\mbox{\hyperlink{structstbi____context_a1c42c824da190f71d058ef58fc7375fb}{io\_user\_data}})) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1298       \textcolor{comment}{// if feof() is true, check if buffer = end}}
\DoxyCodeLine{1299       \textcolor{comment}{// special case: we've only got the special 0 character at the end}}
\DoxyCodeLine{1300       \textcolor{keywordflow}{if} (s-\/>\mbox{\hyperlink{structstbi____context_ac8add53b6eed43af69052f871fdebe3c}{read\_from\_callbacks}} == 0) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1301    \}}
\DoxyCodeLine{1302 }
\DoxyCodeLine{1303    \textcolor{keywordflow}{return} s-\/>\mbox{\hyperlink{structstbi____context_a2f6f99cb44681558cd74468ff9ccf9b2}{img\_buffer}} >= s-\/>\mbox{\hyperlink{structstbi____context_ae82a6eaacfa751b0e5110e2ad7432d7a}{img\_buffer\_end}};}
\DoxyCodeLine{1304 \}}
\DoxyCodeLine{1305 }
\DoxyCodeLine{1306 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_skip(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{1307 \{}
\DoxyCodeLine{1308    \textcolor{keywordflow}{if} (n < 0) \{}
\DoxyCodeLine{1309       s-\/>\mbox{\hyperlink{structstbi____context_a2f6f99cb44681558cd74468ff9ccf9b2}{img\_buffer}} = s-\/>\mbox{\hyperlink{structstbi____context_ae82a6eaacfa751b0e5110e2ad7432d7a}{img\_buffer\_end}};}
\DoxyCodeLine{1310       \textcolor{keywordflow}{return};}
\DoxyCodeLine{1311    \}}
\DoxyCodeLine{1312    \textcolor{keywordflow}{if} (s-\/>\mbox{\hyperlink{structstbi____context_af29e836af996b4f948e4e89da2deb950}{io}}.\mbox{\hyperlink{structstbi__io__callbacks_a623e46b3a2a019611601409926283a88}{read}}) \{}
\DoxyCodeLine{1313       \textcolor{keywordtype}{int} blen = (int) (s-\/>\mbox{\hyperlink{structstbi____context_ae82a6eaacfa751b0e5110e2ad7432d7a}{img\_buffer\_end}} -\/ s-\/>\mbox{\hyperlink{structstbi____context_a2f6f99cb44681558cd74468ff9ccf9b2}{img\_buffer}});}
\DoxyCodeLine{1314       \textcolor{keywordflow}{if} (blen < n) \{}
\DoxyCodeLine{1315          s-\/>\mbox{\hyperlink{structstbi____context_a2f6f99cb44681558cd74468ff9ccf9b2}{img\_buffer}} = s-\/>\mbox{\hyperlink{structstbi____context_ae82a6eaacfa751b0e5110e2ad7432d7a}{img\_buffer\_end}};}
\DoxyCodeLine{1316          (s-\/>\mbox{\hyperlink{structstbi____context_af29e836af996b4f948e4e89da2deb950}{io}}.\mbox{\hyperlink{structstbi__io__callbacks_a257aac5480a90a6c4b8fbe86c1b01068}{skip}})(s-\/>\mbox{\hyperlink{structstbi____context_a1c42c824da190f71d058ef58fc7375fb}{io\_user\_data}}, n -\/ blen);}
\DoxyCodeLine{1317          \textcolor{keywordflow}{return};}
\DoxyCodeLine{1318       \}}
\DoxyCodeLine{1319    \}}
\DoxyCodeLine{1320    s-\/>\mbox{\hyperlink{structstbi____context_a2f6f99cb44681558cd74468ff9ccf9b2}{img\_buffer}} += n;}
\DoxyCodeLine{1321 \}}
\DoxyCodeLine{1322 }
\DoxyCodeLine{1323 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_getn(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *buffer, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{1324 \{}
\DoxyCodeLine{1325    \textcolor{keywordflow}{if} (s-\/>\mbox{\hyperlink{structstbi____context_af29e836af996b4f948e4e89da2deb950}{io}}.\mbox{\hyperlink{structstbi__io__callbacks_a623e46b3a2a019611601409926283a88}{read}}) \{}
\DoxyCodeLine{1326       \textcolor{keywordtype}{int} blen = (int) (s-\/>\mbox{\hyperlink{structstbi____context_ae82a6eaacfa751b0e5110e2ad7432d7a}{img\_buffer\_end}} -\/ s-\/>\mbox{\hyperlink{structstbi____context_a2f6f99cb44681558cd74468ff9ccf9b2}{img\_buffer}});}
\DoxyCodeLine{1327       \textcolor{keywordflow}{if} (blen < n) \{}
\DoxyCodeLine{1328          \textcolor{keywordtype}{int} res, count;}
\DoxyCodeLine{1329 }
\DoxyCodeLine{1330          memcpy(buffer, s-\/>\mbox{\hyperlink{structstbi____context_a2f6f99cb44681558cd74468ff9ccf9b2}{img\_buffer}}, blen);}
\DoxyCodeLine{1331 }
\DoxyCodeLine{1332          count = (s-\/>\mbox{\hyperlink{structstbi____context_af29e836af996b4f948e4e89da2deb950}{io}}.\mbox{\hyperlink{structstbi__io__callbacks_a623e46b3a2a019611601409926283a88}{read}})(s-\/>\mbox{\hyperlink{structstbi____context_a1c42c824da190f71d058ef58fc7375fb}{io\_user\_data}}, (\textcolor{keywordtype}{char}*) buffer + blen, n -\/ blen);}
\DoxyCodeLine{1333          res = (count == (n-\/blen));}
\DoxyCodeLine{1334          s-\/>\mbox{\hyperlink{structstbi____context_a2f6f99cb44681558cd74468ff9ccf9b2}{img\_buffer}} = s-\/>\mbox{\hyperlink{structstbi____context_ae82a6eaacfa751b0e5110e2ad7432d7a}{img\_buffer\_end}};}
\DoxyCodeLine{1335          \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{1336       \}}
\DoxyCodeLine{1337    \}}
\DoxyCodeLine{1338 }
\DoxyCodeLine{1339    \textcolor{keywordflow}{if} (s-\/>\mbox{\hyperlink{structstbi____context_a2f6f99cb44681558cd74468ff9ccf9b2}{img\_buffer}}+n <= s-\/>img\_buffer\_end) \{}
\DoxyCodeLine{1340       memcpy(buffer, s-\/>\mbox{\hyperlink{structstbi____context_a2f6f99cb44681558cd74468ff9ccf9b2}{img\_buffer}}, n);}
\DoxyCodeLine{1341       s-\/>\mbox{\hyperlink{structstbi____context_a2f6f99cb44681558cd74468ff9ccf9b2}{img\_buffer}} += n;}
\DoxyCodeLine{1342       \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1343    \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{1344       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1345 \}}
\DoxyCodeLine{1346 }
\DoxyCodeLine{1347 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_get16be(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s)}
\DoxyCodeLine{1348 \{}
\DoxyCodeLine{1349    \textcolor{keywordtype}{int} z = stbi\_\_get8(s);}
\DoxyCodeLine{1350    \textcolor{keywordflow}{return} (z << 8) + stbi\_\_get8(s);}
\DoxyCodeLine{1351 \}}
\DoxyCodeLine{1352 }
\DoxyCodeLine{1353 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}} stbi\_\_get32be(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s)}
\DoxyCodeLine{1354 \{}
\DoxyCodeLine{1355    \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}} z = stbi\_\_get16be(s);}
\DoxyCodeLine{1356    \textcolor{keywordflow}{return} (z << 16) + stbi\_\_get16be(s);}
\DoxyCodeLine{1357 \}}
\DoxyCodeLine{1358 }
\DoxyCodeLine{1359 \textcolor{preprocessor}{\#if defined(STBI\_NO\_BMP) \&\& defined(STBI\_NO\_TGA) \&\& defined(STBI\_NO\_GIF)}}
\DoxyCodeLine{1360 \textcolor{comment}{// nothing}}
\DoxyCodeLine{1361 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{1362 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_get16le(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s)}
\DoxyCodeLine{1363 \{}
\DoxyCodeLine{1364    \textcolor{keywordtype}{int} z = stbi\_\_get8(s);}
\DoxyCodeLine{1365    \textcolor{keywordflow}{return} z + (stbi\_\_get8(s) << 8);}
\DoxyCodeLine{1366 \}}
\DoxyCodeLine{1367 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{1368 }
\DoxyCodeLine{1369 \textcolor{preprocessor}{\#ifndef STBI\_NO\_BMP}}
\DoxyCodeLine{1370 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}} stbi\_\_get32le(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s)}
\DoxyCodeLine{1371 \{}
\DoxyCodeLine{1372    \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}} z = stbi\_\_get16le(s);}
\DoxyCodeLine{1373    \textcolor{keywordflow}{return} z + (stbi\_\_get16le(s) << 16);}
\DoxyCodeLine{1374 \}}
\DoxyCodeLine{1375 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{1376 }
\DoxyCodeLine{1377 \textcolor{preprocessor}{\#define STBI\_\_BYTECAST(x)  ((stbi\_uc) ((x) \& 255))  }\textcolor{comment}{// truncate int to byte without warnings}}
\DoxyCodeLine{1378 }
\DoxyCodeLine{1379 }
\DoxyCodeLine{1381 \textcolor{comment}{//}}
\DoxyCodeLine{1382 \textcolor{comment}{//  generic converter from built-\/in img\_n to req\_comp}}
\DoxyCodeLine{1383 \textcolor{comment}{//    individual types do this automatically as much as possible (e.g. jpeg}}
\DoxyCodeLine{1384 \textcolor{comment}{//    does all cases internally since it needs to colorspace convert anyway,}}
\DoxyCodeLine{1385 \textcolor{comment}{//    and it never has alpha, so very few cases ). png can automatically}}
\DoxyCodeLine{1386 \textcolor{comment}{//    interleave an alpha=255 channel, but falls back to this for other cases}}
\DoxyCodeLine{1387 \textcolor{comment}{//}}
\DoxyCodeLine{1388 \textcolor{comment}{//  assume data buffer is malloced, so malloc a new one and free that one}}
\DoxyCodeLine{1389 \textcolor{comment}{//  only failure mode is malloc failing}}
\DoxyCodeLine{1390 }
\DoxyCodeLine{1391 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} stbi\_\_compute\_y(\textcolor{keywordtype}{int} r, \textcolor{keywordtype}{int} g, \textcolor{keywordtype}{int} b)}
\DoxyCodeLine{1392 \{}
\DoxyCodeLine{1393    \textcolor{keywordflow}{return} (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) (((r*77) + (g*150) +  (29*b)) >> 8);}
\DoxyCodeLine{1394 \}}
\DoxyCodeLine{1395 }
\DoxyCodeLine{1396 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *stbi\_\_convert\_format(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *data, \textcolor{keywordtype}{int} img\_n, \textcolor{keywordtype}{int} req\_comp, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} x, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} y)}
\DoxyCodeLine{1397 \{}
\DoxyCodeLine{1398    \textcolor{keywordtype}{int} i,j;}
\DoxyCodeLine{1399    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *good;}
\DoxyCodeLine{1400 }
\DoxyCodeLine{1401    \textcolor{keywordflow}{if} (req\_comp == img\_n) \textcolor{keywordflow}{return} data;}
\DoxyCodeLine{1402    \mbox{\hyperlink{stb__image_8h_abcf0d8bc32a73fd449d918aac2ed3882}{STBI\_ASSERT}}(req\_comp >= 1 \&\& req\_comp <= 4);}
\DoxyCodeLine{1403 }
\DoxyCodeLine{1404    good = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) stbi\_\_malloc(req\_comp * x * y);}
\DoxyCodeLine{1405    \textcolor{keywordflow}{if} (good == NULL) \{}
\DoxyCodeLine{1406       \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(data);}
\DoxyCodeLine{1407       \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{1408    \}}
\DoxyCodeLine{1409 }
\DoxyCodeLine{1410    \textcolor{keywordflow}{for} (j=0; j < (int) y; ++j) \{}
\DoxyCodeLine{1411       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *src  = data + j * x * img\_n   ;}
\DoxyCodeLine{1412       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *dest = good + j * x * req\_comp;}
\DoxyCodeLine{1413 }
\DoxyCodeLine{1414 \textcolor{preprocessor}{      \#define COMBO(a,b)  ((a)*8+(b))}}
\DoxyCodeLine{1415 \textcolor{preprocessor}{      \#define CASE(a,b)   case COMBO(a,b): for(i=x-\/1; i >= 0; -\/-\/i, src += a, dest += b)}}
\DoxyCodeLine{1416       \textcolor{comment}{// convert source image with img\_n components to one with req\_comp components;}}
\DoxyCodeLine{1417       \textcolor{comment}{// avoid switch per pixel, so use switch per scanline and massive macros}}
\DoxyCodeLine{1418       \textcolor{keywordflow}{switch} (\mbox{\hyperlink{stb__image_8h_adb2d77dae99f6d33dd9be33305186925}{COMBO}}(img\_n, req\_comp)) \{}
\DoxyCodeLine{1419          \mbox{\hyperlink{stb__image_8h_a313e27a7a8b70c45c2a0b450454b880c}{CASE}}(1,2) dest[0]=src[0], dest[1]=255; break;}
\DoxyCodeLine{1420          \mbox{\hyperlink{stb__image_8h_a313e27a7a8b70c45c2a0b450454b880c}{CASE}}(1,3) dest[0]=dest[1]=dest[2]=src[0]; break;}
\DoxyCodeLine{1421          \mbox{\hyperlink{stb__image_8h_a313e27a7a8b70c45c2a0b450454b880c}{CASE}}(1,4) dest[0]=dest[1]=dest[2]=src[0], dest[3]=255; break;}
\DoxyCodeLine{1422          \mbox{\hyperlink{stb__image_8h_a313e27a7a8b70c45c2a0b450454b880c}{CASE}}(2,1) dest[0]=src[0]; break;}
\DoxyCodeLine{1423          \mbox{\hyperlink{stb__image_8h_a313e27a7a8b70c45c2a0b450454b880c}{CASE}}(2,3) dest[0]=dest[1]=dest[2]=src[0]; break;}
\DoxyCodeLine{1424          \mbox{\hyperlink{stb__image_8h_a313e27a7a8b70c45c2a0b450454b880c}{CASE}}(2,4) dest[0]=dest[1]=dest[2]=src[0], dest[3]=src[1]; break;}
\DoxyCodeLine{1425          \mbox{\hyperlink{stb__image_8h_a313e27a7a8b70c45c2a0b450454b880c}{CASE}}(3,4) dest[0]=src[0],dest[1]=src[1],dest[2]=src[2],dest[3]=255; break;}
\DoxyCodeLine{1426          \mbox{\hyperlink{stb__image_8h_a313e27a7a8b70c45c2a0b450454b880c}{CASE}}(3,1) dest[0]=stbi\_\_compute\_y(src[0],src[1],src[2]); break;}
\DoxyCodeLine{1427          \mbox{\hyperlink{stb__image_8h_a313e27a7a8b70c45c2a0b450454b880c}{CASE}}(3,2) dest[0]=stbi\_\_compute\_y(src[0],src[1],src[2]), dest[1] = 255; break;}
\DoxyCodeLine{1428          \mbox{\hyperlink{stb__image_8h_a313e27a7a8b70c45c2a0b450454b880c}{CASE}}(4,1) dest[0]=stbi\_\_compute\_y(src[0],src[1],src[2]); break;}
\DoxyCodeLine{1429          \mbox{\hyperlink{stb__image_8h_a313e27a7a8b70c45c2a0b450454b880c}{CASE}}(4,2) dest[0]=stbi\_\_compute\_y(src[0],src[1],src[2]), dest[1] = src[3]; break;}
\DoxyCodeLine{1430          \mbox{\hyperlink{stb__image_8h_a313e27a7a8b70c45c2a0b450454b880c}{CASE}}(4,3) dest[0]=src[0],dest[1]=src[1],dest[2]=src[2]; break;}
\DoxyCodeLine{1431          default: \mbox{\hyperlink{stb__image_8h_abcf0d8bc32a73fd449d918aac2ed3882}{STBI\_ASSERT}}(0);}
\DoxyCodeLine{1432       \}}
\DoxyCodeLine{1433       \textcolor{preprocessor}{\#undef CASE}}
\DoxyCodeLine{1434    \}}
\DoxyCodeLine{1435 }
\DoxyCodeLine{1436    \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(data);}
\DoxyCodeLine{1437    \textcolor{keywordflow}{return} good;}
\DoxyCodeLine{1438 \}}
\DoxyCodeLine{1439 }
\DoxyCodeLine{1440 \textcolor{preprocessor}{\#ifndef STBI\_NO\_LINEAR}}
\DoxyCodeLine{1441 \textcolor{keyword}{static} \textcolor{keywordtype}{float}   *stbi\_\_ldr\_to\_hdr(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *data, \textcolor{keywordtype}{int} x, \textcolor{keywordtype}{int} y, \textcolor{keywordtype}{int} comp)}
\DoxyCodeLine{1442 \{}
\DoxyCodeLine{1443    \textcolor{keywordtype}{int} i,k,n;}
\DoxyCodeLine{1444    \textcolor{keywordtype}{float} *output = (\textcolor{keywordtype}{float} *) stbi\_\_malloc(x * y * comp * \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float}));}
\DoxyCodeLine{1445    \textcolor{keywordflow}{if} (output == NULL) \{ \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(data); \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a747dfce8ff8728cf2d043dcb4df0757a}{stbi\_\_errpf}}(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}}); \}}
\DoxyCodeLine{1446    \textcolor{comment}{// compute number of non-\/alpha components}}
\DoxyCodeLine{1447    \textcolor{keywordflow}{if} (comp \& 1) n = comp; \textcolor{keywordflow}{else} n = comp-\/1;}
\DoxyCodeLine{1448    \textcolor{keywordflow}{for} (i=0; i < x*y; ++i) \{}
\DoxyCodeLine{1449       \textcolor{keywordflow}{for} (k=0; k < n; ++k) \{}
\DoxyCodeLine{1450          output[i*comp + k] = (float) (pow(data[i*comp+k]/255.0f, stbi\_\_l2h\_gamma) * stbi\_\_l2h\_scale);}
\DoxyCodeLine{1451       \}}
\DoxyCodeLine{1452       \textcolor{keywordflow}{if} (k < comp) output[i*comp + k] = data[i*comp+k]/255.0f;}
\DoxyCodeLine{1453    \}}
\DoxyCodeLine{1454    \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(data);}
\DoxyCodeLine{1455    \textcolor{keywordflow}{return} output;}
\DoxyCodeLine{1456 \}}
\DoxyCodeLine{1457 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{1458 }
\DoxyCodeLine{1459 \textcolor{preprocessor}{\#ifndef STBI\_NO\_HDR}}
\DoxyCodeLine{1460 \textcolor{preprocessor}{\#define stbi\_\_float2int(x)   ((int) (x))}}
\DoxyCodeLine{1461 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_hdr\_to\_ldr(\textcolor{keywordtype}{float}   *data, \textcolor{keywordtype}{int} x, \textcolor{keywordtype}{int} y, \textcolor{keywordtype}{int} comp)}
\DoxyCodeLine{1462 \{}
\DoxyCodeLine{1463    \textcolor{keywordtype}{int} i,k,n;}
\DoxyCodeLine{1464    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *output = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc(x * y * comp);}
\DoxyCodeLine{1465    \textcolor{keywordflow}{if} (output == NULL) \{ \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(data); \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}}); \}}
\DoxyCodeLine{1466    \textcolor{comment}{// compute number of non-\/alpha components}}
\DoxyCodeLine{1467    \textcolor{keywordflow}{if} (comp \& 1) n = comp; \textcolor{keywordflow}{else} n = comp-\/1;}
\DoxyCodeLine{1468    \textcolor{keywordflow}{for} (i=0; i < x*y; ++i) \{}
\DoxyCodeLine{1469       \textcolor{keywordflow}{for} (k=0; k < n; ++k) \{}
\DoxyCodeLine{1470          \textcolor{keywordtype}{float} z = (float) pow(data[i*comp+k]*stbi\_\_h2l\_scale\_i, stbi\_\_h2l\_gamma\_i) * 255 + 0.5f;}
\DoxyCodeLine{1471          \textcolor{keywordflow}{if} (z < 0) z = 0;}
\DoxyCodeLine{1472          \textcolor{keywordflow}{if} (z > 255) z = 255;}
\DoxyCodeLine{1473          output[i*comp + k] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) \mbox{\hyperlink{stb__image_8h_aac8027fbb24924cd0b6a2e16bf1ff9ef}{stbi\_\_float2int}}(z);}
\DoxyCodeLine{1474       \}}
\DoxyCodeLine{1475       \textcolor{keywordflow}{if} (k < comp) \{}
\DoxyCodeLine{1476          \textcolor{keywordtype}{float} z = data[i*comp+k] * 255 + 0.5f;}
\DoxyCodeLine{1477          \textcolor{keywordflow}{if} (z < 0) z = 0;}
\DoxyCodeLine{1478          \textcolor{keywordflow}{if} (z > 255) z = 255;}
\DoxyCodeLine{1479          output[i*comp + k] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) \mbox{\hyperlink{stb__image_8h_aac8027fbb24924cd0b6a2e16bf1ff9ef}{stbi\_\_float2int}}(z);}
\DoxyCodeLine{1480       \}}
\DoxyCodeLine{1481    \}}
\DoxyCodeLine{1482    \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(data);}
\DoxyCodeLine{1483    \textcolor{keywordflow}{return} output;}
\DoxyCodeLine{1484 \}}
\DoxyCodeLine{1485 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{1486 }
\DoxyCodeLine{1488 \textcolor{comment}{//}}
\DoxyCodeLine{1489 \textcolor{comment}{//  "{}baseline"{} JPEG/JFIF decoder}}
\DoxyCodeLine{1490 \textcolor{comment}{//}}
\DoxyCodeLine{1491 \textcolor{comment}{//    simple implementation}}
\DoxyCodeLine{1492 \textcolor{comment}{//      -\/ doesn't support delayed output of y-\/dimension}}
\DoxyCodeLine{1493 \textcolor{comment}{//      -\/ simple interface (only one output format: 8-\/bit interleaved RGB)}}
\DoxyCodeLine{1494 \textcolor{comment}{//      -\/ doesn't try to recover corrupt jpegs}}
\DoxyCodeLine{1495 \textcolor{comment}{//      -\/ doesn't allow partial loading, loading multiple at once}}
\DoxyCodeLine{1496 \textcolor{comment}{//      -\/ still fast on x86 (copying globals into locals doesn't help x86)}}
\DoxyCodeLine{1497 \textcolor{comment}{//      -\/ allocates lots of intermediate memory (full size of all components)}}
\DoxyCodeLine{1498 \textcolor{comment}{//        -\/ non-\/interleaved case requires this anyway}}
\DoxyCodeLine{1499 \textcolor{comment}{//        -\/ allows good upsampling (see next)}}
\DoxyCodeLine{1500 \textcolor{comment}{//    high-\/quality}}
\DoxyCodeLine{1501 \textcolor{comment}{//      -\/ upsampled channels are bilinearly interpolated, even across blocks}}
\DoxyCodeLine{1502 \textcolor{comment}{//      -\/ quality integer IDCT derived from IJG's 'slow'}}
\DoxyCodeLine{1503 \textcolor{comment}{//    performance}}
\DoxyCodeLine{1504 \textcolor{comment}{//      -\/ fast huffman; reasonable integer IDCT}}
\DoxyCodeLine{1505 \textcolor{comment}{//      -\/ some SIMD kernels for common paths on targets with SSE2/NEON}}
\DoxyCodeLine{1506 \textcolor{comment}{//      -\/ uses a lot of intermediate memory, could cache poorly}}
\DoxyCodeLine{1507 }
\DoxyCodeLine{1508 \textcolor{preprocessor}{\#ifndef STBI\_NO\_JPEG}}
\DoxyCodeLine{1509 }
\DoxyCodeLine{1510 \textcolor{comment}{// huffman decoding acceleration}}
\DoxyCodeLine{1511 \textcolor{preprocessor}{\#define FAST\_BITS   9  }\textcolor{comment}{// larger handles more cases; smaller stomps less cache}}
\DoxyCodeLine{1512 }
\DoxyCodeLine{1513 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{1514 \{}
\DoxyCodeLine{1515    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}  fast[1 << \mbox{\hyperlink{stb__image_8h_add78822c51f4692289f2ce174bdf82b0}{FAST\_BITS}}];}
\DoxyCodeLine{1516    \textcolor{comment}{// weirdly, repacking this into AoS is a 10\% speed loss, instead of a win}}
\DoxyCodeLine{1517    \mbox{\hyperlink{stb__image_8h_a38c41d822de912df31fb56df26a9cb8c}{stbi\_\_uint16}} code[256];}
\DoxyCodeLine{1518    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}  values[256];}
\DoxyCodeLine{1519    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}  size[257];}
\DoxyCodeLine{1520    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} maxcode[18];}
\DoxyCodeLine{1521    \textcolor{keywordtype}{int}    delta[17];   \textcolor{comment}{// old 'firstsymbol' -\/ old 'firstcode'}}
\DoxyCodeLine{1522 \} \mbox{\hyperlink{structstbi____huffman}{stbi\_\_huffman}};}
\DoxyCodeLine{1523 }
\DoxyCodeLine{1524 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{1525 \{}
\DoxyCodeLine{1526    \mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}};}
\DoxyCodeLine{1527    \mbox{\hyperlink{structstbi____huffman}{stbi\_\_huffman}} huff\_dc[4];}
\DoxyCodeLine{1528    \mbox{\hyperlink{structstbi____huffman}{stbi\_\_huffman}} huff\_ac[4];}
\DoxyCodeLine{1529    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} dequant[4][64];}
\DoxyCodeLine{1530    \mbox{\hyperlink{stb__image_8h_ae4cbd54705261d6f2d44b97ca536f14f}{stbi\_\_int16}} fast\_ac[4][1 << \mbox{\hyperlink{stb__image_8h_add78822c51f4692289f2ce174bdf82b0}{FAST\_BITS}}];}
\DoxyCodeLine{1531 }
\DoxyCodeLine{1532 \textcolor{comment}{// sizes for components, interleaved MCUs}}
\DoxyCodeLine{1533    \textcolor{keywordtype}{int} \mbox{\hyperlink{structstbi____jpeg_a57bf03f54ecb42373e3fc9d5237ad4e3}{img\_h\_max}}, img\_v\_max;}
\DoxyCodeLine{1534    \textcolor{keywordtype}{int} \mbox{\hyperlink{structstbi____jpeg_a08b7f91e5758ac0ccce8571db74a345f}{img\_mcu\_x}}, img\_mcu\_y;}
\DoxyCodeLine{1535    \textcolor{keywordtype}{int} img\_mcu\_w, \mbox{\hyperlink{structstbi____jpeg_a83cfc18b9e514ed3ebc3bc5e39d29fca}{img\_mcu\_h}};}
\DoxyCodeLine{1536 }
\DoxyCodeLine{1537 \textcolor{comment}{// definition of jpeg image component}}
\DoxyCodeLine{1538    \textcolor{keyword}{struct}}
\DoxyCodeLine{1539    \{}
\DoxyCodeLine{1540       \textcolor{keywordtype}{int} \mbox{\hyperlink{structstbi____jpeg_a680d30ebc3bd831d6081fa02d41428c1}{id}};}
\DoxyCodeLine{1541       \textcolor{keywordtype}{int} \mbox{\hyperlink{structstbi____jpeg_aeba05300b505081d0ab14c17ee7b86f6}{h}},v;}
\DoxyCodeLine{1542       \textcolor{keywordtype}{int} \mbox{\hyperlink{structstbi____jpeg_a082cff2403c697d89ddf98a752d062cb}{tq}};}
\DoxyCodeLine{1543       \textcolor{keywordtype}{int} hd,\mbox{\hyperlink{structstbi____jpeg_a017151f0d70b86502dc3633559c69e09}{ha}};}
\DoxyCodeLine{1544       \textcolor{keywordtype}{int} \mbox{\hyperlink{structstbi____jpeg_a7d92e04a7285197a36b7de123a0174d1}{dc\_pred}};}
\DoxyCodeLine{1545 }
\DoxyCodeLine{1546       \textcolor{keywordtype}{int} x,y,w2,\mbox{\hyperlink{structstbi____jpeg_af0185c5e052c44d7c4d6ebc78ab72ddd}{h2}};}
\DoxyCodeLine{1547       \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{structstbi____jpeg_a7f2ba34d082f8eb97e290dbf78b29e64}{data}};}
\DoxyCodeLine{1548       \textcolor{keywordtype}{void} *raw\_data, *\mbox{\hyperlink{structstbi____jpeg_a34e5f94c6aa3761812f6b1d6fcaeadbd}{raw\_coeff}};}
\DoxyCodeLine{1549       \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{structstbi____jpeg_a6d0a94bbc12b3e067a68639499d10f37}{linebuf}};}
\DoxyCodeLine{1550       \textcolor{keywordtype}{short}   *\mbox{\hyperlink{structstbi____jpeg_a67b1b16da5ebbf5e93a05d8675584e83}{coeff}};   \textcolor{comment}{// progressive only}}
\DoxyCodeLine{1551       \textcolor{keywordtype}{int}      coeff\_w, \mbox{\hyperlink{structstbi____jpeg_af0262b366056b7bb00324e0c332ad0fc}{coeff\_h}}; \textcolor{comment}{// number of 8x8 coefficient blocks}}
\DoxyCodeLine{1552    \} img\_comp[4];}
\DoxyCodeLine{1553 }
\DoxyCodeLine{1554    \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}}   \mbox{\hyperlink{structstbi____jpeg_a52c547398159b326dc765e61e5fdb5f0}{code\_buffer}}; \textcolor{comment}{// jpeg entropy-\/coded buffer}}
\DoxyCodeLine{1555    \textcolor{keywordtype}{int}            \mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}};   \textcolor{comment}{// number of valid bits}}
\DoxyCodeLine{1556    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}  \mbox{\hyperlink{structstbi____jpeg_a36a53176d6134d68272fa32cb8afc740}{marker}};      \textcolor{comment}{// marker seen while filling entropy buffer}}
\DoxyCodeLine{1557    \textcolor{keywordtype}{int}            \mbox{\hyperlink{structstbi____jpeg_a3d924977bae77c20d09c47616d59e89d}{nomore}};      \textcolor{comment}{// flag if we saw a marker so must stop}}
\DoxyCodeLine{1558 }
\DoxyCodeLine{1559    \textcolor{keywordtype}{int}            \mbox{\hyperlink{structstbi____jpeg_ac843968318414002ea541b28e2cfa49f}{progressive}};}
\DoxyCodeLine{1560    \textcolor{keywordtype}{int}            \mbox{\hyperlink{structstbi____jpeg_afe2cf1246faa9ed08b205b68fc2fef8a}{spec\_start}};}
\DoxyCodeLine{1561    \textcolor{keywordtype}{int}            \mbox{\hyperlink{structstbi____jpeg_a854599aadc1e91857b7bd7d96cc2d7a8}{spec\_end}};}
\DoxyCodeLine{1562    \textcolor{keywordtype}{int}            \mbox{\hyperlink{structstbi____jpeg_aeb67c1bbc81d163623455c41c18e174e}{succ\_high}};}
\DoxyCodeLine{1563    \textcolor{keywordtype}{int}            \mbox{\hyperlink{structstbi____jpeg_a1d3c46e47c5282bb1566dca80c2980b6}{succ\_low}};}
\DoxyCodeLine{1564    \textcolor{keywordtype}{int}            \mbox{\hyperlink{structstbi____jpeg_a6796ffb96906a98fe764b7ebf08076b6}{eob\_run}};}
\DoxyCodeLine{1565 }
\DoxyCodeLine{1566    \textcolor{keywordtype}{int} scan\_n, order[4];}
\DoxyCodeLine{1567    \textcolor{keywordtype}{int} \mbox{\hyperlink{structstbi____jpeg_ae2caa61baf3d6b9f0349c530470e0c99}{restart\_interval}}, todo;}
\DoxyCodeLine{1568 }
\DoxyCodeLine{1569 \textcolor{comment}{// kernels}}
\DoxyCodeLine{1570    void (*idct\_block\_kernel)(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \textcolor{keywordtype}{int} out\_stride, \textcolor{keywordtype}{short} data[64]);}
\DoxyCodeLine{1571    void (*YCbCr\_to\_RGB\_kernel)(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \textcolor{keyword}{const} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *y, \textcolor{keyword}{const} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *pcb, \textcolor{keyword}{const} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *pcr, \textcolor{keywordtype}{int} count, \textcolor{keywordtype}{int} step);}
\DoxyCodeLine{1572    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *(*resample\_row\_hv\_2\_kernel)(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_near, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_far, \textcolor{keywordtype}{int} w, \textcolor{keywordtype}{int} hs);}
\DoxyCodeLine{1573 \} \mbox{\hyperlink{structstbi____jpeg}{stbi\_\_jpeg}};}
\DoxyCodeLine{1574 }
\DoxyCodeLine{1575 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_build\_huffman(\mbox{\hyperlink{structstbi____huffman}{stbi\_\_huffman}} *h, \textcolor{keywordtype}{int} *count)}
\DoxyCodeLine{1576 \{}
\DoxyCodeLine{1577    \textcolor{keywordtype}{int} i,j,k=0,code;}
\DoxyCodeLine{1578    \textcolor{comment}{// build size list for each symbol (from JPEG spec)}}
\DoxyCodeLine{1579    \textcolor{keywordflow}{for} (i=0; i < 16; ++i)}
\DoxyCodeLine{1580       \textcolor{keywordflow}{for} (j=0; j < count[i]; ++j)}
\DoxyCodeLine{1581          h-\/>\mbox{\hyperlink{structstbi____huffman_a51ddf86e49bd93ee45668782f05c0ba5}{size}}[k++] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) (i+1);}
\DoxyCodeLine{1582    h-\/>\mbox{\hyperlink{structstbi____huffman_a51ddf86e49bd93ee45668782f05c0ba5}{size}}[k] = 0;}
\DoxyCodeLine{1583 }
\DoxyCodeLine{1584    \textcolor{comment}{// compute actual symbols (from jpeg spec)}}
\DoxyCodeLine{1585    code = 0;}
\DoxyCodeLine{1586    k = 0;}
\DoxyCodeLine{1587    \textcolor{keywordflow}{for}(j=1; j <= 16; ++j) \{}
\DoxyCodeLine{1588       \textcolor{comment}{// compute delta to add to code to compute symbol id}}
\DoxyCodeLine{1589       h-\/>\mbox{\hyperlink{structstbi____huffman_a7112711943ce0cbbd439230192d98512}{delta}}[j] = k -\/ code;}
\DoxyCodeLine{1590       \textcolor{keywordflow}{if} (h-\/>\mbox{\hyperlink{structstbi____huffman_a51ddf86e49bd93ee45668782f05c0ba5}{size}}[k] == j) \{}
\DoxyCodeLine{1591          \textcolor{keywordflow}{while} (h-\/>\mbox{\hyperlink{structstbi____huffman_a51ddf86e49bd93ee45668782f05c0ba5}{size}}[k] == j)}
\DoxyCodeLine{1592             h-\/>\mbox{\hyperlink{structstbi____huffman_aa70a724ab31c2d0179a96100afeca81e}{code}}[k++] = (\mbox{\hyperlink{stb__image_8h_a38c41d822de912df31fb56df26a9cb8c}{stbi\_\_uint16}}) (code++);}
\DoxyCodeLine{1593          \textcolor{keywordflow}{if} (code-\/1 >= (1 << j)) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad code lengths"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{1594       \}}
\DoxyCodeLine{1595       \textcolor{comment}{// compute largest code + 1 for this size, preshifted as needed later}}
\DoxyCodeLine{1596       h-\/>\mbox{\hyperlink{structstbi____huffman_a1033bf96ad4bebcfea94749bc1928b7b}{maxcode}}[j] = code << (16-\/j);}
\DoxyCodeLine{1597       code <<= 1;}
\DoxyCodeLine{1598    \}}
\DoxyCodeLine{1599    h-\/>\mbox{\hyperlink{structstbi____huffman_a1033bf96ad4bebcfea94749bc1928b7b}{maxcode}}[j] = 0xffffffff;}
\DoxyCodeLine{1600 }
\DoxyCodeLine{1601    \textcolor{comment}{// build non-\/spec acceleration table; 255 is flag for not-\/accelerated}}
\DoxyCodeLine{1602    memset(h-\/>\mbox{\hyperlink{structstbi____huffman_ab0f422e190b614ca806af1edd43b5cf1}{fast}}, 255, 1 << \mbox{\hyperlink{stb__image_8h_add78822c51f4692289f2ce174bdf82b0}{FAST\_BITS}});}
\DoxyCodeLine{1603    \textcolor{keywordflow}{for} (i=0; i < k; ++i) \{}
\DoxyCodeLine{1604       \textcolor{keywordtype}{int} s = h-\/>\mbox{\hyperlink{structstbi____huffman_a51ddf86e49bd93ee45668782f05c0ba5}{size}}[i];}
\DoxyCodeLine{1605       \textcolor{keywordflow}{if} (s <= \mbox{\hyperlink{stb__image_8h_add78822c51f4692289f2ce174bdf82b0}{FAST\_BITS}}) \{}
\DoxyCodeLine{1606          \textcolor{keywordtype}{int} c = h-\/>\mbox{\hyperlink{structstbi____huffman_aa70a724ab31c2d0179a96100afeca81e}{code}}[i] << (\mbox{\hyperlink{stb__image_8h_add78822c51f4692289f2ce174bdf82b0}{FAST\_BITS}}-\/s);}
\DoxyCodeLine{1607          \textcolor{keywordtype}{int} m = 1 << (\mbox{\hyperlink{stb__image_8h_add78822c51f4692289f2ce174bdf82b0}{FAST\_BITS}}-\/s);}
\DoxyCodeLine{1608          \textcolor{keywordflow}{for} (j=0; j < m; ++j) \{}
\DoxyCodeLine{1609             h-\/>\mbox{\hyperlink{structstbi____huffman_ab0f422e190b614ca806af1edd43b5cf1}{fast}}[c+j] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) i;}
\DoxyCodeLine{1610          \}}
\DoxyCodeLine{1611       \}}
\DoxyCodeLine{1612    \}}
\DoxyCodeLine{1613    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1614 \}}
\DoxyCodeLine{1615 }
\DoxyCodeLine{1616 \textcolor{comment}{// build a table that decodes both magnitude and value of small ACs in}}
\DoxyCodeLine{1617 \textcolor{comment}{// one go.}}
\DoxyCodeLine{1618 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_build\_fast\_ac(\mbox{\hyperlink{stb__image_8h_ae4cbd54705261d6f2d44b97ca536f14f}{stbi\_\_int16}} *fast\_ac, \mbox{\hyperlink{structstbi____huffman}{stbi\_\_huffman}} *h)}
\DoxyCodeLine{1619 \{}
\DoxyCodeLine{1620    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{1621    \textcolor{keywordflow}{for} (i=0; i < (1 << \mbox{\hyperlink{stb__image_8h_add78822c51f4692289f2ce174bdf82b0}{FAST\_BITS}}); ++i) \{}
\DoxyCodeLine{1622       \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} fast = h-\/>\mbox{\hyperlink{structstbi____huffman_ab0f422e190b614ca806af1edd43b5cf1}{fast}}[i];}
\DoxyCodeLine{1623       fast\_ac[i] = 0;}
\DoxyCodeLine{1624       \textcolor{keywordflow}{if} (fast < 255) \{}
\DoxyCodeLine{1625          \textcolor{keywordtype}{int} rs = h-\/>\mbox{\hyperlink{structstbi____huffman_a7cbfc34798213d9d0bd1970347ed3d88}{values}}[fast];}
\DoxyCodeLine{1626          \textcolor{keywordtype}{int} run = (rs >> 4) \& 15;}
\DoxyCodeLine{1627          \textcolor{keywordtype}{int} magbits = rs \& 15;}
\DoxyCodeLine{1628          \textcolor{keywordtype}{int} len = h-\/>\mbox{\hyperlink{structstbi____huffman_a51ddf86e49bd93ee45668782f05c0ba5}{size}}[fast];}
\DoxyCodeLine{1629 }
\DoxyCodeLine{1630          \textcolor{keywordflow}{if} (magbits \&\& len + magbits <= \mbox{\hyperlink{stb__image_8h_add78822c51f4692289f2ce174bdf82b0}{FAST\_BITS}}) \{}
\DoxyCodeLine{1631             \textcolor{comment}{// magnitude code followed by receive\_extend code}}
\DoxyCodeLine{1632             \textcolor{keywordtype}{int} k = ((i << len) \& ((1 << \mbox{\hyperlink{stb__image_8h_add78822c51f4692289f2ce174bdf82b0}{FAST\_BITS}}) -\/ 1)) >> (\mbox{\hyperlink{stb__image_8h_add78822c51f4692289f2ce174bdf82b0}{FAST\_BITS}} -\/ magbits);}
\DoxyCodeLine{1633             \textcolor{keywordtype}{int} m = 1 << (magbits -\/ 1);}
\DoxyCodeLine{1634             \textcolor{keywordflow}{if} (k < m) k += (-\/1 << magbits) + 1;}
\DoxyCodeLine{1635             \textcolor{comment}{// if the result is small enough, we can fit it in fast\_ac table}}
\DoxyCodeLine{1636             \textcolor{keywordflow}{if} (k >= -\/128 \&\& k <= 127)}
\DoxyCodeLine{1637                fast\_ac[i] = (\mbox{\hyperlink{stb__image_8h_ae4cbd54705261d6f2d44b97ca536f14f}{stbi\_\_int16}}) ((k << 8) + (run << 4) + (len + magbits));}
\DoxyCodeLine{1638          \}}
\DoxyCodeLine{1639       \}}
\DoxyCodeLine{1640    \}}
\DoxyCodeLine{1641 \}}
\DoxyCodeLine{1642 }
\DoxyCodeLine{1643 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_grow\_buffer\_unsafe(\mbox{\hyperlink{structstbi____jpeg}{stbi\_\_jpeg}} *j)}
\DoxyCodeLine{1644 \{}
\DoxyCodeLine{1645    \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{1646       \textcolor{keywordtype}{int} b = j-\/>\mbox{\hyperlink{structstbi____jpeg_a3d924977bae77c20d09c47616d59e89d}{nomore}} ? 0 : stbi\_\_get8(j-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}});}
\DoxyCodeLine{1647       \textcolor{keywordflow}{if} (b == 0xff) \{}
\DoxyCodeLine{1648          \textcolor{keywordtype}{int} c = stbi\_\_get8(j-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}});}
\DoxyCodeLine{1649          \textcolor{keywordflow}{if} (c != 0) \{}
\DoxyCodeLine{1650             j-\/>\mbox{\hyperlink{structstbi____jpeg_a36a53176d6134d68272fa32cb8afc740}{marker}} = (\textcolor{keywordtype}{unsigned} char) c;}
\DoxyCodeLine{1651             j-\/>\mbox{\hyperlink{structstbi____jpeg_a3d924977bae77c20d09c47616d59e89d}{nomore}} = 1;}
\DoxyCodeLine{1652             \textcolor{keywordflow}{return};}
\DoxyCodeLine{1653          \}}
\DoxyCodeLine{1654       \}}
\DoxyCodeLine{1655       j-\/>\mbox{\hyperlink{structstbi____jpeg_a52c547398159b326dc765e61e5fdb5f0}{code\_buffer}} |= b << (24 -\/ j-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}});}
\DoxyCodeLine{1656       j-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}} += 8;}
\DoxyCodeLine{1657    \} \textcolor{keywordflow}{while} (j-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}} <= 24);}
\DoxyCodeLine{1658 \}}
\DoxyCodeLine{1659 }
\DoxyCodeLine{1660 \textcolor{comment}{// (1 << n) -\/ 1}}
\DoxyCodeLine{1661 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}} stbi\_\_bmask[17]=\{0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535\};}
\DoxyCodeLine{1662 }
\DoxyCodeLine{1663 \textcolor{comment}{// decode a jpeg huffman value from the bitstream}}
\DoxyCodeLine{1664 \mbox{\hyperlink{stb__image_8h_a952111e72ed4262552e413e5938089b8}{stbi\_inline}} \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_jpeg\_huff\_decode(\mbox{\hyperlink{structstbi____jpeg}{stbi\_\_jpeg}} *j, \mbox{\hyperlink{structstbi____huffman}{stbi\_\_huffman}} *h)}
\DoxyCodeLine{1665 \{}
\DoxyCodeLine{1666    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} temp;}
\DoxyCodeLine{1667    \textcolor{keywordtype}{int} c,k;}
\DoxyCodeLine{1668 }
\DoxyCodeLine{1669    \textcolor{keywordflow}{if} (j-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}} < 16) stbi\_\_grow\_buffer\_unsafe(j);}
\DoxyCodeLine{1670 }
\DoxyCodeLine{1671    \textcolor{comment}{// look at the top FAST\_BITS and determine what symbol ID it is,}}
\DoxyCodeLine{1672    \textcolor{comment}{// if the code is <= FAST\_BITS}}
\DoxyCodeLine{1673    c = (j-\/>\mbox{\hyperlink{structstbi____jpeg_a52c547398159b326dc765e61e5fdb5f0}{code\_buffer}} >> (32 -\/ \mbox{\hyperlink{stb__image_8h_add78822c51f4692289f2ce174bdf82b0}{FAST\_BITS}})) \& ((1 << \mbox{\hyperlink{stb__image_8h_add78822c51f4692289f2ce174bdf82b0}{FAST\_BITS}})-\/1);}
\DoxyCodeLine{1674    k = h-\/>\mbox{\hyperlink{structstbi____huffman_ab0f422e190b614ca806af1edd43b5cf1}{fast}}[c];}
\DoxyCodeLine{1675    \textcolor{keywordflow}{if} (k < 255) \{}
\DoxyCodeLine{1676       \textcolor{keywordtype}{int} s = h-\/>\mbox{\hyperlink{structstbi____huffman_a51ddf86e49bd93ee45668782f05c0ba5}{size}}[k];}
\DoxyCodeLine{1677       \textcolor{keywordflow}{if} (s > j-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}})}
\DoxyCodeLine{1678          \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{1679       j-\/>\mbox{\hyperlink{structstbi____jpeg_a52c547398159b326dc765e61e5fdb5f0}{code\_buffer}} <<= s;}
\DoxyCodeLine{1680       j-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}} -\/= s;}
\DoxyCodeLine{1681       \textcolor{keywordflow}{return} h-\/>\mbox{\hyperlink{structstbi____huffman_a7cbfc34798213d9d0bd1970347ed3d88}{values}}[k];}
\DoxyCodeLine{1682    \}}
\DoxyCodeLine{1683 }
\DoxyCodeLine{1684    \textcolor{comment}{// naive test is to shift the code\_buffer down so k bits are}}
\DoxyCodeLine{1685    \textcolor{comment}{// valid, then test against maxcode. To speed this up, we've}}
\DoxyCodeLine{1686    \textcolor{comment}{// preshifted maxcode left so that it has (16-\/k) 0s at the}}
\DoxyCodeLine{1687    \textcolor{comment}{// end; in other words, regardless of the number of bits, it}}
\DoxyCodeLine{1688    \textcolor{comment}{// wants to be compared against something shifted to have 16;}}
\DoxyCodeLine{1689    \textcolor{comment}{// that way we don't need to shift inside the loop.}}
\DoxyCodeLine{1690    temp = j-\/>\mbox{\hyperlink{structstbi____jpeg_a52c547398159b326dc765e61e5fdb5f0}{code\_buffer}} >> 16;}
\DoxyCodeLine{1691    \textcolor{keywordflow}{for} (k=\mbox{\hyperlink{stb__image_8h_add78822c51f4692289f2ce174bdf82b0}{FAST\_BITS}}+1 ; ; ++k)}
\DoxyCodeLine{1692       \textcolor{keywordflow}{if} (temp < h-\/>maxcode[k])}
\DoxyCodeLine{1693          \textcolor{keywordflow}{break};}
\DoxyCodeLine{1694    \textcolor{keywordflow}{if} (k == 17) \{}
\DoxyCodeLine{1695       \textcolor{comment}{// error! code not found}}
\DoxyCodeLine{1696       j-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}} -\/= 16;}
\DoxyCodeLine{1697       \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{1698    \}}
\DoxyCodeLine{1699 }
\DoxyCodeLine{1700    \textcolor{keywordflow}{if} (k > j-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}})}
\DoxyCodeLine{1701       \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{1702 }
\DoxyCodeLine{1703    \textcolor{comment}{// convert the huffman code to the symbol id}}
\DoxyCodeLine{1704    c = ((j-\/>\mbox{\hyperlink{structstbi____jpeg_a52c547398159b326dc765e61e5fdb5f0}{code\_buffer}} >> (32 -\/ k)) \& stbi\_\_bmask[k]) + h-\/>\mbox{\hyperlink{structstbi____huffman_a7112711943ce0cbbd439230192d98512}{delta}}[k];}
\DoxyCodeLine{1705    \mbox{\hyperlink{stb__image_8h_abcf0d8bc32a73fd449d918aac2ed3882}{STBI\_ASSERT}}((((j-\/>\mbox{\hyperlink{structstbi____jpeg_a52c547398159b326dc765e61e5fdb5f0}{code\_buffer}}) >> (32 -\/ h-\/>\mbox{\hyperlink{structstbi____huffman_a51ddf86e49bd93ee45668782f05c0ba5}{size}}[c])) \& stbi\_\_bmask[h-\/>\mbox{\hyperlink{structstbi____huffman_a51ddf86e49bd93ee45668782f05c0ba5}{size}}[c]]) == h-\/>\mbox{\hyperlink{structstbi____huffman_aa70a724ab31c2d0179a96100afeca81e}{code}}[c]);}
\DoxyCodeLine{1706 }
\DoxyCodeLine{1707    \textcolor{comment}{// convert the id to a symbol}}
\DoxyCodeLine{1708    j-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}} -\/= k;}
\DoxyCodeLine{1709    j-\/>\mbox{\hyperlink{structstbi____jpeg_a52c547398159b326dc765e61e5fdb5f0}{code\_buffer}} <<= k;}
\DoxyCodeLine{1710    \textcolor{keywordflow}{return} h-\/>\mbox{\hyperlink{structstbi____huffman_a7cbfc34798213d9d0bd1970347ed3d88}{values}}[c];}
\DoxyCodeLine{1711 \}}
\DoxyCodeLine{1712 }
\DoxyCodeLine{1713 \textcolor{comment}{// bias[n] = (-\/1<<n) + 1}}
\DoxyCodeLine{1714 \textcolor{keyword}{static} \textcolor{keywordtype}{int} \textcolor{keyword}{const} stbi\_\_jbias[16] = \{0,-\/1,-\/3,-\/7,-\/15,-\/31,-\/63,-\/127,-\/255,-\/511,-\/1023,-\/2047,-\/4095,-\/8191,-\/16383,-\/32767\};}
\DoxyCodeLine{1715 }
\DoxyCodeLine{1716 \textcolor{comment}{// combined JPEG 'receive' and JPEG 'extend', since baseline}}
\DoxyCodeLine{1717 \textcolor{comment}{// always extends everything it receives.}}
\DoxyCodeLine{1718 \mbox{\hyperlink{stb__image_8h_a952111e72ed4262552e413e5938089b8}{stbi\_inline}} \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_extend\_receive(\mbox{\hyperlink{structstbi____jpeg}{stbi\_\_jpeg}} *j, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{1719 \{}
\DoxyCodeLine{1720    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} k;}
\DoxyCodeLine{1721    \textcolor{keywordtype}{int} sgn;}
\DoxyCodeLine{1722    \textcolor{keywordflow}{if} (j-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}} < n) stbi\_\_grow\_buffer\_unsafe(j);}
\DoxyCodeLine{1723 }
\DoxyCodeLine{1724    sgn = (\mbox{\hyperlink{stb__image_8h_aa22ffdc0f962b06610737eaab3ac6b63}{stbi\_\_int32}})j-\/>\mbox{\hyperlink{structstbi____jpeg_a52c547398159b326dc765e61e5fdb5f0}{code\_buffer}} >> 31; \textcolor{comment}{// sign bit is always in MSB}}
\DoxyCodeLine{1725    k = \mbox{\hyperlink{stb__image_8h_a9fbddf96684d05016c5c72fc7d54f076}{stbi\_lrot}}(j-\/>\mbox{\hyperlink{structstbi____jpeg_a52c547398159b326dc765e61e5fdb5f0}{code\_buffer}}, n);}
\DoxyCodeLine{1726    \mbox{\hyperlink{stb__image_8h_abcf0d8bc32a73fd449d918aac2ed3882}{STBI\_ASSERT}}(n >= 0 \&\& n < (\textcolor{keywordtype}{int}) (\textcolor{keyword}{sizeof}(stbi\_\_bmask)/\textcolor{keyword}{sizeof}(*stbi\_\_bmask)));}
\DoxyCodeLine{1727    j-\/>\mbox{\hyperlink{structstbi____jpeg_a52c547398159b326dc765e61e5fdb5f0}{code\_buffer}} = k \& \string~stbi\_\_bmask[n];}
\DoxyCodeLine{1728    k \&= stbi\_\_bmask[n];}
\DoxyCodeLine{1729    j-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}} -\/= n;}
\DoxyCodeLine{1730    \textcolor{keywordflow}{return} k + (stbi\_\_jbias[n] \& \string~sgn);}
\DoxyCodeLine{1731 \}}
\DoxyCodeLine{1732 }
\DoxyCodeLine{1733 \textcolor{comment}{// get some unsigned bits}}
\DoxyCodeLine{1734 \mbox{\hyperlink{stb__image_8h_a952111e72ed4262552e413e5938089b8}{stbi\_inline}} \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_jpeg\_get\_bits(\mbox{\hyperlink{structstbi____jpeg}{stbi\_\_jpeg}} *j, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{1735 \{}
\DoxyCodeLine{1736    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} k;}
\DoxyCodeLine{1737    \textcolor{keywordflow}{if} (j-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}} < n) stbi\_\_grow\_buffer\_unsafe(j);}
\DoxyCodeLine{1738    k = \mbox{\hyperlink{stb__image_8h_a9fbddf96684d05016c5c72fc7d54f076}{stbi\_lrot}}(j-\/>\mbox{\hyperlink{structstbi____jpeg_a52c547398159b326dc765e61e5fdb5f0}{code\_buffer}}, n);}
\DoxyCodeLine{1739    j-\/>\mbox{\hyperlink{structstbi____jpeg_a52c547398159b326dc765e61e5fdb5f0}{code\_buffer}} = k \& \string~stbi\_\_bmask[n];}
\DoxyCodeLine{1740    k \&= stbi\_\_bmask[n];}
\DoxyCodeLine{1741    j-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}} -\/= n;}
\DoxyCodeLine{1742    \textcolor{keywordflow}{return} k;}
\DoxyCodeLine{1743 \}}
\DoxyCodeLine{1744 }
\DoxyCodeLine{1745 \mbox{\hyperlink{stb__image_8h_a952111e72ed4262552e413e5938089b8}{stbi\_inline}} \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_jpeg\_get\_bit(\mbox{\hyperlink{structstbi____jpeg}{stbi\_\_jpeg}} *j)}
\DoxyCodeLine{1746 \{}
\DoxyCodeLine{1747    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} k;}
\DoxyCodeLine{1748    \textcolor{keywordflow}{if} (j-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}} < 1) stbi\_\_grow\_buffer\_unsafe(j);}
\DoxyCodeLine{1749    k = j-\/>\mbox{\hyperlink{structstbi____jpeg_a52c547398159b326dc765e61e5fdb5f0}{code\_buffer}};}
\DoxyCodeLine{1750    j-\/>\mbox{\hyperlink{structstbi____jpeg_a52c547398159b326dc765e61e5fdb5f0}{code\_buffer}} <<= 1;}
\DoxyCodeLine{1751    -\/-\/j-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}};}
\DoxyCodeLine{1752    \textcolor{keywordflow}{return} k \& 0x80000000;}
\DoxyCodeLine{1753 \}}
\DoxyCodeLine{1754 }
\DoxyCodeLine{1755 \textcolor{comment}{// given a value that's at position X in the zigzag stream,}}
\DoxyCodeLine{1756 \textcolor{comment}{// where does it appear in the 8x8 matrix coded as row-\/major?}}
\DoxyCodeLine{1757 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} stbi\_\_jpeg\_dezigzag[64+15] =}
\DoxyCodeLine{1758 \{}
\DoxyCodeLine{1759     0,  1,  8, 16,  9,  2,  3, 10,}
\DoxyCodeLine{1760    17, 24, 32, 25, 18, 11,  4,  5,}
\DoxyCodeLine{1761    12, 19, 26, 33, 40, 48, 41, 34,}
\DoxyCodeLine{1762    27, 20, 13,  6,  7, 14, 21, 28,}
\DoxyCodeLine{1763    35, 42, 49, 56, 57, 50, 43, 36,}
\DoxyCodeLine{1764    29, 22, 15, 23, 30, 37, 44, 51,}
\DoxyCodeLine{1765    58, 59, 52, 45, 38, 31, 39, 46,}
\DoxyCodeLine{1766    53, 60, 61, 54, 47, 55, 62, 63,}
\DoxyCodeLine{1767    \textcolor{comment}{// let corrupt input sample past end}}
\DoxyCodeLine{1768    63, 63, 63, 63, 63, 63, 63, 63,}
\DoxyCodeLine{1769    63, 63, 63, 63, 63, 63, 63}
\DoxyCodeLine{1770 \};}
\DoxyCodeLine{1771 }
\DoxyCodeLine{1772 \textcolor{comment}{// decode one 64-\/entry block-\/-\/}}
\DoxyCodeLine{1773 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_jpeg\_decode\_block(\mbox{\hyperlink{structstbi____jpeg}{stbi\_\_jpeg}} *j, \textcolor{keywordtype}{short} data[64], \mbox{\hyperlink{structstbi____huffman}{stbi\_\_huffman}} *hdc, \mbox{\hyperlink{structstbi____huffman}{stbi\_\_huffman}} *hac, \mbox{\hyperlink{stb__image_8h_ae4cbd54705261d6f2d44b97ca536f14f}{stbi\_\_int16}} *fac, \textcolor{keywordtype}{int} b, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *dequant)}
\DoxyCodeLine{1774 \{}
\DoxyCodeLine{1775    \textcolor{keywordtype}{int} diff,dc,k;}
\DoxyCodeLine{1776    \textcolor{keywordtype}{int} t;}
\DoxyCodeLine{1777 }
\DoxyCodeLine{1778    \textcolor{keywordflow}{if} (j-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}} < 16) stbi\_\_grow\_buffer\_unsafe(j);}
\DoxyCodeLine{1779    t = stbi\_\_jpeg\_huff\_decode(j, hdc);}
\DoxyCodeLine{1780    \textcolor{keywordflow}{if} (t < 0) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad huffman code"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{1781 }
\DoxyCodeLine{1782    \textcolor{comment}{// 0 all the ac values now so we can do it 32-\/bits at a time}}
\DoxyCodeLine{1783    memset(data,0,64*\textcolor{keyword}{sizeof}(data[0]));}
\DoxyCodeLine{1784 }
\DoxyCodeLine{1785    diff = t ? stbi\_\_extend\_receive(j, t) : 0;}
\DoxyCodeLine{1786    dc = j-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[b].\mbox{\hyperlink{structstbi____jpeg_a7d92e04a7285197a36b7de123a0174d1}{dc\_pred}} + diff;}
\DoxyCodeLine{1787    j-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[b].\mbox{\hyperlink{structstbi____jpeg_a7d92e04a7285197a36b7de123a0174d1}{dc\_pred}} = dc;}
\DoxyCodeLine{1788    data[0] = (short) (dc * dequant[0]);}
\DoxyCodeLine{1789 }
\DoxyCodeLine{1790    \textcolor{comment}{// decode AC components, see JPEG spec}}
\DoxyCodeLine{1791    k = 1;}
\DoxyCodeLine{1792    \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{1793       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} zig;}
\DoxyCodeLine{1794       \textcolor{keywordtype}{int} c,r,s;}
\DoxyCodeLine{1795       \textcolor{keywordflow}{if} (j-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}} < 16) stbi\_\_grow\_buffer\_unsafe(j);}
\DoxyCodeLine{1796       c = (j-\/>\mbox{\hyperlink{structstbi____jpeg_a52c547398159b326dc765e61e5fdb5f0}{code\_buffer}} >> (32 -\/ \mbox{\hyperlink{stb__image_8h_add78822c51f4692289f2ce174bdf82b0}{FAST\_BITS}})) \& ((1 << \mbox{\hyperlink{stb__image_8h_add78822c51f4692289f2ce174bdf82b0}{FAST\_BITS}})-\/1);}
\DoxyCodeLine{1797       r = fac[c];}
\DoxyCodeLine{1798       \textcolor{keywordflow}{if} (r) \{ \textcolor{comment}{// fast-\/AC path}}
\DoxyCodeLine{1799          k += (r >> 4) \& 15; \textcolor{comment}{// run}}
\DoxyCodeLine{1800          s = r \& 15; \textcolor{comment}{// combined length}}
\DoxyCodeLine{1801          j-\/>\mbox{\hyperlink{structstbi____jpeg_a52c547398159b326dc765e61e5fdb5f0}{code\_buffer}} <<= s;}
\DoxyCodeLine{1802          j-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}} -\/= s;}
\DoxyCodeLine{1803          \textcolor{comment}{// decode into unzigzag'd location}}
\DoxyCodeLine{1804          zig = stbi\_\_jpeg\_dezigzag[k++];}
\DoxyCodeLine{1805          data[zig] = (short) ((r >> 8) * dequant[zig]);}
\DoxyCodeLine{1806       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1807          \textcolor{keywordtype}{int} rs = stbi\_\_jpeg\_huff\_decode(j, hac);}
\DoxyCodeLine{1808          \textcolor{keywordflow}{if} (rs < 0) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad huffman code"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{1809          s = rs \& 15;}
\DoxyCodeLine{1810          r = rs >> 4;}
\DoxyCodeLine{1811          \textcolor{keywordflow}{if} (s == 0) \{}
\DoxyCodeLine{1812             \textcolor{keywordflow}{if} (rs != 0xf0) \textcolor{keywordflow}{break}; \textcolor{comment}{// end block}}
\DoxyCodeLine{1813             k += 16;}
\DoxyCodeLine{1814          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1815             k += r;}
\DoxyCodeLine{1816             \textcolor{comment}{// decode into unzigzag'd location}}
\DoxyCodeLine{1817             zig = stbi\_\_jpeg\_dezigzag[k++];}
\DoxyCodeLine{1818             data[zig] = (short) (stbi\_\_extend\_receive(j,s) * dequant[zig]);}
\DoxyCodeLine{1819          \}}
\DoxyCodeLine{1820       \}}
\DoxyCodeLine{1821    \} \textcolor{keywordflow}{while} (k < 64);}
\DoxyCodeLine{1822    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1823 \}}
\DoxyCodeLine{1824 }
\DoxyCodeLine{1825 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_jpeg\_decode\_block\_prog\_dc(\mbox{\hyperlink{structstbi____jpeg}{stbi\_\_jpeg}} *j, \textcolor{keywordtype}{short} data[64], \mbox{\hyperlink{structstbi____huffman}{stbi\_\_huffman}} *hdc, \textcolor{keywordtype}{int} b)}
\DoxyCodeLine{1826 \{}
\DoxyCodeLine{1827    \textcolor{keywordtype}{int} diff,dc;}
\DoxyCodeLine{1828    \textcolor{keywordtype}{int} t;}
\DoxyCodeLine{1829    \textcolor{keywordflow}{if} (j-\/>\mbox{\hyperlink{structstbi____jpeg_a854599aadc1e91857b7bd7d96cc2d7a8}{spec\_end}} != 0) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}can't merge dc and ac"{}}, \textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{1830 }
\DoxyCodeLine{1831    \textcolor{keywordflow}{if} (j-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}} < 16) stbi\_\_grow\_buffer\_unsafe(j);}
\DoxyCodeLine{1832 }
\DoxyCodeLine{1833    \textcolor{keywordflow}{if} (j-\/>\mbox{\hyperlink{structstbi____jpeg_aeb67c1bbc81d163623455c41c18e174e}{succ\_high}} == 0) \{}
\DoxyCodeLine{1834       \textcolor{comment}{// first scan for DC coefficient, must be first}}
\DoxyCodeLine{1835       memset(data,0,64*\textcolor{keyword}{sizeof}(data[0])); \textcolor{comment}{// 0 all the ac values now}}
\DoxyCodeLine{1836       t = stbi\_\_jpeg\_huff\_decode(j, hdc);}
\DoxyCodeLine{1837       diff = t ? stbi\_\_extend\_receive(j, t) : 0;}
\DoxyCodeLine{1838 }
\DoxyCodeLine{1839       dc = j-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[b].\mbox{\hyperlink{structstbi____jpeg_a7d92e04a7285197a36b7de123a0174d1}{dc\_pred}} + diff;}
\DoxyCodeLine{1840       j-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[b].\mbox{\hyperlink{structstbi____jpeg_a7d92e04a7285197a36b7de123a0174d1}{dc\_pred}} = dc;}
\DoxyCodeLine{1841       data[0] = (short) (dc << j-\/>\mbox{\hyperlink{structstbi____jpeg_a1d3c46e47c5282bb1566dca80c2980b6}{succ\_low}});}
\DoxyCodeLine{1842    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1843       \textcolor{comment}{// refinement scan for DC coefficient}}
\DoxyCodeLine{1844       \textcolor{keywordflow}{if} (stbi\_\_jpeg\_get\_bit(j))}
\DoxyCodeLine{1845          data[0] += (\textcolor{keywordtype}{short}) (1 << j-\/>\mbox{\hyperlink{structstbi____jpeg_a1d3c46e47c5282bb1566dca80c2980b6}{succ\_low}});}
\DoxyCodeLine{1846    \}}
\DoxyCodeLine{1847    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1848 \}}
\DoxyCodeLine{1849 }
\DoxyCodeLine{1850 \textcolor{comment}{// @OPTIMIZE: store non-\/zigzagged during the decode passes,}}
\DoxyCodeLine{1851 \textcolor{comment}{// and only de-\/zigzag when dequantizing}}
\DoxyCodeLine{1852 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_jpeg\_decode\_block\_prog\_ac(\mbox{\hyperlink{structstbi____jpeg}{stbi\_\_jpeg}} *j, \textcolor{keywordtype}{short} data[64], \mbox{\hyperlink{structstbi____huffman}{stbi\_\_huffman}} *hac, \mbox{\hyperlink{stb__image_8h_ae4cbd54705261d6f2d44b97ca536f14f}{stbi\_\_int16}} *fac)}
\DoxyCodeLine{1853 \{}
\DoxyCodeLine{1854    \textcolor{keywordtype}{int} k;}
\DoxyCodeLine{1855    \textcolor{keywordflow}{if} (j-\/>\mbox{\hyperlink{structstbi____jpeg_afe2cf1246faa9ed08b205b68fc2fef8a}{spec\_start}} == 0) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}can't merge dc and ac"{}}, \textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{1856 }
\DoxyCodeLine{1857    \textcolor{keywordflow}{if} (j-\/>\mbox{\hyperlink{structstbi____jpeg_aeb67c1bbc81d163623455c41c18e174e}{succ\_high}} == 0) \{}
\DoxyCodeLine{1858       \textcolor{keywordtype}{int} shift = j-\/>\mbox{\hyperlink{structstbi____jpeg_a1d3c46e47c5282bb1566dca80c2980b6}{succ\_low}};}
\DoxyCodeLine{1859 }
\DoxyCodeLine{1860       \textcolor{keywordflow}{if} (j-\/>\mbox{\hyperlink{structstbi____jpeg_a6796ffb96906a98fe764b7ebf08076b6}{eob\_run}}) \{}
\DoxyCodeLine{1861          -\/-\/j-\/>\mbox{\hyperlink{structstbi____jpeg_a6796ffb96906a98fe764b7ebf08076b6}{eob\_run}};}
\DoxyCodeLine{1862          \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1863       \}}
\DoxyCodeLine{1864 }
\DoxyCodeLine{1865       k = j-\/>\mbox{\hyperlink{structstbi____jpeg_afe2cf1246faa9ed08b205b68fc2fef8a}{spec\_start}};}
\DoxyCodeLine{1866       \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{1867          \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} zig;}
\DoxyCodeLine{1868          \textcolor{keywordtype}{int} c,r,s;}
\DoxyCodeLine{1869          \textcolor{keywordflow}{if} (j-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}} < 16) stbi\_\_grow\_buffer\_unsafe(j);}
\DoxyCodeLine{1870          c = (j-\/>\mbox{\hyperlink{structstbi____jpeg_a52c547398159b326dc765e61e5fdb5f0}{code\_buffer}} >> (32 -\/ \mbox{\hyperlink{stb__image_8h_add78822c51f4692289f2ce174bdf82b0}{FAST\_BITS}})) \& ((1 << \mbox{\hyperlink{stb__image_8h_add78822c51f4692289f2ce174bdf82b0}{FAST\_BITS}})-\/1);}
\DoxyCodeLine{1871          r = fac[c];}
\DoxyCodeLine{1872          \textcolor{keywordflow}{if} (r) \{ \textcolor{comment}{// fast-\/AC path}}
\DoxyCodeLine{1873             k += (r >> 4) \& 15; \textcolor{comment}{// run}}
\DoxyCodeLine{1874             s = r \& 15; \textcolor{comment}{// combined length}}
\DoxyCodeLine{1875             j-\/>\mbox{\hyperlink{structstbi____jpeg_a52c547398159b326dc765e61e5fdb5f0}{code\_buffer}} <<= s;}
\DoxyCodeLine{1876             j-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}} -\/= s;}
\DoxyCodeLine{1877             zig = stbi\_\_jpeg\_dezigzag[k++];}
\DoxyCodeLine{1878             data[zig] = (short) ((r >> 8) << shift);}
\DoxyCodeLine{1879          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1880             \textcolor{keywordtype}{int} rs = stbi\_\_jpeg\_huff\_decode(j, hac);}
\DoxyCodeLine{1881             \textcolor{keywordflow}{if} (rs < 0) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad huffman code"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{1882             s = rs \& 15;}
\DoxyCodeLine{1883             r = rs >> 4;}
\DoxyCodeLine{1884             \textcolor{keywordflow}{if} (s == 0) \{}
\DoxyCodeLine{1885                \textcolor{keywordflow}{if} (r < 15) \{}
\DoxyCodeLine{1886                   j-\/>\mbox{\hyperlink{structstbi____jpeg_a6796ffb96906a98fe764b7ebf08076b6}{eob\_run}} = (1 << r);}
\DoxyCodeLine{1887                   \textcolor{keywordflow}{if} (r)}
\DoxyCodeLine{1888                      j-\/>\mbox{\hyperlink{structstbi____jpeg_a6796ffb96906a98fe764b7ebf08076b6}{eob\_run}} += stbi\_\_jpeg\_get\_bits(j, r);}
\DoxyCodeLine{1889                   -\/-\/j-\/>\mbox{\hyperlink{structstbi____jpeg_a6796ffb96906a98fe764b7ebf08076b6}{eob\_run}};}
\DoxyCodeLine{1890                   \textcolor{keywordflow}{break};}
\DoxyCodeLine{1891                \}}
\DoxyCodeLine{1892                k += 16;}
\DoxyCodeLine{1893             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1894                k += r;}
\DoxyCodeLine{1895                zig = stbi\_\_jpeg\_dezigzag[k++];}
\DoxyCodeLine{1896                data[zig] = (short) (stbi\_\_extend\_receive(j,s) << shift);}
\DoxyCodeLine{1897             \}}
\DoxyCodeLine{1898          \}}
\DoxyCodeLine{1899       \} \textcolor{keywordflow}{while} (k <= j-\/>spec\_end);}
\DoxyCodeLine{1900    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1901       \textcolor{comment}{// refinement scan for these AC coefficients}}
\DoxyCodeLine{1902 }
\DoxyCodeLine{1903       \textcolor{keywordtype}{short} bit = (short) (1 << j-\/>\mbox{\hyperlink{structstbi____jpeg_a1d3c46e47c5282bb1566dca80c2980b6}{succ\_low}});}
\DoxyCodeLine{1904 }
\DoxyCodeLine{1905       \textcolor{keywordflow}{if} (j-\/>\mbox{\hyperlink{structstbi____jpeg_a6796ffb96906a98fe764b7ebf08076b6}{eob\_run}}) \{}
\DoxyCodeLine{1906          -\/-\/j-\/>\mbox{\hyperlink{structstbi____jpeg_a6796ffb96906a98fe764b7ebf08076b6}{eob\_run}};}
\DoxyCodeLine{1907          \textcolor{keywordflow}{for} (k = j-\/>\mbox{\hyperlink{structstbi____jpeg_afe2cf1246faa9ed08b205b68fc2fef8a}{spec\_start}}; k <= j-\/>spec\_end; ++k) \{}
\DoxyCodeLine{1908             \textcolor{keywordtype}{short} *p = \&data[stbi\_\_jpeg\_dezigzag[k]];}
\DoxyCodeLine{1909             \textcolor{keywordflow}{if} (*p != 0)}
\DoxyCodeLine{1910                \textcolor{keywordflow}{if} (stbi\_\_jpeg\_get\_bit(j))}
\DoxyCodeLine{1911                   \textcolor{keywordflow}{if} ((*p \& bit)==0) \{}
\DoxyCodeLine{1912                      \textcolor{keywordflow}{if} (*p > 0)}
\DoxyCodeLine{1913                         *p += bit;}
\DoxyCodeLine{1914                      \textcolor{keywordflow}{else}}
\DoxyCodeLine{1915                         *p -\/= bit;}
\DoxyCodeLine{1916                   \}}
\DoxyCodeLine{1917          \}}
\DoxyCodeLine{1918       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1919          k = j-\/>\mbox{\hyperlink{structstbi____jpeg_afe2cf1246faa9ed08b205b68fc2fef8a}{spec\_start}};}
\DoxyCodeLine{1920          \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{1921             \textcolor{keywordtype}{int} r,s;}
\DoxyCodeLine{1922             \textcolor{keywordtype}{int} rs = stbi\_\_jpeg\_huff\_decode(j, hac); \textcolor{comment}{// @OPTIMIZE see if we can use the fast path here, advance-\/by-\/r is so slow, eh}}
\DoxyCodeLine{1923             \textcolor{keywordflow}{if} (rs < 0) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad huffman code"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{1924             s = rs \& 15;}
\DoxyCodeLine{1925             r = rs >> 4;}
\DoxyCodeLine{1926             \textcolor{keywordflow}{if} (s == 0) \{}
\DoxyCodeLine{1927                \textcolor{keywordflow}{if} (r < 15) \{}
\DoxyCodeLine{1928                   j-\/>\mbox{\hyperlink{structstbi____jpeg_a6796ffb96906a98fe764b7ebf08076b6}{eob\_run}} = (1 << r) -\/ 1;}
\DoxyCodeLine{1929                   \textcolor{keywordflow}{if} (r)}
\DoxyCodeLine{1930                      j-\/>\mbox{\hyperlink{structstbi____jpeg_a6796ffb96906a98fe764b7ebf08076b6}{eob\_run}} += stbi\_\_jpeg\_get\_bits(j, r);}
\DoxyCodeLine{1931                   r = 64; \textcolor{comment}{// force end of block}}
\DoxyCodeLine{1932                \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1933                   \textcolor{comment}{// r=15 s=0 should write 16 0s, so we just do}}
\DoxyCodeLine{1934                   \textcolor{comment}{// a run of 15 0s and then write s (which is 0),}}
\DoxyCodeLine{1935                   \textcolor{comment}{// so we don't have to do anything special here}}
\DoxyCodeLine{1936                \}}
\DoxyCodeLine{1937             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1938                \textcolor{keywordflow}{if} (s != 1) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad huffman code"{}}, \textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{1939                \textcolor{comment}{// sign bit}}
\DoxyCodeLine{1940                \textcolor{keywordflow}{if} (stbi\_\_jpeg\_get\_bit(j))}
\DoxyCodeLine{1941                   s = bit;}
\DoxyCodeLine{1942                \textcolor{keywordflow}{else}}
\DoxyCodeLine{1943                   s = -\/bit;}
\DoxyCodeLine{1944             \}}
\DoxyCodeLine{1945 }
\DoxyCodeLine{1946             \textcolor{comment}{// advance by r}}
\DoxyCodeLine{1947             \textcolor{keywordflow}{while} (k <= j-\/>spec\_end) \{}
\DoxyCodeLine{1948                \textcolor{keywordtype}{short} *p = \&data[stbi\_\_jpeg\_dezigzag[k++]];}
\DoxyCodeLine{1949                \textcolor{keywordflow}{if} (*p != 0) \{}
\DoxyCodeLine{1950                   \textcolor{keywordflow}{if} (stbi\_\_jpeg\_get\_bit(j))}
\DoxyCodeLine{1951                      \textcolor{keywordflow}{if} ((*p \& bit)==0) \{}
\DoxyCodeLine{1952                         \textcolor{keywordflow}{if} (*p > 0)}
\DoxyCodeLine{1953                            *p += bit;}
\DoxyCodeLine{1954                         \textcolor{keywordflow}{else}}
\DoxyCodeLine{1955                            *p -\/= bit;}
\DoxyCodeLine{1956                      \}}
\DoxyCodeLine{1957                \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1958                   \textcolor{keywordflow}{if} (r == 0) \{}
\DoxyCodeLine{1959                      *p = (short) s;}
\DoxyCodeLine{1960                      \textcolor{keywordflow}{break};}
\DoxyCodeLine{1961                   \}}
\DoxyCodeLine{1962                   -\/-\/r;}
\DoxyCodeLine{1963                \}}
\DoxyCodeLine{1964             \}}
\DoxyCodeLine{1965          \} \textcolor{keywordflow}{while} (k <= j-\/>spec\_end);}
\DoxyCodeLine{1966       \}}
\DoxyCodeLine{1967    \}}
\DoxyCodeLine{1968    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1969 \}}
\DoxyCodeLine{1970 }
\DoxyCodeLine{1971 \textcolor{comment}{// take a -\/128..127 value and stbi\_\_clamp it and convert to 0..255}}
\DoxyCodeLine{1972 \mbox{\hyperlink{stb__image_8h_a952111e72ed4262552e413e5938089b8}{stbi\_inline}} \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} stbi\_\_clamp(\textcolor{keywordtype}{int} x)}
\DoxyCodeLine{1973 \{}
\DoxyCodeLine{1974    \textcolor{comment}{// trick to use a single test to catch both cases}}
\DoxyCodeLine{1975    \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) x > 255) \{}
\DoxyCodeLine{1976       \textcolor{keywordflow}{if} (x < 0) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1977       \textcolor{keywordflow}{if} (x > 255) \textcolor{keywordflow}{return} 255;}
\DoxyCodeLine{1978    \}}
\DoxyCodeLine{1979    \textcolor{keywordflow}{return} (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) x;}
\DoxyCodeLine{1980 \}}
\DoxyCodeLine{1981 }
\DoxyCodeLine{1982 \textcolor{preprocessor}{\#define stbi\_\_f2f(x)  ((int) (((x) * 4096 + 0.5)))}}
\DoxyCodeLine{1983 \textcolor{preprocessor}{\#define stbi\_\_fsh(x)  ((x) << 12)}}
\DoxyCodeLine{1984 }
\DoxyCodeLine{1985 \textcolor{comment}{// derived from jidctint -\/-\/ DCT\_ISLOW}}
\DoxyCodeLine{1986 \textcolor{preprocessor}{\#define STBI\_\_IDCT\_1D(s0,s1,s2,s3,s4,s5,s6,s7) \(\backslash\)}}
\DoxyCodeLine{1987 \textcolor{preprocessor}{   int t0,t1,t2,t3,p1,p2,p3,p4,p5,x0,x1,x2,x3; \(\backslash\)}}
\DoxyCodeLine{1988 \textcolor{preprocessor}{   p2 = s2;                                    \(\backslash\)}}
\DoxyCodeLine{1989 \textcolor{preprocessor}{   p3 = s6;                                    \(\backslash\)}}
\DoxyCodeLine{1990 \textcolor{preprocessor}{   p1 = (p2+p3) * stbi\_\_f2f(0.5411961f);       \(\backslash\)}}
\DoxyCodeLine{1991 \textcolor{preprocessor}{   t2 = p1 + p3*stbi\_\_f2f(-\/1.847759065f);      \(\backslash\)}}
\DoxyCodeLine{1992 \textcolor{preprocessor}{   t3 = p1 + p2*stbi\_\_f2f( 0.765366865f);      \(\backslash\)}}
\DoxyCodeLine{1993 \textcolor{preprocessor}{   p2 = s0;                                    \(\backslash\)}}
\DoxyCodeLine{1994 \textcolor{preprocessor}{   p3 = s4;                                    \(\backslash\)}}
\DoxyCodeLine{1995 \textcolor{preprocessor}{   t0 = stbi\_\_fsh(p2+p3);                      \(\backslash\)}}
\DoxyCodeLine{1996 \textcolor{preprocessor}{   t1 = stbi\_\_fsh(p2-\/p3);                      \(\backslash\)}}
\DoxyCodeLine{1997 \textcolor{preprocessor}{   x0 = t0+t3;                                 \(\backslash\)}}
\DoxyCodeLine{1998 \textcolor{preprocessor}{   x3 = t0-\/t3;                                 \(\backslash\)}}
\DoxyCodeLine{1999 \textcolor{preprocessor}{   x1 = t1+t2;                                 \(\backslash\)}}
\DoxyCodeLine{2000 \textcolor{preprocessor}{   x2 = t1-\/t2;                                 \(\backslash\)}}
\DoxyCodeLine{2001 \textcolor{preprocessor}{   t0 = s7;                                    \(\backslash\)}}
\DoxyCodeLine{2002 \textcolor{preprocessor}{   t1 = s5;                                    \(\backslash\)}}
\DoxyCodeLine{2003 \textcolor{preprocessor}{   t2 = s3;                                    \(\backslash\)}}
\DoxyCodeLine{2004 \textcolor{preprocessor}{   t3 = s1;                                    \(\backslash\)}}
\DoxyCodeLine{2005 \textcolor{preprocessor}{   p3 = t0+t2;                                 \(\backslash\)}}
\DoxyCodeLine{2006 \textcolor{preprocessor}{   p4 = t1+t3;                                 \(\backslash\)}}
\DoxyCodeLine{2007 \textcolor{preprocessor}{   p1 = t0+t3;                                 \(\backslash\)}}
\DoxyCodeLine{2008 \textcolor{preprocessor}{   p2 = t1+t2;                                 \(\backslash\)}}
\DoxyCodeLine{2009 \textcolor{preprocessor}{   p5 = (p3+p4)*stbi\_\_f2f( 1.175875602f);      \(\backslash\)}}
\DoxyCodeLine{2010 \textcolor{preprocessor}{   t0 = t0*stbi\_\_f2f( 0.298631336f);           \(\backslash\)}}
\DoxyCodeLine{2011 \textcolor{preprocessor}{   t1 = t1*stbi\_\_f2f( 2.053119869f);           \(\backslash\)}}
\DoxyCodeLine{2012 \textcolor{preprocessor}{   t2 = t2*stbi\_\_f2f( 3.072711026f);           \(\backslash\)}}
\DoxyCodeLine{2013 \textcolor{preprocessor}{   t3 = t3*stbi\_\_f2f( 1.501321110f);           \(\backslash\)}}
\DoxyCodeLine{2014 \textcolor{preprocessor}{   p1 = p5 + p1*stbi\_\_f2f(-\/0.899976223f);      \(\backslash\)}}
\DoxyCodeLine{2015 \textcolor{preprocessor}{   p2 = p5 + p2*stbi\_\_f2f(-\/2.562915447f);      \(\backslash\)}}
\DoxyCodeLine{2016 \textcolor{preprocessor}{   p3 = p3*stbi\_\_f2f(-\/1.961570560f);           \(\backslash\)}}
\DoxyCodeLine{2017 \textcolor{preprocessor}{   p4 = p4*stbi\_\_f2f(-\/0.390180644f);           \(\backslash\)}}
\DoxyCodeLine{2018 \textcolor{preprocessor}{   t3 += p1+p4;                                \(\backslash\)}}
\DoxyCodeLine{2019 \textcolor{preprocessor}{   t2 += p2+p3;                                \(\backslash\)}}
\DoxyCodeLine{2020 \textcolor{preprocessor}{   t1 += p2+p4;                                \(\backslash\)}}
\DoxyCodeLine{2021 \textcolor{preprocessor}{   t0 += p1+p3;}}
\DoxyCodeLine{2022 }
\DoxyCodeLine{2023 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_idct\_block(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \textcolor{keywordtype}{int} out\_stride, \textcolor{keywordtype}{short} data[64])}
\DoxyCodeLine{2024 \{}
\DoxyCodeLine{2025    \textcolor{keywordtype}{int} i,val[64],*v=val;}
\DoxyCodeLine{2026    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *o;}
\DoxyCodeLine{2027    \textcolor{keywordtype}{short} *d = data;}
\DoxyCodeLine{2028 }
\DoxyCodeLine{2029    \textcolor{comment}{// columns}}
\DoxyCodeLine{2030    \textcolor{keywordflow}{for} (i=0; i < 8; ++i,++d, ++v) \{}
\DoxyCodeLine{2031       \textcolor{comment}{// if all zeroes, shortcut -\/-\/ this avoids dequantizing 0s and IDCTing}}
\DoxyCodeLine{2032       \textcolor{keywordflow}{if} (d[ 8]==0 \&\& d[16]==0 \&\& d[24]==0 \&\& d[32]==0}
\DoxyCodeLine{2033            \&\& d[40]==0 \&\& d[48]==0 \&\& d[56]==0) \{}
\DoxyCodeLine{2034          \textcolor{comment}{//    no shortcut                 0     seconds}}
\DoxyCodeLine{2035          \textcolor{comment}{//    (1|2|3|4|5|6|7)==0          0     seconds}}
\DoxyCodeLine{2036          \textcolor{comment}{//    all separate               -\/0.047 seconds}}
\DoxyCodeLine{2037          \textcolor{comment}{//    1 \&\& 2|3 \&\& 4|5 \&\& 6|7:    -\/0.047 seconds}}
\DoxyCodeLine{2038          \textcolor{keywordtype}{int} dcterm = d[0] << 2;}
\DoxyCodeLine{2039          v[0] = v[8] = v[16] = v[24] = v[32] = v[40] = v[48] = v[56] = dcterm;}
\DoxyCodeLine{2040       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2041          \mbox{\hyperlink{stb__image_8h_a0b285a716057b67c08d8f079867b81e3}{STBI\_\_IDCT\_1D}}(d[ 0],d[ 8],d[16],d[24],d[32],d[40],d[48],d[56])}
\DoxyCodeLine{2042          \textcolor{comment}{// constants scaled things up by 1<<12; let's bring them back}}
\DoxyCodeLine{2043          \textcolor{comment}{// down, but keep 2 extra bits of precision}}
\DoxyCodeLine{2044          x0 += 512; x1 += 512; x2 += 512; x3 += 512;}
\DoxyCodeLine{2045          v[ 0] = (x0+t3) >> 10;}
\DoxyCodeLine{2046          v[56] = (x0-\/t3) >> 10;}
\DoxyCodeLine{2047          v[ 8] = (x1+t2) >> 10;}
\DoxyCodeLine{2048          v[48] = (x1-\/t2) >> 10;}
\DoxyCodeLine{2049          v[16] = (x2+t1) >> 10;}
\DoxyCodeLine{2050          v[40] = (x2-\/t1) >> 10;}
\DoxyCodeLine{2051          v[24] = (x3+t0) >> 10;}
\DoxyCodeLine{2052          v[32] = (x3-\/t0) >> 10;}
\DoxyCodeLine{2053       \}}
\DoxyCodeLine{2054    \}}
\DoxyCodeLine{2055 }
\DoxyCodeLine{2056    \textcolor{keywordflow}{for} (i=0, v=val, o=out; i < 8; ++i,v+=8,o+=out\_stride) \{}
\DoxyCodeLine{2057       \textcolor{comment}{// no fast case since the first 1D IDCT spread components out}}
\DoxyCodeLine{2058       \mbox{\hyperlink{stb__image_8h_a0b285a716057b67c08d8f079867b81e3}{STBI\_\_IDCT\_1D}}(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7])}
\DoxyCodeLine{2059       \textcolor{comment}{// constants scaled things up by 1<<12, plus we had 1<<2 from first}}
\DoxyCodeLine{2060       \textcolor{comment}{// loop, plus horizontal and vertical each scale by sqrt(8) so together}}
\DoxyCodeLine{2061       \textcolor{comment}{// we've got an extra 1<<3, so 1<<17 total we need to remove.}}
\DoxyCodeLine{2062       \textcolor{comment}{// so we want to round that, which means adding 0.5 * 1<<17,}}
\DoxyCodeLine{2063       \textcolor{comment}{// aka 65536. Also, we'll end up with -\/128 to 127 that we want}}
\DoxyCodeLine{2064       \textcolor{comment}{// to encode as 0..255 by adding 128, so we'll add that before the shift}}
\DoxyCodeLine{2065       x0 += 65536 + (128<<17);}
\DoxyCodeLine{2066       x1 += 65536 + (128<<17);}
\DoxyCodeLine{2067       x2 += 65536 + (128<<17);}
\DoxyCodeLine{2068       x3 += 65536 + (128<<17);}
\DoxyCodeLine{2069       \textcolor{comment}{// tried computing the shifts into temps, or'ing the temps to see}}
\DoxyCodeLine{2070       \textcolor{comment}{// if any were out of range, but that was slower}}
\DoxyCodeLine{2071       o[0] = stbi\_\_clamp((x0+t3) >> 17);}
\DoxyCodeLine{2072       o[7] = stbi\_\_clamp((x0-\/t3) >> 17);}
\DoxyCodeLine{2073       o[1] = stbi\_\_clamp((x1+t2) >> 17);}
\DoxyCodeLine{2074       o[6] = stbi\_\_clamp((x1-\/t2) >> 17);}
\DoxyCodeLine{2075       o[2] = stbi\_\_clamp((x2+t1) >> 17);}
\DoxyCodeLine{2076       o[5] = stbi\_\_clamp((x2-\/t1) >> 17);}
\DoxyCodeLine{2077       o[3] = stbi\_\_clamp((x3+t0) >> 17);}
\DoxyCodeLine{2078       o[4] = stbi\_\_clamp((x3-\/t0) >> 17);}
\DoxyCodeLine{2079    \}}
\DoxyCodeLine{2080 \}}
\DoxyCodeLine{2081 }
\DoxyCodeLine{2082 \textcolor{preprocessor}{\#ifdef STBI\_SSE2}}
\DoxyCodeLine{2083 \textcolor{comment}{// sse2 integer IDCT. not the fastest possible implementation but it}}
\DoxyCodeLine{2084 \textcolor{comment}{// produces bit-\/identical results to the generic C version so it's}}
\DoxyCodeLine{2085 \textcolor{comment}{// fully "{}transparent"{}.}}
\DoxyCodeLine{2086 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_idct\_simd(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \textcolor{keywordtype}{int} out\_stride, \textcolor{keywordtype}{short} data[64])}
\DoxyCodeLine{2087 \{}
\DoxyCodeLine{2088    \textcolor{comment}{// This is constructed to match our regular (generic) integer IDCT exactly.}}
\DoxyCodeLine{2089    \_\_m128i row0, row1, row2, row3, row4, row5, row6, row7;}
\DoxyCodeLine{2090    \_\_m128i tmp;}
\DoxyCodeLine{2091 }
\DoxyCodeLine{2092    \textcolor{comment}{// dot product constant: even elems=x, odd elems=y}}
\DoxyCodeLine{2093 \textcolor{preprocessor}{   \#define dct\_const(x,y)  \_mm\_setr\_epi16((x),(y),(x),(y),(x),(y),(x),(y))}}
\DoxyCodeLine{2094 }
\DoxyCodeLine{2095    \textcolor{comment}{// out(0) = c0[even]*x + c0[odd]*y   (c0, x, y 16-\/bit, out 32-\/bit)}}
\DoxyCodeLine{2096    \textcolor{comment}{// out(1) = c1[even]*x + c1[odd]*y}}
\DoxyCodeLine{2097 \textcolor{preprocessor}{   \#define dct\_rot(out0,out1, x,y,c0,c1) \(\backslash\)}}
\DoxyCodeLine{2098 \textcolor{preprocessor}{      \_\_m128i c0\#\#lo = \_mm\_unpacklo\_epi16((x),(y)); \(\backslash\)}}
\DoxyCodeLine{2099 \textcolor{preprocessor}{      \_\_m128i c0\#\#hi = \_mm\_unpackhi\_epi16((x),(y)); \(\backslash\)}}
\DoxyCodeLine{2100 \textcolor{preprocessor}{      \_\_m128i out0\#\#\_l = \_mm\_madd\_epi16(c0\#\#lo, c0); \(\backslash\)}}
\DoxyCodeLine{2101 \textcolor{preprocessor}{      \_\_m128i out0\#\#\_h = \_mm\_madd\_epi16(c0\#\#hi, c0); \(\backslash\)}}
\DoxyCodeLine{2102 \textcolor{preprocessor}{      \_\_m128i out1\#\#\_l = \_mm\_madd\_epi16(c0\#\#lo, c1); \(\backslash\)}}
\DoxyCodeLine{2103 \textcolor{preprocessor}{      \_\_m128i out1\#\#\_h = \_mm\_madd\_epi16(c0\#\#hi, c1)}}
\DoxyCodeLine{2104 }
\DoxyCodeLine{2105    \textcolor{comment}{// out = in << 12  (in 16-\/bit, out 32-\/bit)}}
\DoxyCodeLine{2106 \textcolor{preprocessor}{   \#define dct\_widen(out, in) \(\backslash\)}}
\DoxyCodeLine{2107 \textcolor{preprocessor}{      \_\_m128i out\#\#\_l = \_mm\_srai\_epi32(\_mm\_unpacklo\_epi16(\_mm\_setzero\_si128(), (in)), 4); \(\backslash\)}}
\DoxyCodeLine{2108 \textcolor{preprocessor}{      \_\_m128i out\#\#\_h = \_mm\_srai\_epi32(\_mm\_unpackhi\_epi16(\_mm\_setzero\_si128(), (in)), 4)}}
\DoxyCodeLine{2109 }
\DoxyCodeLine{2110    \textcolor{comment}{// wide add}}
\DoxyCodeLine{2111 \textcolor{preprocessor}{   \#define dct\_wadd(out, a, b) \(\backslash\)}}
\DoxyCodeLine{2112 \textcolor{preprocessor}{      \_\_m128i out\#\#\_l = \_mm\_add\_epi32(a\#\#\_l, b\#\#\_l); \(\backslash\)}}
\DoxyCodeLine{2113 \textcolor{preprocessor}{      \_\_m128i out\#\#\_h = \_mm\_add\_epi32(a\#\#\_h, b\#\#\_h)}}
\DoxyCodeLine{2114 }
\DoxyCodeLine{2115    \textcolor{comment}{// wide sub}}
\DoxyCodeLine{2116 \textcolor{preprocessor}{   \#define dct\_wsub(out, a, b) \(\backslash\)}}
\DoxyCodeLine{2117 \textcolor{preprocessor}{      \_\_m128i out\#\#\_l = \_mm\_sub\_epi32(a\#\#\_l, b\#\#\_l); \(\backslash\)}}
\DoxyCodeLine{2118 \textcolor{preprocessor}{      \_\_m128i out\#\#\_h = \_mm\_sub\_epi32(a\#\#\_h, b\#\#\_h)}}
\DoxyCodeLine{2119 }
\DoxyCodeLine{2120    \textcolor{comment}{// butterfly a/b, add bias, then shift by "{}s"{} and pack}}
\DoxyCodeLine{2121 \textcolor{preprocessor}{   \#define dct\_bfly32o(out0, out1, a,b,bias,s) \(\backslash\)}}
\DoxyCodeLine{2122 \textcolor{preprocessor}{      \{ \(\backslash\)}}
\DoxyCodeLine{2123 \textcolor{preprocessor}{         \_\_m128i abiased\_l = \_mm\_add\_epi32(a\#\#\_l, bias); \(\backslash\)}}
\DoxyCodeLine{2124 \textcolor{preprocessor}{         \_\_m128i abiased\_h = \_mm\_add\_epi32(a\#\#\_h, bias); \(\backslash\)}}
\DoxyCodeLine{2125 \textcolor{preprocessor}{         dct\_wadd(sum, abiased, b); \(\backslash\)}}
\DoxyCodeLine{2126 \textcolor{preprocessor}{         dct\_wsub(dif, abiased, b); \(\backslash\)}}
\DoxyCodeLine{2127 \textcolor{preprocessor}{         out0 = \_mm\_packs\_epi32(\_mm\_srai\_epi32(sum\_l, s), \_mm\_srai\_epi32(sum\_h, s)); \(\backslash\)}}
\DoxyCodeLine{2128 \textcolor{preprocessor}{         out1 = \_mm\_packs\_epi32(\_mm\_srai\_epi32(dif\_l, s), \_mm\_srai\_epi32(dif\_h, s)); \(\backslash\)}}
\DoxyCodeLine{2129 \textcolor{preprocessor}{      \}}}
\DoxyCodeLine{2130 }
\DoxyCodeLine{2131    \textcolor{comment}{// 8-\/bit interleave step (for transposes)}}
\DoxyCodeLine{2132 \textcolor{preprocessor}{   \#define dct\_interleave8(a, b) \(\backslash\)}}
\DoxyCodeLine{2133 \textcolor{preprocessor}{      tmp = a; \(\backslash\)}}
\DoxyCodeLine{2134 \textcolor{preprocessor}{      a = \_mm\_unpacklo\_epi8(a, b); \(\backslash\)}}
\DoxyCodeLine{2135 \textcolor{preprocessor}{      b = \_mm\_unpackhi\_epi8(tmp, b)}}
\DoxyCodeLine{2136 }
\DoxyCodeLine{2137    \textcolor{comment}{// 16-\/bit interleave step (for transposes)}}
\DoxyCodeLine{2138 \textcolor{preprocessor}{   \#define dct\_interleave16(a, b) \(\backslash\)}}
\DoxyCodeLine{2139 \textcolor{preprocessor}{      tmp = a; \(\backslash\)}}
\DoxyCodeLine{2140 \textcolor{preprocessor}{      a = \_mm\_unpacklo\_epi16(a, b); \(\backslash\)}}
\DoxyCodeLine{2141 \textcolor{preprocessor}{      b = \_mm\_unpackhi\_epi16(tmp, b)}}
\DoxyCodeLine{2142 }
\DoxyCodeLine{2143 \textcolor{preprocessor}{   \#define dct\_pass(bias,shift) \(\backslash\)}}
\DoxyCodeLine{2144 \textcolor{preprocessor}{      \{ \(\backslash\)}}
\DoxyCodeLine{2145 \textcolor{preprocessor}{         }\textcolor{comment}{/* even part */}\textcolor{preprocessor}{ \(\backslash\)}}
\DoxyCodeLine{2146 \textcolor{preprocessor}{         dct\_rot(t2e,t3e, row2,row6, rot0\_0,rot0\_1); \(\backslash\)}}
\DoxyCodeLine{2147 \textcolor{preprocessor}{         \_\_m128i sum04 = \_mm\_add\_epi16(row0, row4); \(\backslash\)}}
\DoxyCodeLine{2148 \textcolor{preprocessor}{         \_\_m128i dif04 = \_mm\_sub\_epi16(row0, row4); \(\backslash\)}}
\DoxyCodeLine{2149 \textcolor{preprocessor}{         dct\_widen(t0e, sum04); \(\backslash\)}}
\DoxyCodeLine{2150 \textcolor{preprocessor}{         dct\_widen(t1e, dif04); \(\backslash\)}}
\DoxyCodeLine{2151 \textcolor{preprocessor}{         dct\_wadd(x0, t0e, t3e); \(\backslash\)}}
\DoxyCodeLine{2152 \textcolor{preprocessor}{         dct\_wsub(x3, t0e, t3e); \(\backslash\)}}
\DoxyCodeLine{2153 \textcolor{preprocessor}{         dct\_wadd(x1, t1e, t2e); \(\backslash\)}}
\DoxyCodeLine{2154 \textcolor{preprocessor}{         dct\_wsub(x2, t1e, t2e); \(\backslash\)}}
\DoxyCodeLine{2155 \textcolor{preprocessor}{         }\textcolor{comment}{/* odd part */}\textcolor{preprocessor}{ \(\backslash\)}}
\DoxyCodeLine{2156 \textcolor{preprocessor}{         dct\_rot(y0o,y2o, row7,row3, rot2\_0,rot2\_1); \(\backslash\)}}
\DoxyCodeLine{2157 \textcolor{preprocessor}{         dct\_rot(y1o,y3o, row5,row1, rot3\_0,rot3\_1); \(\backslash\)}}
\DoxyCodeLine{2158 \textcolor{preprocessor}{         \_\_m128i sum17 = \_mm\_add\_epi16(row1, row7); \(\backslash\)}}
\DoxyCodeLine{2159 \textcolor{preprocessor}{         \_\_m128i sum35 = \_mm\_add\_epi16(row3, row5); \(\backslash\)}}
\DoxyCodeLine{2160 \textcolor{preprocessor}{         dct\_rot(y4o,y5o, sum17,sum35, rot1\_0,rot1\_1); \(\backslash\)}}
\DoxyCodeLine{2161 \textcolor{preprocessor}{         dct\_wadd(x4, y0o, y4o); \(\backslash\)}}
\DoxyCodeLine{2162 \textcolor{preprocessor}{         dct\_wadd(x5, y1o, y5o); \(\backslash\)}}
\DoxyCodeLine{2163 \textcolor{preprocessor}{         dct\_wadd(x6, y2o, y5o); \(\backslash\)}}
\DoxyCodeLine{2164 \textcolor{preprocessor}{         dct\_wadd(x7, y3o, y4o); \(\backslash\)}}
\DoxyCodeLine{2165 \textcolor{preprocessor}{         dct\_bfly32o(row0,row7, x0,x7,bias,shift); \(\backslash\)}}
\DoxyCodeLine{2166 \textcolor{preprocessor}{         dct\_bfly32o(row1,row6, x1,x6,bias,shift); \(\backslash\)}}
\DoxyCodeLine{2167 \textcolor{preprocessor}{         dct\_bfly32o(row2,row5, x2,x5,bias,shift); \(\backslash\)}}
\DoxyCodeLine{2168 \textcolor{preprocessor}{         dct\_bfly32o(row3,row4, x3,x4,bias,shift); \(\backslash\)}}
\DoxyCodeLine{2169 \textcolor{preprocessor}{      \}}}
\DoxyCodeLine{2170 }
\DoxyCodeLine{2171    \_\_m128i rot0\_0 = dct\_const(\mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}(0.5411961f), \mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}(0.5411961f) + \mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}(-\/1.847759065f));}
\DoxyCodeLine{2172    \_\_m128i rot0\_1 = dct\_const(\mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}(0.5411961f) + \mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}( 0.765366865f), \mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}(0.5411961f));}
\DoxyCodeLine{2173    \_\_m128i rot1\_0 = dct\_const(\mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}(1.175875602f) + \mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}(-\/0.899976223f), \mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}(1.175875602f));}
\DoxyCodeLine{2174    \_\_m128i rot1\_1 = dct\_const(\mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}(1.175875602f), \mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}(1.175875602f) + \mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}(-\/2.562915447f));}
\DoxyCodeLine{2175    \_\_m128i rot2\_0 = dct\_const(\mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}(-\/1.961570560f) + \mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}( 0.298631336f), \mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}(-\/1.961570560f));}
\DoxyCodeLine{2176    \_\_m128i rot2\_1 = dct\_const(\mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}(-\/1.961570560f), \mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}(-\/1.961570560f) + \mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}( 3.072711026f));}
\DoxyCodeLine{2177    \_\_m128i rot3\_0 = dct\_const(\mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}(-\/0.390180644f) + \mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}( 2.053119869f), \mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}(-\/0.390180644f));}
\DoxyCodeLine{2178    \_\_m128i rot3\_1 = dct\_const(\mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}(-\/0.390180644f), \mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}(-\/0.390180644f) + \mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}( 1.501321110f));}
\DoxyCodeLine{2179 }
\DoxyCodeLine{2180    \textcolor{comment}{// rounding biases in column/row passes, see stbi\_\_idct\_block for explanation.}}
\DoxyCodeLine{2181    \_\_m128i bias\_0 = \_mm\_set1\_epi32(512);}
\DoxyCodeLine{2182    \_\_m128i bias\_1 = \_mm\_set1\_epi32(65536 + (128<<17));}
\DoxyCodeLine{2183 }
\DoxyCodeLine{2184    \textcolor{comment}{// load}}
\DoxyCodeLine{2185    row0 = \_mm\_load\_si128((\textcolor{keyword}{const} \_\_m128i *) (data + 0*8));}
\DoxyCodeLine{2186    row1 = \_mm\_load\_si128((\textcolor{keyword}{const} \_\_m128i *) (data + 1*8));}
\DoxyCodeLine{2187    row2 = \_mm\_load\_si128((\textcolor{keyword}{const} \_\_m128i *) (data + 2*8));}
\DoxyCodeLine{2188    row3 = \_mm\_load\_si128((\textcolor{keyword}{const} \_\_m128i *) (data + 3*8));}
\DoxyCodeLine{2189    row4 = \_mm\_load\_si128((\textcolor{keyword}{const} \_\_m128i *) (data + 4*8));}
\DoxyCodeLine{2190    row5 = \_mm\_load\_si128((\textcolor{keyword}{const} \_\_m128i *) (data + 5*8));}
\DoxyCodeLine{2191    row6 = \_mm\_load\_si128((\textcolor{keyword}{const} \_\_m128i *) (data + 6*8));}
\DoxyCodeLine{2192    row7 = \_mm\_load\_si128((\textcolor{keyword}{const} \_\_m128i *) (data + 7*8));}
\DoxyCodeLine{2193 }
\DoxyCodeLine{2194    \textcolor{comment}{// column pass}}
\DoxyCodeLine{2195    dct\_pass(bias\_0, 10);}
\DoxyCodeLine{2196 }
\DoxyCodeLine{2197    \{}
\DoxyCodeLine{2198       \textcolor{comment}{// 16bit 8x8 transpose pass 1}}
\DoxyCodeLine{2199       dct\_interleave16(row0, row4);}
\DoxyCodeLine{2200       dct\_interleave16(row1, row5);}
\DoxyCodeLine{2201       dct\_interleave16(row2, row6);}
\DoxyCodeLine{2202       dct\_interleave16(row3, row7);}
\DoxyCodeLine{2203 }
\DoxyCodeLine{2204       \textcolor{comment}{// transpose pass 2}}
\DoxyCodeLine{2205       dct\_interleave16(row0, row2);}
\DoxyCodeLine{2206       dct\_interleave16(row1, row3);}
\DoxyCodeLine{2207       dct\_interleave16(row4, row6);}
\DoxyCodeLine{2208       dct\_interleave16(row5, row7);}
\DoxyCodeLine{2209 }
\DoxyCodeLine{2210       \textcolor{comment}{// transpose pass 3}}
\DoxyCodeLine{2211       dct\_interleave16(row0, row1);}
\DoxyCodeLine{2212       dct\_interleave16(row2, row3);}
\DoxyCodeLine{2213       dct\_interleave16(row4, row5);}
\DoxyCodeLine{2214       dct\_interleave16(row6, row7);}
\DoxyCodeLine{2215    \}}
\DoxyCodeLine{2216 }
\DoxyCodeLine{2217    \textcolor{comment}{// row pass}}
\DoxyCodeLine{2218    dct\_pass(bias\_1, 17);}
\DoxyCodeLine{2219 }
\DoxyCodeLine{2220    \{}
\DoxyCodeLine{2221       \textcolor{comment}{// pack}}
\DoxyCodeLine{2222       \_\_m128i p0 = \_mm\_packus\_epi16(row0, row1); \textcolor{comment}{// a0a1a2a3...a7b0b1b2b3...b7}}
\DoxyCodeLine{2223       \_\_m128i p1 = \_mm\_packus\_epi16(row2, row3);}
\DoxyCodeLine{2224       \_\_m128i p2 = \_mm\_packus\_epi16(row4, row5);}
\DoxyCodeLine{2225       \_\_m128i p3 = \_mm\_packus\_epi16(row6, row7);}
\DoxyCodeLine{2226 }
\DoxyCodeLine{2227       \textcolor{comment}{// 8bit 8x8 transpose pass 1}}
\DoxyCodeLine{2228       dct\_interleave8(p0, p2); \textcolor{comment}{// a0e0a1e1...}}
\DoxyCodeLine{2229       dct\_interleave8(p1, p3); \textcolor{comment}{// c0g0c1g1...}}
\DoxyCodeLine{2230 }
\DoxyCodeLine{2231       \textcolor{comment}{// transpose pass 2}}
\DoxyCodeLine{2232       dct\_interleave8(p0, p1); \textcolor{comment}{// a0c0e0g0...}}
\DoxyCodeLine{2233       dct\_interleave8(p2, p3); \textcolor{comment}{// b0d0f0h0...}}
\DoxyCodeLine{2234 }
\DoxyCodeLine{2235       \textcolor{comment}{// transpose pass 3}}
\DoxyCodeLine{2236       dct\_interleave8(p0, p2); \textcolor{comment}{// a0b0c0d0...}}
\DoxyCodeLine{2237       dct\_interleave8(p1, p3); \textcolor{comment}{// a4b4c4d4...}}
\DoxyCodeLine{2238 }
\DoxyCodeLine{2239       \textcolor{comment}{// store}}
\DoxyCodeLine{2240       \_mm\_storel\_epi64((\_\_m128i *) out, p0); out += out\_stride;}
\DoxyCodeLine{2241       \_mm\_storel\_epi64((\_\_m128i *) out, \_mm\_shuffle\_epi32(p0, 0x4e)); out += out\_stride;}
\DoxyCodeLine{2242       \_mm\_storel\_epi64((\_\_m128i *) out, p2); out += out\_stride;}
\DoxyCodeLine{2243       \_mm\_storel\_epi64((\_\_m128i *) out, \_mm\_shuffle\_epi32(p2, 0x4e)); out += out\_stride;}
\DoxyCodeLine{2244       \_mm\_storel\_epi64((\_\_m128i *) out, p1); out += out\_stride;}
\DoxyCodeLine{2245       \_mm\_storel\_epi64((\_\_m128i *) out, \_mm\_shuffle\_epi32(p1, 0x4e)); out += out\_stride;}
\DoxyCodeLine{2246       \_mm\_storel\_epi64((\_\_m128i *) out, p3); out += out\_stride;}
\DoxyCodeLine{2247       \_mm\_storel\_epi64((\_\_m128i *) out, \_mm\_shuffle\_epi32(p3, 0x4e));}
\DoxyCodeLine{2248    \}}
\DoxyCodeLine{2249 }
\DoxyCodeLine{2250 \textcolor{preprocessor}{\#undef dct\_const}}
\DoxyCodeLine{2251 \textcolor{preprocessor}{\#undef dct\_rot}}
\DoxyCodeLine{2252 \textcolor{preprocessor}{\#undef dct\_widen}}
\DoxyCodeLine{2253 \textcolor{preprocessor}{\#undef dct\_wadd}}
\DoxyCodeLine{2254 \textcolor{preprocessor}{\#undef dct\_wsub}}
\DoxyCodeLine{2255 \textcolor{preprocessor}{\#undef dct\_bfly32o}}
\DoxyCodeLine{2256 \textcolor{preprocessor}{\#undef dct\_interleave8}}
\DoxyCodeLine{2257 \textcolor{preprocessor}{\#undef dct\_interleave16}}
\DoxyCodeLine{2258 \textcolor{preprocessor}{\#undef dct\_pass}}
\DoxyCodeLine{2259 \}}
\DoxyCodeLine{2260 }
\DoxyCodeLine{2261 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STBI\_SSE2}}
\DoxyCodeLine{2262 }
\DoxyCodeLine{2263 \textcolor{preprocessor}{\#ifdef STBI\_NEON}}
\DoxyCodeLine{2264 }
\DoxyCodeLine{2265 \textcolor{comment}{// NEON integer IDCT. should produce bit-\/identical}}
\DoxyCodeLine{2266 \textcolor{comment}{// results to the generic C version.}}
\DoxyCodeLine{2267 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_idct\_simd(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \textcolor{keywordtype}{int} out\_stride, \textcolor{keywordtype}{short} data[64])}
\DoxyCodeLine{2268 \{}
\DoxyCodeLine{2269    int16x8\_t row0, row1, row2, row3, row4, row5, row6, row7;}
\DoxyCodeLine{2270 }
\DoxyCodeLine{2271    int16x4\_t rot0\_0 = vdup\_n\_s16(\mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}(0.5411961f));}
\DoxyCodeLine{2272    int16x4\_t rot0\_1 = vdup\_n\_s16(\mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}(-\/1.847759065f));}
\DoxyCodeLine{2273    int16x4\_t rot0\_2 = vdup\_n\_s16(\mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}( 0.765366865f));}
\DoxyCodeLine{2274    int16x4\_t rot1\_0 = vdup\_n\_s16(\mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}( 1.175875602f));}
\DoxyCodeLine{2275    int16x4\_t rot1\_1 = vdup\_n\_s16(\mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}(-\/0.899976223f));}
\DoxyCodeLine{2276    int16x4\_t rot1\_2 = vdup\_n\_s16(\mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}(-\/2.562915447f));}
\DoxyCodeLine{2277    int16x4\_t rot2\_0 = vdup\_n\_s16(\mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}(-\/1.961570560f));}
\DoxyCodeLine{2278    int16x4\_t rot2\_1 = vdup\_n\_s16(\mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}(-\/0.390180644f));}
\DoxyCodeLine{2279    int16x4\_t rot3\_0 = vdup\_n\_s16(\mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}( 0.298631336f));}
\DoxyCodeLine{2280    int16x4\_t rot3\_1 = vdup\_n\_s16(\mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}( 2.053119869f));}
\DoxyCodeLine{2281    int16x4\_t rot3\_2 = vdup\_n\_s16(\mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}( 3.072711026f));}
\DoxyCodeLine{2282    int16x4\_t rot3\_3 = vdup\_n\_s16(\mbox{\hyperlink{stb__image_8h_a1ea84f7187ec46c477bb66c50e768a72}{stbi\_\_f2f}}( 1.501321110f));}
\DoxyCodeLine{2283 }
\DoxyCodeLine{2284 \textcolor{preprocessor}{\#define dct\_long\_mul(out, inq, coeff) \(\backslash\)}}
\DoxyCodeLine{2285 \textcolor{preprocessor}{   int32x4\_t out\#\#\_l = vmull\_s16(vget\_low\_s16(inq), coeff); \(\backslash\)}}
\DoxyCodeLine{2286 \textcolor{preprocessor}{   int32x4\_t out\#\#\_h = vmull\_s16(vget\_high\_s16(inq), coeff)}}
\DoxyCodeLine{2287 }
\DoxyCodeLine{2288 \textcolor{preprocessor}{\#define dct\_long\_mac(out, acc, inq, coeff) \(\backslash\)}}
\DoxyCodeLine{2289 \textcolor{preprocessor}{   int32x4\_t out\#\#\_l = vmlal\_s16(acc\#\#\_l, vget\_low\_s16(inq), coeff); \(\backslash\)}}
\DoxyCodeLine{2290 \textcolor{preprocessor}{   int32x4\_t out\#\#\_h = vmlal\_s16(acc\#\#\_h, vget\_high\_s16(inq), coeff)}}
\DoxyCodeLine{2291 }
\DoxyCodeLine{2292 \textcolor{preprocessor}{\#define dct\_widen(out, inq) \(\backslash\)}}
\DoxyCodeLine{2293 \textcolor{preprocessor}{   int32x4\_t out\#\#\_l = vshll\_n\_s16(vget\_low\_s16(inq), 12); \(\backslash\)}}
\DoxyCodeLine{2294 \textcolor{preprocessor}{   int32x4\_t out\#\#\_h = vshll\_n\_s16(vget\_high\_s16(inq), 12)}}
\DoxyCodeLine{2295 }
\DoxyCodeLine{2296 \textcolor{comment}{// wide add}}
\DoxyCodeLine{2297 \textcolor{preprocessor}{\#define dct\_wadd(out, a, b) \(\backslash\)}}
\DoxyCodeLine{2298 \textcolor{preprocessor}{   int32x4\_t out\#\#\_l = vaddq\_s32(a\#\#\_l, b\#\#\_l); \(\backslash\)}}
\DoxyCodeLine{2299 \textcolor{preprocessor}{   int32x4\_t out\#\#\_h = vaddq\_s32(a\#\#\_h, b\#\#\_h)}}
\DoxyCodeLine{2300 }
\DoxyCodeLine{2301 \textcolor{comment}{// wide sub}}
\DoxyCodeLine{2302 \textcolor{preprocessor}{\#define dct\_wsub(out, a, b) \(\backslash\)}}
\DoxyCodeLine{2303 \textcolor{preprocessor}{   int32x4\_t out\#\#\_l = vsubq\_s32(a\#\#\_l, b\#\#\_l); \(\backslash\)}}
\DoxyCodeLine{2304 \textcolor{preprocessor}{   int32x4\_t out\#\#\_h = vsubq\_s32(a\#\#\_h, b\#\#\_h)}}
\DoxyCodeLine{2305 }
\DoxyCodeLine{2306 \textcolor{comment}{// butterfly a/b, then shift using "{}shiftop"{} by "{}s"{} and pack}}
\DoxyCodeLine{2307 \textcolor{preprocessor}{\#define dct\_bfly32o(out0,out1, a,b,shiftop,s) \(\backslash\)}}
\DoxyCodeLine{2308 \textcolor{preprocessor}{   \{ \(\backslash\)}}
\DoxyCodeLine{2309 \textcolor{preprocessor}{      dct\_wadd(sum, a, b); \(\backslash\)}}
\DoxyCodeLine{2310 \textcolor{preprocessor}{      dct\_wsub(dif, a, b); \(\backslash\)}}
\DoxyCodeLine{2311 \textcolor{preprocessor}{      out0 = vcombine\_s16(shiftop(sum\_l, s), shiftop(sum\_h, s)); \(\backslash\)}}
\DoxyCodeLine{2312 \textcolor{preprocessor}{      out1 = vcombine\_s16(shiftop(dif\_l, s), shiftop(dif\_h, s)); \(\backslash\)}}
\DoxyCodeLine{2313 \textcolor{preprocessor}{   \}}}
\DoxyCodeLine{2314 }
\DoxyCodeLine{2315 \textcolor{preprocessor}{\#define dct\_pass(shiftop, shift) \(\backslash\)}}
\DoxyCodeLine{2316 \textcolor{preprocessor}{   \{ \(\backslash\)}}
\DoxyCodeLine{2317 \textcolor{preprocessor}{      }\textcolor{comment}{/* even part */}\textcolor{preprocessor}{ \(\backslash\)}}
\DoxyCodeLine{2318 \textcolor{preprocessor}{      int16x8\_t sum26 = vaddq\_s16(row2, row6); \(\backslash\)}}
\DoxyCodeLine{2319 \textcolor{preprocessor}{      dct\_long\_mul(p1e, sum26, rot0\_0); \(\backslash\)}}
\DoxyCodeLine{2320 \textcolor{preprocessor}{      dct\_long\_mac(t2e, p1e, row6, rot0\_1); \(\backslash\)}}
\DoxyCodeLine{2321 \textcolor{preprocessor}{      dct\_long\_mac(t3e, p1e, row2, rot0\_2); \(\backslash\)}}
\DoxyCodeLine{2322 \textcolor{preprocessor}{      int16x8\_t sum04 = vaddq\_s16(row0, row4); \(\backslash\)}}
\DoxyCodeLine{2323 \textcolor{preprocessor}{      int16x8\_t dif04 = vsubq\_s16(row0, row4); \(\backslash\)}}
\DoxyCodeLine{2324 \textcolor{preprocessor}{      dct\_widen(t0e, sum04); \(\backslash\)}}
\DoxyCodeLine{2325 \textcolor{preprocessor}{      dct\_widen(t1e, dif04); \(\backslash\)}}
\DoxyCodeLine{2326 \textcolor{preprocessor}{      dct\_wadd(x0, t0e, t3e); \(\backslash\)}}
\DoxyCodeLine{2327 \textcolor{preprocessor}{      dct\_wsub(x3, t0e, t3e); \(\backslash\)}}
\DoxyCodeLine{2328 \textcolor{preprocessor}{      dct\_wadd(x1, t1e, t2e); \(\backslash\)}}
\DoxyCodeLine{2329 \textcolor{preprocessor}{      dct\_wsub(x2, t1e, t2e); \(\backslash\)}}
\DoxyCodeLine{2330 \textcolor{preprocessor}{      }\textcolor{comment}{/* odd part */}\textcolor{preprocessor}{ \(\backslash\)}}
\DoxyCodeLine{2331 \textcolor{preprocessor}{      int16x8\_t sum15 = vaddq\_s16(row1, row5); \(\backslash\)}}
\DoxyCodeLine{2332 \textcolor{preprocessor}{      int16x8\_t sum17 = vaddq\_s16(row1, row7); \(\backslash\)}}
\DoxyCodeLine{2333 \textcolor{preprocessor}{      int16x8\_t sum35 = vaddq\_s16(row3, row5); \(\backslash\)}}
\DoxyCodeLine{2334 \textcolor{preprocessor}{      int16x8\_t sum37 = vaddq\_s16(row3, row7); \(\backslash\)}}
\DoxyCodeLine{2335 \textcolor{preprocessor}{      int16x8\_t sumodd = vaddq\_s16(sum17, sum35); \(\backslash\)}}
\DoxyCodeLine{2336 \textcolor{preprocessor}{      dct\_long\_mul(p5o, sumodd, rot1\_0); \(\backslash\)}}
\DoxyCodeLine{2337 \textcolor{preprocessor}{      dct\_long\_mac(p1o, p5o, sum17, rot1\_1); \(\backslash\)}}
\DoxyCodeLine{2338 \textcolor{preprocessor}{      dct\_long\_mac(p2o, p5o, sum35, rot1\_2); \(\backslash\)}}
\DoxyCodeLine{2339 \textcolor{preprocessor}{      dct\_long\_mul(p3o, sum37, rot2\_0); \(\backslash\)}}
\DoxyCodeLine{2340 \textcolor{preprocessor}{      dct\_long\_mul(p4o, sum15, rot2\_1); \(\backslash\)}}
\DoxyCodeLine{2341 \textcolor{preprocessor}{      dct\_wadd(sump13o, p1o, p3o); \(\backslash\)}}
\DoxyCodeLine{2342 \textcolor{preprocessor}{      dct\_wadd(sump24o, p2o, p4o); \(\backslash\)}}
\DoxyCodeLine{2343 \textcolor{preprocessor}{      dct\_wadd(sump23o, p2o, p3o); \(\backslash\)}}
\DoxyCodeLine{2344 \textcolor{preprocessor}{      dct\_wadd(sump14o, p1o, p4o); \(\backslash\)}}
\DoxyCodeLine{2345 \textcolor{preprocessor}{      dct\_long\_mac(x4, sump13o, row7, rot3\_0); \(\backslash\)}}
\DoxyCodeLine{2346 \textcolor{preprocessor}{      dct\_long\_mac(x5, sump24o, row5, rot3\_1); \(\backslash\)}}
\DoxyCodeLine{2347 \textcolor{preprocessor}{      dct\_long\_mac(x6, sump23o, row3, rot3\_2); \(\backslash\)}}
\DoxyCodeLine{2348 \textcolor{preprocessor}{      dct\_long\_mac(x7, sump14o, row1, rot3\_3); \(\backslash\)}}
\DoxyCodeLine{2349 \textcolor{preprocessor}{      dct\_bfly32o(row0,row7, x0,x7,shiftop,shift); \(\backslash\)}}
\DoxyCodeLine{2350 \textcolor{preprocessor}{      dct\_bfly32o(row1,row6, x1,x6,shiftop,shift); \(\backslash\)}}
\DoxyCodeLine{2351 \textcolor{preprocessor}{      dct\_bfly32o(row2,row5, x2,x5,shiftop,shift); \(\backslash\)}}
\DoxyCodeLine{2352 \textcolor{preprocessor}{      dct\_bfly32o(row3,row4, x3,x4,shiftop,shift); \(\backslash\)}}
\DoxyCodeLine{2353 \textcolor{preprocessor}{   \}}}
\DoxyCodeLine{2354 }
\DoxyCodeLine{2355    \textcolor{comment}{// load}}
\DoxyCodeLine{2356    row0 = vld1q\_s16(data + 0*8);}
\DoxyCodeLine{2357    row1 = vld1q\_s16(data + 1*8);}
\DoxyCodeLine{2358    row2 = vld1q\_s16(data + 2*8);}
\DoxyCodeLine{2359    row3 = vld1q\_s16(data + 3*8);}
\DoxyCodeLine{2360    row4 = vld1q\_s16(data + 4*8);}
\DoxyCodeLine{2361    row5 = vld1q\_s16(data + 5*8);}
\DoxyCodeLine{2362    row6 = vld1q\_s16(data + 6*8);}
\DoxyCodeLine{2363    row7 = vld1q\_s16(data + 7*8);}
\DoxyCodeLine{2364 }
\DoxyCodeLine{2365    \textcolor{comment}{// add DC bias}}
\DoxyCodeLine{2366    row0 = vaddq\_s16(row0, vsetq\_lane\_s16(1024, vdupq\_n\_s16(0), 0));}
\DoxyCodeLine{2367 }
\DoxyCodeLine{2368    \textcolor{comment}{// column pass}}
\DoxyCodeLine{2369    dct\_pass(vrshrn\_n\_s32, 10);}
\DoxyCodeLine{2370 }
\DoxyCodeLine{2371    \textcolor{comment}{// 16bit 8x8 transpose}}
\DoxyCodeLine{2372    \{}
\DoxyCodeLine{2373 \textcolor{comment}{// these three map to a single VTRN.16, VTRN.32, and VSWP, respectively.}}
\DoxyCodeLine{2374 \textcolor{comment}{// whether compilers actually get this is another story, sadly.}}
\DoxyCodeLine{2375 \textcolor{preprocessor}{\#define dct\_trn16(x, y) \{ int16x8x2\_t t = vtrnq\_s16(x, y); x = t.val[0]; y = t.val[1]; \}}}
\DoxyCodeLine{2376 \textcolor{preprocessor}{\#define dct\_trn32(x, y) \{ int32x4x2\_t t = vtrnq\_s32(vreinterpretq\_s32\_s16(x), vreinterpretq\_s32\_s16(y)); x = vreinterpretq\_s16\_s32(t.val[0]); y = vreinterpretq\_s16\_s32(t.val[1]); \}}}
\DoxyCodeLine{2377 \textcolor{preprocessor}{\#define dct\_trn64(x, y) \{ int16x8\_t x0 = x; int16x8\_t y0 = y; x = vcombine\_s16(vget\_low\_s16(x0), vget\_low\_s16(y0)); y = vcombine\_s16(vget\_high\_s16(x0), vget\_high\_s16(y0)); \}}}
\DoxyCodeLine{2378 }
\DoxyCodeLine{2379       \textcolor{comment}{// pass 1}}
\DoxyCodeLine{2380       dct\_trn16(row0, row1); \textcolor{comment}{// a0b0a2b2a4b4a6b6}}
\DoxyCodeLine{2381       dct\_trn16(row2, row3);}
\DoxyCodeLine{2382       dct\_trn16(row4, row5);}
\DoxyCodeLine{2383       dct\_trn16(row6, row7);}
\DoxyCodeLine{2384 }
\DoxyCodeLine{2385       \textcolor{comment}{// pass 2}}
\DoxyCodeLine{2386       dct\_trn32(row0, row2); \textcolor{comment}{// a0b0c0d0a4b4c4d4}}
\DoxyCodeLine{2387       dct\_trn32(row1, row3);}
\DoxyCodeLine{2388       dct\_trn32(row4, row6);}
\DoxyCodeLine{2389       dct\_trn32(row5, row7);}
\DoxyCodeLine{2390 }
\DoxyCodeLine{2391       \textcolor{comment}{// pass 3}}
\DoxyCodeLine{2392       dct\_trn64(row0, row4); \textcolor{comment}{// a0b0c0d0e0f0g0h0}}
\DoxyCodeLine{2393       dct\_trn64(row1, row5);}
\DoxyCodeLine{2394       dct\_trn64(row2, row6);}
\DoxyCodeLine{2395       dct\_trn64(row3, row7);}
\DoxyCodeLine{2396 }
\DoxyCodeLine{2397 \textcolor{preprocessor}{\#undef dct\_trn16}}
\DoxyCodeLine{2398 \textcolor{preprocessor}{\#undef dct\_trn32}}
\DoxyCodeLine{2399 \textcolor{preprocessor}{\#undef dct\_trn64}}
\DoxyCodeLine{2400    \}}
\DoxyCodeLine{2401 }
\DoxyCodeLine{2402    \textcolor{comment}{// row pass}}
\DoxyCodeLine{2403    \textcolor{comment}{// vrshrn\_n\_s32 only supports shifts up to 16, we need}}
\DoxyCodeLine{2404    \textcolor{comment}{// 17. so do a non-\/rounding shift of 16 first then follow}}
\DoxyCodeLine{2405    \textcolor{comment}{// up with a rounding shift by 1.}}
\DoxyCodeLine{2406    dct\_pass(vshrn\_n\_s32, 16);}
\DoxyCodeLine{2407 }
\DoxyCodeLine{2408    \{}
\DoxyCodeLine{2409       \textcolor{comment}{// pack and round}}
\DoxyCodeLine{2410       uint8x8\_t p0 = vqrshrun\_n\_s16(row0, 1);}
\DoxyCodeLine{2411       uint8x8\_t p1 = vqrshrun\_n\_s16(row1, 1);}
\DoxyCodeLine{2412       uint8x8\_t p2 = vqrshrun\_n\_s16(row2, 1);}
\DoxyCodeLine{2413       uint8x8\_t p3 = vqrshrun\_n\_s16(row3, 1);}
\DoxyCodeLine{2414       uint8x8\_t p4 = vqrshrun\_n\_s16(row4, 1);}
\DoxyCodeLine{2415       uint8x8\_t p5 = vqrshrun\_n\_s16(row5, 1);}
\DoxyCodeLine{2416       uint8x8\_t p6 = vqrshrun\_n\_s16(row6, 1);}
\DoxyCodeLine{2417       uint8x8\_t p7 = vqrshrun\_n\_s16(row7, 1);}
\DoxyCodeLine{2418 }
\DoxyCodeLine{2419       \textcolor{comment}{// again, these can translate into one instruction, but often don't.}}
\DoxyCodeLine{2420 \textcolor{preprocessor}{\#define dct\_trn8\_8(x, y) \{ uint8x8x2\_t t = vtrn\_u8(x, y); x = t.val[0]; y = t.val[1]; \}}}
\DoxyCodeLine{2421 \textcolor{preprocessor}{\#define dct\_trn8\_16(x, y) \{ uint16x4x2\_t t = vtrn\_u16(vreinterpret\_u16\_u8(x), vreinterpret\_u16\_u8(y)); x = vreinterpret\_u8\_u16(t.val[0]); y = vreinterpret\_u8\_u16(t.val[1]); \}}}
\DoxyCodeLine{2422 \textcolor{preprocessor}{\#define dct\_trn8\_32(x, y) \{ uint32x2x2\_t t = vtrn\_u32(vreinterpret\_u32\_u8(x), vreinterpret\_u32\_u8(y)); x = vreinterpret\_u8\_u32(t.val[0]); y = vreinterpret\_u8\_u32(t.val[1]); \}}}
\DoxyCodeLine{2423 }
\DoxyCodeLine{2424       \textcolor{comment}{// sadly can't use interleaved stores here since we only write}}
\DoxyCodeLine{2425       \textcolor{comment}{// 8 bytes to each scan line!}}
\DoxyCodeLine{2426 }
\DoxyCodeLine{2427       \textcolor{comment}{// 8x8 8-\/bit transpose pass 1}}
\DoxyCodeLine{2428       dct\_trn8\_8(p0, p1);}
\DoxyCodeLine{2429       dct\_trn8\_8(p2, p3);}
\DoxyCodeLine{2430       dct\_trn8\_8(p4, p5);}
\DoxyCodeLine{2431       dct\_trn8\_8(p6, p7);}
\DoxyCodeLine{2432 }
\DoxyCodeLine{2433       \textcolor{comment}{// pass 2}}
\DoxyCodeLine{2434       dct\_trn8\_16(p0, p2);}
\DoxyCodeLine{2435       dct\_trn8\_16(p1, p3);}
\DoxyCodeLine{2436       dct\_trn8\_16(p4, p6);}
\DoxyCodeLine{2437       dct\_trn8\_16(p5, p7);}
\DoxyCodeLine{2438 }
\DoxyCodeLine{2439       \textcolor{comment}{// pass 3}}
\DoxyCodeLine{2440       dct\_trn8\_32(p0, p4);}
\DoxyCodeLine{2441       dct\_trn8\_32(p1, p5);}
\DoxyCodeLine{2442       dct\_trn8\_32(p2, p6);}
\DoxyCodeLine{2443       dct\_trn8\_32(p3, p7);}
\DoxyCodeLine{2444 }
\DoxyCodeLine{2445       \textcolor{comment}{// store}}
\DoxyCodeLine{2446       vst1\_u8(out, p0); out += out\_stride;}
\DoxyCodeLine{2447       vst1\_u8(out, p1); out += out\_stride;}
\DoxyCodeLine{2448       vst1\_u8(out, p2); out += out\_stride;}
\DoxyCodeLine{2449       vst1\_u8(out, p3); out += out\_stride;}
\DoxyCodeLine{2450       vst1\_u8(out, p4); out += out\_stride;}
\DoxyCodeLine{2451       vst1\_u8(out, p5); out += out\_stride;}
\DoxyCodeLine{2452       vst1\_u8(out, p6); out += out\_stride;}
\DoxyCodeLine{2453       vst1\_u8(out, p7);}
\DoxyCodeLine{2454 }
\DoxyCodeLine{2455 \textcolor{preprocessor}{\#undef dct\_trn8\_8}}
\DoxyCodeLine{2456 \textcolor{preprocessor}{\#undef dct\_trn8\_16}}
\DoxyCodeLine{2457 \textcolor{preprocessor}{\#undef dct\_trn8\_32}}
\DoxyCodeLine{2458    \}}
\DoxyCodeLine{2459 }
\DoxyCodeLine{2460 \textcolor{preprocessor}{\#undef dct\_long\_mul}}
\DoxyCodeLine{2461 \textcolor{preprocessor}{\#undef dct\_long\_mac}}
\DoxyCodeLine{2462 \textcolor{preprocessor}{\#undef dct\_widen}}
\DoxyCodeLine{2463 \textcolor{preprocessor}{\#undef dct\_wadd}}
\DoxyCodeLine{2464 \textcolor{preprocessor}{\#undef dct\_wsub}}
\DoxyCodeLine{2465 \textcolor{preprocessor}{\#undef dct\_bfly32o}}
\DoxyCodeLine{2466 \textcolor{preprocessor}{\#undef dct\_pass}}
\DoxyCodeLine{2467 \}}
\DoxyCodeLine{2468 }
\DoxyCodeLine{2469 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STBI\_NEON}}
\DoxyCodeLine{2470 }
\DoxyCodeLine{2471 \textcolor{preprocessor}{\#define STBI\_\_MARKER\_none  0xff}}
\DoxyCodeLine{2472 \textcolor{comment}{// if there's a pending marker from the entropy stream, return that}}
\DoxyCodeLine{2473 \textcolor{comment}{// otherwise, fetch from the stream and get a marker. if there's no}}
\DoxyCodeLine{2474 \textcolor{comment}{// marker, return 0xff, which is never a valid marker value}}
\DoxyCodeLine{2475 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} stbi\_\_get\_marker(\mbox{\hyperlink{structstbi____jpeg}{stbi\_\_jpeg}} *j)}
\DoxyCodeLine{2476 \{}
\DoxyCodeLine{2477    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} x;}
\DoxyCodeLine{2478    \textcolor{keywordflow}{if} (j-\/>\mbox{\hyperlink{structstbi____jpeg_a36a53176d6134d68272fa32cb8afc740}{marker}} != \mbox{\hyperlink{stb__image_8h_aa84cff07b4bb7cb4ee7319eb06c0d42b}{STBI\_\_MARKER\_none}}) \{ x = j-\/>\mbox{\hyperlink{structstbi____jpeg_a36a53176d6134d68272fa32cb8afc740}{marker}}; j-\/>\mbox{\hyperlink{structstbi____jpeg_a36a53176d6134d68272fa32cb8afc740}{marker}} = \mbox{\hyperlink{stb__image_8h_aa84cff07b4bb7cb4ee7319eb06c0d42b}{STBI\_\_MARKER\_none}}; \textcolor{keywordflow}{return} x; \}}
\DoxyCodeLine{2479    x = stbi\_\_get8(j-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}});}
\DoxyCodeLine{2480    \textcolor{keywordflow}{if} (x != 0xff) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_aa84cff07b4bb7cb4ee7319eb06c0d42b}{STBI\_\_MARKER\_none}};}
\DoxyCodeLine{2481    \textcolor{keywordflow}{while} (x == 0xff)}
\DoxyCodeLine{2482       x = stbi\_\_get8(j-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}});}
\DoxyCodeLine{2483    \textcolor{keywordflow}{return} x;}
\DoxyCodeLine{2484 \}}
\DoxyCodeLine{2485 }
\DoxyCodeLine{2486 \textcolor{comment}{// in each scan, we'll have scan\_n components, and the order}}
\DoxyCodeLine{2487 \textcolor{comment}{// of the components is specified by order[]}}
\DoxyCodeLine{2488 \textcolor{preprocessor}{\#define STBI\_\_RESTART(x)     ((x) >= 0xd0 \&\& (x) <= 0xd7)}}
\DoxyCodeLine{2489 }
\DoxyCodeLine{2490 \textcolor{comment}{// after a restart interval, stbi\_\_jpeg\_reset the entropy decoder and}}
\DoxyCodeLine{2491 \textcolor{comment}{// the dc prediction}}
\DoxyCodeLine{2492 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_jpeg\_reset(\mbox{\hyperlink{structstbi____jpeg}{stbi\_\_jpeg}} *j)}
\DoxyCodeLine{2493 \{}
\DoxyCodeLine{2494    j-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}} = 0;}
\DoxyCodeLine{2495    j-\/>\mbox{\hyperlink{structstbi____jpeg_a52c547398159b326dc765e61e5fdb5f0}{code\_buffer}} = 0;}
\DoxyCodeLine{2496    j-\/>\mbox{\hyperlink{structstbi____jpeg_a3d924977bae77c20d09c47616d59e89d}{nomore}} = 0;}
\DoxyCodeLine{2497    j-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[0].\mbox{\hyperlink{structstbi____jpeg_a7d92e04a7285197a36b7de123a0174d1}{dc\_pred}} = j-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[1].\mbox{\hyperlink{structstbi____jpeg_a7d92e04a7285197a36b7de123a0174d1}{dc\_pred}} = j-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[2].\mbox{\hyperlink{structstbi____jpeg_a7d92e04a7285197a36b7de123a0174d1}{dc\_pred}} = 0;}
\DoxyCodeLine{2498    j-\/>\mbox{\hyperlink{structstbi____jpeg_a36a53176d6134d68272fa32cb8afc740}{marker}} = \mbox{\hyperlink{stb__image_8h_aa84cff07b4bb7cb4ee7319eb06c0d42b}{STBI\_\_MARKER\_none}};}
\DoxyCodeLine{2499    j-\/>\mbox{\hyperlink{structstbi____jpeg_a41181fd3c6b5bb6277a51fafcc8dbf47}{todo}} = j-\/>\mbox{\hyperlink{structstbi____jpeg_ae2caa61baf3d6b9f0349c530470e0c99}{restart\_interval}} ? j-\/>\mbox{\hyperlink{structstbi____jpeg_ae2caa61baf3d6b9f0349c530470e0c99}{restart\_interval}} : 0x7fffffff;}
\DoxyCodeLine{2500    j-\/>\mbox{\hyperlink{structstbi____jpeg_a6796ffb96906a98fe764b7ebf08076b6}{eob\_run}} = 0;}
\DoxyCodeLine{2501    \textcolor{comment}{// no more than 1<<31 MCUs if no restart\_interal? that's plenty safe,}}
\DoxyCodeLine{2502    \textcolor{comment}{// since we don't even allow 1<<30 pixels}}
\DoxyCodeLine{2503 \}}
\DoxyCodeLine{2504 }
\DoxyCodeLine{2505 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_parse\_entropy\_coded\_data(\mbox{\hyperlink{structstbi____jpeg}{stbi\_\_jpeg}} *z)}
\DoxyCodeLine{2506 \{}
\DoxyCodeLine{2507    stbi\_\_jpeg\_reset(z);}
\DoxyCodeLine{2508    \textcolor{keywordflow}{if} (!z-\/>\mbox{\hyperlink{structstbi____jpeg_ac843968318414002ea541b28e2cfa49f}{progressive}}) \{}
\DoxyCodeLine{2509       \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____jpeg_a51fb45f99daa102d13f6ae8d397d5d0d}{scan\_n}} == 1) \{}
\DoxyCodeLine{2510          \textcolor{keywordtype}{int} i,j;}
\DoxyCodeLine{2511          \mbox{\hyperlink{stb__image_8h_a34783cf58aa37a06276bbbefa118e1d3}{STBI\_SIMD\_ALIGN}}(\textcolor{keywordtype}{short}, data[64]);}
\DoxyCodeLine{2512          \textcolor{keywordtype}{int} n = z-\/>\mbox{\hyperlink{structstbi____jpeg_ad24acf0948f49af735ce62a2028c31b5}{order}}[0];}
\DoxyCodeLine{2513          \textcolor{comment}{// non-\/interleaved data, we just need to process one block at a time,}}
\DoxyCodeLine{2514          \textcolor{comment}{// in trivial scanline order}}
\DoxyCodeLine{2515          \textcolor{comment}{// number of blocks to do just depends on how many actual "{}pixels"{} this}}
\DoxyCodeLine{2516          \textcolor{comment}{// component has, independent of interleaved MCU blocking and such}}
\DoxyCodeLine{2517          \textcolor{keywordtype}{int} w = (z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_a339d8a3189a552ba8d55901056ad4ee4}{x}}+7) >> 3;}
\DoxyCodeLine{2518          \textcolor{keywordtype}{int} h = (z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_a050961354fd8e9f77a83a715037beaa4}{y}}+7) >> 3;}
\DoxyCodeLine{2519          \textcolor{keywordflow}{for} (j=0; j < h; ++j) \{}
\DoxyCodeLine{2520             \textcolor{keywordflow}{for} (i=0; i < w; ++i) \{}
\DoxyCodeLine{2521                \textcolor{keywordtype}{int} ha = z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_a017151f0d70b86502dc3633559c69e09}{ha}};}
\DoxyCodeLine{2522                \textcolor{keywordflow}{if} (!stbi\_\_jpeg\_decode\_block(z, data, z-\/>\mbox{\hyperlink{structstbi____jpeg_a555ae4b9a25cb34967357fe354ca908f}{huff\_dc}}+z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_ab505a1bedcb785390452c2298c3485c7}{hd}}, z-\/>\mbox{\hyperlink{structstbi____jpeg_a9cf2ae42caab1b9fa27ef06246977d0c}{huff\_ac}}+ha, z-\/>\mbox{\hyperlink{structstbi____jpeg_a6c55468bd6dd109c9b2b16be767001cd}{fast\_ac}}[ha], n, z-\/>\mbox{\hyperlink{structstbi____jpeg_ae0d541755f1920f0286d9e0ecf4ec747}{dequant}}[z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_a082cff2403c697d89ddf98a752d062cb}{tq}}])) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2523                z-\/>\mbox{\hyperlink{structstbi____jpeg_acdd33a51ea0f177683a0cf661f0b6161}{idct\_block\_kernel}}(z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_a7f2ba34d082f8eb97e290dbf78b29e64}{data}}+z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_ad3e572acfe7eafe0aa3978ac2145acce}{w2}}*j*8+i*8, z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_ad3e572acfe7eafe0aa3978ac2145acce}{w2}}, data);}
\DoxyCodeLine{2524                \textcolor{comment}{// every data block is an MCU, so countdown the restart interval}}
\DoxyCodeLine{2525                \textcolor{keywordflow}{if} (-\/-\/z-\/>\mbox{\hyperlink{structstbi____jpeg_a41181fd3c6b5bb6277a51fafcc8dbf47}{todo}} <= 0) \{}
\DoxyCodeLine{2526                   \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}} < 24) stbi\_\_grow\_buffer\_unsafe(z);}
\DoxyCodeLine{2527                   \textcolor{comment}{// if it's NOT a restart, then just bail, so we get corrupt data}}
\DoxyCodeLine{2528                   \textcolor{comment}{// rather than no data}}
\DoxyCodeLine{2529                   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{stb__image_8h_a40470d45a8dc956efdcdd4f3bc257ff0}{STBI\_\_RESTART}}(z-\/>\mbox{\hyperlink{structstbi____jpeg_a36a53176d6134d68272fa32cb8afc740}{marker}})) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2530                   stbi\_\_jpeg\_reset(z);}
\DoxyCodeLine{2531                \}}
\DoxyCodeLine{2532             \}}
\DoxyCodeLine{2533          \}}
\DoxyCodeLine{2534          \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2535       \} \textcolor{keywordflow}{else} \{ \textcolor{comment}{// interleaved}}
\DoxyCodeLine{2536          \textcolor{keywordtype}{int} i,j,k,x,y;}
\DoxyCodeLine{2537          \mbox{\hyperlink{stb__image_8h_a34783cf58aa37a06276bbbefa118e1d3}{STBI\_SIMD\_ALIGN}}(\textcolor{keywordtype}{short}, data[64]);}
\DoxyCodeLine{2538          \textcolor{keywordflow}{for} (j=0; j < z-\/>\mbox{\hyperlink{structstbi____jpeg_a251b647a1a88243f59ae797a100662fb}{img\_mcu\_y}}; ++j) \{}
\DoxyCodeLine{2539             \textcolor{keywordflow}{for} (i=0; i < z-\/>\mbox{\hyperlink{structstbi____jpeg_a08b7f91e5758ac0ccce8571db74a345f}{img\_mcu\_x}}; ++i) \{}
\DoxyCodeLine{2540                \textcolor{comment}{// scan an interleaved mcu... process scan\_n components in order}}
\DoxyCodeLine{2541                \textcolor{keywordflow}{for} (k=0; k < z-\/>\mbox{\hyperlink{structstbi____jpeg_a51fb45f99daa102d13f6ae8d397d5d0d}{scan\_n}}; ++k) \{}
\DoxyCodeLine{2542                   \textcolor{keywordtype}{int} n = z-\/>\mbox{\hyperlink{structstbi____jpeg_ad24acf0948f49af735ce62a2028c31b5}{order}}[k];}
\DoxyCodeLine{2543                   \textcolor{comment}{// scan out an mcu's worth of this component; that's just determined}}
\DoxyCodeLine{2544                   \textcolor{comment}{// by the basic H and V specified for the component}}
\DoxyCodeLine{2545                   \textcolor{keywordflow}{for} (y=0; y < z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_a9862074449c957c4c9cbaacbc621f43f}{v}}; ++y) \{}
\DoxyCodeLine{2546                      \textcolor{keywordflow}{for} (x=0; x < z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_aeba05300b505081d0ab14c17ee7b86f6}{h}}; ++x) \{}
\DoxyCodeLine{2547                         \textcolor{keywordtype}{int} x2 = (i*z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_aeba05300b505081d0ab14c17ee7b86f6}{h}} + x)*8;}
\DoxyCodeLine{2548                         \textcolor{keywordtype}{int} y2 = (j*z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_a9862074449c957c4c9cbaacbc621f43f}{v}} + y)*8;}
\DoxyCodeLine{2549                         \textcolor{keywordtype}{int} ha = z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_a017151f0d70b86502dc3633559c69e09}{ha}};}
\DoxyCodeLine{2550                         \textcolor{keywordflow}{if} (!stbi\_\_jpeg\_decode\_block(z, data, z-\/>\mbox{\hyperlink{structstbi____jpeg_a555ae4b9a25cb34967357fe354ca908f}{huff\_dc}}+z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_ab505a1bedcb785390452c2298c3485c7}{hd}}, z-\/>\mbox{\hyperlink{structstbi____jpeg_a9cf2ae42caab1b9fa27ef06246977d0c}{huff\_ac}}+ha, z-\/>\mbox{\hyperlink{structstbi____jpeg_a6c55468bd6dd109c9b2b16be767001cd}{fast\_ac}}[ha], n, z-\/>\mbox{\hyperlink{structstbi____jpeg_ae0d541755f1920f0286d9e0ecf4ec747}{dequant}}[z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_a082cff2403c697d89ddf98a752d062cb}{tq}}])) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2551                         z-\/>\mbox{\hyperlink{structstbi____jpeg_acdd33a51ea0f177683a0cf661f0b6161}{idct\_block\_kernel}}(z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_a7f2ba34d082f8eb97e290dbf78b29e64}{data}}+z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_ad3e572acfe7eafe0aa3978ac2145acce}{w2}}*y2+x2, z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_ad3e572acfe7eafe0aa3978ac2145acce}{w2}}, data);}
\DoxyCodeLine{2552                      \}}
\DoxyCodeLine{2553                   \}}
\DoxyCodeLine{2554                \}}
\DoxyCodeLine{2555                \textcolor{comment}{// after all interleaved components, that's an interleaved MCU,}}
\DoxyCodeLine{2556                \textcolor{comment}{// so now count down the restart interval}}
\DoxyCodeLine{2557                \textcolor{keywordflow}{if} (-\/-\/z-\/>\mbox{\hyperlink{structstbi____jpeg_a41181fd3c6b5bb6277a51fafcc8dbf47}{todo}} <= 0) \{}
\DoxyCodeLine{2558                   \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}} < 24) stbi\_\_grow\_buffer\_unsafe(z);}
\DoxyCodeLine{2559                   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{stb__image_8h_a40470d45a8dc956efdcdd4f3bc257ff0}{STBI\_\_RESTART}}(z-\/>\mbox{\hyperlink{structstbi____jpeg_a36a53176d6134d68272fa32cb8afc740}{marker}})) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2560                   stbi\_\_jpeg\_reset(z);}
\DoxyCodeLine{2561                \}}
\DoxyCodeLine{2562             \}}
\DoxyCodeLine{2563          \}}
\DoxyCodeLine{2564          \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2565       \}}
\DoxyCodeLine{2566    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2567       \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____jpeg_a51fb45f99daa102d13f6ae8d397d5d0d}{scan\_n}} == 1) \{}
\DoxyCodeLine{2568          \textcolor{keywordtype}{int} i,j;}
\DoxyCodeLine{2569          \textcolor{keywordtype}{int} n = z-\/>\mbox{\hyperlink{structstbi____jpeg_ad24acf0948f49af735ce62a2028c31b5}{order}}[0];}
\DoxyCodeLine{2570          \textcolor{comment}{// non-\/interleaved data, we just need to process one block at a time,}}
\DoxyCodeLine{2571          \textcolor{comment}{// in trivial scanline order}}
\DoxyCodeLine{2572          \textcolor{comment}{// number of blocks to do just depends on how many actual "{}pixels"{} this}}
\DoxyCodeLine{2573          \textcolor{comment}{// component has, independent of interleaved MCU blocking and such}}
\DoxyCodeLine{2574          \textcolor{keywordtype}{int} w = (z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_a339d8a3189a552ba8d55901056ad4ee4}{x}}+7) >> 3;}
\DoxyCodeLine{2575          \textcolor{keywordtype}{int} h = (z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_a050961354fd8e9f77a83a715037beaa4}{y}}+7) >> 3;}
\DoxyCodeLine{2576          \textcolor{keywordflow}{for} (j=0; j < h; ++j) \{}
\DoxyCodeLine{2577             \textcolor{keywordflow}{for} (i=0; i < w; ++i) \{}
\DoxyCodeLine{2578                \textcolor{keywordtype}{short} *data = z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_a67b1b16da5ebbf5e93a05d8675584e83}{coeff}} + 64 * (i + j * z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_a57908e0ed113a91e9d25905f856508f6}{coeff\_w}});}
\DoxyCodeLine{2579                \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____jpeg_afe2cf1246faa9ed08b205b68fc2fef8a}{spec\_start}} == 0) \{}
\DoxyCodeLine{2580                   \textcolor{keywordflow}{if} (!stbi\_\_jpeg\_decode\_block\_prog\_dc(z, data, \&z-\/>\mbox{\hyperlink{structstbi____jpeg_a555ae4b9a25cb34967357fe354ca908f}{huff\_dc}}[z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_ab505a1bedcb785390452c2298c3485c7}{hd}}], n))}
\DoxyCodeLine{2581                      \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2582                \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2583                   \textcolor{keywordtype}{int} ha = z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_a017151f0d70b86502dc3633559c69e09}{ha}};}
\DoxyCodeLine{2584                   \textcolor{keywordflow}{if} (!stbi\_\_jpeg\_decode\_block\_prog\_ac(z, data, \&z-\/>\mbox{\hyperlink{structstbi____jpeg_a9cf2ae42caab1b9fa27ef06246977d0c}{huff\_ac}}[ha], z-\/>\mbox{\hyperlink{structstbi____jpeg_a6c55468bd6dd109c9b2b16be767001cd}{fast\_ac}}[ha]))}
\DoxyCodeLine{2585                      \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2586                \}}
\DoxyCodeLine{2587                \textcolor{comment}{// every data block is an MCU, so countdown the restart interval}}
\DoxyCodeLine{2588                \textcolor{keywordflow}{if} (-\/-\/z-\/>\mbox{\hyperlink{structstbi____jpeg_a41181fd3c6b5bb6277a51fafcc8dbf47}{todo}} <= 0) \{}
\DoxyCodeLine{2589                   \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}} < 24) stbi\_\_grow\_buffer\_unsafe(z);}
\DoxyCodeLine{2590                   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{stb__image_8h_a40470d45a8dc956efdcdd4f3bc257ff0}{STBI\_\_RESTART}}(z-\/>\mbox{\hyperlink{structstbi____jpeg_a36a53176d6134d68272fa32cb8afc740}{marker}})) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2591                   stbi\_\_jpeg\_reset(z);}
\DoxyCodeLine{2592                \}}
\DoxyCodeLine{2593             \}}
\DoxyCodeLine{2594          \}}
\DoxyCodeLine{2595          \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2596       \} \textcolor{keywordflow}{else} \{ \textcolor{comment}{// interleaved}}
\DoxyCodeLine{2597          \textcolor{keywordtype}{int} i,j,k,x,y;}
\DoxyCodeLine{2598          \textcolor{keywordflow}{for} (j=0; j < z-\/>\mbox{\hyperlink{structstbi____jpeg_a251b647a1a88243f59ae797a100662fb}{img\_mcu\_y}}; ++j) \{}
\DoxyCodeLine{2599             \textcolor{keywordflow}{for} (i=0; i < z-\/>\mbox{\hyperlink{structstbi____jpeg_a08b7f91e5758ac0ccce8571db74a345f}{img\_mcu\_x}}; ++i) \{}
\DoxyCodeLine{2600                \textcolor{comment}{// scan an interleaved mcu... process scan\_n components in order}}
\DoxyCodeLine{2601                \textcolor{keywordflow}{for} (k=0; k < z-\/>\mbox{\hyperlink{structstbi____jpeg_a51fb45f99daa102d13f6ae8d397d5d0d}{scan\_n}}; ++k) \{}
\DoxyCodeLine{2602                   \textcolor{keywordtype}{int} n = z-\/>\mbox{\hyperlink{structstbi____jpeg_ad24acf0948f49af735ce62a2028c31b5}{order}}[k];}
\DoxyCodeLine{2603                   \textcolor{comment}{// scan out an mcu's worth of this component; that's just determined}}
\DoxyCodeLine{2604                   \textcolor{comment}{// by the basic H and V specified for the component}}
\DoxyCodeLine{2605                   \textcolor{keywordflow}{for} (y=0; y < z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_a9862074449c957c4c9cbaacbc621f43f}{v}}; ++y) \{}
\DoxyCodeLine{2606                      \textcolor{keywordflow}{for} (x=0; x < z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_aeba05300b505081d0ab14c17ee7b86f6}{h}}; ++x) \{}
\DoxyCodeLine{2607                         \textcolor{keywordtype}{int} x2 = (i*z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_aeba05300b505081d0ab14c17ee7b86f6}{h}} + x);}
\DoxyCodeLine{2608                         \textcolor{keywordtype}{int} y2 = (j*z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_a9862074449c957c4c9cbaacbc621f43f}{v}} + y);}
\DoxyCodeLine{2609                         \textcolor{keywordtype}{short} *data = z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_a67b1b16da5ebbf5e93a05d8675584e83}{coeff}} + 64 * (x2 + y2 * z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_a57908e0ed113a91e9d25905f856508f6}{coeff\_w}});}
\DoxyCodeLine{2610                         \textcolor{keywordflow}{if} (!stbi\_\_jpeg\_decode\_block\_prog\_dc(z, data, \&z-\/>\mbox{\hyperlink{structstbi____jpeg_a555ae4b9a25cb34967357fe354ca908f}{huff\_dc}}[z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_ab505a1bedcb785390452c2298c3485c7}{hd}}], n))}
\DoxyCodeLine{2611                            \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2612                      \}}
\DoxyCodeLine{2613                   \}}
\DoxyCodeLine{2614                \}}
\DoxyCodeLine{2615                \textcolor{comment}{// after all interleaved components, that's an interleaved MCU,}}
\DoxyCodeLine{2616                \textcolor{comment}{// so now count down the restart interval}}
\DoxyCodeLine{2617                \textcolor{keywordflow}{if} (-\/-\/z-\/>\mbox{\hyperlink{structstbi____jpeg_a41181fd3c6b5bb6277a51fafcc8dbf47}{todo}} <= 0) \{}
\DoxyCodeLine{2618                   \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____jpeg_ab078b472a3c6c4a231a028890c55958f}{code\_bits}} < 24) stbi\_\_grow\_buffer\_unsafe(z);}
\DoxyCodeLine{2619                   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{stb__image_8h_a40470d45a8dc956efdcdd4f3bc257ff0}{STBI\_\_RESTART}}(z-\/>\mbox{\hyperlink{structstbi____jpeg_a36a53176d6134d68272fa32cb8afc740}{marker}})) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2620                   stbi\_\_jpeg\_reset(z);}
\DoxyCodeLine{2621                \}}
\DoxyCodeLine{2622             \}}
\DoxyCodeLine{2623          \}}
\DoxyCodeLine{2624          \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2625       \}}
\DoxyCodeLine{2626    \}}
\DoxyCodeLine{2627 \}}
\DoxyCodeLine{2628 }
\DoxyCodeLine{2629 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_jpeg\_dequantize(\textcolor{keywordtype}{short} *data, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *dequant)}
\DoxyCodeLine{2630 \{}
\DoxyCodeLine{2631    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{2632    \textcolor{keywordflow}{for} (i=0; i < 64; ++i)}
\DoxyCodeLine{2633       data[i] *= dequant[i];}
\DoxyCodeLine{2634 \}}
\DoxyCodeLine{2635 }
\DoxyCodeLine{2636 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_jpeg\_finish(\mbox{\hyperlink{structstbi____jpeg}{stbi\_\_jpeg}} *z)}
\DoxyCodeLine{2637 \{}
\DoxyCodeLine{2638    \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____jpeg_ac843968318414002ea541b28e2cfa49f}{progressive}}) \{}
\DoxyCodeLine{2639       \textcolor{comment}{// dequantize and idct the data}}
\DoxyCodeLine{2640       \textcolor{keywordtype}{int} i,j,n;}
\DoxyCodeLine{2641       \textcolor{keywordflow}{for} (n=0; n < z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}}; ++n) \{}
\DoxyCodeLine{2642          \textcolor{keywordtype}{int} w = (z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_a339d8a3189a552ba8d55901056ad4ee4}{x}}+7) >> 3;}
\DoxyCodeLine{2643          \textcolor{keywordtype}{int} h = (z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_a050961354fd8e9f77a83a715037beaa4}{y}}+7) >> 3;}
\DoxyCodeLine{2644          \textcolor{keywordflow}{for} (j=0; j < h; ++j) \{}
\DoxyCodeLine{2645             \textcolor{keywordflow}{for} (i=0; i < w; ++i) \{}
\DoxyCodeLine{2646                \textcolor{keywordtype}{short} *data = z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_a67b1b16da5ebbf5e93a05d8675584e83}{coeff}} + 64 * (i + j * z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_a57908e0ed113a91e9d25905f856508f6}{coeff\_w}});}
\DoxyCodeLine{2647                stbi\_\_jpeg\_dequantize(data, z-\/>\mbox{\hyperlink{structstbi____jpeg_ae0d541755f1920f0286d9e0ecf4ec747}{dequant}}[z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_a082cff2403c697d89ddf98a752d062cb}{tq}}]);}
\DoxyCodeLine{2648                z-\/>\mbox{\hyperlink{structstbi____jpeg_acdd33a51ea0f177683a0cf661f0b6161}{idct\_block\_kernel}}(z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_a7f2ba34d082f8eb97e290dbf78b29e64}{data}}+z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_ad3e572acfe7eafe0aa3978ac2145acce}{w2}}*j*8+i*8, z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[n].\mbox{\hyperlink{structstbi____jpeg_ad3e572acfe7eafe0aa3978ac2145acce}{w2}}, data);}
\DoxyCodeLine{2649             \}}
\DoxyCodeLine{2650          \}}
\DoxyCodeLine{2651       \}}
\DoxyCodeLine{2652    \}}
\DoxyCodeLine{2653 \}}
\DoxyCodeLine{2654 }
\DoxyCodeLine{2655 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_process\_marker(\mbox{\hyperlink{structstbi____jpeg}{stbi\_\_jpeg}} *z, \textcolor{keywordtype}{int} m)}
\DoxyCodeLine{2656 \{}
\DoxyCodeLine{2657    \textcolor{keywordtype}{int} L;}
\DoxyCodeLine{2658    \textcolor{keywordflow}{switch} (m) \{}
\DoxyCodeLine{2659       \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__image_8h_aa84cff07b4bb7cb4ee7319eb06c0d42b}{STBI\_\_MARKER\_none}}: \textcolor{comment}{// no marker found}}
\DoxyCodeLine{2660          \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}expected marker"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2661 }
\DoxyCodeLine{2662       \textcolor{keywordflow}{case} 0xDD: \textcolor{comment}{// DRI -\/ specify restart interval}}
\DoxyCodeLine{2663          \textcolor{keywordflow}{if} (stbi\_\_get16be(z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}) != 4) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad DRI len"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2664          z-\/>\mbox{\hyperlink{structstbi____jpeg_ae2caa61baf3d6b9f0349c530470e0c99}{restart\_interval}} = stbi\_\_get16be(z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}});}
\DoxyCodeLine{2665          \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2666 }
\DoxyCodeLine{2667       \textcolor{keywordflow}{case} 0xDB: \textcolor{comment}{// DQT -\/ define quantization table}}
\DoxyCodeLine{2668          L = stbi\_\_get16be(z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}})-\/2;}
\DoxyCodeLine{2669          \textcolor{keywordflow}{while} (L > 0) \{}
\DoxyCodeLine{2670             \textcolor{keywordtype}{int} q = stbi\_\_get8(z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}});}
\DoxyCodeLine{2671             \textcolor{keywordtype}{int} p = q >> 4;}
\DoxyCodeLine{2672             \textcolor{keywordtype}{int} t = q \& 15,i;}
\DoxyCodeLine{2673             \textcolor{keywordflow}{if} (p != 0) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad DQT type"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2674             \textcolor{keywordflow}{if} (t > 3) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad DQT table"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2675             \textcolor{keywordflow}{for} (i=0; i < 64; ++i)}
\DoxyCodeLine{2676                z-\/>\mbox{\hyperlink{structstbi____jpeg_ae0d541755f1920f0286d9e0ecf4ec747}{dequant}}[t][stbi\_\_jpeg\_dezigzag[i]] = stbi\_\_get8(z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}});}
\DoxyCodeLine{2677             L -\/= 65;}
\DoxyCodeLine{2678          \}}
\DoxyCodeLine{2679          \textcolor{keywordflow}{return} L==0;}
\DoxyCodeLine{2680 }
\DoxyCodeLine{2681       \textcolor{keywordflow}{case} 0xC4: \textcolor{comment}{// DHT -\/ define huffman table}}
\DoxyCodeLine{2682          L = stbi\_\_get16be(z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}})-\/2;}
\DoxyCodeLine{2683          \textcolor{keywordflow}{while} (L > 0) \{}
\DoxyCodeLine{2684             \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *v;}
\DoxyCodeLine{2685             \textcolor{keywordtype}{int} sizes[16],i,n=0;}
\DoxyCodeLine{2686             \textcolor{keywordtype}{int} q = stbi\_\_get8(z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}});}
\DoxyCodeLine{2687             \textcolor{keywordtype}{int} tc = q >> 4;}
\DoxyCodeLine{2688             \textcolor{keywordtype}{int} th = q \& 15;}
\DoxyCodeLine{2689             \textcolor{keywordflow}{if} (tc > 1 || th > 3) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad DHT header"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2690             \textcolor{keywordflow}{for} (i=0; i < 16; ++i) \{}
\DoxyCodeLine{2691                sizes[i] = stbi\_\_get8(z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}});}
\DoxyCodeLine{2692                n += sizes[i];}
\DoxyCodeLine{2693             \}}
\DoxyCodeLine{2694             L -\/= 17;}
\DoxyCodeLine{2695             \textcolor{keywordflow}{if} (tc == 0) \{}
\DoxyCodeLine{2696                \textcolor{keywordflow}{if} (!stbi\_\_build\_huffman(z-\/>\mbox{\hyperlink{structstbi____jpeg_a555ae4b9a25cb34967357fe354ca908f}{huff\_dc}}+th, sizes)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2697                v = z-\/>\mbox{\hyperlink{structstbi____jpeg_a555ae4b9a25cb34967357fe354ca908f}{huff\_dc}}[th].\mbox{\hyperlink{structstbi____huffman_a7cbfc34798213d9d0bd1970347ed3d88}{values}};}
\DoxyCodeLine{2698             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2699                \textcolor{keywordflow}{if} (!stbi\_\_build\_huffman(z-\/>\mbox{\hyperlink{structstbi____jpeg_a9cf2ae42caab1b9fa27ef06246977d0c}{huff\_ac}}+th, sizes)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2700                v = z-\/>\mbox{\hyperlink{structstbi____jpeg_a9cf2ae42caab1b9fa27ef06246977d0c}{huff\_ac}}[th].\mbox{\hyperlink{structstbi____huffman_a7cbfc34798213d9d0bd1970347ed3d88}{values}};}
\DoxyCodeLine{2701             \}}
\DoxyCodeLine{2702             \textcolor{keywordflow}{for} (i=0; i < n; ++i)}
\DoxyCodeLine{2703                v[i] = stbi\_\_get8(z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}});}
\DoxyCodeLine{2704             \textcolor{keywordflow}{if} (tc != 0)}
\DoxyCodeLine{2705                stbi\_\_build\_fast\_ac(z-\/>\mbox{\hyperlink{structstbi____jpeg_a6c55468bd6dd109c9b2b16be767001cd}{fast\_ac}}[th], z-\/>\mbox{\hyperlink{structstbi____jpeg_a9cf2ae42caab1b9fa27ef06246977d0c}{huff\_ac}} + th);}
\DoxyCodeLine{2706             L -\/= n;}
\DoxyCodeLine{2707          \}}
\DoxyCodeLine{2708          \textcolor{keywordflow}{return} L==0;}
\DoxyCodeLine{2709    \}}
\DoxyCodeLine{2710    \textcolor{comment}{// check for comment block or APP blocks}}
\DoxyCodeLine{2711    \textcolor{keywordflow}{if} ((m >= 0xE0 \&\& m <= 0xEF) || m == 0xFE) \{}
\DoxyCodeLine{2712       stbi\_\_skip(z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}, stbi\_\_get16be(z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}})-\/2);}
\DoxyCodeLine{2713       \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2714    \}}
\DoxyCodeLine{2715    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2716 \}}
\DoxyCodeLine{2717 }
\DoxyCodeLine{2718 \textcolor{comment}{// after we see SOS}}
\DoxyCodeLine{2719 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_process\_scan\_header(\mbox{\hyperlink{structstbi____jpeg}{stbi\_\_jpeg}} *z)}
\DoxyCodeLine{2720 \{}
\DoxyCodeLine{2721    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{2722    \textcolor{keywordtype}{int} Ls = stbi\_\_get16be(z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}});}
\DoxyCodeLine{2723    z-\/>\mbox{\hyperlink{structstbi____jpeg_a51fb45f99daa102d13f6ae8d397d5d0d}{scan\_n}} = stbi\_\_get8(z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}});}
\DoxyCodeLine{2724    \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____jpeg_a51fb45f99daa102d13f6ae8d397d5d0d}{scan\_n}} < 1 || z-\/>\mbox{\hyperlink{structstbi____jpeg_a51fb45f99daa102d13f6ae8d397d5d0d}{scan\_n}} > 4 || z-\/>\mbox{\hyperlink{structstbi____jpeg_a51fb45f99daa102d13f6ae8d397d5d0d}{scan\_n}} > (\textcolor{keywordtype}{int}) z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}}) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad SOS component count"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2725    \textcolor{keywordflow}{if} (Ls != 6+2*z-\/>\mbox{\hyperlink{structstbi____jpeg_a51fb45f99daa102d13f6ae8d397d5d0d}{scan\_n}}) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad SOS len"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2726    \textcolor{keywordflow}{for} (i=0; i < z-\/>\mbox{\hyperlink{structstbi____jpeg_a51fb45f99daa102d13f6ae8d397d5d0d}{scan\_n}}; ++i) \{}
\DoxyCodeLine{2727       \textcolor{keywordtype}{int} \textcolor{keywordtype}{id} = stbi\_\_get8(z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}), which;}
\DoxyCodeLine{2728       \textcolor{keywordtype}{int} q = stbi\_\_get8(z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}});}
\DoxyCodeLine{2729       \textcolor{keywordflow}{for} (which = 0; which < z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}}; ++which)}
\DoxyCodeLine{2730          \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[which].\mbox{\hyperlink{structstbi____jpeg_a680d30ebc3bd831d6081fa02d41428c1}{id}} == \textcolor{keywordtype}{id})}
\DoxyCodeLine{2731             \textcolor{keywordflow}{break};}
\DoxyCodeLine{2732       \textcolor{keywordflow}{if} (which == z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}}) \textcolor{keywordflow}{return} 0; \textcolor{comment}{// no match}}
\DoxyCodeLine{2733       z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[which].\mbox{\hyperlink{structstbi____jpeg_ab505a1bedcb785390452c2298c3485c7}{hd}} = q >> 4;   \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[which].\mbox{\hyperlink{structstbi____jpeg_ab505a1bedcb785390452c2298c3485c7}{hd}} > 3) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad DC huff"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2734       z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[which].\mbox{\hyperlink{structstbi____jpeg_a017151f0d70b86502dc3633559c69e09}{ha}} = q \& 15;   \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[which].\mbox{\hyperlink{structstbi____jpeg_a017151f0d70b86502dc3633559c69e09}{ha}} > 3) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad AC huff"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2735       z-\/>\mbox{\hyperlink{structstbi____jpeg_ad24acf0948f49af735ce62a2028c31b5}{order}}[i] = which;}
\DoxyCodeLine{2736    \}}
\DoxyCodeLine{2737 }
\DoxyCodeLine{2738    \{}
\DoxyCodeLine{2739       \textcolor{keywordtype}{int} aa;}
\DoxyCodeLine{2740       z-\/>\mbox{\hyperlink{structstbi____jpeg_afe2cf1246faa9ed08b205b68fc2fef8a}{spec\_start}} = stbi\_\_get8(z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}});}
\DoxyCodeLine{2741       z-\/>\mbox{\hyperlink{structstbi____jpeg_a854599aadc1e91857b7bd7d96cc2d7a8}{spec\_end}}   = stbi\_\_get8(z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}); \textcolor{comment}{// should be 63, but might be 0}}
\DoxyCodeLine{2742       aa = stbi\_\_get8(z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}});}
\DoxyCodeLine{2743       z-\/>\mbox{\hyperlink{structstbi____jpeg_aeb67c1bbc81d163623455c41c18e174e}{succ\_high}} = (aa >> 4);}
\DoxyCodeLine{2744       z-\/>\mbox{\hyperlink{structstbi____jpeg_a1d3c46e47c5282bb1566dca80c2980b6}{succ\_low}}  = (aa \& 15);}
\DoxyCodeLine{2745       \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____jpeg_ac843968318414002ea541b28e2cfa49f}{progressive}}) \{}
\DoxyCodeLine{2746          \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____jpeg_afe2cf1246faa9ed08b205b68fc2fef8a}{spec\_start}} > 63 || z-\/>\mbox{\hyperlink{structstbi____jpeg_a854599aadc1e91857b7bd7d96cc2d7a8}{spec\_end}} > 63  || z-\/>\mbox{\hyperlink{structstbi____jpeg_afe2cf1246faa9ed08b205b68fc2fef8a}{spec\_start}} > z-\/>\mbox{\hyperlink{structstbi____jpeg_a854599aadc1e91857b7bd7d96cc2d7a8}{spec\_end}} || z-\/>\mbox{\hyperlink{structstbi____jpeg_aeb67c1bbc81d163623455c41c18e174e}{succ\_high}} > 13 || z-\/>\mbox{\hyperlink{structstbi____jpeg_a1d3c46e47c5282bb1566dca80c2980b6}{succ\_low}} > 13)}
\DoxyCodeLine{2747             \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad SOS"{}}, \textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2748       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2749          \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____jpeg_afe2cf1246faa9ed08b205b68fc2fef8a}{spec\_start}} != 0) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad SOS"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2750          \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____jpeg_aeb67c1bbc81d163623455c41c18e174e}{succ\_high}} != 0 || z-\/>\mbox{\hyperlink{structstbi____jpeg_a1d3c46e47c5282bb1566dca80c2980b6}{succ\_low}} != 0) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad SOS"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2751          z-\/>\mbox{\hyperlink{structstbi____jpeg_a854599aadc1e91857b7bd7d96cc2d7a8}{spec\_end}} = 63;}
\DoxyCodeLine{2752       \}}
\DoxyCodeLine{2753    \}}
\DoxyCodeLine{2754 }
\DoxyCodeLine{2755    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2756 \}}
\DoxyCodeLine{2757 }
\DoxyCodeLine{2758 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_process\_frame\_header(\mbox{\hyperlink{structstbi____jpeg}{stbi\_\_jpeg}} *z, \textcolor{keywordtype}{int} scan)}
\DoxyCodeLine{2759 \{}
\DoxyCodeLine{2760    \mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s = z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}};}
\DoxyCodeLine{2761    \textcolor{keywordtype}{int} Lf,p,i,q, h\_max=1,v\_max=1,c;}
\DoxyCodeLine{2762    Lf = stbi\_\_get16be(s);         \textcolor{keywordflow}{if} (Lf < 11) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad SOF len"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}}); \textcolor{comment}{// JPEG}}
\DoxyCodeLine{2763    p  = stbi\_\_get8(s);            \textcolor{keywordflow}{if} (p != 8) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}only 8-\/bit"{}},\textcolor{stringliteral}{"{}JPEG format not supported: 8-\/bit only"{}}); \textcolor{comment}{// JPEG baseline}}
\DoxyCodeLine{2764    s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}} = stbi\_\_get16be(s);   \textcolor{keywordflow}{if} (s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}} == 0) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}no header height"{}}, \textcolor{stringliteral}{"{}JPEG format not supported: delayed height"{}}); \textcolor{comment}{// Legal, but we don't handle it-\/-\/but neither does IJG}}
\DoxyCodeLine{2765    s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} = stbi\_\_get16be(s);   \textcolor{keywordflow}{if} (s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} == 0) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}0 width"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}}); \textcolor{comment}{// JPEG requires}}
\DoxyCodeLine{2766    c = stbi\_\_get8(s);}
\DoxyCodeLine{2767    \textcolor{keywordflow}{if} (c != 3 \&\& c != 1) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad component count"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});    \textcolor{comment}{// JFIF requires}}
\DoxyCodeLine{2768    s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}} = c;}
\DoxyCodeLine{2769    \textcolor{keywordflow}{for} (i=0; i < c; ++i) \{}
\DoxyCodeLine{2770       z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a7f2ba34d082f8eb97e290dbf78b29e64}{data}} = NULL;}
\DoxyCodeLine{2771       z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a6d0a94bbc12b3e067a68639499d10f37}{linebuf}} = NULL;}
\DoxyCodeLine{2772    \}}
\DoxyCodeLine{2773 }
\DoxyCodeLine{2774    \textcolor{keywordflow}{if} (Lf != 8+3*s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}}) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad SOF len"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2775 }
\DoxyCodeLine{2776    \textcolor{keywordflow}{for} (i=0; i < s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}}; ++i) \{}
\DoxyCodeLine{2777       z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a680d30ebc3bd831d6081fa02d41428c1}{id}} = stbi\_\_get8(s);}
\DoxyCodeLine{2778       \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a680d30ebc3bd831d6081fa02d41428c1}{id}} != i+1)   \textcolor{comment}{// JFIF requires}}
\DoxyCodeLine{2779          \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a680d30ebc3bd831d6081fa02d41428c1}{id}} != i)  \textcolor{comment}{// some version of jpegtran outputs non-\/JFIF-\/compliant files!}}
\DoxyCodeLine{2780             \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad component ID"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2781       q = stbi\_\_get8(s);}
\DoxyCodeLine{2782       z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_aeba05300b505081d0ab14c17ee7b86f6}{h}} = (q >> 4);  \textcolor{keywordflow}{if} (!z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_aeba05300b505081d0ab14c17ee7b86f6}{h}} || z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_aeba05300b505081d0ab14c17ee7b86f6}{h}} > 4) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad H"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2783       z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a9862074449c957c4c9cbaacbc621f43f}{v}} = q \& 15;    \textcolor{keywordflow}{if} (!z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a9862074449c957c4c9cbaacbc621f43f}{v}} || z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a9862074449c957c4c9cbaacbc621f43f}{v}} > 4) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad V"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2784       z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a082cff2403c697d89ddf98a752d062cb}{tq}} = stbi\_\_get8(s);  \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a082cff2403c697d89ddf98a752d062cb}{tq}} > 3) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad TQ"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2785    \}}
\DoxyCodeLine{2786 }
\DoxyCodeLine{2787    \textcolor{keywordflow}{if} (scan != \mbox{\hyperlink{stb__image_8h_ab04a0655cd1e3bcac5e8f48c18df1a57a707d4eb401c81600fe01d18c101ba6c2}{STBI\_\_SCAN\_load}}) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2788 }
\DoxyCodeLine{2789    \textcolor{keywordflow}{if} ((1 << 30) / s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} / s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}} < s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}}) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}too large"{}}, \textcolor{stringliteral}{"{}Image too large to decode"{}});}
\DoxyCodeLine{2790 }
\DoxyCodeLine{2791    \textcolor{keywordflow}{for} (i=0; i < s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}}; ++i) \{}
\DoxyCodeLine{2792       \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_aeba05300b505081d0ab14c17ee7b86f6}{h}} > h\_max) h\_max = z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_aeba05300b505081d0ab14c17ee7b86f6}{h}};}
\DoxyCodeLine{2793       \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a9862074449c957c4c9cbaacbc621f43f}{v}} > v\_max) v\_max = z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a9862074449c957c4c9cbaacbc621f43f}{v}};}
\DoxyCodeLine{2794    \}}
\DoxyCodeLine{2795 }
\DoxyCodeLine{2796    \textcolor{comment}{// compute interleaved mcu info}}
\DoxyCodeLine{2797    z-\/>\mbox{\hyperlink{structstbi____jpeg_a57bf03f54ecb42373e3fc9d5237ad4e3}{img\_h\_max}} = h\_max;}
\DoxyCodeLine{2798    z-\/>\mbox{\hyperlink{structstbi____jpeg_a3780a6adea2c793fb0166ab04e3ae126}{img\_v\_max}} = v\_max;}
\DoxyCodeLine{2799    z-\/>\mbox{\hyperlink{structstbi____jpeg_a8852f4a38f8d68d78ae2d083b8ecb007}{img\_mcu\_w}} = h\_max * 8;}
\DoxyCodeLine{2800    z-\/>\mbox{\hyperlink{structstbi____jpeg_a83cfc18b9e514ed3ebc3bc5e39d29fca}{img\_mcu\_h}} = v\_max * 8;}
\DoxyCodeLine{2801    z-\/>\mbox{\hyperlink{structstbi____jpeg_a08b7f91e5758ac0ccce8571db74a345f}{img\_mcu\_x}} = (s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} + z-\/>\mbox{\hyperlink{structstbi____jpeg_a8852f4a38f8d68d78ae2d083b8ecb007}{img\_mcu\_w}}-\/1) / z-\/>\mbox{\hyperlink{structstbi____jpeg_a8852f4a38f8d68d78ae2d083b8ecb007}{img\_mcu\_w}};}
\DoxyCodeLine{2802    z-\/>\mbox{\hyperlink{structstbi____jpeg_a251b647a1a88243f59ae797a100662fb}{img\_mcu\_y}} = (s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}} + z-\/>\mbox{\hyperlink{structstbi____jpeg_a83cfc18b9e514ed3ebc3bc5e39d29fca}{img\_mcu\_h}}-\/1) / z-\/>\mbox{\hyperlink{structstbi____jpeg_a83cfc18b9e514ed3ebc3bc5e39d29fca}{img\_mcu\_h}};}
\DoxyCodeLine{2803 }
\DoxyCodeLine{2804    \textcolor{keywordflow}{for} (i=0; i < s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}}; ++i) \{}
\DoxyCodeLine{2805       \textcolor{comment}{// number of effective pixels (e.g. for non-\/interleaved MCU)}}
\DoxyCodeLine{2806       z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a339d8a3189a552ba8d55901056ad4ee4}{x}} = (s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} * z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_aeba05300b505081d0ab14c17ee7b86f6}{h}} + h\_max-\/1) / h\_max;}
\DoxyCodeLine{2807       z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a050961354fd8e9f77a83a715037beaa4}{y}} = (s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}} * z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a9862074449c957c4c9cbaacbc621f43f}{v}} + v\_max-\/1) / v\_max;}
\DoxyCodeLine{2808       \textcolor{comment}{// to simplify generation, we'll allocate enough memory to decode}}
\DoxyCodeLine{2809       \textcolor{comment}{// the bogus oversized data from using interleaved MCUs and their}}
\DoxyCodeLine{2810       \textcolor{comment}{// big blocks (e.g. a 16x16 iMCU on an image of width 33); we won't}}
\DoxyCodeLine{2811       \textcolor{comment}{// discard the extra data until colorspace conversion}}
\DoxyCodeLine{2812       z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_ad3e572acfe7eafe0aa3978ac2145acce}{w2}} = z-\/>\mbox{\hyperlink{structstbi____jpeg_a08b7f91e5758ac0ccce8571db74a345f}{img\_mcu\_x}} * z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_aeba05300b505081d0ab14c17ee7b86f6}{h}} * 8;}
\DoxyCodeLine{2813       z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_af0185c5e052c44d7c4d6ebc78ab72ddd}{h2}} = z-\/>\mbox{\hyperlink{structstbi____jpeg_a251b647a1a88243f59ae797a100662fb}{img\_mcu\_y}} * z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a9862074449c957c4c9cbaacbc621f43f}{v}} * 8;}
\DoxyCodeLine{2814       z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a367e9836870bfb329cacd984bf520456}{raw\_data}} = stbi\_\_malloc(z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_ad3e572acfe7eafe0aa3978ac2145acce}{w2}} * z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_af0185c5e052c44d7c4d6ebc78ab72ddd}{h2}}+15);}
\DoxyCodeLine{2815 }
\DoxyCodeLine{2816       \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a367e9836870bfb329cacd984bf520456}{raw\_data}} == NULL) \{}
\DoxyCodeLine{2817          \textcolor{keywordflow}{for}(-\/-\/i; i >= 0; -\/-\/i) \{}
\DoxyCodeLine{2818             \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a367e9836870bfb329cacd984bf520456}{raw\_data}});}
\DoxyCodeLine{2819             z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a367e9836870bfb329cacd984bf520456}{raw\_data}} = NULL;}
\DoxyCodeLine{2820          \}}
\DoxyCodeLine{2821          \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{2822       \}}
\DoxyCodeLine{2823       \textcolor{comment}{// align blocks for idct using mmx/sse}}
\DoxyCodeLine{2824       z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a7f2ba34d082f8eb97e290dbf78b29e64}{data}} = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}*) (((\textcolor{keywordtype}{size\_t}) z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a367e9836870bfb329cacd984bf520456}{raw\_data}} + 15) \& \string~15);}
\DoxyCodeLine{2825       z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a6d0a94bbc12b3e067a68639499d10f37}{linebuf}} = NULL;}
\DoxyCodeLine{2826       \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____jpeg_ac843968318414002ea541b28e2cfa49f}{progressive}}) \{}
\DoxyCodeLine{2827          z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a57908e0ed113a91e9d25905f856508f6}{coeff\_w}} = (z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_ad3e572acfe7eafe0aa3978ac2145acce}{w2}} + 7) >> 3;}
\DoxyCodeLine{2828          z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_af0262b366056b7bb00324e0c332ad0fc}{coeff\_h}} = (z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_af0185c5e052c44d7c4d6ebc78ab72ddd}{h2}} + 7) >> 3;}
\DoxyCodeLine{2829          z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a34e5f94c6aa3761812f6b1d6fcaeadbd}{raw\_coeff}} = \mbox{\hyperlink{stb__image_8h_a5d9e5717bb92709110f1a5d43392d42e}{STBI\_MALLOC}}(z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a57908e0ed113a91e9d25905f856508f6}{coeff\_w}} * z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_af0262b366056b7bb00324e0c332ad0fc}{coeff\_h}} * 64 * \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{short}) + 15);}
\DoxyCodeLine{2830          z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a67b1b16da5ebbf5e93a05d8675584e83}{coeff}} = (\textcolor{keywordtype}{short}*) (((\textcolor{keywordtype}{size\_t}) z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a34e5f94c6aa3761812f6b1d6fcaeadbd}{raw\_coeff}} + 15) \& \string~15);}
\DoxyCodeLine{2831       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2832          z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a67b1b16da5ebbf5e93a05d8675584e83}{coeff}} = 0;}
\DoxyCodeLine{2833          z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a34e5f94c6aa3761812f6b1d6fcaeadbd}{raw\_coeff}} = 0;}
\DoxyCodeLine{2834       \}}
\DoxyCodeLine{2835    \}}
\DoxyCodeLine{2836 }
\DoxyCodeLine{2837    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2838 \}}
\DoxyCodeLine{2839 }
\DoxyCodeLine{2840 \textcolor{comment}{// use comparisons since in some cases we handle more than one case (e.g. SOF)}}
\DoxyCodeLine{2841 \textcolor{preprocessor}{\#define stbi\_\_DNL(x)         ((x) == 0xdc)}}
\DoxyCodeLine{2842 \textcolor{preprocessor}{\#define stbi\_\_SOI(x)         ((x) == 0xd8)}}
\DoxyCodeLine{2843 \textcolor{preprocessor}{\#define stbi\_\_EOI(x)         ((x) == 0xd9)}}
\DoxyCodeLine{2844 \textcolor{preprocessor}{\#define stbi\_\_SOF(x)         ((x) == 0xc0 || (x) == 0xc1 || (x) == 0xc2)}}
\DoxyCodeLine{2845 \textcolor{preprocessor}{\#define stbi\_\_SOS(x)         ((x) == 0xda)}}
\DoxyCodeLine{2846 }
\DoxyCodeLine{2847 \textcolor{preprocessor}{\#define stbi\_\_SOF\_progressive(x)   ((x) == 0xc2)}}
\DoxyCodeLine{2848 }
\DoxyCodeLine{2849 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_decode\_jpeg\_header(\mbox{\hyperlink{structstbi____jpeg}{stbi\_\_jpeg}} *z, \textcolor{keywordtype}{int} scan)}
\DoxyCodeLine{2850 \{}
\DoxyCodeLine{2851    \textcolor{keywordtype}{int} m;}
\DoxyCodeLine{2852    z-\/>\mbox{\hyperlink{structstbi____jpeg_a36a53176d6134d68272fa32cb8afc740}{marker}} = \mbox{\hyperlink{stb__image_8h_aa84cff07b4bb7cb4ee7319eb06c0d42b}{STBI\_\_MARKER\_none}}; \textcolor{comment}{// initialize cached marker to empty}}
\DoxyCodeLine{2853    m = stbi\_\_get\_marker(z);}
\DoxyCodeLine{2854    \textcolor{keywordflow}{if} (!\mbox{\hyperlink{stb__image_8h_a8632226948b1dd3d07dee46f14910c3d}{stbi\_\_SOI}}(m)) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}no SOI"{}},\textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2855    \textcolor{keywordflow}{if} (scan == \mbox{\hyperlink{stb__image_8h_ab04a0655cd1e3bcac5e8f48c18df1a57a49475d1886e13403b20664a11e1e358b}{STBI\_\_SCAN\_type}}) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2856    m = stbi\_\_get\_marker(z);}
\DoxyCodeLine{2857    \textcolor{keywordflow}{while} (!\mbox{\hyperlink{stb__image_8h_a81fcdc56c966586548d8583be145991c}{stbi\_\_SOF}}(m)) \{}
\DoxyCodeLine{2858       \textcolor{keywordflow}{if} (!stbi\_\_process\_marker(z,m)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2859       m = stbi\_\_get\_marker(z);}
\DoxyCodeLine{2860       \textcolor{keywordflow}{while} (m == \mbox{\hyperlink{stb__image_8h_aa84cff07b4bb7cb4ee7319eb06c0d42b}{STBI\_\_MARKER\_none}}) \{}
\DoxyCodeLine{2861          \textcolor{comment}{// some files have extra padding after their blocks, so ok, we'll scan}}
\DoxyCodeLine{2862          \textcolor{keywordflow}{if} (stbi\_\_at\_eof(z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}})) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}no SOF"{}}, \textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2863          m = stbi\_\_get\_marker(z);}
\DoxyCodeLine{2864       \}}
\DoxyCodeLine{2865    \}}
\DoxyCodeLine{2866    z-\/>\mbox{\hyperlink{structstbi____jpeg_ac843968318414002ea541b28e2cfa49f}{progressive}} = \mbox{\hyperlink{stb__image_8h_a736de3dd82a9e1590972dfa2593c018b}{stbi\_\_SOF\_progressive}}(m);}
\DoxyCodeLine{2867    \textcolor{keywordflow}{if} (!stbi\_\_process\_frame\_header(z, scan)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2868    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2869 \}}
\DoxyCodeLine{2870 }
\DoxyCodeLine{2871 \textcolor{comment}{// decode image to YCbCr format}}
\DoxyCodeLine{2872 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_decode\_jpeg\_image(\mbox{\hyperlink{structstbi____jpeg}{stbi\_\_jpeg}} *j)}
\DoxyCodeLine{2873 \{}
\DoxyCodeLine{2874    \textcolor{keywordtype}{int} m;}
\DoxyCodeLine{2875    \textcolor{keywordflow}{for} (m = 0; m < 4; m++) \{}
\DoxyCodeLine{2876       j-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[m].\mbox{\hyperlink{structstbi____jpeg_a367e9836870bfb329cacd984bf520456}{raw\_data}} = NULL;}
\DoxyCodeLine{2877       j-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[m].\mbox{\hyperlink{structstbi____jpeg_a34e5f94c6aa3761812f6b1d6fcaeadbd}{raw\_coeff}} = NULL;}
\DoxyCodeLine{2878    \}}
\DoxyCodeLine{2879    j-\/>\mbox{\hyperlink{structstbi____jpeg_ae2caa61baf3d6b9f0349c530470e0c99}{restart\_interval}} = 0;}
\DoxyCodeLine{2880    \textcolor{keywordflow}{if} (!stbi\_\_decode\_jpeg\_header(j, \mbox{\hyperlink{stb__image_8h_ab04a0655cd1e3bcac5e8f48c18df1a57a707d4eb401c81600fe01d18c101ba6c2}{STBI\_\_SCAN\_load}})) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2881    m = stbi\_\_get\_marker(j);}
\DoxyCodeLine{2882    \textcolor{keywordflow}{while} (!\mbox{\hyperlink{stb__image_8h_ad367898ac9daccbf5df3f7ce2c8dead0}{stbi\_\_EOI}}(m)) \{}
\DoxyCodeLine{2883       \textcolor{keywordflow}{if} (\mbox{\hyperlink{stb__image_8h_a8549930a41ba42c9f7f6dbd9146fddb2}{stbi\_\_SOS}}(m)) \{}
\DoxyCodeLine{2884          \textcolor{keywordflow}{if} (!stbi\_\_process\_scan\_header(j)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2885          \textcolor{keywordflow}{if} (!stbi\_\_parse\_entropy\_coded\_data(j)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2886          \textcolor{keywordflow}{if} (j-\/>\mbox{\hyperlink{structstbi____jpeg_a36a53176d6134d68272fa32cb8afc740}{marker}} == \mbox{\hyperlink{stb__image_8h_aa84cff07b4bb7cb4ee7319eb06c0d42b}{STBI\_\_MARKER\_none}} ) \{}
\DoxyCodeLine{2887             \textcolor{comment}{// handle 0s at the end of image data from IP Kamera 9060}}
\DoxyCodeLine{2888             \textcolor{keywordflow}{while} (!stbi\_\_at\_eof(j-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}})) \{}
\DoxyCodeLine{2889                \textcolor{keywordtype}{int} x = stbi\_\_get8(j-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}});}
\DoxyCodeLine{2890                \textcolor{keywordflow}{if} (x == 255) \{}
\DoxyCodeLine{2891                   j-\/>\mbox{\hyperlink{structstbi____jpeg_a36a53176d6134d68272fa32cb8afc740}{marker}} = stbi\_\_get8(j-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}});}
\DoxyCodeLine{2892                   \textcolor{keywordflow}{break};}
\DoxyCodeLine{2893                \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (x != 0) \{}
\DoxyCodeLine{2894                   \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}junk before marker"{}}, \textcolor{stringliteral}{"{}Corrupt JPEG"{}});}
\DoxyCodeLine{2895                \}}
\DoxyCodeLine{2896             \}}
\DoxyCodeLine{2897             \textcolor{comment}{// if we reach eof without hitting a marker, stbi\_\_get\_marker() below will fail and we'll eventually return 0}}
\DoxyCodeLine{2898          \}}
\DoxyCodeLine{2899       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2900          \textcolor{keywordflow}{if} (!stbi\_\_process\_marker(j, m)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2901       \}}
\DoxyCodeLine{2902       m = stbi\_\_get\_marker(j);}
\DoxyCodeLine{2903    \}}
\DoxyCodeLine{2904    \textcolor{keywordflow}{if} (j-\/>\mbox{\hyperlink{structstbi____jpeg_ac843968318414002ea541b28e2cfa49f}{progressive}})}
\DoxyCodeLine{2905       stbi\_\_jpeg\_finish(j);}
\DoxyCodeLine{2906    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2907 \}}
\DoxyCodeLine{2908 }
\DoxyCodeLine{2909 \textcolor{comment}{// static jfif-\/centered resampling (across block boundaries)}}
\DoxyCodeLine{2910 }
\DoxyCodeLine{2911 \textcolor{keyword}{typedef} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *(*resample\_row\_func)(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in0, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in1,}
\DoxyCodeLine{2912                                     \textcolor{keywordtype}{int} w, \textcolor{keywordtype}{int} hs);}
\DoxyCodeLine{2913 }
\DoxyCodeLine{2914 \textcolor{preprocessor}{\#define stbi\_\_div4(x) ((stbi\_uc) ((x) >> 2))}}
\DoxyCodeLine{2915 }
\DoxyCodeLine{2916 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *resample\_row\_1(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_near, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_far, \textcolor{keywordtype}{int} w, \textcolor{keywordtype}{int} hs)}
\DoxyCodeLine{2917 \{}
\DoxyCodeLine{2918    \mbox{\hyperlink{stb__image_8h_a3970ebac9a09e8116fa5855b334ca6ab}{STBI\_NOTUSED}}(out);}
\DoxyCodeLine{2919    \mbox{\hyperlink{stb__image_8h_a3970ebac9a09e8116fa5855b334ca6ab}{STBI\_NOTUSED}}(in\_far);}
\DoxyCodeLine{2920    \mbox{\hyperlink{stb__image_8h_a3970ebac9a09e8116fa5855b334ca6ab}{STBI\_NOTUSED}}(w);}
\DoxyCodeLine{2921    \mbox{\hyperlink{stb__image_8h_a3970ebac9a09e8116fa5855b334ca6ab}{STBI\_NOTUSED}}(hs);}
\DoxyCodeLine{2922    \textcolor{keywordflow}{return} in\_near;}
\DoxyCodeLine{2923 \}}
\DoxyCodeLine{2924 }
\DoxyCodeLine{2925 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}* stbi\_\_resample\_row\_v\_2(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_near, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_far, \textcolor{keywordtype}{int} w, \textcolor{keywordtype}{int} hs)}
\DoxyCodeLine{2926 \{}
\DoxyCodeLine{2927    \textcolor{comment}{// need to generate two samples vertically for every one in input}}
\DoxyCodeLine{2928    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{2929    \mbox{\hyperlink{stb__image_8h_a3970ebac9a09e8116fa5855b334ca6ab}{STBI\_NOTUSED}}(hs);}
\DoxyCodeLine{2930    \textcolor{keywordflow}{for} (i=0; i < w; ++i)}
\DoxyCodeLine{2931       out[i] = \mbox{\hyperlink{stb__image_8h_ab864d89dfa36f47848f858c7a6b8ea54}{stbi\_\_div4}}(3*in\_near[i] + in\_far[i] + 2);}
\DoxyCodeLine{2932    \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{2933 \}}
\DoxyCodeLine{2934 }
\DoxyCodeLine{2935 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}*  stbi\_\_resample\_row\_h\_2(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_near, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_far, \textcolor{keywordtype}{int} w, \textcolor{keywordtype}{int} hs)}
\DoxyCodeLine{2936 \{}
\DoxyCodeLine{2937    \textcolor{comment}{// need to generate two samples horizontally for every one in input}}
\DoxyCodeLine{2938    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{2939    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *input = in\_near;}
\DoxyCodeLine{2940 }
\DoxyCodeLine{2941    \textcolor{keywordflow}{if} (w == 1) \{}
\DoxyCodeLine{2942       \textcolor{comment}{// if only one sample, can't do any interpolation}}
\DoxyCodeLine{2943       out[0] = out[1] = input[0];}
\DoxyCodeLine{2944       \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{2945    \}}
\DoxyCodeLine{2946 }
\DoxyCodeLine{2947    out[0] = input[0];}
\DoxyCodeLine{2948    out[1] = \mbox{\hyperlink{stb__image_8h_ab864d89dfa36f47848f858c7a6b8ea54}{stbi\_\_div4}}(input[0]*3 + input[1] + 2);}
\DoxyCodeLine{2949    \textcolor{keywordflow}{for} (i=1; i < w-\/1; ++i) \{}
\DoxyCodeLine{2950       \textcolor{keywordtype}{int} n = 3*input[i]+2;}
\DoxyCodeLine{2951       out[i*2+0] = \mbox{\hyperlink{stb__image_8h_ab864d89dfa36f47848f858c7a6b8ea54}{stbi\_\_div4}}(n+input[i-\/1]);}
\DoxyCodeLine{2952       out[i*2+1] = \mbox{\hyperlink{stb__image_8h_ab864d89dfa36f47848f858c7a6b8ea54}{stbi\_\_div4}}(n+input[i+1]);}
\DoxyCodeLine{2953    \}}
\DoxyCodeLine{2954    out[i*2+0] = \mbox{\hyperlink{stb__image_8h_ab864d89dfa36f47848f858c7a6b8ea54}{stbi\_\_div4}}(input[w-\/2]*3 + input[w-\/1] + 2);}
\DoxyCodeLine{2955    out[i*2+1] = input[w-\/1];}
\DoxyCodeLine{2956 }
\DoxyCodeLine{2957    \mbox{\hyperlink{stb__image_8h_a3970ebac9a09e8116fa5855b334ca6ab}{STBI\_NOTUSED}}(in\_far);}
\DoxyCodeLine{2958    \mbox{\hyperlink{stb__image_8h_a3970ebac9a09e8116fa5855b334ca6ab}{STBI\_NOTUSED}}(hs);}
\DoxyCodeLine{2959 }
\DoxyCodeLine{2960    \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{2961 \}}
\DoxyCodeLine{2962 }
\DoxyCodeLine{2963 \textcolor{preprocessor}{\#define stbi\_\_div16(x) ((stbi\_uc) ((x) >> 4))}}
\DoxyCodeLine{2964 }
\DoxyCodeLine{2965 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_resample\_row\_hv\_2(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_near, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_far, \textcolor{keywordtype}{int} w, \textcolor{keywordtype}{int} hs)}
\DoxyCodeLine{2966 \{}
\DoxyCodeLine{2967    \textcolor{comment}{// need to generate 2x2 samples for every one in input}}
\DoxyCodeLine{2968    \textcolor{keywordtype}{int} i,t0,t1;}
\DoxyCodeLine{2969    \textcolor{keywordflow}{if} (w == 1) \{}
\DoxyCodeLine{2970       out[0] = out[1] = \mbox{\hyperlink{stb__image_8h_ab864d89dfa36f47848f858c7a6b8ea54}{stbi\_\_div4}}(3*in\_near[0] + in\_far[0] + 2);}
\DoxyCodeLine{2971       \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{2972    \}}
\DoxyCodeLine{2973 }
\DoxyCodeLine{2974    t1 = 3*in\_near[0] + in\_far[0];}
\DoxyCodeLine{2975    out[0] = \mbox{\hyperlink{stb__image_8h_ab864d89dfa36f47848f858c7a6b8ea54}{stbi\_\_div4}}(t1+2);}
\DoxyCodeLine{2976    \textcolor{keywordflow}{for} (i=1; i < w; ++i) \{}
\DoxyCodeLine{2977       t0 = t1;}
\DoxyCodeLine{2978       t1 = 3*in\_near[i]+in\_far[i];}
\DoxyCodeLine{2979       out[i*2-\/1] = \mbox{\hyperlink{stb__image_8h_ac9fceb41702821cd00ad6d0fd13a8efc}{stbi\_\_div16}}(3*t0 + t1 + 8);}
\DoxyCodeLine{2980       out[i*2  ] = \mbox{\hyperlink{stb__image_8h_ac9fceb41702821cd00ad6d0fd13a8efc}{stbi\_\_div16}}(3*t1 + t0 + 8);}
\DoxyCodeLine{2981    \}}
\DoxyCodeLine{2982    out[w*2-\/1] = \mbox{\hyperlink{stb__image_8h_ab864d89dfa36f47848f858c7a6b8ea54}{stbi\_\_div4}}(t1+2);}
\DoxyCodeLine{2983 }
\DoxyCodeLine{2984    \mbox{\hyperlink{stb__image_8h_a3970ebac9a09e8116fa5855b334ca6ab}{STBI\_NOTUSED}}(hs);}
\DoxyCodeLine{2985 }
\DoxyCodeLine{2986    \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{2987 \}}
\DoxyCodeLine{2988 }
\DoxyCodeLine{2989 \textcolor{preprocessor}{\#if defined(STBI\_SSE2) || defined(STBI\_NEON)}}
\DoxyCodeLine{2990 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_resample\_row\_hv\_2\_simd(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_near, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_far, \textcolor{keywordtype}{int} w, \textcolor{keywordtype}{int} hs)}
\DoxyCodeLine{2991 \{}
\DoxyCodeLine{2992    \textcolor{comment}{// need to generate 2x2 samples for every one in input}}
\DoxyCodeLine{2993    \textcolor{keywordtype}{int} i=0,t0,t1;}
\DoxyCodeLine{2994 }
\DoxyCodeLine{2995    \textcolor{keywordflow}{if} (w == 1) \{}
\DoxyCodeLine{2996       out[0] = out[1] = \mbox{\hyperlink{stb__image_8h_ab864d89dfa36f47848f858c7a6b8ea54}{stbi\_\_div4}}(3*in\_near[0] + in\_far[0] + 2);}
\DoxyCodeLine{2997       \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{2998    \}}
\DoxyCodeLine{2999 }
\DoxyCodeLine{3000    t1 = 3*in\_near[0] + in\_far[0];}
\DoxyCodeLine{3001    \textcolor{comment}{// process groups of 8 pixels for as long as we can.}}
\DoxyCodeLine{3002    \textcolor{comment}{// note we can't handle the last pixel in a row in this loop}}
\DoxyCodeLine{3003    \textcolor{comment}{// because we need to handle the filter boundary conditions.}}
\DoxyCodeLine{3004    \textcolor{keywordflow}{for} (; i < ((w-\/1) \& \string~7); i += 8) \{}
\DoxyCodeLine{3005 \textcolor{preprocessor}{\#if defined(STBI\_SSE2)}}
\DoxyCodeLine{3006       \textcolor{comment}{// load and perform the vertical filtering pass}}
\DoxyCodeLine{3007       \textcolor{comment}{// this uses 3*x + y = 4*x + (y -\/ x)}}
\DoxyCodeLine{3008       \_\_m128i zero  = \_mm\_setzero\_si128();}
\DoxyCodeLine{3009       \_\_m128i farb  = \_mm\_loadl\_epi64((\_\_m128i *) (in\_far + i));}
\DoxyCodeLine{3010       \_\_m128i nearb = \_mm\_loadl\_epi64((\_\_m128i *) (in\_near + i));}
\DoxyCodeLine{3011       \_\_m128i farw  = \_mm\_unpacklo\_epi8(farb, zero);}
\DoxyCodeLine{3012       \_\_m128i nearw = \_mm\_unpacklo\_epi8(nearb, zero);}
\DoxyCodeLine{3013       \_\_m128i diff  = \_mm\_sub\_epi16(farw, nearw);}
\DoxyCodeLine{3014       \_\_m128i nears = \_mm\_slli\_epi16(nearw, 2);}
\DoxyCodeLine{3015       \_\_m128i curr  = \_mm\_add\_epi16(nears, diff); \textcolor{comment}{// current row}}
\DoxyCodeLine{3016 }
\DoxyCodeLine{3017       \textcolor{comment}{// horizontal filter works the same based on shifted vers of current}}
\DoxyCodeLine{3018       \textcolor{comment}{// row. "{}prev"{} is current row shifted right by 1 pixel; we need to}}
\DoxyCodeLine{3019       \textcolor{comment}{// insert the previous pixel value (from t1).}}
\DoxyCodeLine{3020       \textcolor{comment}{// "{}next"{} is current row shifted left by 1 pixel, with first pixel}}
\DoxyCodeLine{3021       \textcolor{comment}{// of next block of 8 pixels added in.}}
\DoxyCodeLine{3022       \_\_m128i prv0 = \_mm\_slli\_si128(curr, 2);}
\DoxyCodeLine{3023       \_\_m128i nxt0 = \_mm\_srli\_si128(curr, 2);}
\DoxyCodeLine{3024       \_\_m128i prev = \_mm\_insert\_epi16(prv0, t1, 0);}
\DoxyCodeLine{3025       \_\_m128i next = \_mm\_insert\_epi16(nxt0, 3*in\_near[i+8] + in\_far[i+8], 7);}
\DoxyCodeLine{3026 }
\DoxyCodeLine{3027       \textcolor{comment}{// horizontal filter, polyphase implementation since it's convenient:}}
\DoxyCodeLine{3028       \textcolor{comment}{// even pixels = 3*cur + prev = cur*4 + (prev -\/ cur)}}
\DoxyCodeLine{3029       \textcolor{comment}{// odd  pixels = 3*cur + next = cur*4 + (next -\/ cur)}}
\DoxyCodeLine{3030       \textcolor{comment}{// note the shared term.}}
\DoxyCodeLine{3031       \_\_m128i bias  = \_mm\_set1\_epi16(8);}
\DoxyCodeLine{3032       \_\_m128i curs = \_mm\_slli\_epi16(curr, 2);}
\DoxyCodeLine{3033       \_\_m128i prvd = \_mm\_sub\_epi16(prev, curr);}
\DoxyCodeLine{3034       \_\_m128i nxtd = \_mm\_sub\_epi16(next, curr);}
\DoxyCodeLine{3035       \_\_m128i curb = \_mm\_add\_epi16(curs, bias);}
\DoxyCodeLine{3036       \_\_m128i even = \_mm\_add\_epi16(prvd, curb);}
\DoxyCodeLine{3037       \_\_m128i odd  = \_mm\_add\_epi16(nxtd, curb);}
\DoxyCodeLine{3038 }
\DoxyCodeLine{3039       \textcolor{comment}{// interleave even and odd pixels, then undo scaling.}}
\DoxyCodeLine{3040       \_\_m128i int0 = \_mm\_unpacklo\_epi16(even, odd);}
\DoxyCodeLine{3041       \_\_m128i int1 = \_mm\_unpackhi\_epi16(even, odd);}
\DoxyCodeLine{3042       \_\_m128i de0  = \_mm\_srli\_epi16(int0, 4);}
\DoxyCodeLine{3043       \_\_m128i de1  = \_mm\_srli\_epi16(int1, 4);}
\DoxyCodeLine{3044 }
\DoxyCodeLine{3045       \textcolor{comment}{// pack and write output}}
\DoxyCodeLine{3046       \_\_m128i outv = \_mm\_packus\_epi16(de0, de1);}
\DoxyCodeLine{3047       \_mm\_storeu\_si128((\_\_m128i *) (out + i*2), outv);}
\DoxyCodeLine{3048 \textcolor{preprocessor}{\#elif defined(STBI\_NEON)}}
\DoxyCodeLine{3049       \textcolor{comment}{// load and perform the vertical filtering pass}}
\DoxyCodeLine{3050       \textcolor{comment}{// this uses 3*x + y = 4*x + (y -\/ x)}}
\DoxyCodeLine{3051       uint8x8\_t farb  = vld1\_u8(in\_far + i);}
\DoxyCodeLine{3052       uint8x8\_t nearb = vld1\_u8(in\_near + i);}
\DoxyCodeLine{3053       int16x8\_t diff  = vreinterpretq\_s16\_u16(vsubl\_u8(farb, nearb));}
\DoxyCodeLine{3054       int16x8\_t nears = vreinterpretq\_s16\_u16(vshll\_n\_u8(nearb, 2));}
\DoxyCodeLine{3055       int16x8\_t curr  = vaddq\_s16(nears, diff); \textcolor{comment}{// current row}}
\DoxyCodeLine{3056 }
\DoxyCodeLine{3057       \textcolor{comment}{// horizontal filter works the same based on shifted vers of current}}
\DoxyCodeLine{3058       \textcolor{comment}{// row. "{}prev"{} is current row shifted right by 1 pixel; we need to}}
\DoxyCodeLine{3059       \textcolor{comment}{// insert the previous pixel value (from t1).}}
\DoxyCodeLine{3060       \textcolor{comment}{// "{}next"{} is current row shifted left by 1 pixel, with first pixel}}
\DoxyCodeLine{3061       \textcolor{comment}{// of next block of 8 pixels added in.}}
\DoxyCodeLine{3062       int16x8\_t prv0 = vextq\_s16(curr, curr, 7);}
\DoxyCodeLine{3063       int16x8\_t nxt0 = vextq\_s16(curr, curr, 1);}
\DoxyCodeLine{3064       int16x8\_t prev = vsetq\_lane\_s16(t1, prv0, 0);}
\DoxyCodeLine{3065       int16x8\_t next = vsetq\_lane\_s16(3*in\_near[i+8] + in\_far[i+8], nxt0, 7);}
\DoxyCodeLine{3066 }
\DoxyCodeLine{3067       \textcolor{comment}{// horizontal filter, polyphase implementation since it's convenient:}}
\DoxyCodeLine{3068       \textcolor{comment}{// even pixels = 3*cur + prev = cur*4 + (prev -\/ cur)}}
\DoxyCodeLine{3069       \textcolor{comment}{// odd  pixels = 3*cur + next = cur*4 + (next -\/ cur)}}
\DoxyCodeLine{3070       \textcolor{comment}{// note the shared term.}}
\DoxyCodeLine{3071       int16x8\_t curs = vshlq\_n\_s16(curr, 2);}
\DoxyCodeLine{3072       int16x8\_t prvd = vsubq\_s16(prev, curr);}
\DoxyCodeLine{3073       int16x8\_t nxtd = vsubq\_s16(next, curr);}
\DoxyCodeLine{3074       int16x8\_t even = vaddq\_s16(curs, prvd);}
\DoxyCodeLine{3075       int16x8\_t odd  = vaddq\_s16(curs, nxtd);}
\DoxyCodeLine{3076 }
\DoxyCodeLine{3077       \textcolor{comment}{// undo scaling and round, then store with even/odd phases interleaved}}
\DoxyCodeLine{3078       uint8x8x2\_t o;}
\DoxyCodeLine{3079       o.val[0] = vqrshrun\_n\_s16(even, 4);}
\DoxyCodeLine{3080       o.val[1] = vqrshrun\_n\_s16(odd,  4);}
\DoxyCodeLine{3081       vst2\_u8(out + i*2, o);}
\DoxyCodeLine{3082 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3083 }
\DoxyCodeLine{3084       \textcolor{comment}{// "{}previous"{} value for next iter}}
\DoxyCodeLine{3085       t1 = 3*in\_near[i+7] + in\_far[i+7];}
\DoxyCodeLine{3086    \}}
\DoxyCodeLine{3087 }
\DoxyCodeLine{3088    t0 = t1;}
\DoxyCodeLine{3089    t1 = 3*in\_near[i] + in\_far[i];}
\DoxyCodeLine{3090    out[i*2] = \mbox{\hyperlink{stb__image_8h_ac9fceb41702821cd00ad6d0fd13a8efc}{stbi\_\_div16}}(3*t1 + t0 + 8);}
\DoxyCodeLine{3091 }
\DoxyCodeLine{3092    \textcolor{keywordflow}{for} (++i; i < w; ++i) \{}
\DoxyCodeLine{3093       t0 = t1;}
\DoxyCodeLine{3094       t1 = 3*in\_near[i]+in\_far[i];}
\DoxyCodeLine{3095       out[i*2-\/1] = \mbox{\hyperlink{stb__image_8h_ac9fceb41702821cd00ad6d0fd13a8efc}{stbi\_\_div16}}(3*t0 + t1 + 8);}
\DoxyCodeLine{3096       out[i*2  ] = \mbox{\hyperlink{stb__image_8h_ac9fceb41702821cd00ad6d0fd13a8efc}{stbi\_\_div16}}(3*t1 + t0 + 8);}
\DoxyCodeLine{3097    \}}
\DoxyCodeLine{3098    out[w*2-\/1] = \mbox{\hyperlink{stb__image_8h_ab864d89dfa36f47848f858c7a6b8ea54}{stbi\_\_div4}}(t1+2);}
\DoxyCodeLine{3099 }
\DoxyCodeLine{3100    \mbox{\hyperlink{stb__image_8h_a3970ebac9a09e8116fa5855b334ca6ab}{STBI\_NOTUSED}}(hs);}
\DoxyCodeLine{3101 }
\DoxyCodeLine{3102    \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{3103 \}}
\DoxyCodeLine{3104 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3105 }
\DoxyCodeLine{3106 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_resample\_row\_generic(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_near, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in\_far, \textcolor{keywordtype}{int} w, \textcolor{keywordtype}{int} hs)}
\DoxyCodeLine{3107 \{}
\DoxyCodeLine{3108    \textcolor{comment}{// resample with nearest-\/neighbor}}
\DoxyCodeLine{3109    \textcolor{keywordtype}{int} i,j;}
\DoxyCodeLine{3110    \mbox{\hyperlink{stb__image_8h_a3970ebac9a09e8116fa5855b334ca6ab}{STBI\_NOTUSED}}(in\_far);}
\DoxyCodeLine{3111    \textcolor{keywordflow}{for} (i=0; i < w; ++i)}
\DoxyCodeLine{3112       \textcolor{keywordflow}{for} (j=0; j < hs; ++j)}
\DoxyCodeLine{3113          out[i*hs+j] = in\_near[i];}
\DoxyCodeLine{3114    \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{3115 \}}
\DoxyCodeLine{3116 }
\DoxyCodeLine{3117 \textcolor{preprocessor}{\#ifdef STBI\_JPEG\_OLD}}
\DoxyCodeLine{3118 \textcolor{comment}{// this is the same YCbCr-\/to-\/RGB calculation that stb\_image has used}}
\DoxyCodeLine{3119 \textcolor{comment}{// historically before the algorithm changes in 1.49}}
\DoxyCodeLine{3120 \textcolor{preprocessor}{\#define float2fixed(x)  ((int) ((x) * 65536 + 0.5))}}
\DoxyCodeLine{3121 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_YCbCr\_to\_RGB\_row(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \textcolor{keyword}{const} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *y, \textcolor{keyword}{const} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *pcb, \textcolor{keyword}{const} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *pcr, \textcolor{keywordtype}{int} count, \textcolor{keywordtype}{int} step)}
\DoxyCodeLine{3122 \{}
\DoxyCodeLine{3123    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{3124    \textcolor{keywordflow}{for} (i=0; i < count; ++i) \{}
\DoxyCodeLine{3125       \textcolor{keywordtype}{int} y\_fixed = (y[i] << 16) + 32768; \textcolor{comment}{// rounding}}
\DoxyCodeLine{3126       \textcolor{keywordtype}{int} r,g,b;}
\DoxyCodeLine{3127       \textcolor{keywordtype}{int} cr = pcr[i] -\/ 128;}
\DoxyCodeLine{3128       \textcolor{keywordtype}{int} cb = pcb[i] -\/ 128;}
\DoxyCodeLine{3129       r = y\_fixed + cr*\mbox{\hyperlink{stb__image_8h_a78857167af92ac9e8deb1f7fa7696a60}{float2fixed}}(1.40200f);}
\DoxyCodeLine{3130       g = y\_fixed -\/ cr*\mbox{\hyperlink{stb__image_8h_a78857167af92ac9e8deb1f7fa7696a60}{float2fixed}}(0.71414f) -\/ cb*\mbox{\hyperlink{stb__image_8h_a78857167af92ac9e8deb1f7fa7696a60}{float2fixed}}(0.34414f);}
\DoxyCodeLine{3131       b = y\_fixed                            + cb*\mbox{\hyperlink{stb__image_8h_a78857167af92ac9e8deb1f7fa7696a60}{float2fixed}}(1.77200f);}
\DoxyCodeLine{3132       r >>= 16;}
\DoxyCodeLine{3133       g >>= 16;}
\DoxyCodeLine{3134       b >>= 16;}
\DoxyCodeLine{3135       \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{unsigned}) r > 255) \{ \textcolor{keywordflow}{if} (r < 0) r = 0; \textcolor{keywordflow}{else} r = 255; \}}
\DoxyCodeLine{3136       \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{unsigned}) g > 255) \{ \textcolor{keywordflow}{if} (g < 0) g = 0; \textcolor{keywordflow}{else} g = 255; \}}
\DoxyCodeLine{3137       \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{unsigned}) b > 255) \{ \textcolor{keywordflow}{if} (b < 0) b = 0; \textcolor{keywordflow}{else} b = 255; \}}
\DoxyCodeLine{3138       out[0] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}})r;}
\DoxyCodeLine{3139       out[1] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}})g;}
\DoxyCodeLine{3140       out[2] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}})b;}
\DoxyCodeLine{3141       out[3] = 255;}
\DoxyCodeLine{3142       out += step;}
\DoxyCodeLine{3143    \}}
\DoxyCodeLine{3144 \}}
\DoxyCodeLine{3145 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{3146 \textcolor{comment}{// this is a reduced-\/precision calculation of YCbCr-\/to-\/RGB introduced}}
\DoxyCodeLine{3147 \textcolor{comment}{// to make sure the code produces the same results in both SIMD and scalar}}
\DoxyCodeLine{3148 \textcolor{preprocessor}{\#define float2fixed(x)  (((int) ((x) * 4096.0f + 0.5f)) << 8)}}
\DoxyCodeLine{3149 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_YCbCr\_to\_RGB\_row(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \textcolor{keyword}{const} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *y, \textcolor{keyword}{const} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *pcb, \textcolor{keyword}{const} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *pcr, \textcolor{keywordtype}{int} count, \textcolor{keywordtype}{int} step)}
\DoxyCodeLine{3150 \{}
\DoxyCodeLine{3151    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{3152    \textcolor{keywordflow}{for} (i=0; i < count; ++i) \{}
\DoxyCodeLine{3153       \textcolor{keywordtype}{int} y\_fixed = (y[i] << 20) + (1<<19); \textcolor{comment}{// rounding}}
\DoxyCodeLine{3154       \textcolor{keywordtype}{int} r,g,b;}
\DoxyCodeLine{3155       \textcolor{keywordtype}{int} cr = pcr[i] -\/ 128;}
\DoxyCodeLine{3156       \textcolor{keywordtype}{int} cb = pcb[i] -\/ 128;}
\DoxyCodeLine{3157       r = y\_fixed +  cr* \mbox{\hyperlink{stb__image_8h_a78857167af92ac9e8deb1f7fa7696a60}{float2fixed}}(1.40200f);}
\DoxyCodeLine{3158       g = y\_fixed + (cr*-\/\mbox{\hyperlink{stb__image_8h_a78857167af92ac9e8deb1f7fa7696a60}{float2fixed}}(0.71414f)) + ((cb*-\/\mbox{\hyperlink{stb__image_8h_a78857167af92ac9e8deb1f7fa7696a60}{float2fixed}}(0.34414f)) \& 0xffff0000);}
\DoxyCodeLine{3159       b = y\_fixed                               +   cb* \mbox{\hyperlink{stb__image_8h_a78857167af92ac9e8deb1f7fa7696a60}{float2fixed}}(1.77200f);}
\DoxyCodeLine{3160       r >>= 20;}
\DoxyCodeLine{3161       g >>= 20;}
\DoxyCodeLine{3162       b >>= 20;}
\DoxyCodeLine{3163       \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{unsigned}) r > 255) \{ \textcolor{keywordflow}{if} (r < 0) r = 0; \textcolor{keywordflow}{else} r = 255; \}}
\DoxyCodeLine{3164       \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{unsigned}) g > 255) \{ \textcolor{keywordflow}{if} (g < 0) g = 0; \textcolor{keywordflow}{else} g = 255; \}}
\DoxyCodeLine{3165       \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{unsigned}) b > 255) \{ \textcolor{keywordflow}{if} (b < 0) b = 0; \textcolor{keywordflow}{else} b = 255; \}}
\DoxyCodeLine{3166       out[0] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}})r;}
\DoxyCodeLine{3167       out[1] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}})g;}
\DoxyCodeLine{3168       out[2] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}})b;}
\DoxyCodeLine{3169       out[3] = 255;}
\DoxyCodeLine{3170       out += step;}
\DoxyCodeLine{3171    \}}
\DoxyCodeLine{3172 \}}
\DoxyCodeLine{3173 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3174 }
\DoxyCodeLine{3175 \textcolor{preprocessor}{\#if defined(STBI\_SSE2) || defined(STBI\_NEON)}}
\DoxyCodeLine{3176 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_YCbCr\_to\_RGB\_simd(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \textcolor{keyword}{const} *y, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \textcolor{keyword}{const} *pcb, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \textcolor{keyword}{const} *pcr, \textcolor{keywordtype}{int} count, \textcolor{keywordtype}{int} step)}
\DoxyCodeLine{3177 \{}
\DoxyCodeLine{3178    \textcolor{keywordtype}{int} i = 0;}
\DoxyCodeLine{3179 }
\DoxyCodeLine{3180 \textcolor{preprocessor}{\#ifdef STBI\_SSE2}}
\DoxyCodeLine{3181    \textcolor{comment}{// step == 3 is pretty ugly on the final interleave, and i'm not convinced}}
\DoxyCodeLine{3182    \textcolor{comment}{// it's useful in practice (you wouldn't use it for textures, for example).}}
\DoxyCodeLine{3183    \textcolor{comment}{// so just accelerate step == 4 case.}}
\DoxyCodeLine{3184    \textcolor{keywordflow}{if} (step == 4) \{}
\DoxyCodeLine{3185       \textcolor{comment}{// this is a fairly straightforward implementation and not super-\/optimized.}}
\DoxyCodeLine{3186       \_\_m128i signflip  = \_mm\_set1\_epi8(-\/0x80);}
\DoxyCodeLine{3187       \_\_m128i cr\_const0 = \_mm\_set1\_epi16(   (\textcolor{keywordtype}{short}) ( 1.40200f*4096.0f+0.5f));}
\DoxyCodeLine{3188       \_\_m128i cr\_const1 = \_mm\_set1\_epi16( -\/ (\textcolor{keywordtype}{short}) ( 0.71414f*4096.0f+0.5f));}
\DoxyCodeLine{3189       \_\_m128i cb\_const0 = \_mm\_set1\_epi16( -\/ (\textcolor{keywordtype}{short}) ( 0.34414f*4096.0f+0.5f));}
\DoxyCodeLine{3190       \_\_m128i cb\_const1 = \_mm\_set1\_epi16(   (\textcolor{keywordtype}{short}) ( 1.77200f*4096.0f+0.5f));}
\DoxyCodeLine{3191       \_\_m128i y\_bias = \_mm\_set1\_epi8((\textcolor{keywordtype}{char}) (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}) 128);}
\DoxyCodeLine{3192       \_\_m128i xw = \_mm\_set1\_epi16(255); \textcolor{comment}{// alpha channel}}
\DoxyCodeLine{3193 }
\DoxyCodeLine{3194       \textcolor{keywordflow}{for} (; i+7 < count; i += 8) \{}
\DoxyCodeLine{3195          \textcolor{comment}{// load}}
\DoxyCodeLine{3196          \_\_m128i y\_bytes = \_mm\_loadl\_epi64((\_\_m128i *) (y+i));}
\DoxyCodeLine{3197          \_\_m128i cr\_bytes = \_mm\_loadl\_epi64((\_\_m128i *) (pcr+i));}
\DoxyCodeLine{3198          \_\_m128i cb\_bytes = \_mm\_loadl\_epi64((\_\_m128i *) (pcb+i));}
\DoxyCodeLine{3199          \_\_m128i cr\_biased = \_mm\_xor\_si128(cr\_bytes, signflip); \textcolor{comment}{// -\/128}}
\DoxyCodeLine{3200          \_\_m128i cb\_biased = \_mm\_xor\_si128(cb\_bytes, signflip); \textcolor{comment}{// -\/128}}
\DoxyCodeLine{3201 }
\DoxyCodeLine{3202          \textcolor{comment}{// unpack to short (and left-\/shift cr, cb by 8)}}
\DoxyCodeLine{3203          \_\_m128i yw  = \_mm\_unpacklo\_epi8(y\_bias, y\_bytes);}
\DoxyCodeLine{3204          \_\_m128i crw = \_mm\_unpacklo\_epi8(\_mm\_setzero\_si128(), cr\_biased);}
\DoxyCodeLine{3205          \_\_m128i cbw = \_mm\_unpacklo\_epi8(\_mm\_setzero\_si128(), cb\_biased);}
\DoxyCodeLine{3206 }
\DoxyCodeLine{3207          \textcolor{comment}{// color transform}}
\DoxyCodeLine{3208          \_\_m128i yws = \_mm\_srli\_epi16(yw, 4);}
\DoxyCodeLine{3209          \_\_m128i cr0 = \_mm\_mulhi\_epi16(cr\_const0, crw);}
\DoxyCodeLine{3210          \_\_m128i cb0 = \_mm\_mulhi\_epi16(cb\_const0, cbw);}
\DoxyCodeLine{3211          \_\_m128i cb1 = \_mm\_mulhi\_epi16(cbw, cb\_const1);}
\DoxyCodeLine{3212          \_\_m128i cr1 = \_mm\_mulhi\_epi16(crw, cr\_const1);}
\DoxyCodeLine{3213          \_\_m128i rws = \_mm\_add\_epi16(cr0, yws);}
\DoxyCodeLine{3214          \_\_m128i gwt = \_mm\_add\_epi16(cb0, yws);}
\DoxyCodeLine{3215          \_\_m128i bws = \_mm\_add\_epi16(yws, cb1);}
\DoxyCodeLine{3216          \_\_m128i gws = \_mm\_add\_epi16(gwt, cr1);}
\DoxyCodeLine{3217 }
\DoxyCodeLine{3218          \textcolor{comment}{// descale}}
\DoxyCodeLine{3219          \_\_m128i rw = \_mm\_srai\_epi16(rws, 4);}
\DoxyCodeLine{3220          \_\_m128i bw = \_mm\_srai\_epi16(bws, 4);}
\DoxyCodeLine{3221          \_\_m128i gw = \_mm\_srai\_epi16(gws, 4);}
\DoxyCodeLine{3222 }
\DoxyCodeLine{3223          \textcolor{comment}{// back to byte, set up for transpose}}
\DoxyCodeLine{3224          \_\_m128i brb = \_mm\_packus\_epi16(rw, bw);}
\DoxyCodeLine{3225          \_\_m128i gxb = \_mm\_packus\_epi16(gw, xw);}
\DoxyCodeLine{3226 }
\DoxyCodeLine{3227          \textcolor{comment}{// transpose to interleave channels}}
\DoxyCodeLine{3228          \_\_m128i t0 = \_mm\_unpacklo\_epi8(brb, gxb);}
\DoxyCodeLine{3229          \_\_m128i t1 = \_mm\_unpackhi\_epi8(brb, gxb);}
\DoxyCodeLine{3230          \_\_m128i o0 = \_mm\_unpacklo\_epi16(t0, t1);}
\DoxyCodeLine{3231          \_\_m128i o1 = \_mm\_unpackhi\_epi16(t0, t1);}
\DoxyCodeLine{3232 }
\DoxyCodeLine{3233          \textcolor{comment}{// store}}
\DoxyCodeLine{3234          \_mm\_storeu\_si128((\_\_m128i *) (out + 0), o0);}
\DoxyCodeLine{3235          \_mm\_storeu\_si128((\_\_m128i *) (out + 16), o1);}
\DoxyCodeLine{3236          out += 32;}
\DoxyCodeLine{3237       \}}
\DoxyCodeLine{3238    \}}
\DoxyCodeLine{3239 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3240 }
\DoxyCodeLine{3241 \textcolor{preprocessor}{\#ifdef STBI\_NEON}}
\DoxyCodeLine{3242    \textcolor{comment}{// in this version, step=3 support would be easy to add. but is there demand?}}
\DoxyCodeLine{3243    \textcolor{keywordflow}{if} (step == 4) \{}
\DoxyCodeLine{3244       \textcolor{comment}{// this is a fairly straightforward implementation and not super-\/optimized.}}
\DoxyCodeLine{3245       uint8x8\_t signflip = vdup\_n\_u8(0x80);}
\DoxyCodeLine{3246       int16x8\_t cr\_const0 = vdupq\_n\_s16(   (\textcolor{keywordtype}{short}) ( 1.40200f*4096.0f+0.5f));}
\DoxyCodeLine{3247       int16x8\_t cr\_const1 = vdupq\_n\_s16( -\/ (\textcolor{keywordtype}{short}) ( 0.71414f*4096.0f+0.5f));}
\DoxyCodeLine{3248       int16x8\_t cb\_const0 = vdupq\_n\_s16( -\/ (\textcolor{keywordtype}{short}) ( 0.34414f*4096.0f+0.5f));}
\DoxyCodeLine{3249       int16x8\_t cb\_const1 = vdupq\_n\_s16(   (\textcolor{keywordtype}{short}) ( 1.77200f*4096.0f+0.5f));}
\DoxyCodeLine{3250 }
\DoxyCodeLine{3251       \textcolor{keywordflow}{for} (; i+7 < count; i += 8) \{}
\DoxyCodeLine{3252          \textcolor{comment}{// load}}
\DoxyCodeLine{3253          uint8x8\_t y\_bytes  = vld1\_u8(y + i);}
\DoxyCodeLine{3254          uint8x8\_t cr\_bytes = vld1\_u8(pcr + i);}
\DoxyCodeLine{3255          uint8x8\_t cb\_bytes = vld1\_u8(pcb + i);}
\DoxyCodeLine{3256          int8x8\_t cr\_biased = vreinterpret\_s8\_u8(vsub\_u8(cr\_bytes, signflip));}
\DoxyCodeLine{3257          int8x8\_t cb\_biased = vreinterpret\_s8\_u8(vsub\_u8(cb\_bytes, signflip));}
\DoxyCodeLine{3258 }
\DoxyCodeLine{3259          \textcolor{comment}{// expand to s16}}
\DoxyCodeLine{3260          int16x8\_t yws = vreinterpretq\_s16\_u16(vshll\_n\_u8(y\_bytes, 4));}
\DoxyCodeLine{3261          int16x8\_t crw = vshll\_n\_s8(cr\_biased, 7);}
\DoxyCodeLine{3262          int16x8\_t cbw = vshll\_n\_s8(cb\_biased, 7);}
\DoxyCodeLine{3263 }
\DoxyCodeLine{3264          \textcolor{comment}{// color transform}}
\DoxyCodeLine{3265          int16x8\_t cr0 = vqdmulhq\_s16(crw, cr\_const0);}
\DoxyCodeLine{3266          int16x8\_t cb0 = vqdmulhq\_s16(cbw, cb\_const0);}
\DoxyCodeLine{3267          int16x8\_t cr1 = vqdmulhq\_s16(crw, cr\_const1);}
\DoxyCodeLine{3268          int16x8\_t cb1 = vqdmulhq\_s16(cbw, cb\_const1);}
\DoxyCodeLine{3269          int16x8\_t rws = vaddq\_s16(yws, cr0);}
\DoxyCodeLine{3270          int16x8\_t gws = vaddq\_s16(vaddq\_s16(yws, cb0), cr1);}
\DoxyCodeLine{3271          int16x8\_t bws = vaddq\_s16(yws, cb1);}
\DoxyCodeLine{3272 }
\DoxyCodeLine{3273          \textcolor{comment}{// undo scaling, round, convert to byte}}
\DoxyCodeLine{3274          uint8x8x4\_t o;}
\DoxyCodeLine{3275          o.val[0] = vqrshrun\_n\_s16(rws, 4);}
\DoxyCodeLine{3276          o.val[1] = vqrshrun\_n\_s16(gws, 4);}
\DoxyCodeLine{3277          o.val[2] = vqrshrun\_n\_s16(bws, 4);}
\DoxyCodeLine{3278          o.val[3] = vdup\_n\_u8(255);}
\DoxyCodeLine{3279 }
\DoxyCodeLine{3280          \textcolor{comment}{// store, interleaving r/g/b/a}}
\DoxyCodeLine{3281          vst4\_u8(out, o);}
\DoxyCodeLine{3282          out += 8*4;}
\DoxyCodeLine{3283       \}}
\DoxyCodeLine{3284    \}}
\DoxyCodeLine{3285 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3286 }
\DoxyCodeLine{3287    \textcolor{keywordflow}{for} (; i < count; ++i) \{}
\DoxyCodeLine{3288       \textcolor{keywordtype}{int} y\_fixed = (y[i] << 20) + (1<<19); \textcolor{comment}{// rounding}}
\DoxyCodeLine{3289       \textcolor{keywordtype}{int} r,g,b;}
\DoxyCodeLine{3290       \textcolor{keywordtype}{int} cr = pcr[i] -\/ 128;}
\DoxyCodeLine{3291       \textcolor{keywordtype}{int} cb = pcb[i] -\/ 128;}
\DoxyCodeLine{3292       r = y\_fixed + cr* \mbox{\hyperlink{stb__image_8h_a78857167af92ac9e8deb1f7fa7696a60}{float2fixed}}(1.40200f);}
\DoxyCodeLine{3293       g = y\_fixed + cr*-\/\mbox{\hyperlink{stb__image_8h_a78857167af92ac9e8deb1f7fa7696a60}{float2fixed}}(0.71414f) + ((cb*-\/\mbox{\hyperlink{stb__image_8h_a78857167af92ac9e8deb1f7fa7696a60}{float2fixed}}(0.34414f)) \& 0xffff0000);}
\DoxyCodeLine{3294       b = y\_fixed                             +   cb* \mbox{\hyperlink{stb__image_8h_a78857167af92ac9e8deb1f7fa7696a60}{float2fixed}}(1.77200f);}
\DoxyCodeLine{3295       r >>= 20;}
\DoxyCodeLine{3296       g >>= 20;}
\DoxyCodeLine{3297       b >>= 20;}
\DoxyCodeLine{3298       \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{unsigned}) r > 255) \{ \textcolor{keywordflow}{if} (r < 0) r = 0; \textcolor{keywordflow}{else} r = 255; \}}
\DoxyCodeLine{3299       \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{unsigned}) g > 255) \{ \textcolor{keywordflow}{if} (g < 0) g = 0; \textcolor{keywordflow}{else} g = 255; \}}
\DoxyCodeLine{3300       \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{unsigned}) b > 255) \{ \textcolor{keywordflow}{if} (b < 0) b = 0; \textcolor{keywordflow}{else} b = 255; \}}
\DoxyCodeLine{3301       out[0] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}})r;}
\DoxyCodeLine{3302       out[1] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}})g;}
\DoxyCodeLine{3303       out[2] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}})b;}
\DoxyCodeLine{3304       out[3] = 255;}
\DoxyCodeLine{3305       out += step;}
\DoxyCodeLine{3306    \}}
\DoxyCodeLine{3307 \}}
\DoxyCodeLine{3308 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3309 }
\DoxyCodeLine{3310 \textcolor{comment}{// set up the kernels}}
\DoxyCodeLine{3311 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_setup\_jpeg(\mbox{\hyperlink{structstbi____jpeg}{stbi\_\_jpeg}} *j)}
\DoxyCodeLine{3312 \{}
\DoxyCodeLine{3313    j-\/>\mbox{\hyperlink{structstbi____jpeg_acdd33a51ea0f177683a0cf661f0b6161}{idct\_block\_kernel}} = stbi\_\_idct\_block;}
\DoxyCodeLine{3314    j-\/>\mbox{\hyperlink{structstbi____jpeg_a59a87e2c9d77acd381a96464c95fb7f5}{YCbCr\_to\_RGB\_kernel}} = stbi\_\_YCbCr\_to\_RGB\_row;}
\DoxyCodeLine{3315    j-\/>\mbox{\hyperlink{structstbi____jpeg_acc0b39da0f92f6500164fb27d75ea2d7}{resample\_row\_hv\_2\_kernel}} = stbi\_\_resample\_row\_hv\_2;}
\DoxyCodeLine{3316 }
\DoxyCodeLine{3317 \textcolor{preprocessor}{\#ifdef STBI\_SSE2}}
\DoxyCodeLine{3318    \textcolor{keywordflow}{if} (stbi\_\_sse2\_available()) \{}
\DoxyCodeLine{3319       j-\/>\mbox{\hyperlink{structstbi____jpeg_acdd33a51ea0f177683a0cf661f0b6161}{idct\_block\_kernel}} = stbi\_\_idct\_simd;}
\DoxyCodeLine{3320 \textcolor{preprocessor}{      \#ifndef STBI\_JPEG\_OLD}}
\DoxyCodeLine{3321       j-\/>\mbox{\hyperlink{structstbi____jpeg_a59a87e2c9d77acd381a96464c95fb7f5}{YCbCr\_to\_RGB\_kernel}} = stbi\_\_YCbCr\_to\_RGB\_simd;}
\DoxyCodeLine{3322 \textcolor{preprocessor}{      \#endif}}
\DoxyCodeLine{3323       j-\/>\mbox{\hyperlink{structstbi____jpeg_acc0b39da0f92f6500164fb27d75ea2d7}{resample\_row\_hv\_2\_kernel}} = stbi\_\_resample\_row\_hv\_2\_simd;}
\DoxyCodeLine{3324    \}}
\DoxyCodeLine{3325 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3326 }
\DoxyCodeLine{3327 \textcolor{preprocessor}{\#ifdef STBI\_NEON}}
\DoxyCodeLine{3328    j-\/>\mbox{\hyperlink{structstbi____jpeg_acdd33a51ea0f177683a0cf661f0b6161}{idct\_block\_kernel}} = stbi\_\_idct\_simd;}
\DoxyCodeLine{3329 \textcolor{preprocessor}{   \#ifndef STBI\_JPEG\_OLD}}
\DoxyCodeLine{3330    j-\/>\mbox{\hyperlink{structstbi____jpeg_a59a87e2c9d77acd381a96464c95fb7f5}{YCbCr\_to\_RGB\_kernel}} = stbi\_\_YCbCr\_to\_RGB\_simd;}
\DoxyCodeLine{3331 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{3332    j-\/>\mbox{\hyperlink{structstbi____jpeg_acc0b39da0f92f6500164fb27d75ea2d7}{resample\_row\_hv\_2\_kernel}} = stbi\_\_resample\_row\_hv\_2\_simd;}
\DoxyCodeLine{3333 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3334 \}}
\DoxyCodeLine{3335 }
\DoxyCodeLine{3336 \textcolor{comment}{// clean up the temporary component buffers}}
\DoxyCodeLine{3337 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_cleanup\_jpeg(\mbox{\hyperlink{structstbi____jpeg}{stbi\_\_jpeg}} *j)}
\DoxyCodeLine{3338 \{}
\DoxyCodeLine{3339    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{3340    \textcolor{keywordflow}{for} (i=0; i < j-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}}; ++i) \{}
\DoxyCodeLine{3341       \textcolor{keywordflow}{if} (j-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a367e9836870bfb329cacd984bf520456}{raw\_data}}) \{}
\DoxyCodeLine{3342          \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(j-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a367e9836870bfb329cacd984bf520456}{raw\_data}});}
\DoxyCodeLine{3343          j-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a367e9836870bfb329cacd984bf520456}{raw\_data}} = NULL;}
\DoxyCodeLine{3344          j-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a7f2ba34d082f8eb97e290dbf78b29e64}{data}} = NULL;}
\DoxyCodeLine{3345       \}}
\DoxyCodeLine{3346       \textcolor{keywordflow}{if} (j-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a34e5f94c6aa3761812f6b1d6fcaeadbd}{raw\_coeff}}) \{}
\DoxyCodeLine{3347          \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(j-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a34e5f94c6aa3761812f6b1d6fcaeadbd}{raw\_coeff}});}
\DoxyCodeLine{3348          j-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a34e5f94c6aa3761812f6b1d6fcaeadbd}{raw\_coeff}} = 0;}
\DoxyCodeLine{3349          j-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a67b1b16da5ebbf5e93a05d8675584e83}{coeff}} = 0;}
\DoxyCodeLine{3350       \}}
\DoxyCodeLine{3351       \textcolor{keywordflow}{if} (j-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a6d0a94bbc12b3e067a68639499d10f37}{linebuf}}) \{}
\DoxyCodeLine{3352          \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(j-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a6d0a94bbc12b3e067a68639499d10f37}{linebuf}});}
\DoxyCodeLine{3353          j-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[i].\mbox{\hyperlink{structstbi____jpeg_a6d0a94bbc12b3e067a68639499d10f37}{linebuf}} = NULL;}
\DoxyCodeLine{3354       \}}
\DoxyCodeLine{3355    \}}
\DoxyCodeLine{3356 \}}
\DoxyCodeLine{3357 }
\DoxyCodeLine{3358 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{3359 \{}
\DoxyCodeLine{3360    \mbox{\hyperlink{stb__image_8h_adf7279cdde465980cea1d8b9351d4c54}{resample\_row\_func}} \mbox{\hyperlink{structstbi____resample_acc70724d6b732a2d80a2d2ea376a1379}{resample}};}
\DoxyCodeLine{3361    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{structstbi____resample_a4cf6bd17f6ffd42b940319ee098d5b19}{line0}},*line1;}
\DoxyCodeLine{3362    \textcolor{keywordtype}{int} \mbox{\hyperlink{structstbi____resample_a683661aef00f6ac721dfc7f7261721e9}{hs}},vs;   \textcolor{comment}{// expansion factor in each axis}}
\DoxyCodeLine{3363    \textcolor{keywordtype}{int} \mbox{\hyperlink{structstbi____resample_a7e617ad8b74f995862833fa45c74e27f}{w\_lores}}; \textcolor{comment}{// horizontal pixels pre-\/expansion}}
\DoxyCodeLine{3364    \textcolor{keywordtype}{int} \mbox{\hyperlink{structstbi____resample_ac1d5eda703b78467e28a6240611d5b1a}{ystep}};   \textcolor{comment}{// how far through vertical expansion we are}}
\DoxyCodeLine{3365    \textcolor{keywordtype}{int} \mbox{\hyperlink{structstbi____resample_a08d2a9b0ca9aea8496231a8af68579e5}{ypos}};    \textcolor{comment}{// which pre-\/expansion row we're on}}
\DoxyCodeLine{3366 \} \mbox{\hyperlink{structstbi____resample}{stbi\_\_resample}};}
\DoxyCodeLine{3367 }
\DoxyCodeLine{3368 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *load\_jpeg\_image(\mbox{\hyperlink{structstbi____jpeg}{stbi\_\_jpeg}} *z, \textcolor{keywordtype}{int} *out\_x, \textcolor{keywordtype}{int} *out\_y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{3369 \{}
\DoxyCodeLine{3370    \textcolor{keywordtype}{int} n, decode\_n;}
\DoxyCodeLine{3371    z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}} = 0; \textcolor{comment}{// make stbi\_\_cleanup\_jpeg safe}}
\DoxyCodeLine{3372 }
\DoxyCodeLine{3373    \textcolor{comment}{// validate req\_comp}}
\DoxyCodeLine{3374    \textcolor{keywordflow}{if} (req\_comp < 0 || req\_comp > 4) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}bad req\_comp"{}}, \textcolor{stringliteral}{"{}Internal error"{}});}
\DoxyCodeLine{3375 }
\DoxyCodeLine{3376    \textcolor{comment}{// load a jpeg image from whichever source, but leave in YCbCr format}}
\DoxyCodeLine{3377    \textcolor{keywordflow}{if} (!stbi\_\_decode\_jpeg\_image(z)) \{ stbi\_\_cleanup\_jpeg(z); \textcolor{keywordflow}{return} NULL; \}}
\DoxyCodeLine{3378 }
\DoxyCodeLine{3379    \textcolor{comment}{// determine actual number of components to generate}}
\DoxyCodeLine{3380    n = req\_comp ? req\_comp : z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}};}
\DoxyCodeLine{3381 }
\DoxyCodeLine{3382    \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}} == 3 \&\& n < 3)}
\DoxyCodeLine{3383       decode\_n = 1;}
\DoxyCodeLine{3384    \textcolor{keywordflow}{else}}
\DoxyCodeLine{3385       decode\_n = z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}};}
\DoxyCodeLine{3386 }
\DoxyCodeLine{3387    \textcolor{comment}{// resample and color-\/convert}}
\DoxyCodeLine{3388    \{}
\DoxyCodeLine{3389       \textcolor{keywordtype}{int} k;}
\DoxyCodeLine{3390       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i,j;}
\DoxyCodeLine{3391       \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *output;}
\DoxyCodeLine{3392       \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *coutput[4];}
\DoxyCodeLine{3393 }
\DoxyCodeLine{3394       \mbox{\hyperlink{structstbi____resample}{stbi\_\_resample}} res\_comp[4];}
\DoxyCodeLine{3395 }
\DoxyCodeLine{3396       \textcolor{keywordflow}{for} (k=0; k < decode\_n; ++k) \{}
\DoxyCodeLine{3397          \mbox{\hyperlink{structstbi____resample}{stbi\_\_resample}} *r = \&res\_comp[k];}
\DoxyCodeLine{3398 }
\DoxyCodeLine{3399          \textcolor{comment}{// allocate line buffer big enough for upsampling off the edges}}
\DoxyCodeLine{3400          \textcolor{comment}{// with upsample factor of 4}}
\DoxyCodeLine{3401          z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[k].\mbox{\hyperlink{structstbi____jpeg_a6d0a94bbc12b3e067a68639499d10f37}{linebuf}} = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc(z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} + 3);}
\DoxyCodeLine{3402          \textcolor{keywordflow}{if} (!z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[k].\mbox{\hyperlink{structstbi____jpeg_a6d0a94bbc12b3e067a68639499d10f37}{linebuf}}) \{ stbi\_\_cleanup\_jpeg(z); \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}}); \}}
\DoxyCodeLine{3403 }
\DoxyCodeLine{3404          r-\/>\mbox{\hyperlink{structstbi____resample_a683661aef00f6ac721dfc7f7261721e9}{hs}}      = z-\/>\mbox{\hyperlink{structstbi____jpeg_a57bf03f54ecb42373e3fc9d5237ad4e3}{img\_h\_max}} / z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[k].\mbox{\hyperlink{structstbi____jpeg_aeba05300b505081d0ab14c17ee7b86f6}{h}};}
\DoxyCodeLine{3405          r-\/>\mbox{\hyperlink{structstbi____resample_a93dab8fd4f1d7d05b14dd26f860e9495}{vs}}      = z-\/>\mbox{\hyperlink{structstbi____jpeg_a3780a6adea2c793fb0166ab04e3ae126}{img\_v\_max}} / z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[k].\mbox{\hyperlink{structstbi____jpeg_a9862074449c957c4c9cbaacbc621f43f}{v}};}
\DoxyCodeLine{3406          r-\/>\mbox{\hyperlink{structstbi____resample_ac1d5eda703b78467e28a6240611d5b1a}{ystep}}   = r-\/>\mbox{\hyperlink{structstbi____resample_a93dab8fd4f1d7d05b14dd26f860e9495}{vs}} >> 1;}
\DoxyCodeLine{3407          r-\/>\mbox{\hyperlink{structstbi____resample_a7e617ad8b74f995862833fa45c74e27f}{w\_lores}} = (z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} + r-\/>\mbox{\hyperlink{structstbi____resample_a683661aef00f6ac721dfc7f7261721e9}{hs}}-\/1) / r-\/>\mbox{\hyperlink{structstbi____resample_a683661aef00f6ac721dfc7f7261721e9}{hs}};}
\DoxyCodeLine{3408          r-\/>\mbox{\hyperlink{structstbi____resample_a08d2a9b0ca9aea8496231a8af68579e5}{ypos}}    = 0;}
\DoxyCodeLine{3409          r-\/>\mbox{\hyperlink{structstbi____resample_a4cf6bd17f6ffd42b940319ee098d5b19}{line0}}   = r-\/>\mbox{\hyperlink{structstbi____resample_af92f201efe9983aeb85c342a1d3acc41}{line1}} = z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[k].\mbox{\hyperlink{structstbi____jpeg_a7f2ba34d082f8eb97e290dbf78b29e64}{data}};}
\DoxyCodeLine{3410 }
\DoxyCodeLine{3411          if      (r-\/>\mbox{\hyperlink{structstbi____resample_a683661aef00f6ac721dfc7f7261721e9}{hs}} == 1 \&\& r-\/>\mbox{\hyperlink{structstbi____resample_a93dab8fd4f1d7d05b14dd26f860e9495}{vs}} == 1) r-\/>\mbox{\hyperlink{structstbi____resample_acc70724d6b732a2d80a2d2ea376a1379}{resample}} = resample\_row\_1;}
\DoxyCodeLine{3412          \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (r-\/>\mbox{\hyperlink{structstbi____resample_a683661aef00f6ac721dfc7f7261721e9}{hs}} == 1 \&\& r-\/>\mbox{\hyperlink{structstbi____resample_a93dab8fd4f1d7d05b14dd26f860e9495}{vs}} == 2) r-\/>\mbox{\hyperlink{structstbi____resample_acc70724d6b732a2d80a2d2ea376a1379}{resample}} = stbi\_\_resample\_row\_v\_2;}
\DoxyCodeLine{3413          \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (r-\/>\mbox{\hyperlink{structstbi____resample_a683661aef00f6ac721dfc7f7261721e9}{hs}} == 2 \&\& r-\/>\mbox{\hyperlink{structstbi____resample_a93dab8fd4f1d7d05b14dd26f860e9495}{vs}} == 1) r-\/>\mbox{\hyperlink{structstbi____resample_acc70724d6b732a2d80a2d2ea376a1379}{resample}} = stbi\_\_resample\_row\_h\_2;}
\DoxyCodeLine{3414          \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (r-\/>\mbox{\hyperlink{structstbi____resample_a683661aef00f6ac721dfc7f7261721e9}{hs}} == 2 \&\& r-\/>\mbox{\hyperlink{structstbi____resample_a93dab8fd4f1d7d05b14dd26f860e9495}{vs}} == 2) r-\/>\mbox{\hyperlink{structstbi____resample_acc70724d6b732a2d80a2d2ea376a1379}{resample}} = z-\/>\mbox{\hyperlink{structstbi____jpeg_acc0b39da0f92f6500164fb27d75ea2d7}{resample\_row\_hv\_2\_kernel}};}
\DoxyCodeLine{3415          \textcolor{keywordflow}{else}                               r-\/>\mbox{\hyperlink{structstbi____resample_acc70724d6b732a2d80a2d2ea376a1379}{resample}} = stbi\_\_resample\_row\_generic;}
\DoxyCodeLine{3416       \}}
\DoxyCodeLine{3417 }
\DoxyCodeLine{3418       \textcolor{comment}{// can't error after this so, this is safe}}
\DoxyCodeLine{3419       output = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc(n * z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} * z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}} + 1);}
\DoxyCodeLine{3420       \textcolor{keywordflow}{if} (!output) \{ stbi\_\_cleanup\_jpeg(z); \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}}); \}}
\DoxyCodeLine{3421 }
\DoxyCodeLine{3422       \textcolor{comment}{// now go ahead and resample}}
\DoxyCodeLine{3423       \textcolor{keywordflow}{for} (j=0; j < z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}}; ++j) \{}
\DoxyCodeLine{3424          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out = output + n * z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} * j;}
\DoxyCodeLine{3425          \textcolor{keywordflow}{for} (k=0; k < decode\_n; ++k) \{}
\DoxyCodeLine{3426             \mbox{\hyperlink{structstbi____resample}{stbi\_\_resample}} *r = \&res\_comp[k];}
\DoxyCodeLine{3427             \textcolor{keywordtype}{int} y\_bot = r-\/>\mbox{\hyperlink{structstbi____resample_ac1d5eda703b78467e28a6240611d5b1a}{ystep}} >= (r-\/>\mbox{\hyperlink{structstbi____resample_a93dab8fd4f1d7d05b14dd26f860e9495}{vs}} >> 1);}
\DoxyCodeLine{3428             coutput[k] = r-\/>\mbox{\hyperlink{structstbi____resample_acc70724d6b732a2d80a2d2ea376a1379}{resample}}(z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[k].\mbox{\hyperlink{structstbi____jpeg_a6d0a94bbc12b3e067a68639499d10f37}{linebuf}},}
\DoxyCodeLine{3429                                      y\_bot ? r-\/>\mbox{\hyperlink{structstbi____resample_af92f201efe9983aeb85c342a1d3acc41}{line1}} : r-\/>\mbox{\hyperlink{structstbi____resample_a4cf6bd17f6ffd42b940319ee098d5b19}{line0}},}
\DoxyCodeLine{3430                                      y\_bot ? r-\/>\mbox{\hyperlink{structstbi____resample_a4cf6bd17f6ffd42b940319ee098d5b19}{line0}} : r-\/>\mbox{\hyperlink{structstbi____resample_af92f201efe9983aeb85c342a1d3acc41}{line1}},}
\DoxyCodeLine{3431                                      r-\/>\mbox{\hyperlink{structstbi____resample_a7e617ad8b74f995862833fa45c74e27f}{w\_lores}}, r-\/>\mbox{\hyperlink{structstbi____resample_a683661aef00f6ac721dfc7f7261721e9}{hs}});}
\DoxyCodeLine{3432             \textcolor{keywordflow}{if} (++r-\/>\mbox{\hyperlink{structstbi____resample_ac1d5eda703b78467e28a6240611d5b1a}{ystep}} >= r-\/>\mbox{\hyperlink{structstbi____resample_a93dab8fd4f1d7d05b14dd26f860e9495}{vs}}) \{}
\DoxyCodeLine{3433                r-\/>\mbox{\hyperlink{structstbi____resample_ac1d5eda703b78467e28a6240611d5b1a}{ystep}} = 0;}
\DoxyCodeLine{3434                r-\/>\mbox{\hyperlink{structstbi____resample_a4cf6bd17f6ffd42b940319ee098d5b19}{line0}} = r-\/>\mbox{\hyperlink{structstbi____resample_af92f201efe9983aeb85c342a1d3acc41}{line1}};}
\DoxyCodeLine{3435                \textcolor{keywordflow}{if} (++r-\/>\mbox{\hyperlink{structstbi____resample_a08d2a9b0ca9aea8496231a8af68579e5}{ypos}} < z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[k].\mbox{\hyperlink{structstbi____jpeg_a050961354fd8e9f77a83a715037beaa4}{y}})}
\DoxyCodeLine{3436                   r-\/>\mbox{\hyperlink{structstbi____resample_af92f201efe9983aeb85c342a1d3acc41}{line1}} += z-\/>\mbox{\hyperlink{structstbi____jpeg_a17753a42b311f3b02c92708cb14179d8}{img\_comp}}[k].\mbox{\hyperlink{structstbi____jpeg_ad3e572acfe7eafe0aa3978ac2145acce}{w2}};}
\DoxyCodeLine{3437             \}}
\DoxyCodeLine{3438          \}}
\DoxyCodeLine{3439          \textcolor{keywordflow}{if} (n >= 3) \{}
\DoxyCodeLine{3440             \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *y = coutput[0];}
\DoxyCodeLine{3441             \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}} == 3) \{}
\DoxyCodeLine{3442                z-\/>\mbox{\hyperlink{structstbi____jpeg_a59a87e2c9d77acd381a96464c95fb7f5}{YCbCr\_to\_RGB\_kernel}}(out, y, coutput[1], coutput[2], z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}}, n);}
\DoxyCodeLine{3443             \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{3444                \textcolor{keywordflow}{for} (i=0; i < z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}}; ++i) \{}
\DoxyCodeLine{3445                   out[0] = out[1] = out[2] = y[i];}
\DoxyCodeLine{3446                   out[3] = 255; \textcolor{comment}{// not used if n==3}}
\DoxyCodeLine{3447                   out += n;}
\DoxyCodeLine{3448                \}}
\DoxyCodeLine{3449          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3450             \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *y = coutput[0];}
\DoxyCodeLine{3451             \textcolor{keywordflow}{if} (n == 1)}
\DoxyCodeLine{3452                \textcolor{keywordflow}{for} (i=0; i < z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}}; ++i) out[i] = y[i];}
\DoxyCodeLine{3453             \textcolor{keywordflow}{else}}
\DoxyCodeLine{3454                \textcolor{keywordflow}{for} (i=0; i < z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}}; ++i) *out++ = y[i], *out++ = 255;}
\DoxyCodeLine{3455          \}}
\DoxyCodeLine{3456       \}}
\DoxyCodeLine{3457       stbi\_\_cleanup\_jpeg(z);}
\DoxyCodeLine{3458       *out\_x = z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}};}
\DoxyCodeLine{3459       *out\_y = z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}};}
\DoxyCodeLine{3460       \textcolor{keywordflow}{if} (comp) *comp  = z-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}}; \textcolor{comment}{// report original components, not output}}
\DoxyCodeLine{3461       \textcolor{keywordflow}{return} output;}
\DoxyCodeLine{3462    \}}
\DoxyCodeLine{3463 \}}
\DoxyCodeLine{3464 }
\DoxyCodeLine{3465 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} * \mbox{\hyperlink{stb__image_8h_a5398a99dfad5e3949e3210d48bdf4c2b}{STBI\_FORCE\_STACK\_ALIGN}} stbi\_\_jpeg\_load(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{3466 \{}
\DoxyCodeLine{3467    \mbox{\hyperlink{structstbi____jpeg}{stbi\_\_jpeg}} j;}
\DoxyCodeLine{3468    j.\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}} = s;}
\DoxyCodeLine{3469    stbi\_\_setup\_jpeg(\&j);}
\DoxyCodeLine{3470    \textcolor{keywordflow}{return} load\_jpeg\_image(\&j, x,y,comp,req\_comp);}
\DoxyCodeLine{3471 \}}
\DoxyCodeLine{3472 }
\DoxyCodeLine{3473 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_jpeg\_test(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s)}
\DoxyCodeLine{3474 \{}
\DoxyCodeLine{3475    \textcolor{keywordtype}{int} r;}
\DoxyCodeLine{3476    \mbox{\hyperlink{structstbi____jpeg}{stbi\_\_jpeg}} j;}
\DoxyCodeLine{3477    j.\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}} = s;}
\DoxyCodeLine{3478    stbi\_\_setup\_jpeg(\&j);}
\DoxyCodeLine{3479    r = stbi\_\_decode\_jpeg\_header(\&j, \mbox{\hyperlink{stb__image_8h_ab04a0655cd1e3bcac5e8f48c18df1a57a49475d1886e13403b20664a11e1e358b}{STBI\_\_SCAN\_type}});}
\DoxyCodeLine{3480    stbi\_\_rewind(s);}
\DoxyCodeLine{3481    \textcolor{keywordflow}{return} r;}
\DoxyCodeLine{3482 \}}
\DoxyCodeLine{3483 }
\DoxyCodeLine{3484 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_jpeg\_info\_raw(\mbox{\hyperlink{structstbi____jpeg}{stbi\_\_jpeg}} *j, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{3485 \{}
\DoxyCodeLine{3486    \textcolor{keywordflow}{if} (!stbi\_\_decode\_jpeg\_header(j, \mbox{\hyperlink{stb__image_8h_ab04a0655cd1e3bcac5e8f48c18df1a57a83675cb38c33efa3dd86b43996effea4}{STBI\_\_SCAN\_header}})) \{}
\DoxyCodeLine{3487       stbi\_\_rewind( j-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}} );}
\DoxyCodeLine{3488       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3489    \}}
\DoxyCodeLine{3490    \textcolor{keywordflow}{if} (x) *x = j-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}};}
\DoxyCodeLine{3491    \textcolor{keywordflow}{if} (y) *y = j-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}};}
\DoxyCodeLine{3492    \textcolor{keywordflow}{if} (comp) *comp = j-\/>\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}}-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}};}
\DoxyCodeLine{3493    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{3494 \}}
\DoxyCodeLine{3495 }
\DoxyCodeLine{3496 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_jpeg\_info(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{3497 \{}
\DoxyCodeLine{3498    \mbox{\hyperlink{structstbi____jpeg}{stbi\_\_jpeg}} j;}
\DoxyCodeLine{3499    j.\mbox{\hyperlink{structstbi____jpeg_ae6907aefb58c08a3a924a947b0b9eb3f}{s}} = s;}
\DoxyCodeLine{3500    \textcolor{keywordflow}{return} stbi\_\_jpeg\_info\_raw(\&j, x, y, comp);}
\DoxyCodeLine{3501 \}}
\DoxyCodeLine{3502 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3503 }
\DoxyCodeLine{3504 \textcolor{comment}{// public domain zlib decode    v0.2  Sean Barrett 2006-\/11-\/18}}
\DoxyCodeLine{3505 \textcolor{comment}{//    simple implementation}}
\DoxyCodeLine{3506 \textcolor{comment}{//      -\/ all input must be provided in an upfront buffer}}
\DoxyCodeLine{3507 \textcolor{comment}{//      -\/ all output is written to a single output buffer (can malloc/realloc)}}
\DoxyCodeLine{3508 \textcolor{comment}{//    performance}}
\DoxyCodeLine{3509 \textcolor{comment}{//      -\/ fast huffman}}
\DoxyCodeLine{3510 }
\DoxyCodeLine{3511 \textcolor{preprocessor}{\#ifndef STBI\_NO\_ZLIB}}
\DoxyCodeLine{3512 }
\DoxyCodeLine{3513 \textcolor{comment}{// fast-\/way is faster to check than jpeg huffman, but slow way is slower}}
\DoxyCodeLine{3514 \textcolor{preprocessor}{\#define STBI\_\_ZFAST\_BITS  9 }\textcolor{comment}{// accelerate all cases in default tables}}
\DoxyCodeLine{3515 \textcolor{preprocessor}{\#define STBI\_\_ZFAST\_MASK  ((1 << STBI\_\_ZFAST\_BITS) -\/ 1)}}
\DoxyCodeLine{3516 }
\DoxyCodeLine{3517 \textcolor{comment}{// zlib-\/style huffman encoding}}
\DoxyCodeLine{3518 \textcolor{comment}{// (jpegs packs from left, zlib from right, so can't share code)}}
\DoxyCodeLine{3519 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{3520 \{}
\DoxyCodeLine{3521    \mbox{\hyperlink{stb__image_8h_a38c41d822de912df31fb56df26a9cb8c}{stbi\_\_uint16}} fast[1 << \mbox{\hyperlink{stb__image_8h_aafa264bb0ccc102c06e5c03e9e4c916b}{STBI\_\_ZFAST\_BITS}}];}
\DoxyCodeLine{3522    \mbox{\hyperlink{stb__image_8h_a38c41d822de912df31fb56df26a9cb8c}{stbi\_\_uint16}} firstcode[16];}
\DoxyCodeLine{3523    \textcolor{keywordtype}{int} maxcode[17];}
\DoxyCodeLine{3524    \mbox{\hyperlink{stb__image_8h_a38c41d822de912df31fb56df26a9cb8c}{stbi\_\_uint16}} firstsymbol[16];}
\DoxyCodeLine{3525    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}  size[288];}
\DoxyCodeLine{3526    \mbox{\hyperlink{stb__image_8h_a38c41d822de912df31fb56df26a9cb8c}{stbi\_\_uint16}} value[288];}
\DoxyCodeLine{3527 \} \mbox{\hyperlink{structstbi____zhuffman}{stbi\_\_zhuffman}};}
\DoxyCodeLine{3528 }
\DoxyCodeLine{3529 \mbox{\hyperlink{stb__image_8h_a952111e72ed4262552e413e5938089b8}{stbi\_inline}} \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_bitreverse16(\textcolor{keywordtype}{int} n)}
\DoxyCodeLine{3530 \{}
\DoxyCodeLine{3531   n = ((n \& 0xAAAA) >>  1) | ((n \& 0x5555) << 1);}
\DoxyCodeLine{3532   n = ((n \& 0xCCCC) >>  2) | ((n \& 0x3333) << 2);}
\DoxyCodeLine{3533   n = ((n \& 0xF0F0) >>  4) | ((n \& 0x0F0F) << 4);}
\DoxyCodeLine{3534   n = ((n \& 0xFF00) >>  8) | ((n \& 0x00FF) << 8);}
\DoxyCodeLine{3535   \textcolor{keywordflow}{return} n;}
\DoxyCodeLine{3536 \}}
\DoxyCodeLine{3537 }
\DoxyCodeLine{3538 \mbox{\hyperlink{stb__image_8h_a952111e72ed4262552e413e5938089b8}{stbi\_inline}} \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_bit\_reverse(\textcolor{keywordtype}{int} v, \textcolor{keywordtype}{int} bits)}
\DoxyCodeLine{3539 \{}
\DoxyCodeLine{3540    \mbox{\hyperlink{stb__image_8h_abcf0d8bc32a73fd449d918aac2ed3882}{STBI\_ASSERT}}(bits <= 16);}
\DoxyCodeLine{3541    \textcolor{comment}{// to bit reverse n bits, reverse 16 and shift}}
\DoxyCodeLine{3542    \textcolor{comment}{// e.g. 11 bits, bit reverse and shift away 5}}
\DoxyCodeLine{3543    \textcolor{keywordflow}{return} stbi\_\_bitreverse16(v) >> (16-\/bits);}
\DoxyCodeLine{3544 \}}
\DoxyCodeLine{3545 }
\DoxyCodeLine{3546 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_zbuild\_huffman(\mbox{\hyperlink{structstbi____zhuffman}{stbi\_\_zhuffman}} *z, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *sizelist, \textcolor{keywordtype}{int} num)}
\DoxyCodeLine{3547 \{}
\DoxyCodeLine{3548    \textcolor{keywordtype}{int} i,k=0;}
\DoxyCodeLine{3549    \textcolor{keywordtype}{int} code, next\_code[16], sizes[17];}
\DoxyCodeLine{3550 }
\DoxyCodeLine{3551    \textcolor{comment}{// DEFLATE spec for generating codes}}
\DoxyCodeLine{3552    memset(sizes, 0, \textcolor{keyword}{sizeof}(sizes));}
\DoxyCodeLine{3553    memset(z-\/>\mbox{\hyperlink{structstbi____zhuffman_add40d8660a59cff6ac91d5f2a3766f6c}{fast}}, 0, \textcolor{keyword}{sizeof}(z-\/>\mbox{\hyperlink{structstbi____zhuffman_add40d8660a59cff6ac91d5f2a3766f6c}{fast}}));}
\DoxyCodeLine{3554    \textcolor{keywordflow}{for} (i=0; i < num; ++i)}
\DoxyCodeLine{3555       ++sizes[sizelist[i]];}
\DoxyCodeLine{3556    sizes[0] = 0;}
\DoxyCodeLine{3557    \textcolor{keywordflow}{for} (i=1; i < 16; ++i)}
\DoxyCodeLine{3558       \textcolor{keywordflow}{if} (sizes[i] > (1 << i))}
\DoxyCodeLine{3559          \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad sizes"{}}, \textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{3560    code = 0;}
\DoxyCodeLine{3561    \textcolor{keywordflow}{for} (i=1; i < 16; ++i) \{}
\DoxyCodeLine{3562       next\_code[i] = code;}
\DoxyCodeLine{3563       z-\/>\mbox{\hyperlink{structstbi____zhuffman_a355f78c7cc89e9379a3b4e650749ceb7}{firstcode}}[i] = (\mbox{\hyperlink{stb__image_8h_a38c41d822de912df31fb56df26a9cb8c}{stbi\_\_uint16}}) code;}
\DoxyCodeLine{3564       z-\/>\mbox{\hyperlink{structstbi____zhuffman_a5b03392e79ade736644a80029e466558}{firstsymbol}}[i] = (\mbox{\hyperlink{stb__image_8h_a38c41d822de912df31fb56df26a9cb8c}{stbi\_\_uint16}}) k;}
\DoxyCodeLine{3565       code = (code + sizes[i]);}
\DoxyCodeLine{3566       \textcolor{keywordflow}{if} (sizes[i])}
\DoxyCodeLine{3567          \textcolor{keywordflow}{if} (code-\/1 >= (1 << i)) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad codelengths"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{3568       z-\/>\mbox{\hyperlink{structstbi____zhuffman_a4152ce34e14ffbac4ec0a812a47c7be3}{maxcode}}[i] = code << (16-\/i); \textcolor{comment}{// preshift for inner loop}}
\DoxyCodeLine{3569       code <<= 1;}
\DoxyCodeLine{3570       k += sizes[i];}
\DoxyCodeLine{3571    \}}
\DoxyCodeLine{3572    z-\/>\mbox{\hyperlink{structstbi____zhuffman_a4152ce34e14ffbac4ec0a812a47c7be3}{maxcode}}[16] = 0x10000; \textcolor{comment}{// sentinel}}
\DoxyCodeLine{3573    \textcolor{keywordflow}{for} (i=0; i < num; ++i) \{}
\DoxyCodeLine{3574       \textcolor{keywordtype}{int} s = sizelist[i];}
\DoxyCodeLine{3575       \textcolor{keywordflow}{if} (s) \{}
\DoxyCodeLine{3576          \textcolor{keywordtype}{int} c = next\_code[s] -\/ z-\/>\mbox{\hyperlink{structstbi____zhuffman_a355f78c7cc89e9379a3b4e650749ceb7}{firstcode}}[s] + z-\/>\mbox{\hyperlink{structstbi____zhuffman_a5b03392e79ade736644a80029e466558}{firstsymbol}}[s];}
\DoxyCodeLine{3577          \mbox{\hyperlink{stb__image_8h_a38c41d822de912df31fb56df26a9cb8c}{stbi\_\_uint16}} fastv = (\mbox{\hyperlink{stb__image_8h_a38c41d822de912df31fb56df26a9cb8c}{stbi\_\_uint16}}) ((s << 9) | i);}
\DoxyCodeLine{3578          z-\/>\mbox{\hyperlink{structstbi____zhuffman_abda7ed1733d13b65688e6bf15fd49611}{size}} [c] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}     ) s;}
\DoxyCodeLine{3579          z-\/>\mbox{\hyperlink{structstbi____zhuffman_adac13ed73817204314fb544e64b6dfef}{value}}[c] = (\mbox{\hyperlink{stb__image_8h_a38c41d822de912df31fb56df26a9cb8c}{stbi\_\_uint16}}) i;}
\DoxyCodeLine{3580          \textcolor{keywordflow}{if} (s <= \mbox{\hyperlink{stb__image_8h_aafa264bb0ccc102c06e5c03e9e4c916b}{STBI\_\_ZFAST\_BITS}}) \{}
\DoxyCodeLine{3581             \textcolor{keywordtype}{int} j = stbi\_\_bit\_reverse(next\_code[s],s);}
\DoxyCodeLine{3582             \textcolor{keywordflow}{while} (j < (1 << \mbox{\hyperlink{stb__image_8h_aafa264bb0ccc102c06e5c03e9e4c916b}{STBI\_\_ZFAST\_BITS}})) \{}
\DoxyCodeLine{3583                z-\/>\mbox{\hyperlink{structstbi____zhuffman_add40d8660a59cff6ac91d5f2a3766f6c}{fast}}[j] = fastv;}
\DoxyCodeLine{3584                j += (1 << s);}
\DoxyCodeLine{3585             \}}
\DoxyCodeLine{3586          \}}
\DoxyCodeLine{3587          ++next\_code[s];}
\DoxyCodeLine{3588       \}}
\DoxyCodeLine{3589    \}}
\DoxyCodeLine{3590    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{3591 \}}
\DoxyCodeLine{3592 }
\DoxyCodeLine{3593 \textcolor{comment}{// zlib-\/from-\/memory implementation for PNG reading}}
\DoxyCodeLine{3594 \textcolor{comment}{//    because PNG allows splitting the zlib stream arbitrarily,}}
\DoxyCodeLine{3595 \textcolor{comment}{//    and it's annoying structurally to have PNG call ZLIB call PNG,}}
\DoxyCodeLine{3596 \textcolor{comment}{//    we require PNG read all the IDATs and combine them into a single}}
\DoxyCodeLine{3597 \textcolor{comment}{//    memory buffer}}
\DoxyCodeLine{3598 }
\DoxyCodeLine{3599 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{3600 \{}
\DoxyCodeLine{3601    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{structstbi____zbuf_ae50cbbbc0e223b2a7e0b9fe8f6df1af2}{zbuffer}}, *zbuffer\_end;}
\DoxyCodeLine{3602    \textcolor{keywordtype}{int} \mbox{\hyperlink{structstbi____zbuf_a6503c687ce43f8541a6442e93930f990}{num\_bits}};}
\DoxyCodeLine{3603    \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}} \mbox{\hyperlink{structstbi____zbuf_ab8c6c09ee5217d9288ad729e1799ed7b}{code\_buffer}};}
\DoxyCodeLine{3604 }
\DoxyCodeLine{3605    \textcolor{keywordtype}{char} *\mbox{\hyperlink{structstbi____zbuf_a1ae8a721887399326ca0f80b4274043b}{zout}};}
\DoxyCodeLine{3606    \textcolor{keywordtype}{char} *\mbox{\hyperlink{structstbi____zbuf_a860da3b14d4d9f0d0bd125d11f7aa4e8}{zout\_start}};}
\DoxyCodeLine{3607    \textcolor{keywordtype}{char} *\mbox{\hyperlink{structstbi____zbuf_aad24226b483ae93d1f3136a6c0a4eb13}{zout\_end}};}
\DoxyCodeLine{3608    \textcolor{keywordtype}{int}   \mbox{\hyperlink{structstbi____zbuf_a46f242cf6823431c4ab19b3bbf445782}{z\_expandable}};}
\DoxyCodeLine{3609 }
\DoxyCodeLine{3610    \mbox{\hyperlink{structstbi____zhuffman}{stbi\_\_zhuffman}} z\_length, \mbox{\hyperlink{structstbi____zbuf_aa5a7d91ef6ff408f8696934d25b11dbe}{z\_distance}};}
\DoxyCodeLine{3611 \} \mbox{\hyperlink{structstbi____zbuf}{stbi\_\_zbuf}};}
\DoxyCodeLine{3612 }
\DoxyCodeLine{3613 \mbox{\hyperlink{stb__image_8h_a952111e72ed4262552e413e5938089b8}{stbi\_inline}} \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} stbi\_\_zget8(\mbox{\hyperlink{structstbi____zbuf}{stbi\_\_zbuf}} *z)}
\DoxyCodeLine{3614 \{}
\DoxyCodeLine{3615    \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____zbuf_ae50cbbbc0e223b2a7e0b9fe8f6df1af2}{zbuffer}} >= z-\/>\mbox{\hyperlink{structstbi____zbuf_a17266a4467c8eb479c0a78b9cf9a7589}{zbuffer\_end}}) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3616    \textcolor{keywordflow}{return} *z-\/>\mbox{\hyperlink{structstbi____zbuf_ae50cbbbc0e223b2a7e0b9fe8f6df1af2}{zbuffer}}++;}
\DoxyCodeLine{3617 \}}
\DoxyCodeLine{3618 }
\DoxyCodeLine{3619 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_fill\_bits(\mbox{\hyperlink{structstbi____zbuf}{stbi\_\_zbuf}} *z)}
\DoxyCodeLine{3620 \{}
\DoxyCodeLine{3621    \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{3622       \mbox{\hyperlink{stb__image_8h_abcf0d8bc32a73fd449d918aac2ed3882}{STBI\_ASSERT}}(z-\/>\mbox{\hyperlink{structstbi____zbuf_ab8c6c09ee5217d9288ad729e1799ed7b}{code\_buffer}} < (1U << z-\/>\mbox{\hyperlink{structstbi____zbuf_a6503c687ce43f8541a6442e93930f990}{num\_bits}}));}
\DoxyCodeLine{3623       z-\/>\mbox{\hyperlink{structstbi____zbuf_ab8c6c09ee5217d9288ad729e1799ed7b}{code\_buffer}} |= (\textcolor{keywordtype}{unsigned} int) stbi\_\_zget8(z) << z-\/>\mbox{\hyperlink{structstbi____zbuf_a6503c687ce43f8541a6442e93930f990}{num\_bits}};}
\DoxyCodeLine{3624       z-\/>\mbox{\hyperlink{structstbi____zbuf_a6503c687ce43f8541a6442e93930f990}{num\_bits}} += 8;}
\DoxyCodeLine{3625    \} \textcolor{keywordflow}{while} (z-\/>\mbox{\hyperlink{structstbi____zbuf_a6503c687ce43f8541a6442e93930f990}{num\_bits}} <= 24);}
\DoxyCodeLine{3626 \}}
\DoxyCodeLine{3627 }
\DoxyCodeLine{3628 \mbox{\hyperlink{stb__image_8h_a952111e72ed4262552e413e5938089b8}{stbi\_inline}} \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stbi\_\_zreceive(\mbox{\hyperlink{structstbi____zbuf}{stbi\_\_zbuf}} *z, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{3629 \{}
\DoxyCodeLine{3630    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} k;}
\DoxyCodeLine{3631    \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____zbuf_a6503c687ce43f8541a6442e93930f990}{num\_bits}} < n) stbi\_\_fill\_bits(z);}
\DoxyCodeLine{3632    k = z-\/>\mbox{\hyperlink{structstbi____zbuf_ab8c6c09ee5217d9288ad729e1799ed7b}{code\_buffer}} \& ((1 << n) -\/ 1);}
\DoxyCodeLine{3633    z-\/>\mbox{\hyperlink{structstbi____zbuf_ab8c6c09ee5217d9288ad729e1799ed7b}{code\_buffer}} >>= n;}
\DoxyCodeLine{3634    z-\/>\mbox{\hyperlink{structstbi____zbuf_a6503c687ce43f8541a6442e93930f990}{num\_bits}} -\/= n;}
\DoxyCodeLine{3635    \textcolor{keywordflow}{return} k;}
\DoxyCodeLine{3636 \}}
\DoxyCodeLine{3637 }
\DoxyCodeLine{3638 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_zhuffman\_decode\_slowpath(\mbox{\hyperlink{structstbi____zbuf}{stbi\_\_zbuf}} *a, \mbox{\hyperlink{structstbi____zhuffman}{stbi\_\_zhuffman}} *z)}
\DoxyCodeLine{3639 \{}
\DoxyCodeLine{3640    \textcolor{keywordtype}{int} b,s,k;}
\DoxyCodeLine{3641    \textcolor{comment}{// not resolved by fast table, so compute it the slow way}}
\DoxyCodeLine{3642    \textcolor{comment}{// use jpeg approach, which requires MSbits at top}}
\DoxyCodeLine{3643    k = stbi\_\_bit\_reverse(a-\/>\mbox{\hyperlink{structstbi____zbuf_ab8c6c09ee5217d9288ad729e1799ed7b}{code\_buffer}}, 16);}
\DoxyCodeLine{3644    \textcolor{keywordflow}{for} (s=\mbox{\hyperlink{stb__image_8h_aafa264bb0ccc102c06e5c03e9e4c916b}{STBI\_\_ZFAST\_BITS}}+1; ; ++s)}
\DoxyCodeLine{3645       \textcolor{keywordflow}{if} (k < z-\/>maxcode[s])}
\DoxyCodeLine{3646          \textcolor{keywordflow}{break};}
\DoxyCodeLine{3647    \textcolor{keywordflow}{if} (s == 16) \textcolor{keywordflow}{return} -\/1; \textcolor{comment}{// invalid code!}}
\DoxyCodeLine{3648    \textcolor{comment}{// code size is s, so:}}
\DoxyCodeLine{3649    b = (k >> (16-\/s)) -\/ z-\/>\mbox{\hyperlink{structstbi____zhuffman_a355f78c7cc89e9379a3b4e650749ceb7}{firstcode}}[s] + z-\/>\mbox{\hyperlink{structstbi____zhuffman_a5b03392e79ade736644a80029e466558}{firstsymbol}}[s];}
\DoxyCodeLine{3650    \mbox{\hyperlink{stb__image_8h_abcf0d8bc32a73fd449d918aac2ed3882}{STBI\_ASSERT}}(z-\/>\mbox{\hyperlink{structstbi____zhuffman_abda7ed1733d13b65688e6bf15fd49611}{size}}[b] == s);}
\DoxyCodeLine{3651    a-\/>\mbox{\hyperlink{structstbi____zbuf_ab8c6c09ee5217d9288ad729e1799ed7b}{code\_buffer}} >>= s;}
\DoxyCodeLine{3652    a-\/>\mbox{\hyperlink{structstbi____zbuf_a6503c687ce43f8541a6442e93930f990}{num\_bits}} -\/= s;}
\DoxyCodeLine{3653    \textcolor{keywordflow}{return} z-\/>\mbox{\hyperlink{structstbi____zhuffman_adac13ed73817204314fb544e64b6dfef}{value}}[b];}
\DoxyCodeLine{3654 \}}
\DoxyCodeLine{3655 }
\DoxyCodeLine{3656 \mbox{\hyperlink{stb__image_8h_a952111e72ed4262552e413e5938089b8}{stbi\_inline}} \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_zhuffman\_decode(\mbox{\hyperlink{structstbi____zbuf}{stbi\_\_zbuf}} *a, \mbox{\hyperlink{structstbi____zhuffman}{stbi\_\_zhuffman}} *z)}
\DoxyCodeLine{3657 \{}
\DoxyCodeLine{3658    \textcolor{keywordtype}{int} b,s;}
\DoxyCodeLine{3659    \textcolor{keywordflow}{if} (a-\/>\mbox{\hyperlink{structstbi____zbuf_a6503c687ce43f8541a6442e93930f990}{num\_bits}} < 16) stbi\_\_fill\_bits(a);}
\DoxyCodeLine{3660    b = z-\/>\mbox{\hyperlink{structstbi____zhuffman_add40d8660a59cff6ac91d5f2a3766f6c}{fast}}[a-\/>\mbox{\hyperlink{structstbi____zbuf_ab8c6c09ee5217d9288ad729e1799ed7b}{code\_buffer}} \& \mbox{\hyperlink{stb__image_8h_a34bd2365922e2da077d1d0c4e6bd90d7}{STBI\_\_ZFAST\_MASK}}];}
\DoxyCodeLine{3661    \textcolor{keywordflow}{if} (b) \{}
\DoxyCodeLine{3662       s = b >> 9;}
\DoxyCodeLine{3663       a-\/>\mbox{\hyperlink{structstbi____zbuf_ab8c6c09ee5217d9288ad729e1799ed7b}{code\_buffer}} >>= s;}
\DoxyCodeLine{3664       a-\/>\mbox{\hyperlink{structstbi____zbuf_a6503c687ce43f8541a6442e93930f990}{num\_bits}} -\/= s;}
\DoxyCodeLine{3665       \textcolor{keywordflow}{return} b \& 511;}
\DoxyCodeLine{3666    \}}
\DoxyCodeLine{3667    \textcolor{keywordflow}{return} stbi\_\_zhuffman\_decode\_slowpath(a, z);}
\DoxyCodeLine{3668 \}}
\DoxyCodeLine{3669 }
\DoxyCodeLine{3670 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_zexpand(\mbox{\hyperlink{structstbi____zbuf}{stbi\_\_zbuf}} *z, \textcolor{keywordtype}{char} *zout, \textcolor{keywordtype}{int} n)  \textcolor{comment}{// need to make room for n bytes}}
\DoxyCodeLine{3671 \{}
\DoxyCodeLine{3672    \textcolor{keywordtype}{char} *q;}
\DoxyCodeLine{3673    \textcolor{keywordtype}{int} cur, limit;}
\DoxyCodeLine{3674    z-\/>\mbox{\hyperlink{structstbi____zbuf_a1ae8a721887399326ca0f80b4274043b}{zout}} = zout;}
\DoxyCodeLine{3675    \textcolor{keywordflow}{if} (!z-\/>\mbox{\hyperlink{structstbi____zbuf_a46f242cf6823431c4ab19b3bbf445782}{z\_expandable}}) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}output buffer limit"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{3676    cur   = (int) (z-\/>\mbox{\hyperlink{structstbi____zbuf_a1ae8a721887399326ca0f80b4274043b}{zout}}     -\/ z-\/>\mbox{\hyperlink{structstbi____zbuf_a860da3b14d4d9f0d0bd125d11f7aa4e8}{zout\_start}});}
\DoxyCodeLine{3677    limit = (int) (z-\/>\mbox{\hyperlink{structstbi____zbuf_aad24226b483ae93d1f3136a6c0a4eb13}{zout\_end}} -\/ z-\/>\mbox{\hyperlink{structstbi____zbuf_a860da3b14d4d9f0d0bd125d11f7aa4e8}{zout\_start}});}
\DoxyCodeLine{3678    \textcolor{keywordflow}{while} (cur + n > limit)}
\DoxyCodeLine{3679       limit *= 2;}
\DoxyCodeLine{3680    q = (\textcolor{keywordtype}{char} *) \mbox{\hyperlink{stb__image_8h_ad4afa0dc735af97514ef752553e3e424}{STBI\_REALLOC}}(z-\/>\mbox{\hyperlink{structstbi____zbuf_a860da3b14d4d9f0d0bd125d11f7aa4e8}{zout\_start}}, limit);}
\DoxyCodeLine{3681    \textcolor{keywordflow}{if} (q == NULL) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{3682    z-\/>\mbox{\hyperlink{structstbi____zbuf_a860da3b14d4d9f0d0bd125d11f7aa4e8}{zout\_start}} = q;}
\DoxyCodeLine{3683    z-\/>\mbox{\hyperlink{structstbi____zbuf_a1ae8a721887399326ca0f80b4274043b}{zout}}       = q + cur;}
\DoxyCodeLine{3684    z-\/>\mbox{\hyperlink{structstbi____zbuf_aad24226b483ae93d1f3136a6c0a4eb13}{zout\_end}}   = q + limit;}
\DoxyCodeLine{3685    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{3686 \}}
\DoxyCodeLine{3687 }
\DoxyCodeLine{3688 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_zlength\_base[31] = \{}
\DoxyCodeLine{3689    3,4,5,6,7,8,9,10,11,13,}
\DoxyCodeLine{3690    15,17,19,23,27,31,35,43,51,59,}
\DoxyCodeLine{3691    67,83,99,115,131,163,195,227,258,0,0 \};}
\DoxyCodeLine{3692 }
\DoxyCodeLine{3693 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_zlength\_extra[31]=}
\DoxyCodeLine{3694 \{ 0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0 \};}
\DoxyCodeLine{3695 }
\DoxyCodeLine{3696 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_zdist\_base[32] = \{ 1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,}
\DoxyCodeLine{3697 257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0\};}
\DoxyCodeLine{3698 }
\DoxyCodeLine{3699 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_zdist\_extra[32] =}
\DoxyCodeLine{3700 \{ 0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13\};}
\DoxyCodeLine{3701 }
\DoxyCodeLine{3702 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_parse\_huffman\_block(\mbox{\hyperlink{structstbi____zbuf}{stbi\_\_zbuf}} *a)}
\DoxyCodeLine{3703 \{}
\DoxyCodeLine{3704    \textcolor{keywordtype}{char} *zout = a-\/>\mbox{\hyperlink{structstbi____zbuf_a1ae8a721887399326ca0f80b4274043b}{zout}};}
\DoxyCodeLine{3705    \textcolor{keywordflow}{for}(;;) \{}
\DoxyCodeLine{3706       \textcolor{keywordtype}{int} z = stbi\_\_zhuffman\_decode(a, \&a-\/>\mbox{\hyperlink{structstbi____zbuf_a5af9d3313c767b9960925449bfe39834}{z\_length}});}
\DoxyCodeLine{3707       \textcolor{keywordflow}{if} (z < 256) \{}
\DoxyCodeLine{3708          \textcolor{keywordflow}{if} (z < 0) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad huffman code"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}}); \textcolor{comment}{// error in huffman codes}}
\DoxyCodeLine{3709          \textcolor{keywordflow}{if} (zout >= a-\/>\mbox{\hyperlink{structstbi____zbuf_aad24226b483ae93d1f3136a6c0a4eb13}{zout\_end}}) \{}
\DoxyCodeLine{3710             \textcolor{keywordflow}{if} (!stbi\_\_zexpand(a, zout, 1)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3711             zout = a-\/>\mbox{\hyperlink{structstbi____zbuf_a1ae8a721887399326ca0f80b4274043b}{zout}};}
\DoxyCodeLine{3712          \}}
\DoxyCodeLine{3713          *zout++ = (char) z;}
\DoxyCodeLine{3714       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3715          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *p;}
\DoxyCodeLine{3716          \textcolor{keywordtype}{int} len,dist;}
\DoxyCodeLine{3717          \textcolor{keywordflow}{if} (z == 256) \{}
\DoxyCodeLine{3718             a-\/>\mbox{\hyperlink{structstbi____zbuf_a1ae8a721887399326ca0f80b4274043b}{zout}} = zout;}
\DoxyCodeLine{3719             \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{3720          \}}
\DoxyCodeLine{3721          z -\/= 257;}
\DoxyCodeLine{3722          len = stbi\_\_zlength\_base[z];}
\DoxyCodeLine{3723          \textcolor{keywordflow}{if} (stbi\_\_zlength\_extra[z]) len += stbi\_\_zreceive(a, stbi\_\_zlength\_extra[z]);}
\DoxyCodeLine{3724          z = stbi\_\_zhuffman\_decode(a, \&a-\/>\mbox{\hyperlink{structstbi____zbuf_aa5a7d91ef6ff408f8696934d25b11dbe}{z\_distance}});}
\DoxyCodeLine{3725          \textcolor{keywordflow}{if} (z < 0) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad huffman code"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{3726          dist = stbi\_\_zdist\_base[z];}
\DoxyCodeLine{3727          \textcolor{keywordflow}{if} (stbi\_\_zdist\_extra[z]) dist += stbi\_\_zreceive(a, stbi\_\_zdist\_extra[z]);}
\DoxyCodeLine{3728          \textcolor{keywordflow}{if} (zout -\/ a-\/>\mbox{\hyperlink{structstbi____zbuf_a860da3b14d4d9f0d0bd125d11f7aa4e8}{zout\_start}} < dist) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad dist"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{3729          \textcolor{keywordflow}{if} (zout + len > a-\/>\mbox{\hyperlink{structstbi____zbuf_aad24226b483ae93d1f3136a6c0a4eb13}{zout\_end}}) \{}
\DoxyCodeLine{3730             \textcolor{keywordflow}{if} (!stbi\_\_zexpand(a, zout, len)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3731             zout = a-\/>\mbox{\hyperlink{structstbi____zbuf_a1ae8a721887399326ca0f80b4274043b}{zout}};}
\DoxyCodeLine{3732          \}}
\DoxyCodeLine{3733          p = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) (zout -\/ dist);}
\DoxyCodeLine{3734          \textcolor{keywordflow}{if} (dist == 1) \{ \textcolor{comment}{// run of one byte; common in images.}}
\DoxyCodeLine{3735             \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} v = *p;}
\DoxyCodeLine{3736             \textcolor{keywordflow}{if} (len) \{ \textcolor{keywordflow}{do} *zout++ = v; \textcolor{keywordflow}{while} (-\/-\/len); \}}
\DoxyCodeLine{3737          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3738             \textcolor{keywordflow}{if} (len) \{ \textcolor{keywordflow}{do} *zout++ = *p++; \textcolor{keywordflow}{while} (-\/-\/len); \}}
\DoxyCodeLine{3739          \}}
\DoxyCodeLine{3740       \}}
\DoxyCodeLine{3741    \}}
\DoxyCodeLine{3742 \}}
\DoxyCodeLine{3743 }
\DoxyCodeLine{3744 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_compute\_huffman\_codes(\mbox{\hyperlink{structstbi____zbuf}{stbi\_\_zbuf}} *a)}
\DoxyCodeLine{3745 \{}
\DoxyCodeLine{3746    \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} length\_dezigzag[19] = \{ 16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15 \};}
\DoxyCodeLine{3747    \mbox{\hyperlink{structstbi____zhuffman}{stbi\_\_zhuffman}} z\_codelength;}
\DoxyCodeLine{3748    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} lencodes[286+32+137];\textcolor{comment}{//padding for maximum single op}}
\DoxyCodeLine{3749    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} codelength\_sizes[19];}
\DoxyCodeLine{3750    \textcolor{keywordtype}{int} i,n;}
\DoxyCodeLine{3751 }
\DoxyCodeLine{3752    \textcolor{keywordtype}{int} hlit  = stbi\_\_zreceive(a,5) + 257;}
\DoxyCodeLine{3753    \textcolor{keywordtype}{int} hdist = stbi\_\_zreceive(a,5) + 1;}
\DoxyCodeLine{3754    \textcolor{keywordtype}{int} hclen = stbi\_\_zreceive(a,4) + 4;}
\DoxyCodeLine{3755 }
\DoxyCodeLine{3756    memset(codelength\_sizes, 0, \textcolor{keyword}{sizeof}(codelength\_sizes));}
\DoxyCodeLine{3757    \textcolor{keywordflow}{for} (i=0; i < hclen; ++i) \{}
\DoxyCodeLine{3758       \textcolor{keywordtype}{int} s = stbi\_\_zreceive(a,3);}
\DoxyCodeLine{3759       codelength\_sizes[length\_dezigzag[i]] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) s;}
\DoxyCodeLine{3760    \}}
\DoxyCodeLine{3761    \textcolor{keywordflow}{if} (!stbi\_\_zbuild\_huffman(\&z\_codelength, codelength\_sizes, 19)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3762 }
\DoxyCodeLine{3763    n = 0;}
\DoxyCodeLine{3764    \textcolor{keywordflow}{while} (n < hlit + hdist) \{}
\DoxyCodeLine{3765       \textcolor{keywordtype}{int} c = stbi\_\_zhuffman\_decode(a, \&z\_codelength);}
\DoxyCodeLine{3766       \textcolor{keywordflow}{if} (c < 0 || c >= 19) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad codelengths"{}}, \textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{3767       \textcolor{keywordflow}{if} (c < 16)}
\DoxyCodeLine{3768          lencodes[n++] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) c;}
\DoxyCodeLine{3769       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (c == 16) \{}
\DoxyCodeLine{3770          c = stbi\_\_zreceive(a,2)+3;}
\DoxyCodeLine{3771          memset(lencodes+n, lencodes[n-\/1], c);}
\DoxyCodeLine{3772          n += c;}
\DoxyCodeLine{3773       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (c == 17) \{}
\DoxyCodeLine{3774          c = stbi\_\_zreceive(a,3)+3;}
\DoxyCodeLine{3775          memset(lencodes+n, 0, c);}
\DoxyCodeLine{3776          n += c;}
\DoxyCodeLine{3777       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3778          \mbox{\hyperlink{stb__image_8h_abcf0d8bc32a73fd449d918aac2ed3882}{STBI\_ASSERT}}(c == 18);}
\DoxyCodeLine{3779          c = stbi\_\_zreceive(a,7)+11;}
\DoxyCodeLine{3780          memset(lencodes+n, 0, c);}
\DoxyCodeLine{3781          n += c;}
\DoxyCodeLine{3782       \}}
\DoxyCodeLine{3783    \}}
\DoxyCodeLine{3784    \textcolor{keywordflow}{if} (n != hlit+hdist) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad codelengths"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{3785    \textcolor{keywordflow}{if} (!stbi\_\_zbuild\_huffman(\&a-\/>\mbox{\hyperlink{structstbi____zbuf_a5af9d3313c767b9960925449bfe39834}{z\_length}}, lencodes, hlit)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3786    \textcolor{keywordflow}{if} (!stbi\_\_zbuild\_huffman(\&a-\/>\mbox{\hyperlink{structstbi____zbuf_aa5a7d91ef6ff408f8696934d25b11dbe}{z\_distance}}, lencodes+hlit, hdist)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3787    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{3788 \}}
\DoxyCodeLine{3789 }
\DoxyCodeLine{3790 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_parse\_uncomperssed\_block(\mbox{\hyperlink{structstbi____zbuf}{stbi\_\_zbuf}} *a)}
\DoxyCodeLine{3791 \{}
\DoxyCodeLine{3792    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} header[4];}
\DoxyCodeLine{3793    \textcolor{keywordtype}{int} len,nlen,k;}
\DoxyCodeLine{3794    \textcolor{keywordflow}{if} (a-\/>\mbox{\hyperlink{structstbi____zbuf_a6503c687ce43f8541a6442e93930f990}{num\_bits}} \& 7)}
\DoxyCodeLine{3795       stbi\_\_zreceive(a, a-\/>\mbox{\hyperlink{structstbi____zbuf_a6503c687ce43f8541a6442e93930f990}{num\_bits}} \& 7); \textcolor{comment}{// discard}}
\DoxyCodeLine{3796    \textcolor{comment}{// drain the bit-\/packed data into header}}
\DoxyCodeLine{3797    k = 0;}
\DoxyCodeLine{3798    \textcolor{keywordflow}{while} (a-\/>\mbox{\hyperlink{structstbi____zbuf_a6503c687ce43f8541a6442e93930f990}{num\_bits}} > 0) \{}
\DoxyCodeLine{3799       header[k++] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) (a-\/>\mbox{\hyperlink{structstbi____zbuf_ab8c6c09ee5217d9288ad729e1799ed7b}{code\_buffer}} \& 255); \textcolor{comment}{// suppress MSVC run-\/time check}}
\DoxyCodeLine{3800       a-\/>\mbox{\hyperlink{structstbi____zbuf_ab8c6c09ee5217d9288ad729e1799ed7b}{code\_buffer}} >>= 8;}
\DoxyCodeLine{3801       a-\/>\mbox{\hyperlink{structstbi____zbuf_a6503c687ce43f8541a6442e93930f990}{num\_bits}} -\/= 8;}
\DoxyCodeLine{3802    \}}
\DoxyCodeLine{3803    \mbox{\hyperlink{stb__image_8h_abcf0d8bc32a73fd449d918aac2ed3882}{STBI\_ASSERT}}(a-\/>\mbox{\hyperlink{structstbi____zbuf_a6503c687ce43f8541a6442e93930f990}{num\_bits}} == 0);}
\DoxyCodeLine{3804    \textcolor{comment}{// now fill header the normal way}}
\DoxyCodeLine{3805    \textcolor{keywordflow}{while} (k < 4)}
\DoxyCodeLine{3806       header[k++] = stbi\_\_zget8(a);}
\DoxyCodeLine{3807    len  = header[1] * 256 + header[0];}
\DoxyCodeLine{3808    nlen = header[3] * 256 + header[2];}
\DoxyCodeLine{3809    \textcolor{keywordflow}{if} (nlen != (len \string^ 0xffff)) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}zlib corrupt"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{3810    \textcolor{keywordflow}{if} (a-\/>\mbox{\hyperlink{structstbi____zbuf_ae50cbbbc0e223b2a7e0b9fe8f6df1af2}{zbuffer}} + len > a-\/>\mbox{\hyperlink{structstbi____zbuf_a17266a4467c8eb479c0a78b9cf9a7589}{zbuffer\_end}}) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}read past buffer"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{3811    \textcolor{keywordflow}{if} (a-\/>\mbox{\hyperlink{structstbi____zbuf_a1ae8a721887399326ca0f80b4274043b}{zout}} + len > a-\/>\mbox{\hyperlink{structstbi____zbuf_aad24226b483ae93d1f3136a6c0a4eb13}{zout\_end}})}
\DoxyCodeLine{3812       \textcolor{keywordflow}{if} (!stbi\_\_zexpand(a, a-\/>\mbox{\hyperlink{structstbi____zbuf_a1ae8a721887399326ca0f80b4274043b}{zout}}, len)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3813    memcpy(a-\/>\mbox{\hyperlink{structstbi____zbuf_a1ae8a721887399326ca0f80b4274043b}{zout}}, a-\/>\mbox{\hyperlink{structstbi____zbuf_ae50cbbbc0e223b2a7e0b9fe8f6df1af2}{zbuffer}}, len);}
\DoxyCodeLine{3814    a-\/>\mbox{\hyperlink{structstbi____zbuf_ae50cbbbc0e223b2a7e0b9fe8f6df1af2}{zbuffer}} += len;}
\DoxyCodeLine{3815    a-\/>\mbox{\hyperlink{structstbi____zbuf_a1ae8a721887399326ca0f80b4274043b}{zout}} += len;}
\DoxyCodeLine{3816    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{3817 \}}
\DoxyCodeLine{3818 }
\DoxyCodeLine{3819 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_parse\_zlib\_header(\mbox{\hyperlink{structstbi____zbuf}{stbi\_\_zbuf}} *a)}
\DoxyCodeLine{3820 \{}
\DoxyCodeLine{3821    \textcolor{keywordtype}{int} cmf   = stbi\_\_zget8(a);}
\DoxyCodeLine{3822    \textcolor{keywordtype}{int} cm    = cmf \& 15;}
\DoxyCodeLine{3823    \textcolor{comment}{/* int cinfo = cmf >> 4; */}}
\DoxyCodeLine{3824    \textcolor{keywordtype}{int} flg   = stbi\_\_zget8(a);}
\DoxyCodeLine{3825    \textcolor{keywordflow}{if} ((cmf*256+flg) \% 31 != 0) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad zlib header"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}}); \textcolor{comment}{// zlib spec}}
\DoxyCodeLine{3826    \textcolor{keywordflow}{if} (flg \& 32) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}no preset dict"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}}); \textcolor{comment}{// preset dictionary not allowed in png}}
\DoxyCodeLine{3827    \textcolor{keywordflow}{if} (cm != 8) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad compression"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}}); \textcolor{comment}{// DEFLATE required for png}}
\DoxyCodeLine{3828    \textcolor{comment}{// window = 1 << (8 + cinfo)... but who cares, we fully buffer output}}
\DoxyCodeLine{3829    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{3830 \}}
\DoxyCodeLine{3831 }
\DoxyCodeLine{3832 \textcolor{comment}{// @TODO: should statically initialize these for optimal thread safety}}
\DoxyCodeLine{3833 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} stbi\_\_zdefault\_length[288], stbi\_\_zdefault\_distance[32];}
\DoxyCodeLine{3834 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_init\_zdefaults(\textcolor{keywordtype}{void})}
\DoxyCodeLine{3835 \{}
\DoxyCodeLine{3836    \textcolor{keywordtype}{int} i;   \textcolor{comment}{// use <= to match clearly with spec}}
\DoxyCodeLine{3837    \textcolor{keywordflow}{for} (i=0; i <= 143; ++i)     stbi\_\_zdefault\_length[i]   = 8;}
\DoxyCodeLine{3838    \textcolor{keywordflow}{for} (   ; i <= 255; ++i)     stbi\_\_zdefault\_length[i]   = 9;}
\DoxyCodeLine{3839    \textcolor{keywordflow}{for} (   ; i <= 279; ++i)     stbi\_\_zdefault\_length[i]   = 7;}
\DoxyCodeLine{3840    \textcolor{keywordflow}{for} (   ; i <= 287; ++i)     stbi\_\_zdefault\_length[i]   = 8;}
\DoxyCodeLine{3841 }
\DoxyCodeLine{3842    \textcolor{keywordflow}{for} (i=0; i <=  31; ++i)     stbi\_\_zdefault\_distance[i] = 5;}
\DoxyCodeLine{3843 \}}
\DoxyCodeLine{3844 }
\DoxyCodeLine{3845 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_parse\_zlib(\mbox{\hyperlink{structstbi____zbuf}{stbi\_\_zbuf}} *a, \textcolor{keywordtype}{int} parse\_header)}
\DoxyCodeLine{3846 \{}
\DoxyCodeLine{3847    \textcolor{keywordtype}{int} \textcolor{keyword}{final}, type;}
\DoxyCodeLine{3848    \textcolor{keywordflow}{if} (parse\_header)}
\DoxyCodeLine{3849       \textcolor{keywordflow}{if} (!stbi\_\_parse\_zlib\_header(a)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3850    a-\/>\mbox{\hyperlink{structstbi____zbuf_a6503c687ce43f8541a6442e93930f990}{num\_bits}} = 0;}
\DoxyCodeLine{3851    a-\/>\mbox{\hyperlink{structstbi____zbuf_ab8c6c09ee5217d9288ad729e1799ed7b}{code\_buffer}} = 0;}
\DoxyCodeLine{3852    \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{3853       \textcolor{keyword}{final} = stbi\_\_zreceive(a,1);}
\DoxyCodeLine{3854       type = stbi\_\_zreceive(a,2);}
\DoxyCodeLine{3855       \textcolor{keywordflow}{if} (type == 0) \{}
\DoxyCodeLine{3856          \textcolor{keywordflow}{if} (!stbi\_\_parse\_uncomperssed\_block(a)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3857       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (type == 3) \{}
\DoxyCodeLine{3858          \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3859       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3860          \textcolor{keywordflow}{if} (type == 1) \{}
\DoxyCodeLine{3861             \textcolor{comment}{// use fixed code lengths}}
\DoxyCodeLine{3862             \textcolor{keywordflow}{if} (!stbi\_\_zdefault\_distance[31]) stbi\_\_init\_zdefaults();}
\DoxyCodeLine{3863             \textcolor{keywordflow}{if} (!stbi\_\_zbuild\_huffman(\&a-\/>\mbox{\hyperlink{structstbi____zbuf_a5af9d3313c767b9960925449bfe39834}{z\_length}}  , stbi\_\_zdefault\_length  , 288)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3864             \textcolor{keywordflow}{if} (!stbi\_\_zbuild\_huffman(\&a-\/>\mbox{\hyperlink{structstbi____zbuf_aa5a7d91ef6ff408f8696934d25b11dbe}{z\_distance}}, stbi\_\_zdefault\_distance,  32)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3865          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3866             \textcolor{keywordflow}{if} (!stbi\_\_compute\_huffman\_codes(a)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3867          \}}
\DoxyCodeLine{3868          \textcolor{keywordflow}{if} (!stbi\_\_parse\_huffman\_block(a)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3869       \}}
\DoxyCodeLine{3870    \} \textcolor{keywordflow}{while} (!\textcolor{keyword}{final});}
\DoxyCodeLine{3871    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{3872 \}}
\DoxyCodeLine{3873 }
\DoxyCodeLine{3874 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_do\_zlib(\mbox{\hyperlink{structstbi____zbuf}{stbi\_\_zbuf}} *a, \textcolor{keywordtype}{char} *obuf, \textcolor{keywordtype}{int} olen, \textcolor{keywordtype}{int} exp, \textcolor{keywordtype}{int} parse\_header)}
\DoxyCodeLine{3875 \{}
\DoxyCodeLine{3876    a-\/>\mbox{\hyperlink{structstbi____zbuf_a860da3b14d4d9f0d0bd125d11f7aa4e8}{zout\_start}} = obuf;}
\DoxyCodeLine{3877    a-\/>\mbox{\hyperlink{structstbi____zbuf_a1ae8a721887399326ca0f80b4274043b}{zout}}       = obuf;}
\DoxyCodeLine{3878    a-\/>\mbox{\hyperlink{structstbi____zbuf_aad24226b483ae93d1f3136a6c0a4eb13}{zout\_end}}   = obuf + olen;}
\DoxyCodeLine{3879    a-\/>\mbox{\hyperlink{structstbi____zbuf_a46f242cf6823431c4ab19b3bbf445782}{z\_expandable}} = exp;}
\DoxyCodeLine{3880 }
\DoxyCodeLine{3881    \textcolor{keywordflow}{return} stbi\_\_parse\_zlib(a, parse\_header);}
\DoxyCodeLine{3882 \}}
\DoxyCodeLine{3883 }
\DoxyCodeLine{3884 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{char} *\mbox{\hyperlink{stb__image_8h_acba137e5310f3c0fe9bb198e4bee3dce}{stbi\_zlib\_decode\_malloc\_guesssize}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *buffer, \textcolor{keywordtype}{int} len, \textcolor{keywordtype}{int} initial\_size, \textcolor{keywordtype}{int} *outlen)}
\DoxyCodeLine{3885 \{}
\DoxyCodeLine{3886    \mbox{\hyperlink{structstbi____zbuf}{stbi\_\_zbuf}} a;}
\DoxyCodeLine{3887    \textcolor{keywordtype}{char} *p = (\textcolor{keywordtype}{char} *) stbi\_\_malloc(initial\_size);}
\DoxyCodeLine{3888    \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{3889    a.\mbox{\hyperlink{structstbi____zbuf_ae50cbbbc0e223b2a7e0b9fe8f6df1af2}{zbuffer}} = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) buffer;}
\DoxyCodeLine{3890    a.\mbox{\hyperlink{structstbi____zbuf_a17266a4467c8eb479c0a78b9cf9a7589}{zbuffer\_end}} = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) buffer + len;}
\DoxyCodeLine{3891    \textcolor{keywordflow}{if} (stbi\_\_do\_zlib(\&a, p, initial\_size, 1, 1)) \{}
\DoxyCodeLine{3892       \textcolor{keywordflow}{if} (outlen) *outlen = (int) (a.\mbox{\hyperlink{structstbi____zbuf_a1ae8a721887399326ca0f80b4274043b}{zout}} -\/ a.\mbox{\hyperlink{structstbi____zbuf_a860da3b14d4d9f0d0bd125d11f7aa4e8}{zout\_start}});}
\DoxyCodeLine{3893       \textcolor{keywordflow}{return} a.\mbox{\hyperlink{structstbi____zbuf_a860da3b14d4d9f0d0bd125d11f7aa4e8}{zout\_start}};}
\DoxyCodeLine{3894    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3895       \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(a.\mbox{\hyperlink{structstbi____zbuf_a860da3b14d4d9f0d0bd125d11f7aa4e8}{zout\_start}});}
\DoxyCodeLine{3896       \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{3897    \}}
\DoxyCodeLine{3898 \}}
\DoxyCodeLine{3899 }
\DoxyCodeLine{3900 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{char} *\mbox{\hyperlink{stb__image_8h_afec644d4e1a3cd858dfe0f9c55a1e55c}{stbi\_zlib\_decode\_malloc}}(\textcolor{keywordtype}{char} \textcolor{keyword}{const} *buffer, \textcolor{keywordtype}{int} len, \textcolor{keywordtype}{int} *outlen)}
\DoxyCodeLine{3901 \{}
\DoxyCodeLine{3902    \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_acba137e5310f3c0fe9bb198e4bee3dce}{stbi\_zlib\_decode\_malloc\_guesssize}}(buffer, len, 16384, outlen);}
\DoxyCodeLine{3903 \}}
\DoxyCodeLine{3904 }
\DoxyCodeLine{3905 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{char} *\mbox{\hyperlink{stb__image_8h_adc3de199aa29f7370a699ad545155541}{stbi\_zlib\_decode\_malloc\_guesssize\_headerflag}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *buffer, \textcolor{keywordtype}{int} len, \textcolor{keywordtype}{int} initial\_size, \textcolor{keywordtype}{int} *outlen, \textcolor{keywordtype}{int} parse\_header)}
\DoxyCodeLine{3906 \{}
\DoxyCodeLine{3907    \mbox{\hyperlink{structstbi____zbuf}{stbi\_\_zbuf}} a;}
\DoxyCodeLine{3908    \textcolor{keywordtype}{char} *p = (\textcolor{keywordtype}{char} *) stbi\_\_malloc(initial\_size);}
\DoxyCodeLine{3909    \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{3910    a.\mbox{\hyperlink{structstbi____zbuf_ae50cbbbc0e223b2a7e0b9fe8f6df1af2}{zbuffer}} = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) buffer;}
\DoxyCodeLine{3911    a.\mbox{\hyperlink{structstbi____zbuf_a17266a4467c8eb479c0a78b9cf9a7589}{zbuffer\_end}} = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) buffer + len;}
\DoxyCodeLine{3912    \textcolor{keywordflow}{if} (stbi\_\_do\_zlib(\&a, p, initial\_size, 1, parse\_header)) \{}
\DoxyCodeLine{3913       \textcolor{keywordflow}{if} (outlen) *outlen = (int) (a.\mbox{\hyperlink{structstbi____zbuf_a1ae8a721887399326ca0f80b4274043b}{zout}} -\/ a.\mbox{\hyperlink{structstbi____zbuf_a860da3b14d4d9f0d0bd125d11f7aa4e8}{zout\_start}});}
\DoxyCodeLine{3914       \textcolor{keywordflow}{return} a.\mbox{\hyperlink{structstbi____zbuf_a860da3b14d4d9f0d0bd125d11f7aa4e8}{zout\_start}};}
\DoxyCodeLine{3915    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3916       \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(a.\mbox{\hyperlink{structstbi____zbuf_a860da3b14d4d9f0d0bd125d11f7aa4e8}{zout\_start}});}
\DoxyCodeLine{3917       \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{3918    \}}
\DoxyCodeLine{3919 \}}
\DoxyCodeLine{3920 }
\DoxyCodeLine{3921 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int} \mbox{\hyperlink{stb__image_8h_ae8447830c49bc17f8491e12c1f0ded48}{stbi\_zlib\_decode\_buffer}}(\textcolor{keywordtype}{char} *obuffer, \textcolor{keywordtype}{int} olen, \textcolor{keywordtype}{char} \textcolor{keyword}{const} *ibuffer, \textcolor{keywordtype}{int} ilen)}
\DoxyCodeLine{3922 \{}
\DoxyCodeLine{3923    \mbox{\hyperlink{structstbi____zbuf}{stbi\_\_zbuf}} a;}
\DoxyCodeLine{3924    a.\mbox{\hyperlink{structstbi____zbuf_ae50cbbbc0e223b2a7e0b9fe8f6df1af2}{zbuffer}} = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) ibuffer;}
\DoxyCodeLine{3925    a.\mbox{\hyperlink{structstbi____zbuf_a17266a4467c8eb479c0a78b9cf9a7589}{zbuffer\_end}} = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) ibuffer + ilen;}
\DoxyCodeLine{3926    \textcolor{keywordflow}{if} (stbi\_\_do\_zlib(\&a, obuffer, olen, 0, 1))}
\DoxyCodeLine{3927       \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int}) (a.\mbox{\hyperlink{structstbi____zbuf_a1ae8a721887399326ca0f80b4274043b}{zout}} -\/ a.\mbox{\hyperlink{structstbi____zbuf_a860da3b14d4d9f0d0bd125d11f7aa4e8}{zout\_start}});}
\DoxyCodeLine{3928    \textcolor{keywordflow}{else}}
\DoxyCodeLine{3929       \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{3930 \}}
\DoxyCodeLine{3931 }
\DoxyCodeLine{3932 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{char} *\mbox{\hyperlink{stb__image_8h_ad6b5cd73a89037832ee2b2872a17bd1b}{stbi\_zlib\_decode\_noheader\_malloc}}(\textcolor{keywordtype}{char} \textcolor{keyword}{const} *buffer, \textcolor{keywordtype}{int} len, \textcolor{keywordtype}{int} *outlen)}
\DoxyCodeLine{3933 \{}
\DoxyCodeLine{3934    \mbox{\hyperlink{structstbi____zbuf}{stbi\_\_zbuf}} a;}
\DoxyCodeLine{3935    \textcolor{keywordtype}{char} *p = (\textcolor{keywordtype}{char} *) stbi\_\_malloc(16384);}
\DoxyCodeLine{3936    \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{3937    a.\mbox{\hyperlink{structstbi____zbuf_ae50cbbbc0e223b2a7e0b9fe8f6df1af2}{zbuffer}} = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) buffer;}
\DoxyCodeLine{3938    a.\mbox{\hyperlink{structstbi____zbuf_a17266a4467c8eb479c0a78b9cf9a7589}{zbuffer\_end}} = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) buffer+len;}
\DoxyCodeLine{3939    \textcolor{keywordflow}{if} (stbi\_\_do\_zlib(\&a, p, 16384, 1, 0)) \{}
\DoxyCodeLine{3940       \textcolor{keywordflow}{if} (outlen) *outlen = (int) (a.\mbox{\hyperlink{structstbi____zbuf_a1ae8a721887399326ca0f80b4274043b}{zout}} -\/ a.\mbox{\hyperlink{structstbi____zbuf_a860da3b14d4d9f0d0bd125d11f7aa4e8}{zout\_start}});}
\DoxyCodeLine{3941       \textcolor{keywordflow}{return} a.\mbox{\hyperlink{structstbi____zbuf_a860da3b14d4d9f0d0bd125d11f7aa4e8}{zout\_start}};}
\DoxyCodeLine{3942    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3943       \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(a.\mbox{\hyperlink{structstbi____zbuf_a860da3b14d4d9f0d0bd125d11f7aa4e8}{zout\_start}});}
\DoxyCodeLine{3944       \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{3945    \}}
\DoxyCodeLine{3946 \}}
\DoxyCodeLine{3947 }
\DoxyCodeLine{3948 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int} \mbox{\hyperlink{stb__image_8h_a0d12efc011adfff7521f3b924feb0b0e}{stbi\_zlib\_decode\_noheader\_buffer}}(\textcolor{keywordtype}{char} *obuffer, \textcolor{keywordtype}{int} olen, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *ibuffer, \textcolor{keywordtype}{int} ilen)}
\DoxyCodeLine{3949 \{}
\DoxyCodeLine{3950    \mbox{\hyperlink{structstbi____zbuf}{stbi\_\_zbuf}} a;}
\DoxyCodeLine{3951    a.\mbox{\hyperlink{structstbi____zbuf_ae50cbbbc0e223b2a7e0b9fe8f6df1af2}{zbuffer}} = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) ibuffer;}
\DoxyCodeLine{3952    a.\mbox{\hyperlink{structstbi____zbuf_a17266a4467c8eb479c0a78b9cf9a7589}{zbuffer\_end}} = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) ibuffer + ilen;}
\DoxyCodeLine{3953    \textcolor{keywordflow}{if} (stbi\_\_do\_zlib(\&a, obuffer, olen, 0, 0))}
\DoxyCodeLine{3954       \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int}) (a.\mbox{\hyperlink{structstbi____zbuf_a1ae8a721887399326ca0f80b4274043b}{zout}} -\/ a.\mbox{\hyperlink{structstbi____zbuf_a860da3b14d4d9f0d0bd125d11f7aa4e8}{zout\_start}});}
\DoxyCodeLine{3955    \textcolor{keywordflow}{else}}
\DoxyCodeLine{3956       \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{3957 \}}
\DoxyCodeLine{3958 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3959 }
\DoxyCodeLine{3960 \textcolor{comment}{// public domain "{}baseline"{} PNG decoder   v0.10  Sean Barrett 2006-\/11-\/18}}
\DoxyCodeLine{3961 \textcolor{comment}{//    simple implementation}}
\DoxyCodeLine{3962 \textcolor{comment}{//      -\/ only 8-\/bit samples}}
\DoxyCodeLine{3963 \textcolor{comment}{//      -\/ no CRC checking}}
\DoxyCodeLine{3964 \textcolor{comment}{//      -\/ allocates lots of intermediate memory}}
\DoxyCodeLine{3965 \textcolor{comment}{//        -\/ avoids problem of streaming data between subsystems}}
\DoxyCodeLine{3966 \textcolor{comment}{//        -\/ avoids explicit window management}}
\DoxyCodeLine{3967 \textcolor{comment}{//    performance}}
\DoxyCodeLine{3968 \textcolor{comment}{//      -\/ uses stb\_zlib, a PD zlib implementation with fast huffman decoding}}
\DoxyCodeLine{3969 }
\DoxyCodeLine{3970 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PNG}}
\DoxyCodeLine{3971 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{3972 \{}
\DoxyCodeLine{3973    \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}} \mbox{\hyperlink{structstbi____pngchunk_a81f65deb74d9108a6ac6ff4a4d87b2e3}{length}};}
\DoxyCodeLine{3974    \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}} \mbox{\hyperlink{structstbi____pngchunk_a92b7b7a50f90f9e9fb1a97effe1689a6}{type}};}
\DoxyCodeLine{3975 \} \mbox{\hyperlink{structstbi____pngchunk}{stbi\_\_pngchunk}};}
\DoxyCodeLine{3976 }
\DoxyCodeLine{3977 \textcolor{keyword}{static} \mbox{\hyperlink{structstbi____pngchunk}{stbi\_\_pngchunk}} stbi\_\_get\_chunk\_header(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s)}
\DoxyCodeLine{3978 \{}
\DoxyCodeLine{3979    \mbox{\hyperlink{structstbi____pngchunk}{stbi\_\_pngchunk}} c;}
\DoxyCodeLine{3980    c.\mbox{\hyperlink{structstbi____pngchunk_a81f65deb74d9108a6ac6ff4a4d87b2e3}{length}} = stbi\_\_get32be(s);}
\DoxyCodeLine{3981    c.\mbox{\hyperlink{structstbi____pngchunk_a92b7b7a50f90f9e9fb1a97effe1689a6}{type}}   = stbi\_\_get32be(s);}
\DoxyCodeLine{3982    \textcolor{keywordflow}{return} c;}
\DoxyCodeLine{3983 \}}
\DoxyCodeLine{3984 }
\DoxyCodeLine{3985 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_check\_png\_header(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s)}
\DoxyCodeLine{3986 \{}
\DoxyCodeLine{3987    \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} png\_sig[8] = \{ 137,80,78,71,13,10,26,10 \};}
\DoxyCodeLine{3988    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{3989    \textcolor{keywordflow}{for} (i=0; i < 8; ++i)}
\DoxyCodeLine{3990       \textcolor{keywordflow}{if} (stbi\_\_get8(s) != png\_sig[i]) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad png sig"{}},\textcolor{stringliteral}{"{}Not a PNG"{}});}
\DoxyCodeLine{3991    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{3992 \}}
\DoxyCodeLine{3993 }
\DoxyCodeLine{3994 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{3995 \{}
\DoxyCodeLine{3996    \mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}};}
\DoxyCodeLine{3997    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *idata, *\mbox{\hyperlink{structstbi____png_a0ab3f5f6b62556a166602d6cf431eb5c}{expanded}}, *out;}
\DoxyCodeLine{3998 \} \mbox{\hyperlink{structstbi____png}{stbi\_\_png}};}
\DoxyCodeLine{3999 }
\DoxyCodeLine{4000 }
\DoxyCodeLine{4001 \textcolor{keyword}{enum} \{}
\DoxyCodeLine{4002    \mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388afacd24ff355ff27d279bce1af3c09f7b}{STBI\_\_F\_none}}=0,}
\DoxyCodeLine{4003    \mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388adaa4cbe29b06d2660ea4eb14b99110c7}{STBI\_\_F\_sub}}=1,}
\DoxyCodeLine{4004    \mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388ab54e8709324b2eb13fe29915dc43b3cb}{STBI\_\_F\_up}}=2,}
\DoxyCodeLine{4005    \mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388a70fc277b0d569f81271b1c6dc82a3998}{STBI\_\_F\_avg}}=3,}
\DoxyCodeLine{4006    \mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388a0b031f97c2db0d26b9d69e3e332cb4a5}{STBI\_\_F\_paeth}}=4,}
\DoxyCodeLine{4007    \textcolor{comment}{// synthetic filters used for first scanline to avoid needing a dummy row of 0s}}
\DoxyCodeLine{4008    \mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388a6514c9f5042fffba272410e03751fc8b}{STBI\_\_F\_avg\_first}},}
\DoxyCodeLine{4009    \mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388a740807731406ef4889807472937466c1}{STBI\_\_F\_paeth\_first}}}
\DoxyCodeLine{4010 \};}
\DoxyCodeLine{4011 }
\DoxyCodeLine{4012 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} first\_row\_filter[5] =}
\DoxyCodeLine{4013 \{}
\DoxyCodeLine{4014    \mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388afacd24ff355ff27d279bce1af3c09f7b}{STBI\_\_F\_none}},}
\DoxyCodeLine{4015    \mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388adaa4cbe29b06d2660ea4eb14b99110c7}{STBI\_\_F\_sub}},}
\DoxyCodeLine{4016    \mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388afacd24ff355ff27d279bce1af3c09f7b}{STBI\_\_F\_none}},}
\DoxyCodeLine{4017    \mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388a6514c9f5042fffba272410e03751fc8b}{STBI\_\_F\_avg\_first}},}
\DoxyCodeLine{4018    \mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388a740807731406ef4889807472937466c1}{STBI\_\_F\_paeth\_first}}}
\DoxyCodeLine{4019 \};}
\DoxyCodeLine{4020 }
\DoxyCodeLine{4021 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_paeth(\textcolor{keywordtype}{int} a, \textcolor{keywordtype}{int} b, \textcolor{keywordtype}{int} c)}
\DoxyCodeLine{4022 \{}
\DoxyCodeLine{4023    \textcolor{keywordtype}{int} p = a + b -\/ c;}
\DoxyCodeLine{4024    \textcolor{keywordtype}{int} pa = abs(p-\/a);}
\DoxyCodeLine{4025    \textcolor{keywordtype}{int} pb = abs(p-\/b);}
\DoxyCodeLine{4026    \textcolor{keywordtype}{int} pc = abs(p-\/c);}
\DoxyCodeLine{4027    \textcolor{keywordflow}{if} (pa <= pb \&\& pa <= pc) \textcolor{keywordflow}{return} a;}
\DoxyCodeLine{4028    \textcolor{keywordflow}{if} (pb <= pc) \textcolor{keywordflow}{return} b;}
\DoxyCodeLine{4029    \textcolor{keywordflow}{return} c;}
\DoxyCodeLine{4030 \}}
\DoxyCodeLine{4031 }
\DoxyCodeLine{4032 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} stbi\_\_depth\_scale\_table[9] = \{ 0, 0xff, 0x55, 0, 0x11, 0,0,0, 0x01 \};}
\DoxyCodeLine{4033 }
\DoxyCodeLine{4034 \textcolor{comment}{// create the png data from post-\/deflated data}}
\DoxyCodeLine{4035 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_create\_png\_image\_raw(\mbox{\hyperlink{structstbi____png}{stbi\_\_png}} *a, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *raw, \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}} raw\_len, \textcolor{keywordtype}{int} out\_n, \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}} x, \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}} y, \textcolor{keywordtype}{int} depth, \textcolor{keywordtype}{int} color)}
\DoxyCodeLine{4036 \{}
\DoxyCodeLine{4037    \mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s = a-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}};}
\DoxyCodeLine{4038    \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}} i,j,stride = x*out\_n;}
\DoxyCodeLine{4039    \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}} img\_len, img\_width\_bytes;}
\DoxyCodeLine{4040    \textcolor{keywordtype}{int} k;}
\DoxyCodeLine{4041    \textcolor{keywordtype}{int} img\_n = s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}}; \textcolor{comment}{// copy it into a local for later}}
\DoxyCodeLine{4042 }
\DoxyCodeLine{4043    \mbox{\hyperlink{stb__image_8h_abcf0d8bc32a73fd449d918aac2ed3882}{STBI\_ASSERT}}(out\_n == s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}} || out\_n == s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}}+1);}
\DoxyCodeLine{4044    a-\/>\mbox{\hyperlink{structstbi____png_ac90432452f6716f4d9f63012ef5ec038}{out}} = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc(x * y * out\_n); \textcolor{comment}{// extra bytes to write off the end into}}
\DoxyCodeLine{4045    \textcolor{keywordflow}{if} (!a-\/>\mbox{\hyperlink{structstbi____png_ac90432452f6716f4d9f63012ef5ec038}{out}}) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{4046 }
\DoxyCodeLine{4047    img\_width\_bytes = (((img\_n * x * depth) + 7) >> 3);}
\DoxyCodeLine{4048    img\_len = (img\_width\_bytes + 1) * y;}
\DoxyCodeLine{4049    \textcolor{keywordflow}{if} (s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} == x \&\& s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}} == y) \{}
\DoxyCodeLine{4050       \textcolor{keywordflow}{if} (raw\_len != img\_len) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}not enough pixels"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4051    \} \textcolor{keywordflow}{else} \{ \textcolor{comment}{// interlaced:}}
\DoxyCodeLine{4052       \textcolor{keywordflow}{if} (raw\_len < img\_len) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}not enough pixels"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4053    \}}
\DoxyCodeLine{4054 }
\DoxyCodeLine{4055    \textcolor{keywordflow}{for} (j=0; j < y; ++j) \{}
\DoxyCodeLine{4056       \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *cur = a-\/>\mbox{\hyperlink{structstbi____png_ac90432452f6716f4d9f63012ef5ec038}{out}} + stride*j;}
\DoxyCodeLine{4057       \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *prior = cur -\/ stride;}
\DoxyCodeLine{4058       \textcolor{keywordtype}{int} filter = *raw++;}
\DoxyCodeLine{4059       \textcolor{keywordtype}{int} filter\_bytes = img\_n;}
\DoxyCodeLine{4060       \textcolor{keywordtype}{int} width = x;}
\DoxyCodeLine{4061       \textcolor{keywordflow}{if} (filter > 4)}
\DoxyCodeLine{4062          \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}invalid filter"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4063 }
\DoxyCodeLine{4064       \textcolor{keywordflow}{if} (depth < 8) \{}
\DoxyCodeLine{4065          \mbox{\hyperlink{stb__image_8h_abcf0d8bc32a73fd449d918aac2ed3882}{STBI\_ASSERT}}(img\_width\_bytes <= x);}
\DoxyCodeLine{4066          cur += x*out\_n -\/ img\_width\_bytes; \textcolor{comment}{// store output to the rightmost img\_len bytes, so we can decode in place}}
\DoxyCodeLine{4067          filter\_bytes = 1;}
\DoxyCodeLine{4068          width = img\_width\_bytes;}
\DoxyCodeLine{4069       \}}
\DoxyCodeLine{4070 }
\DoxyCodeLine{4071       \textcolor{comment}{// if first row, use special filter that doesn't sample previous row}}
\DoxyCodeLine{4072       \textcolor{keywordflow}{if} (j == 0) filter = first\_row\_filter[filter];}
\DoxyCodeLine{4073 }
\DoxyCodeLine{4074       \textcolor{comment}{// handle first byte explicitly}}
\DoxyCodeLine{4075       \textcolor{keywordflow}{for} (k=0; k < filter\_bytes; ++k) \{}
\DoxyCodeLine{4076          \textcolor{keywordflow}{switch} (filter) \{}
\DoxyCodeLine{4077             \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388afacd24ff355ff27d279bce1af3c09f7b}{STBI\_\_F\_none}}       : cur[k] = raw[k]; \textcolor{keywordflow}{break};}
\DoxyCodeLine{4078             \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388adaa4cbe29b06d2660ea4eb14b99110c7}{STBI\_\_F\_sub}}        : cur[k] = raw[k]; \textcolor{keywordflow}{break};}
\DoxyCodeLine{4079             \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388ab54e8709324b2eb13fe29915dc43b3cb}{STBI\_\_F\_up}}         : cur[k] = \mbox{\hyperlink{stb__image_8h_a984e56c100b40a90db2bc9bf0dd8b9d5}{STBI\_\_BYTECAST}}(raw[k] + prior[k]); \textcolor{keywordflow}{break};}
\DoxyCodeLine{4080             \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388a70fc277b0d569f81271b1c6dc82a3998}{STBI\_\_F\_avg}}        : cur[k] = \mbox{\hyperlink{stb__image_8h_a984e56c100b40a90db2bc9bf0dd8b9d5}{STBI\_\_BYTECAST}}(raw[k] + (prior[k]>>1)); \textcolor{keywordflow}{break};}
\DoxyCodeLine{4081             \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388a0b031f97c2db0d26b9d69e3e332cb4a5}{STBI\_\_F\_paeth}}      : cur[k] = \mbox{\hyperlink{stb__image_8h_a984e56c100b40a90db2bc9bf0dd8b9d5}{STBI\_\_BYTECAST}}(raw[k] + stbi\_\_paeth(0,prior[k],0)); \textcolor{keywordflow}{break};}
\DoxyCodeLine{4082             \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388a6514c9f5042fffba272410e03751fc8b}{STBI\_\_F\_avg\_first}}  : cur[k] = raw[k]; \textcolor{keywordflow}{break};}
\DoxyCodeLine{4083             \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388a740807731406ef4889807472937466c1}{STBI\_\_F\_paeth\_first}}: cur[k] = raw[k]; \textcolor{keywordflow}{break};}
\DoxyCodeLine{4084          \}}
\DoxyCodeLine{4085       \}}
\DoxyCodeLine{4086 }
\DoxyCodeLine{4087       \textcolor{keywordflow}{if} (depth == 8) \{}
\DoxyCodeLine{4088          \textcolor{keywordflow}{if} (img\_n != out\_n)}
\DoxyCodeLine{4089             cur[img\_n] = 255; \textcolor{comment}{// first pixel}}
\DoxyCodeLine{4090          raw += img\_n;}
\DoxyCodeLine{4091          cur += out\_n;}
\DoxyCodeLine{4092          prior += out\_n;}
\DoxyCodeLine{4093       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4094          raw += 1;}
\DoxyCodeLine{4095          cur += 1;}
\DoxyCodeLine{4096          prior += 1;}
\DoxyCodeLine{4097       \}}
\DoxyCodeLine{4098 }
\DoxyCodeLine{4099       \textcolor{comment}{// this is a little gross, so that we don't switch per-\/pixel or per-\/component}}
\DoxyCodeLine{4100       \textcolor{keywordflow}{if} (depth < 8 || img\_n == out\_n) \{}
\DoxyCodeLine{4101          \textcolor{keywordtype}{int} nk = (width -\/ 1)*img\_n;}
\DoxyCodeLine{4102 \textcolor{preprocessor}{         \#define CASE(f) \(\backslash\)}}
\DoxyCodeLine{4103 \textcolor{preprocessor}{             case f:     \(\backslash\)}}
\DoxyCodeLine{4104 \textcolor{preprocessor}{                for (k=0; k < nk; ++k)}}
\DoxyCodeLine{4105          \textcolor{keywordflow}{switch} (filter) \{}
\DoxyCodeLine{4106             \textcolor{comment}{// "{}none"{} filter turns into a memcpy here; make that explicit.}}
\DoxyCodeLine{4107             \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388afacd24ff355ff27d279bce1af3c09f7b}{STBI\_\_F\_none}}:         memcpy(cur, raw, nk); \textcolor{keywordflow}{break};}
\DoxyCodeLine{4108             \mbox{\hyperlink{stb__image_8h_a313e27a7a8b70c45c2a0b450454b880c}{CASE}}(\mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388adaa4cbe29b06d2660ea4eb14b99110c7}{STBI\_\_F\_sub}})          cur[k] = \mbox{\hyperlink{stb__image_8h_a984e56c100b40a90db2bc9bf0dd8b9d5}{STBI\_\_BYTECAST}}(raw[k] + cur[k-\/filter\_bytes]); \textcolor{keywordflow}{break};}
\DoxyCodeLine{4109             \mbox{\hyperlink{stb__image_8h_a313e27a7a8b70c45c2a0b450454b880c}{CASE}}(\mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388ab54e8709324b2eb13fe29915dc43b3cb}{STBI\_\_F\_up}})           cur[k] = \mbox{\hyperlink{stb__image_8h_a984e56c100b40a90db2bc9bf0dd8b9d5}{STBI\_\_BYTECAST}}(raw[k] + prior[k]); \textcolor{keywordflow}{break};}
\DoxyCodeLine{4110             \mbox{\hyperlink{stb__image_8h_a313e27a7a8b70c45c2a0b450454b880c}{CASE}}(\mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388a70fc277b0d569f81271b1c6dc82a3998}{STBI\_\_F\_avg}})          cur[k] = \mbox{\hyperlink{stb__image_8h_a984e56c100b40a90db2bc9bf0dd8b9d5}{STBI\_\_BYTECAST}}(raw[k] + ((prior[k] + cur[k-\/filter\_bytes])>>1)); \textcolor{keywordflow}{break};}
\DoxyCodeLine{4111             \mbox{\hyperlink{stb__image_8h_a313e27a7a8b70c45c2a0b450454b880c}{CASE}}(\mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388a0b031f97c2db0d26b9d69e3e332cb4a5}{STBI\_\_F\_paeth}})        cur[k] = \mbox{\hyperlink{stb__image_8h_a984e56c100b40a90db2bc9bf0dd8b9d5}{STBI\_\_BYTECAST}}(raw[k] + stbi\_\_paeth(cur[k-\/filter\_bytes],prior[k],prior[k-\/filter\_bytes])); \textcolor{keywordflow}{break};}
\DoxyCodeLine{4112             \mbox{\hyperlink{stb__image_8h_a313e27a7a8b70c45c2a0b450454b880c}{CASE}}(\mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388a6514c9f5042fffba272410e03751fc8b}{STBI\_\_F\_avg\_first}})    cur[k] = \mbox{\hyperlink{stb__image_8h_a984e56c100b40a90db2bc9bf0dd8b9d5}{STBI\_\_BYTECAST}}(raw[k] + (cur[k-\/filter\_bytes] >> 1)); \textcolor{keywordflow}{break};}
\DoxyCodeLine{4113             \mbox{\hyperlink{stb__image_8h_a313e27a7a8b70c45c2a0b450454b880c}{CASE}}(\mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388a740807731406ef4889807472937466c1}{STBI\_\_F\_paeth\_first}})  cur[k] = \mbox{\hyperlink{stb__image_8h_a984e56c100b40a90db2bc9bf0dd8b9d5}{STBI\_\_BYTECAST}}(raw[k] + stbi\_\_paeth(cur[k-\/filter\_bytes],0,0)); \textcolor{keywordflow}{break};}
\DoxyCodeLine{4114          \}}
\DoxyCodeLine{4115 \textcolor{preprocessor}{         \#undef CASE}}
\DoxyCodeLine{4116          raw += nk;}
\DoxyCodeLine{4117       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4118          \mbox{\hyperlink{stb__image_8h_abcf0d8bc32a73fd449d918aac2ed3882}{STBI\_ASSERT}}(img\_n+1 == out\_n);}
\DoxyCodeLine{4119 \textcolor{preprocessor}{         \#define CASE(f) \(\backslash\)}}
\DoxyCodeLine{4120 \textcolor{preprocessor}{             case f:     \(\backslash\)}}
\DoxyCodeLine{4121 \textcolor{preprocessor}{                for (i=x-\/1; i >= 1; -\/-\/i, cur[img\_n]=255,raw+=img\_n,cur+=out\_n,prior+=out\_n) \(\backslash\)}}
\DoxyCodeLine{4122 \textcolor{preprocessor}{                   for (k=0; k < img\_n; ++k)}}
\DoxyCodeLine{4123          \textcolor{keywordflow}{switch} (filter) \{}
\DoxyCodeLine{4124             \mbox{\hyperlink{stb__image_8h_a313e27a7a8b70c45c2a0b450454b880c}{CASE}}(\mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388afacd24ff355ff27d279bce1af3c09f7b}{STBI\_\_F\_none}})         cur[k] = raw[k]; \textcolor{keywordflow}{break};}
\DoxyCodeLine{4125             \mbox{\hyperlink{stb__image_8h_a313e27a7a8b70c45c2a0b450454b880c}{CASE}}(\mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388adaa4cbe29b06d2660ea4eb14b99110c7}{STBI\_\_F\_sub}})          cur[k] = \mbox{\hyperlink{stb__image_8h_a984e56c100b40a90db2bc9bf0dd8b9d5}{STBI\_\_BYTECAST}}(raw[k] + cur[k-\/out\_n]); \textcolor{keywordflow}{break};}
\DoxyCodeLine{4126             \mbox{\hyperlink{stb__image_8h_a313e27a7a8b70c45c2a0b450454b880c}{CASE}}(\mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388ab54e8709324b2eb13fe29915dc43b3cb}{STBI\_\_F\_up}})           cur[k] = \mbox{\hyperlink{stb__image_8h_a984e56c100b40a90db2bc9bf0dd8b9d5}{STBI\_\_BYTECAST}}(raw[k] + prior[k]); \textcolor{keywordflow}{break};}
\DoxyCodeLine{4127             \mbox{\hyperlink{stb__image_8h_a313e27a7a8b70c45c2a0b450454b880c}{CASE}}(\mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388a70fc277b0d569f81271b1c6dc82a3998}{STBI\_\_F\_avg}})          cur[k] = \mbox{\hyperlink{stb__image_8h_a984e56c100b40a90db2bc9bf0dd8b9d5}{STBI\_\_BYTECAST}}(raw[k] + ((prior[k] + cur[k-\/out\_n])>>1)); \textcolor{keywordflow}{break};}
\DoxyCodeLine{4128             \mbox{\hyperlink{stb__image_8h_a313e27a7a8b70c45c2a0b450454b880c}{CASE}}(\mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388a0b031f97c2db0d26b9d69e3e332cb4a5}{STBI\_\_F\_paeth}})        cur[k] = \mbox{\hyperlink{stb__image_8h_a984e56c100b40a90db2bc9bf0dd8b9d5}{STBI\_\_BYTECAST}}(raw[k] + stbi\_\_paeth(cur[k-\/out\_n],prior[k],prior[k-\/out\_n])); \textcolor{keywordflow}{break};}
\DoxyCodeLine{4129             \mbox{\hyperlink{stb__image_8h_a313e27a7a8b70c45c2a0b450454b880c}{CASE}}(\mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388a6514c9f5042fffba272410e03751fc8b}{STBI\_\_F\_avg\_first}})    cur[k] = \mbox{\hyperlink{stb__image_8h_a984e56c100b40a90db2bc9bf0dd8b9d5}{STBI\_\_BYTECAST}}(raw[k] + (cur[k-\/out\_n] >> 1)); \textcolor{keywordflow}{break};}
\DoxyCodeLine{4130             \mbox{\hyperlink{stb__image_8h_a313e27a7a8b70c45c2a0b450454b880c}{CASE}}(\mbox{\hyperlink{stb__image_8h_a385c44f6fb256e5716a2302a5b940388a740807731406ef4889807472937466c1}{STBI\_\_F\_paeth\_first}})  cur[k] = \mbox{\hyperlink{stb__image_8h_a984e56c100b40a90db2bc9bf0dd8b9d5}{STBI\_\_BYTECAST}}(raw[k] + stbi\_\_paeth(cur[k-\/out\_n],0,0)); \textcolor{keywordflow}{break};}
\DoxyCodeLine{4131          \}}
\DoxyCodeLine{4132 \textcolor{preprocessor}{         \#undef CASE}}
\DoxyCodeLine{4133       \}}
\DoxyCodeLine{4134    \}}
\DoxyCodeLine{4135 }
\DoxyCodeLine{4136    \textcolor{comment}{// we make a separate pass to expand bits to pixels; for performance,}}
\DoxyCodeLine{4137    \textcolor{comment}{// this could run two scanlines behind the above code, so it won't}}
\DoxyCodeLine{4138    \textcolor{comment}{// intefere with filtering but will still be in the cache.}}
\DoxyCodeLine{4139    \textcolor{keywordflow}{if} (depth < 8) \{}
\DoxyCodeLine{4140       \textcolor{keywordflow}{for} (j=0; j < y; ++j) \{}
\DoxyCodeLine{4141          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *cur = a-\/>\mbox{\hyperlink{structstbi____png_ac90432452f6716f4d9f63012ef5ec038}{out}} + stride*j;}
\DoxyCodeLine{4142          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *in  = a-\/>\mbox{\hyperlink{structstbi____png_ac90432452f6716f4d9f63012ef5ec038}{out}} + stride*j + x*out\_n -\/ img\_width\_bytes;}
\DoxyCodeLine{4143          \textcolor{comment}{// unpack 1/2/4-\/bit into a 8-\/bit buffer. allows us to keep the common 8-\/bit path optimal at minimal cost for 1/2/4-\/bit}}
\DoxyCodeLine{4144          \textcolor{comment}{// png guarante byte alignment, if width is not multiple of 8/4/2 we'll decode dummy trailing data that will be skipped in the later loop}}
\DoxyCodeLine{4145          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} = (color == 0) ? stbi\_\_depth\_scale\_table[depth] : 1; \textcolor{comment}{// scale grayscale values to 0..255 range}}
\DoxyCodeLine{4146 }
\DoxyCodeLine{4147          \textcolor{comment}{// note that the final byte might overshoot and write more data than desired.}}
\DoxyCodeLine{4148          \textcolor{comment}{// we can allocate enough data that this never writes out of memory, but it}}
\DoxyCodeLine{4149          \textcolor{comment}{// could also overwrite the next scanline. can it overwrite non-\/empty data}}
\DoxyCodeLine{4150          \textcolor{comment}{// on the next scanline? yes, consider 1-\/pixel-\/wide scanlines with 1-\/bit-\/per-\/pixel.}}
\DoxyCodeLine{4151          \textcolor{comment}{// so we need to explicitly clamp the final ones}}
\DoxyCodeLine{4152 }
\DoxyCodeLine{4153          \textcolor{keywordflow}{if} (depth == 4) \{}
\DoxyCodeLine{4154             \textcolor{keywordflow}{for} (k=x*img\_n; k >= 2; k-\/=2, ++in) \{}
\DoxyCodeLine{4155                *cur++ = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} * ((*in >> 4)       );}
\DoxyCodeLine{4156                *cur++ = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} * ((*in     ) \& 0x0f);}
\DoxyCodeLine{4157             \}}
\DoxyCodeLine{4158             \textcolor{keywordflow}{if} (k > 0) *cur++ = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} * ((*in >> 4)       );}
\DoxyCodeLine{4159          \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (depth == 2) \{}
\DoxyCodeLine{4160             \textcolor{keywordflow}{for} (k=x*img\_n; k >= 4; k-\/=4, ++in) \{}
\DoxyCodeLine{4161                *cur++ = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} * ((*in >> 6)       );}
\DoxyCodeLine{4162                *cur++ = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} * ((*in >> 4) \& 0x03);}
\DoxyCodeLine{4163                *cur++ = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} * ((*in >> 2) \& 0x03);}
\DoxyCodeLine{4164                *cur++ = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} * ((*in     ) \& 0x03);}
\DoxyCodeLine{4165             \}}
\DoxyCodeLine{4166             \textcolor{keywordflow}{if} (k > 0) *cur++ = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} * ((*in >> 6)       );}
\DoxyCodeLine{4167             \textcolor{keywordflow}{if} (k > 1) *cur++ = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} * ((*in >> 4) \& 0x03);}
\DoxyCodeLine{4168             \textcolor{keywordflow}{if} (k > 2) *cur++ = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} * ((*in >> 2) \& 0x03);}
\DoxyCodeLine{4169          \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (depth == 1) \{}
\DoxyCodeLine{4170             \textcolor{keywordflow}{for} (k=x*img\_n; k >= 8; k-\/=8, ++in) \{}
\DoxyCodeLine{4171                *cur++ = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} * ((*in >> 7)       );}
\DoxyCodeLine{4172                *cur++ = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} * ((*in >> 6) \& 0x01);}
\DoxyCodeLine{4173                *cur++ = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} * ((*in >> 5) \& 0x01);}
\DoxyCodeLine{4174                *cur++ = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} * ((*in >> 4) \& 0x01);}
\DoxyCodeLine{4175                *cur++ = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} * ((*in >> 3) \& 0x01);}
\DoxyCodeLine{4176                *cur++ = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} * ((*in >> 2) \& 0x01);}
\DoxyCodeLine{4177                *cur++ = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} * ((*in >> 1) \& 0x01);}
\DoxyCodeLine{4178                *cur++ = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} * ((*in     ) \& 0x01);}
\DoxyCodeLine{4179             \}}
\DoxyCodeLine{4180             \textcolor{keywordflow}{if} (k > 0) *cur++ = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} * ((*in >> 7)       );}
\DoxyCodeLine{4181             \textcolor{keywordflow}{if} (k > 1) *cur++ = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} * ((*in >> 6) \& 0x01);}
\DoxyCodeLine{4182             \textcolor{keywordflow}{if} (k > 2) *cur++ = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} * ((*in >> 5) \& 0x01);}
\DoxyCodeLine{4183             \textcolor{keywordflow}{if} (k > 3) *cur++ = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} * ((*in >> 4) \& 0x01);}
\DoxyCodeLine{4184             \textcolor{keywordflow}{if} (k > 4) *cur++ = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} * ((*in >> 3) \& 0x01);}
\DoxyCodeLine{4185             \textcolor{keywordflow}{if} (k > 5) *cur++ = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} * ((*in >> 2) \& 0x01);}
\DoxyCodeLine{4186             \textcolor{keywordflow}{if} (k > 6) *cur++ = \mbox{\hyperlink{namespace_grafica_1_1_transformations_aee93d908b473c0399f0ce032c2cf77a9}{scale}} * ((*in >> 1) \& 0x01);}
\DoxyCodeLine{4187          \}}
\DoxyCodeLine{4188          \textcolor{keywordflow}{if} (img\_n != out\_n) \{}
\DoxyCodeLine{4189             \textcolor{keywordtype}{int} q;}
\DoxyCodeLine{4190             \textcolor{comment}{// insert alpha = 255}}
\DoxyCodeLine{4191             cur = a-\/>\mbox{\hyperlink{structstbi____png_ac90432452f6716f4d9f63012ef5ec038}{out}} + stride*j;}
\DoxyCodeLine{4192             \textcolor{keywordflow}{if} (img\_n == 1) \{}
\DoxyCodeLine{4193                \textcolor{keywordflow}{for} (q=x-\/1; q >= 0; -\/-\/q) \{}
\DoxyCodeLine{4194                   cur[q*2+1] = 255;}
\DoxyCodeLine{4195                   cur[q*2+0] = cur[q];}
\DoxyCodeLine{4196                \}}
\DoxyCodeLine{4197             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4198                \mbox{\hyperlink{stb__image_8h_abcf0d8bc32a73fd449d918aac2ed3882}{STBI\_ASSERT}}(img\_n == 3);}
\DoxyCodeLine{4199                \textcolor{keywordflow}{for} (q=x-\/1; q >= 0; -\/-\/q) \{}
\DoxyCodeLine{4200                   cur[q*4+3] = 255;}
\DoxyCodeLine{4201                   cur[q*4+2] = cur[q*3+2];}
\DoxyCodeLine{4202                   cur[q*4+1] = cur[q*3+1];}
\DoxyCodeLine{4203                   cur[q*4+0] = cur[q*3+0];}
\DoxyCodeLine{4204                \}}
\DoxyCodeLine{4205             \}}
\DoxyCodeLine{4206          \}}
\DoxyCodeLine{4207       \}}
\DoxyCodeLine{4208    \}}
\DoxyCodeLine{4209 }
\DoxyCodeLine{4210    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4211 \}}
\DoxyCodeLine{4212 }
\DoxyCodeLine{4213 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_create\_png\_image(\mbox{\hyperlink{structstbi____png}{stbi\_\_png}} *a, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *image\_data, \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}} image\_data\_len, \textcolor{keywordtype}{int} out\_n, \textcolor{keywordtype}{int} depth, \textcolor{keywordtype}{int} color, \textcolor{keywordtype}{int} interlaced)}
\DoxyCodeLine{4214 \{}
\DoxyCodeLine{4215    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\textcolor{keyword}{final};}
\DoxyCodeLine{4216    \textcolor{keywordtype}{int} p;}
\DoxyCodeLine{4217    \textcolor{keywordflow}{if} (!interlaced)}
\DoxyCodeLine{4218       \textcolor{keywordflow}{return} stbi\_\_create\_png\_image\_raw(a, image\_data, image\_data\_len, out\_n, a-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}}-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}}, a-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}}-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}}, depth, color);}
\DoxyCodeLine{4219 }
\DoxyCodeLine{4220    \textcolor{comment}{// de-\/interlacing}}
\DoxyCodeLine{4221    \textcolor{keyword}{final} = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc(a-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}}-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} * a-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}}-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}} * out\_n);}
\DoxyCodeLine{4222    \textcolor{keywordflow}{for} (p=0; p < 7; ++p) \{}
\DoxyCodeLine{4223       \textcolor{keywordtype}{int} xorig[] = \{ 0,4,0,2,0,1,0 \};}
\DoxyCodeLine{4224       \textcolor{keywordtype}{int} yorig[] = \{ 0,0,4,0,2,0,1 \};}
\DoxyCodeLine{4225       \textcolor{keywordtype}{int} xspc[]  = \{ 8,8,4,4,2,2,1 \};}
\DoxyCodeLine{4226       \textcolor{keywordtype}{int} yspc[]  = \{ 8,8,8,4,4,2,2 \};}
\DoxyCodeLine{4227       \textcolor{keywordtype}{int} i,j,x,y;}
\DoxyCodeLine{4228       \textcolor{comment}{// pass1\_x[4] = 0, pass1\_x[5] = 1, pass1\_x[12] = 1}}
\DoxyCodeLine{4229       x = (a-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}}-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} -\/ xorig[p] + xspc[p]-\/1) / xspc[p];}
\DoxyCodeLine{4230       y = (a-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}}-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}} -\/ yorig[p] + yspc[p]-\/1) / yspc[p];}
\DoxyCodeLine{4231       \textcolor{keywordflow}{if} (x \&\& y) \{}
\DoxyCodeLine{4232          \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}} img\_len = ((((a-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}}-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}} * x * depth) + 7) >> 3) + 1) * y;}
\DoxyCodeLine{4233          \textcolor{keywordflow}{if} (!stbi\_\_create\_png\_image\_raw(a, image\_data, image\_data\_len, out\_n, x, y, depth, color)) \{}
\DoxyCodeLine{4234             \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(\textcolor{keyword}{final});}
\DoxyCodeLine{4235             \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4236          \}}
\DoxyCodeLine{4237          \textcolor{keywordflow}{for} (j=0; j < y; ++j) \{}
\DoxyCodeLine{4238             \textcolor{keywordflow}{for} (i=0; i < x; ++i) \{}
\DoxyCodeLine{4239                \textcolor{keywordtype}{int} out\_y = j*yspc[p]+yorig[p];}
\DoxyCodeLine{4240                \textcolor{keywordtype}{int} out\_x = i*xspc[p]+xorig[p];}
\DoxyCodeLine{4241                memcpy(\textcolor{keyword}{final} + out\_y*a-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}}-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}}*out\_n + out\_x*out\_n,}
\DoxyCodeLine{4242                       a-\/>\mbox{\hyperlink{structstbi____png_ac90432452f6716f4d9f63012ef5ec038}{out}} + (j*x+i)*out\_n, out\_n);}
\DoxyCodeLine{4243             \}}
\DoxyCodeLine{4244          \}}
\DoxyCodeLine{4245          \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(a-\/>\mbox{\hyperlink{structstbi____png_ac90432452f6716f4d9f63012ef5ec038}{out}});}
\DoxyCodeLine{4246          image\_data += img\_len;}
\DoxyCodeLine{4247          image\_data\_len -\/= img\_len;}
\DoxyCodeLine{4248       \}}
\DoxyCodeLine{4249    \}}
\DoxyCodeLine{4250    a-\/>\mbox{\hyperlink{structstbi____png_ac90432452f6716f4d9f63012ef5ec038}{out}} = \textcolor{keyword}{final};}
\DoxyCodeLine{4251 }
\DoxyCodeLine{4252    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4253 \}}
\DoxyCodeLine{4254 }
\DoxyCodeLine{4255 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_compute\_transparency(\mbox{\hyperlink{structstbi____png}{stbi\_\_png}} *z, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} tc[3], \textcolor{keywordtype}{int} out\_n)}
\DoxyCodeLine{4256 \{}
\DoxyCodeLine{4257    \mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s = z-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}};}
\DoxyCodeLine{4258    \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}} i, pixel\_count = s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} * s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}};}
\DoxyCodeLine{4259    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *p = z-\/>\mbox{\hyperlink{structstbi____png_ac90432452f6716f4d9f63012ef5ec038}{out}};}
\DoxyCodeLine{4260 }
\DoxyCodeLine{4261    \textcolor{comment}{// compute color-\/based transparency, assuming we've}}
\DoxyCodeLine{4262    \textcolor{comment}{// already got 255 as the alpha value in the output}}
\DoxyCodeLine{4263    \mbox{\hyperlink{stb__image_8h_abcf0d8bc32a73fd449d918aac2ed3882}{STBI\_ASSERT}}(out\_n == 2 || out\_n == 4);}
\DoxyCodeLine{4264 }
\DoxyCodeLine{4265    \textcolor{keywordflow}{if} (out\_n == 2) \{}
\DoxyCodeLine{4266       \textcolor{keywordflow}{for} (i=0; i < pixel\_count; ++i) \{}
\DoxyCodeLine{4267          p[1] = (p[0] == tc[0] ? 0 : 255);}
\DoxyCodeLine{4268          p += 2;}
\DoxyCodeLine{4269       \}}
\DoxyCodeLine{4270    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4271       \textcolor{keywordflow}{for} (i=0; i < pixel\_count; ++i) \{}
\DoxyCodeLine{4272          \textcolor{keywordflow}{if} (p[0] == tc[0] \&\& p[1] == tc[1] \&\& p[2] == tc[2])}
\DoxyCodeLine{4273             p[3] = 0;}
\DoxyCodeLine{4274          p += 4;}
\DoxyCodeLine{4275       \}}
\DoxyCodeLine{4276    \}}
\DoxyCodeLine{4277    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4278 \}}
\DoxyCodeLine{4279 }
\DoxyCodeLine{4280 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_expand\_png\_palette(\mbox{\hyperlink{structstbi____png}{stbi\_\_png}} *a, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *palette, \textcolor{keywordtype}{int} len, \textcolor{keywordtype}{int} pal\_img\_n)}
\DoxyCodeLine{4281 \{}
\DoxyCodeLine{4282    \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}} i, pixel\_count = a-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}}-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} * a-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}}-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}};}
\DoxyCodeLine{4283    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *p, *temp\_out, *orig = a-\/>\mbox{\hyperlink{structstbi____png_ac90432452f6716f4d9f63012ef5ec038}{out}};}
\DoxyCodeLine{4284 }
\DoxyCodeLine{4285    p = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc(pixel\_count * pal\_img\_n);}
\DoxyCodeLine{4286    \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{4287 }
\DoxyCodeLine{4288    \textcolor{comment}{// between here and free(out) below, exitting would leak}}
\DoxyCodeLine{4289    temp\_out = p;}
\DoxyCodeLine{4290 }
\DoxyCodeLine{4291    \textcolor{keywordflow}{if} (pal\_img\_n == 3) \{}
\DoxyCodeLine{4292       \textcolor{keywordflow}{for} (i=0; i < pixel\_count; ++i) \{}
\DoxyCodeLine{4293          \textcolor{keywordtype}{int} n = orig[i]*4;}
\DoxyCodeLine{4294          p[0] = palette[n  ];}
\DoxyCodeLine{4295          p[1] = palette[n+1];}
\DoxyCodeLine{4296          p[2] = palette[n+2];}
\DoxyCodeLine{4297          p += 3;}
\DoxyCodeLine{4298       \}}
\DoxyCodeLine{4299    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4300       \textcolor{keywordflow}{for} (i=0; i < pixel\_count; ++i) \{}
\DoxyCodeLine{4301          \textcolor{keywordtype}{int} n = orig[i]*4;}
\DoxyCodeLine{4302          p[0] = palette[n  ];}
\DoxyCodeLine{4303          p[1] = palette[n+1];}
\DoxyCodeLine{4304          p[2] = palette[n+2];}
\DoxyCodeLine{4305          p[3] = palette[n+3];}
\DoxyCodeLine{4306          p += 4;}
\DoxyCodeLine{4307       \}}
\DoxyCodeLine{4308    \}}
\DoxyCodeLine{4309    \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(a-\/>\mbox{\hyperlink{structstbi____png_ac90432452f6716f4d9f63012ef5ec038}{out}});}
\DoxyCodeLine{4310    a-\/>\mbox{\hyperlink{structstbi____png_ac90432452f6716f4d9f63012ef5ec038}{out}} = temp\_out;}
\DoxyCodeLine{4311 }
\DoxyCodeLine{4312    \mbox{\hyperlink{stb__image_8h_a3970ebac9a09e8116fa5855b334ca6ab}{STBI\_NOTUSED}}(len);}
\DoxyCodeLine{4313 }
\DoxyCodeLine{4314    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4315 \}}
\DoxyCodeLine{4316 }
\DoxyCodeLine{4317 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_unpremultiply\_on\_load = 0;}
\DoxyCodeLine{4318 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_de\_iphone\_flag = 0;}
\DoxyCodeLine{4319 }
\DoxyCodeLine{4320 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void} \mbox{\hyperlink{stb__image_8h_a3f02e0053e1c8d08a3ed436e6a82c7c9}{stbi\_set\_unpremultiply\_on\_load}}(\textcolor{keywordtype}{int} flag\_true\_if\_should\_unpremultiply)}
\DoxyCodeLine{4321 \{}
\DoxyCodeLine{4322    stbi\_\_unpremultiply\_on\_load = flag\_true\_if\_should\_unpremultiply;}
\DoxyCodeLine{4323 \}}
\DoxyCodeLine{4324 }
\DoxyCodeLine{4325 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{void} \mbox{\hyperlink{stb__image_8h_a23525ef2b882f3de426b47ecf8d9151b}{stbi\_convert\_iphone\_png\_to\_rgb}}(\textcolor{keywordtype}{int} flag\_true\_if\_should\_convert)}
\DoxyCodeLine{4326 \{}
\DoxyCodeLine{4327    stbi\_\_de\_iphone\_flag = flag\_true\_if\_should\_convert;}
\DoxyCodeLine{4328 \}}
\DoxyCodeLine{4329 }
\DoxyCodeLine{4330 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_de\_iphone(\mbox{\hyperlink{structstbi____png}{stbi\_\_png}} *z)}
\DoxyCodeLine{4331 \{}
\DoxyCodeLine{4332    \mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s = z-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}};}
\DoxyCodeLine{4333    \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}} i, pixel\_count = s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} * s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}};}
\DoxyCodeLine{4334    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *p = z-\/>\mbox{\hyperlink{structstbi____png_ac90432452f6716f4d9f63012ef5ec038}{out}};}
\DoxyCodeLine{4335 }
\DoxyCodeLine{4336    \textcolor{keywordflow}{if} (s-\/>\mbox{\hyperlink{structstbi____context_afcb00d245c4b9b5ecbc3788e3085881e}{img\_out\_n}} == 3) \{  \textcolor{comment}{// convert bgr to rgb}}
\DoxyCodeLine{4337       \textcolor{keywordflow}{for} (i=0; i < pixel\_count; ++i) \{}
\DoxyCodeLine{4338          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} t = p[0];}
\DoxyCodeLine{4339          p[0] = p[2];}
\DoxyCodeLine{4340          p[2] = t;}
\DoxyCodeLine{4341          p += 3;}
\DoxyCodeLine{4342       \}}
\DoxyCodeLine{4343    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4344       \mbox{\hyperlink{stb__image_8h_abcf0d8bc32a73fd449d918aac2ed3882}{STBI\_ASSERT}}(s-\/>\mbox{\hyperlink{structstbi____context_afcb00d245c4b9b5ecbc3788e3085881e}{img\_out\_n}} == 4);}
\DoxyCodeLine{4345       \textcolor{keywordflow}{if} (stbi\_\_unpremultiply\_on\_load) \{}
\DoxyCodeLine{4346          \textcolor{comment}{// convert bgr to rgb and unpremultiply}}
\DoxyCodeLine{4347          \textcolor{keywordflow}{for} (i=0; i < pixel\_count; ++i) \{}
\DoxyCodeLine{4348             \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} a = p[3];}
\DoxyCodeLine{4349             \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} t = p[0];}
\DoxyCodeLine{4350             \textcolor{keywordflow}{if} (a) \{}
\DoxyCodeLine{4351                p[0] = p[2] * 255 / a;}
\DoxyCodeLine{4352                p[1] = p[1] * 255 / a;}
\DoxyCodeLine{4353                p[2] =  t   * 255 / a;}
\DoxyCodeLine{4354             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4355                p[0] = p[2];}
\DoxyCodeLine{4356                p[2] = t;}
\DoxyCodeLine{4357             \}}
\DoxyCodeLine{4358             p += 4;}
\DoxyCodeLine{4359          \}}
\DoxyCodeLine{4360       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4361          \textcolor{comment}{// convert bgr to rgb}}
\DoxyCodeLine{4362          \textcolor{keywordflow}{for} (i=0; i < pixel\_count; ++i) \{}
\DoxyCodeLine{4363             \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} t = p[0];}
\DoxyCodeLine{4364             p[0] = p[2];}
\DoxyCodeLine{4365             p[2] = t;}
\DoxyCodeLine{4366             p += 4;}
\DoxyCodeLine{4367          \}}
\DoxyCodeLine{4368       \}}
\DoxyCodeLine{4369    \}}
\DoxyCodeLine{4370 \}}
\DoxyCodeLine{4371 }
\DoxyCodeLine{4372 \textcolor{preprocessor}{\#define STBI\_\_PNG\_TYPE(a,b,c,d)  (((a) << 24) + ((b) << 16) + ((c) << 8) + (d))}}
\DoxyCodeLine{4373 }
\DoxyCodeLine{4374 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_parse\_png\_file(\mbox{\hyperlink{structstbi____png}{stbi\_\_png}} *z, \textcolor{keywordtype}{int} scan, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{4375 \{}
\DoxyCodeLine{4376    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} palette[1024], pal\_img\_n=0;}
\DoxyCodeLine{4377    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} has\_trans=0, tc[3];}
\DoxyCodeLine{4378    \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}} ioff=0, idata\_limit=0, i, pal\_len=0;}
\DoxyCodeLine{4379    \textcolor{keywordtype}{int} first=1,k,interlace=0, color=0, depth=0, is\_iphone=0;}
\DoxyCodeLine{4380    \mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s = z-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}};}
\DoxyCodeLine{4381 }
\DoxyCodeLine{4382    z-\/>\mbox{\hyperlink{structstbi____png_a0ab3f5f6b62556a166602d6cf431eb5c}{expanded}} = NULL;}
\DoxyCodeLine{4383    z-\/>\mbox{\hyperlink{structstbi____png_a49ec2b3f8f3e7374671a680e201a96e2}{idata}} = NULL;}
\DoxyCodeLine{4384    z-\/>\mbox{\hyperlink{structstbi____png_ac90432452f6716f4d9f63012ef5ec038}{out}} = NULL;}
\DoxyCodeLine{4385 }
\DoxyCodeLine{4386    \textcolor{keywordflow}{if} (!stbi\_\_check\_png\_header(s)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4387 }
\DoxyCodeLine{4388    \textcolor{keywordflow}{if} (scan == \mbox{\hyperlink{stb__image_8h_ab04a0655cd1e3bcac5e8f48c18df1a57a49475d1886e13403b20664a11e1e358b}{STBI\_\_SCAN\_type}}) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4389 }
\DoxyCodeLine{4390    \textcolor{keywordflow}{for} (;;) \{}
\DoxyCodeLine{4391       \mbox{\hyperlink{structstbi____pngchunk}{stbi\_\_pngchunk}} c = stbi\_\_get\_chunk\_header(s);}
\DoxyCodeLine{4392       \textcolor{keywordflow}{switch} (c.\mbox{\hyperlink{structstbi____pngchunk_a92b7b7a50f90f9e9fb1a97effe1689a6}{type}}) \{}
\DoxyCodeLine{4393          \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__image_8h_a47396ef3e67a7b5d28bec75467a682da}{STBI\_\_PNG\_TYPE}}(\textcolor{charliteral}{'C'},\textcolor{charliteral}{'g'},\textcolor{charliteral}{'B'},\textcolor{charliteral}{'I'}):}
\DoxyCodeLine{4394             is\_iphone = 1;}
\DoxyCodeLine{4395             stbi\_\_skip(s, c.\mbox{\hyperlink{structstbi____pngchunk_a81f65deb74d9108a6ac6ff4a4d87b2e3}{length}});}
\DoxyCodeLine{4396             \textcolor{keywordflow}{break};}
\DoxyCodeLine{4397          \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__image_8h_a47396ef3e67a7b5d28bec75467a682da}{STBI\_\_PNG\_TYPE}}(\textcolor{charliteral}{'I'},\textcolor{charliteral}{'H'},\textcolor{charliteral}{'D'},\textcolor{charliteral}{'R'}): \{}
\DoxyCodeLine{4398             \textcolor{keywordtype}{int} comp,filter;}
\DoxyCodeLine{4399             \textcolor{keywordflow}{if} (!first) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}multiple IHDR"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4400             first = 0;}
\DoxyCodeLine{4401             \textcolor{keywordflow}{if} (c.\mbox{\hyperlink{structstbi____pngchunk_a81f65deb74d9108a6ac6ff4a4d87b2e3}{length}} != 13) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad IHDR len"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4402             s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} = stbi\_\_get32be(s); \textcolor{keywordflow}{if} (s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} > (1 << 24)) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}too large"{}},\textcolor{stringliteral}{"{}Very large image (corrupt?)"{}});}
\DoxyCodeLine{4403             s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}} = stbi\_\_get32be(s); \textcolor{keywordflow}{if} (s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}} > (1 << 24)) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}too large"{}},\textcolor{stringliteral}{"{}Very large image (corrupt?)"{}});}
\DoxyCodeLine{4404             depth = stbi\_\_get8(s);  \textcolor{keywordflow}{if} (depth != 1 \&\& depth != 2 \&\& depth != 4 \&\& depth != 8)  \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}1/2/4/8-\/bit only"{}},\textcolor{stringliteral}{"{}PNG not supported: 1/2/4/8-\/bit only"{}});}
\DoxyCodeLine{4405             color = stbi\_\_get8(s);  \textcolor{keywordflow}{if} (color > 6)         \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad ctype"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4406             \textcolor{keywordflow}{if} (color == 3) pal\_img\_n = 3; \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (color \& 1) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad ctype"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4407             comp  = stbi\_\_get8(s);  \textcolor{keywordflow}{if} (comp) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad comp method"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4408             filter= stbi\_\_get8(s);  \textcolor{keywordflow}{if} (filter) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad filter method"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4409             interlace = stbi\_\_get8(s); \textcolor{keywordflow}{if} (interlace>1) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad interlace method"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4410             \textcolor{keywordflow}{if} (!s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} || !s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}}) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}0-\/pixel image"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4411             \textcolor{keywordflow}{if} (!pal\_img\_n) \{}
\DoxyCodeLine{4412                s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}} = (color \& 2 ? 3 : 1) + (color \& 4 ? 1 : 0);}
\DoxyCodeLine{4413                \textcolor{keywordflow}{if} ((1 << 30) / s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} / s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}} < s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}}) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}too large"{}}, \textcolor{stringliteral}{"{}Image too large to decode"{}});}
\DoxyCodeLine{4414                \textcolor{keywordflow}{if} (scan == \mbox{\hyperlink{stb__image_8h_ab04a0655cd1e3bcac5e8f48c18df1a57a83675cb38c33efa3dd86b43996effea4}{STBI\_\_SCAN\_header}}) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4415             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4416                \textcolor{comment}{// if paletted, then pal\_n is our final components, and}}
\DoxyCodeLine{4417                \textcolor{comment}{// img\_n is \# components to decompress/filter.}}
\DoxyCodeLine{4418                s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}} = 1;}
\DoxyCodeLine{4419                \textcolor{keywordflow}{if} ((1 << 30) / s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} / 4 < s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}}) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}too large"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4420                \textcolor{comment}{// if SCAN\_header, have to scan to see if we have a tRNS}}
\DoxyCodeLine{4421             \}}
\DoxyCodeLine{4422             \textcolor{keywordflow}{break};}
\DoxyCodeLine{4423          \}}
\DoxyCodeLine{4424 }
\DoxyCodeLine{4425          \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__image_8h_a47396ef3e67a7b5d28bec75467a682da}{STBI\_\_PNG\_TYPE}}(\textcolor{charliteral}{'P'},\textcolor{charliteral}{'L'},\textcolor{charliteral}{'T'},\textcolor{charliteral}{'E'}):  \{}
\DoxyCodeLine{4426             \textcolor{keywordflow}{if} (first) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}first not IHDR"{}}, \textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4427             \textcolor{keywordflow}{if} (c.\mbox{\hyperlink{structstbi____pngchunk_a81f65deb74d9108a6ac6ff4a4d87b2e3}{length}} > 256*3) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}invalid PLTE"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4428             pal\_len = c.\mbox{\hyperlink{structstbi____pngchunk_a81f65deb74d9108a6ac6ff4a4d87b2e3}{length}} / 3;}
\DoxyCodeLine{4429             \textcolor{keywordflow}{if} (pal\_len * 3 != c.\mbox{\hyperlink{structstbi____pngchunk_a81f65deb74d9108a6ac6ff4a4d87b2e3}{length}}) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}invalid PLTE"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4430             \textcolor{keywordflow}{for} (i=0; i < pal\_len; ++i) \{}
\DoxyCodeLine{4431                palette[i*4+0] = stbi\_\_get8(s);}
\DoxyCodeLine{4432                palette[i*4+1] = stbi\_\_get8(s);}
\DoxyCodeLine{4433                palette[i*4+2] = stbi\_\_get8(s);}
\DoxyCodeLine{4434                palette[i*4+3] = 255;}
\DoxyCodeLine{4435             \}}
\DoxyCodeLine{4436             \textcolor{keywordflow}{break};}
\DoxyCodeLine{4437          \}}
\DoxyCodeLine{4438 }
\DoxyCodeLine{4439          \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__image_8h_a47396ef3e67a7b5d28bec75467a682da}{STBI\_\_PNG\_TYPE}}(\textcolor{charliteral}{'t'},\textcolor{charliteral}{'R'},\textcolor{charliteral}{'N'},\textcolor{charliteral}{'S'}): \{}
\DoxyCodeLine{4440             \textcolor{keywordflow}{if} (first) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}first not IHDR"{}}, \textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4441             \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____png_a49ec2b3f8f3e7374671a680e201a96e2}{idata}}) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}tRNS after IDAT"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4442             \textcolor{keywordflow}{if} (pal\_img\_n) \{}
\DoxyCodeLine{4443                \textcolor{keywordflow}{if} (scan == \mbox{\hyperlink{stb__image_8h_ab04a0655cd1e3bcac5e8f48c18df1a57a83675cb38c33efa3dd86b43996effea4}{STBI\_\_SCAN\_header}}) \{ s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}} = 4; \textcolor{keywordflow}{return} 1; \}}
\DoxyCodeLine{4444                \textcolor{keywordflow}{if} (pal\_len == 0) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}tRNS before PLTE"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4445                \textcolor{keywordflow}{if} (c.\mbox{\hyperlink{structstbi____pngchunk_a81f65deb74d9108a6ac6ff4a4d87b2e3}{length}} > pal\_len) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad tRNS len"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4446                pal\_img\_n = 4;}
\DoxyCodeLine{4447                \textcolor{keywordflow}{for} (i=0; i < c.\mbox{\hyperlink{structstbi____pngchunk_a81f65deb74d9108a6ac6ff4a4d87b2e3}{length}}; ++i)}
\DoxyCodeLine{4448                   palette[i*4+3] = stbi\_\_get8(s);}
\DoxyCodeLine{4449             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4450                \textcolor{keywordflow}{if} (!(s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}} \& 1)) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}tRNS with alpha"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4451                \textcolor{keywordflow}{if} (c.\mbox{\hyperlink{structstbi____pngchunk_a81f65deb74d9108a6ac6ff4a4d87b2e3}{length}} != (\mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}}) s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}}*2) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}bad tRNS len"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4452                has\_trans = 1;}
\DoxyCodeLine{4453                \textcolor{keywordflow}{for} (k=0; k < s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}}; ++k)}
\DoxyCodeLine{4454                   tc[k] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) (stbi\_\_get16be(s) \& 255) * stbi\_\_depth\_scale\_table[depth]; \textcolor{comment}{// non 8-\/bit images will be larger}}
\DoxyCodeLine{4455             \}}
\DoxyCodeLine{4456             \textcolor{keywordflow}{break};}
\DoxyCodeLine{4457          \}}
\DoxyCodeLine{4458 }
\DoxyCodeLine{4459          \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__image_8h_a47396ef3e67a7b5d28bec75467a682da}{STBI\_\_PNG\_TYPE}}(\textcolor{charliteral}{'I'},\textcolor{charliteral}{'D'},\textcolor{charliteral}{'A'},\textcolor{charliteral}{'T'}): \{}
\DoxyCodeLine{4460             \textcolor{keywordflow}{if} (first) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}first not IHDR"{}}, \textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4461             \textcolor{keywordflow}{if} (pal\_img\_n \&\& !pal\_len) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}no PLTE"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4462             \textcolor{keywordflow}{if} (scan == \mbox{\hyperlink{stb__image_8h_ab04a0655cd1e3bcac5e8f48c18df1a57a83675cb38c33efa3dd86b43996effea4}{STBI\_\_SCAN\_header}}) \{ s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}} = pal\_img\_n; \textcolor{keywordflow}{return} 1; \}}
\DoxyCodeLine{4463             \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{int})(ioff + c.\mbox{\hyperlink{structstbi____pngchunk_a81f65deb74d9108a6ac6ff4a4d87b2e3}{length}}) < (\textcolor{keywordtype}{int})ioff) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4464             \textcolor{keywordflow}{if} (ioff + c.\mbox{\hyperlink{structstbi____pngchunk_a81f65deb74d9108a6ac6ff4a4d87b2e3}{length}} > idata\_limit) \{}
\DoxyCodeLine{4465                \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *p;}
\DoxyCodeLine{4466                \textcolor{keywordflow}{if} (idata\_limit == 0) idata\_limit = c.\mbox{\hyperlink{structstbi____pngchunk_a81f65deb74d9108a6ac6ff4a4d87b2e3}{length}} > 4096 ? c.\mbox{\hyperlink{structstbi____pngchunk_a81f65deb74d9108a6ac6ff4a4d87b2e3}{length}} : 4096;}
\DoxyCodeLine{4467                \textcolor{keywordflow}{while} (ioff + c.\mbox{\hyperlink{structstbi____pngchunk_a81f65deb74d9108a6ac6ff4a4d87b2e3}{length}} > idata\_limit)}
\DoxyCodeLine{4468                   idata\_limit *= 2;}
\DoxyCodeLine{4469                p = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) \mbox{\hyperlink{stb__image_8h_ad4afa0dc735af97514ef752553e3e424}{STBI\_REALLOC}}(z-\/>\mbox{\hyperlink{structstbi____png_a49ec2b3f8f3e7374671a680e201a96e2}{idata}}, idata\_limit); \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{4470                z-\/>\mbox{\hyperlink{structstbi____png_a49ec2b3f8f3e7374671a680e201a96e2}{idata}} = p;}
\DoxyCodeLine{4471             \}}
\DoxyCodeLine{4472             \textcolor{keywordflow}{if} (!stbi\_\_getn(s, z-\/>\mbox{\hyperlink{structstbi____png_a49ec2b3f8f3e7374671a680e201a96e2}{idata}}+ioff,c.\mbox{\hyperlink{structstbi____pngchunk_a81f65deb74d9108a6ac6ff4a4d87b2e3}{length}})) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}outofdata"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4473             ioff += c.\mbox{\hyperlink{structstbi____pngchunk_a81f65deb74d9108a6ac6ff4a4d87b2e3}{length}};}
\DoxyCodeLine{4474             \textcolor{keywordflow}{break};}
\DoxyCodeLine{4475          \}}
\DoxyCodeLine{4476 }
\DoxyCodeLine{4477          \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__image_8h_a47396ef3e67a7b5d28bec75467a682da}{STBI\_\_PNG\_TYPE}}(\textcolor{charliteral}{'I'},\textcolor{charliteral}{'E'},\textcolor{charliteral}{'N'},\textcolor{charliteral}{'D'}): \{}
\DoxyCodeLine{4478             \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}} raw\_len, bpl;}
\DoxyCodeLine{4479             \textcolor{keywordflow}{if} (first) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}first not IHDR"{}}, \textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4480             \textcolor{keywordflow}{if} (scan != \mbox{\hyperlink{stb__image_8h_ab04a0655cd1e3bcac5e8f48c18df1a57a707d4eb401c81600fe01d18c101ba6c2}{STBI\_\_SCAN\_load}}) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4481             \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____png_a49ec2b3f8f3e7374671a680e201a96e2}{idata}} == NULL) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}no IDAT"{}},\textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4482             \textcolor{comment}{// initial guess for decoded data size to avoid unnecessary reallocs}}
\DoxyCodeLine{4483             bpl = (s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} * depth + 7) / 8; \textcolor{comment}{// bytes per line, per component}}
\DoxyCodeLine{4484             raw\_len = bpl * s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}} * s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}} \textcolor{comment}{/* pixels */} + s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}} \textcolor{comment}{/* filter mode per row */};}
\DoxyCodeLine{4485             z-\/>\mbox{\hyperlink{structstbi____png_a0ab3f5f6b62556a166602d6cf431eb5c}{expanded}} = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) \mbox{\hyperlink{stb__image_8h_adc3de199aa29f7370a699ad545155541}{stbi\_zlib\_decode\_malloc\_guesssize\_headerflag}}((\textcolor{keywordtype}{char} *) z-\/>\mbox{\hyperlink{structstbi____png_a49ec2b3f8f3e7374671a680e201a96e2}{idata}}, ioff, raw\_len, (\textcolor{keywordtype}{int} *) \&raw\_len, !is\_iphone);}
\DoxyCodeLine{4486             \textcolor{keywordflow}{if} (z-\/>\mbox{\hyperlink{structstbi____png_a0ab3f5f6b62556a166602d6cf431eb5c}{expanded}} == NULL) \textcolor{keywordflow}{return} 0; \textcolor{comment}{// zlib should set error}}
\DoxyCodeLine{4487             \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(z-\/>\mbox{\hyperlink{structstbi____png_a49ec2b3f8f3e7374671a680e201a96e2}{idata}}); z-\/>\mbox{\hyperlink{structstbi____png_a49ec2b3f8f3e7374671a680e201a96e2}{idata}} = NULL;}
\DoxyCodeLine{4488             \textcolor{keywordflow}{if} ((req\_comp == s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}}+1 \&\& req\_comp != 3 \&\& !pal\_img\_n) || has\_trans)}
\DoxyCodeLine{4489                s-\/>\mbox{\hyperlink{structstbi____context_afcb00d245c4b9b5ecbc3788e3085881e}{img\_out\_n}} = s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}}+1;}
\DoxyCodeLine{4490             \textcolor{keywordflow}{else}}
\DoxyCodeLine{4491                s-\/>\mbox{\hyperlink{structstbi____context_afcb00d245c4b9b5ecbc3788e3085881e}{img\_out\_n}} = s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}};}
\DoxyCodeLine{4492             \textcolor{keywordflow}{if} (!stbi\_\_create\_png\_image(z, z-\/>\mbox{\hyperlink{structstbi____png_a0ab3f5f6b62556a166602d6cf431eb5c}{expanded}}, raw\_len, s-\/>\mbox{\hyperlink{structstbi____context_afcb00d245c4b9b5ecbc3788e3085881e}{img\_out\_n}}, depth, color, interlace)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4493             \textcolor{keywordflow}{if} (has\_trans)}
\DoxyCodeLine{4494                \textcolor{keywordflow}{if} (!stbi\_\_compute\_transparency(z, tc, s-\/>\mbox{\hyperlink{structstbi____context_afcb00d245c4b9b5ecbc3788e3085881e}{img\_out\_n}})) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4495             \textcolor{keywordflow}{if} (is\_iphone \&\& stbi\_\_de\_iphone\_flag \&\& s-\/>\mbox{\hyperlink{structstbi____context_afcb00d245c4b9b5ecbc3788e3085881e}{img\_out\_n}} > 2)}
\DoxyCodeLine{4496                stbi\_\_de\_iphone(z);}
\DoxyCodeLine{4497             \textcolor{keywordflow}{if} (pal\_img\_n) \{}
\DoxyCodeLine{4498                \textcolor{comment}{// pal\_img\_n == 3 or 4}}
\DoxyCodeLine{4499                s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}} = pal\_img\_n; \textcolor{comment}{// record the actual colors we had}}
\DoxyCodeLine{4500                s-\/>\mbox{\hyperlink{structstbi____context_afcb00d245c4b9b5ecbc3788e3085881e}{img\_out\_n}} = pal\_img\_n;}
\DoxyCodeLine{4501                \textcolor{keywordflow}{if} (req\_comp >= 3) s-\/>\mbox{\hyperlink{structstbi____context_afcb00d245c4b9b5ecbc3788e3085881e}{img\_out\_n}} = req\_comp;}
\DoxyCodeLine{4502                \textcolor{keywordflow}{if} (!stbi\_\_expand\_png\_palette(z, palette, pal\_len, s-\/>\mbox{\hyperlink{structstbi____context_afcb00d245c4b9b5ecbc3788e3085881e}{img\_out\_n}}))}
\DoxyCodeLine{4503                   \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4504             \}}
\DoxyCodeLine{4505             \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(z-\/>\mbox{\hyperlink{structstbi____png_a0ab3f5f6b62556a166602d6cf431eb5c}{expanded}}); z-\/>\mbox{\hyperlink{structstbi____png_a0ab3f5f6b62556a166602d6cf431eb5c}{expanded}} = NULL;}
\DoxyCodeLine{4506             \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4507          \}}
\DoxyCodeLine{4508 }
\DoxyCodeLine{4509          \textcolor{keywordflow}{default}:}
\DoxyCodeLine{4510             \textcolor{comment}{// if critical, fail}}
\DoxyCodeLine{4511             \textcolor{keywordflow}{if} (first) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}first not IHDR"{}}, \textcolor{stringliteral}{"{}Corrupt PNG"{}});}
\DoxyCodeLine{4512             \textcolor{keywordflow}{if} ((c.\mbox{\hyperlink{structstbi____pngchunk_a92b7b7a50f90f9e9fb1a97effe1689a6}{type}} \& (1 << 29)) == 0) \{}
\DoxyCodeLine{4513 \textcolor{preprocessor}{               \#ifndef STBI\_NO\_FAILURE\_STRINGS}}
\DoxyCodeLine{4514                \textcolor{comment}{// not threadsafe}}
\DoxyCodeLine{4515                \textcolor{keyword}{static} \textcolor{keywordtype}{char} invalid\_chunk[] = \textcolor{stringliteral}{"{}XXXX PNG chunk not known"{}};}
\DoxyCodeLine{4516                invalid\_chunk[0] = \mbox{\hyperlink{stb__image_8h_a984e56c100b40a90db2bc9bf0dd8b9d5}{STBI\_\_BYTECAST}}(c.\mbox{\hyperlink{structstbi____pngchunk_a92b7b7a50f90f9e9fb1a97effe1689a6}{type}} >> 24);}
\DoxyCodeLine{4517                invalid\_chunk[1] = \mbox{\hyperlink{stb__image_8h_a984e56c100b40a90db2bc9bf0dd8b9d5}{STBI\_\_BYTECAST}}(c.\mbox{\hyperlink{structstbi____pngchunk_a92b7b7a50f90f9e9fb1a97effe1689a6}{type}} >> 16);}
\DoxyCodeLine{4518                invalid\_chunk[2] = \mbox{\hyperlink{stb__image_8h_a984e56c100b40a90db2bc9bf0dd8b9d5}{STBI\_\_BYTECAST}}(c.\mbox{\hyperlink{structstbi____pngchunk_a92b7b7a50f90f9e9fb1a97effe1689a6}{type}} >>  8);}
\DoxyCodeLine{4519                invalid\_chunk[3] = \mbox{\hyperlink{stb__image_8h_a984e56c100b40a90db2bc9bf0dd8b9d5}{STBI\_\_BYTECAST}}(c.\mbox{\hyperlink{structstbi____pngchunk_a92b7b7a50f90f9e9fb1a97effe1689a6}{type}} >>  0);}
\DoxyCodeLine{4520 \textcolor{preprocessor}{               \#endif}}
\DoxyCodeLine{4521                \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(invalid\_chunk, \textcolor{stringliteral}{"{}PNG not supported: unknown PNG chunk type"{}});}
\DoxyCodeLine{4522             \}}
\DoxyCodeLine{4523             stbi\_\_skip(s, c.\mbox{\hyperlink{structstbi____pngchunk_a81f65deb74d9108a6ac6ff4a4d87b2e3}{length}});}
\DoxyCodeLine{4524             \textcolor{keywordflow}{break};}
\DoxyCodeLine{4525       \}}
\DoxyCodeLine{4526       \textcolor{comment}{// end of PNG chunk, read and skip CRC}}
\DoxyCodeLine{4527       stbi\_\_get32be(s);}
\DoxyCodeLine{4528    \}}
\DoxyCodeLine{4529 \}}
\DoxyCodeLine{4530 }
\DoxyCodeLine{4531 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *stbi\_\_do\_png(\mbox{\hyperlink{structstbi____png}{stbi\_\_png}} *p, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *n, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{4532 \{}
\DoxyCodeLine{4533    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *result=NULL;}
\DoxyCodeLine{4534    \textcolor{keywordflow}{if} (req\_comp < 0 || req\_comp > 4) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}bad req\_comp"{}}, \textcolor{stringliteral}{"{}Internal error"{}});}
\DoxyCodeLine{4535    \textcolor{keywordflow}{if} (stbi\_\_parse\_png\_file(p, \mbox{\hyperlink{stb__image_8h_ab04a0655cd1e3bcac5e8f48c18df1a57a707d4eb401c81600fe01d18c101ba6c2}{STBI\_\_SCAN\_load}}, req\_comp)) \{}
\DoxyCodeLine{4536       result = p-\/>\mbox{\hyperlink{structstbi____png_ac90432452f6716f4d9f63012ef5ec038}{out}};}
\DoxyCodeLine{4537       p-\/>\mbox{\hyperlink{structstbi____png_ac90432452f6716f4d9f63012ef5ec038}{out}} = NULL;}
\DoxyCodeLine{4538       \textcolor{keywordflow}{if} (req\_comp \&\& req\_comp != p-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}}-\/>\mbox{\hyperlink{structstbi____context_afcb00d245c4b9b5ecbc3788e3085881e}{img\_out\_n}}) \{}
\DoxyCodeLine{4539          result = stbi\_\_convert\_format(result, p-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}}-\/>\mbox{\hyperlink{structstbi____context_afcb00d245c4b9b5ecbc3788e3085881e}{img\_out\_n}}, req\_comp, p-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}}-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}}, p-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}}-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}});}
\DoxyCodeLine{4540          p-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}}-\/>\mbox{\hyperlink{structstbi____context_afcb00d245c4b9b5ecbc3788e3085881e}{img\_out\_n}} = req\_comp;}
\DoxyCodeLine{4541          \textcolor{keywordflow}{if} (result == NULL) \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{4542       \}}
\DoxyCodeLine{4543       *x = p-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}}-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}};}
\DoxyCodeLine{4544       *y = p-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}}-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}};}
\DoxyCodeLine{4545       \textcolor{keywordflow}{if} (n) *n = p-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}}-\/>\mbox{\hyperlink{structstbi____context_afcb00d245c4b9b5ecbc3788e3085881e}{img\_out\_n}};}
\DoxyCodeLine{4546    \}}
\DoxyCodeLine{4547    \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(p-\/>\mbox{\hyperlink{structstbi____png_ac90432452f6716f4d9f63012ef5ec038}{out}});      p-\/>\mbox{\hyperlink{structstbi____png_ac90432452f6716f4d9f63012ef5ec038}{out}}      = NULL;}
\DoxyCodeLine{4548    \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(p-\/>\mbox{\hyperlink{structstbi____png_a0ab3f5f6b62556a166602d6cf431eb5c}{expanded}}); p-\/>\mbox{\hyperlink{structstbi____png_a0ab3f5f6b62556a166602d6cf431eb5c}{expanded}} = NULL;}
\DoxyCodeLine{4549    \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(p-\/>\mbox{\hyperlink{structstbi____png_a49ec2b3f8f3e7374671a680e201a96e2}{idata}});    p-\/>\mbox{\hyperlink{structstbi____png_a49ec2b3f8f3e7374671a680e201a96e2}{idata}}    = NULL;}
\DoxyCodeLine{4550 }
\DoxyCodeLine{4551    \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{4552 \}}
\DoxyCodeLine{4553 }
\DoxyCodeLine{4554 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *stbi\_\_png\_load(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{4555 \{}
\DoxyCodeLine{4556    \mbox{\hyperlink{structstbi____png}{stbi\_\_png}} p;}
\DoxyCodeLine{4557    p.\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}} = s;}
\DoxyCodeLine{4558    \textcolor{keywordflow}{return} stbi\_\_do\_png(\&p, x,y,comp,req\_comp);}
\DoxyCodeLine{4559 \}}
\DoxyCodeLine{4560 }
\DoxyCodeLine{4561 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_png\_test(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s)}
\DoxyCodeLine{4562 \{}
\DoxyCodeLine{4563    \textcolor{keywordtype}{int} r;}
\DoxyCodeLine{4564    r = stbi\_\_check\_png\_header(s);}
\DoxyCodeLine{4565    stbi\_\_rewind(s);}
\DoxyCodeLine{4566    \textcolor{keywordflow}{return} r;}
\DoxyCodeLine{4567 \}}
\DoxyCodeLine{4568 }
\DoxyCodeLine{4569 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_png\_info\_raw(\mbox{\hyperlink{structstbi____png}{stbi\_\_png}} *p, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{4570 \{}
\DoxyCodeLine{4571    \textcolor{keywordflow}{if} (!stbi\_\_parse\_png\_file(p, \mbox{\hyperlink{stb__image_8h_ab04a0655cd1e3bcac5e8f48c18df1a57a83675cb38c33efa3dd86b43996effea4}{STBI\_\_SCAN\_header}}, 0)) \{}
\DoxyCodeLine{4572       stbi\_\_rewind( p-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}} );}
\DoxyCodeLine{4573       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4574    \}}
\DoxyCodeLine{4575    \textcolor{keywordflow}{if} (x) *x = p-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}}-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}};}
\DoxyCodeLine{4576    \textcolor{keywordflow}{if} (y) *y = p-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}}-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}};}
\DoxyCodeLine{4577    \textcolor{keywordflow}{if} (comp) *comp = p-\/>\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}}-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}};}
\DoxyCodeLine{4578    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4579 \}}
\DoxyCodeLine{4580 }
\DoxyCodeLine{4581 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_png\_info(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{4582 \{}
\DoxyCodeLine{4583    \mbox{\hyperlink{structstbi____png}{stbi\_\_png}} p;}
\DoxyCodeLine{4584    p.\mbox{\hyperlink{structstbi____png_a2f8e11f0e4fb8d269cb235262f8bc969}{s}} = s;}
\DoxyCodeLine{4585    \textcolor{keywordflow}{return} stbi\_\_png\_info\_raw(\&p, x, y, comp);}
\DoxyCodeLine{4586 \}}
\DoxyCodeLine{4587 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{4588 }
\DoxyCodeLine{4589 \textcolor{comment}{// Microsoft/Windows BMP image}}
\DoxyCodeLine{4590 }
\DoxyCodeLine{4591 \textcolor{preprocessor}{\#ifndef STBI\_NO\_BMP}}
\DoxyCodeLine{4592 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_bmp\_test\_raw(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s)}
\DoxyCodeLine{4593 \{}
\DoxyCodeLine{4594    \textcolor{keywordtype}{int} r;}
\DoxyCodeLine{4595    \textcolor{keywordtype}{int} sz;}
\DoxyCodeLine{4596    \textcolor{keywordflow}{if} (stbi\_\_get8(s) != \textcolor{charliteral}{'B'}) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4597    \textcolor{keywordflow}{if} (stbi\_\_get8(s) != \textcolor{charliteral}{'M'}) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4598    stbi\_\_get32le(s); \textcolor{comment}{// discard filesize}}
\DoxyCodeLine{4599    stbi\_\_get16le(s); \textcolor{comment}{// discard reserved}}
\DoxyCodeLine{4600    stbi\_\_get16le(s); \textcolor{comment}{// discard reserved}}
\DoxyCodeLine{4601    stbi\_\_get32le(s); \textcolor{comment}{// discard data offset}}
\DoxyCodeLine{4602    sz = stbi\_\_get32le(s);}
\DoxyCodeLine{4603    r = (sz == 12 || sz == 40 || sz == 56 || sz == 108 || sz == 124);}
\DoxyCodeLine{4604    \textcolor{keywordflow}{return} r;}
\DoxyCodeLine{4605 \}}
\DoxyCodeLine{4606 }
\DoxyCodeLine{4607 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_bmp\_test(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s)}
\DoxyCodeLine{4608 \{}
\DoxyCodeLine{4609    \textcolor{keywordtype}{int} r = stbi\_\_bmp\_test\_raw(s);}
\DoxyCodeLine{4610    stbi\_\_rewind(s);}
\DoxyCodeLine{4611    \textcolor{keywordflow}{return} r;}
\DoxyCodeLine{4612 \}}
\DoxyCodeLine{4613 }
\DoxyCodeLine{4614 }
\DoxyCodeLine{4615 \textcolor{comment}{// returns 0..31 for the highest set bit}}
\DoxyCodeLine{4616 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_high\_bit(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} z)}
\DoxyCodeLine{4617 \{}
\DoxyCodeLine{4618    \textcolor{keywordtype}{int} n=0;}
\DoxyCodeLine{4619    \textcolor{keywordflow}{if} (z == 0) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{4620    \textcolor{keywordflow}{if} (z >= 0x10000) n += 16, z >>= 16;}
\DoxyCodeLine{4621    \textcolor{keywordflow}{if} (z >= 0x00100) n +=  8, z >>=  8;}
\DoxyCodeLine{4622    \textcolor{keywordflow}{if} (z >= 0x00010) n +=  4, z >>=  4;}
\DoxyCodeLine{4623    \textcolor{keywordflow}{if} (z >= 0x00004) n +=  2, z >>=  2;}
\DoxyCodeLine{4624    \textcolor{keywordflow}{if} (z >= 0x00002) n +=  1, z >>=  1;}
\DoxyCodeLine{4625    \textcolor{keywordflow}{return} n;}
\DoxyCodeLine{4626 \}}
\DoxyCodeLine{4627 }
\DoxyCodeLine{4628 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_bitcount(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} a)}
\DoxyCodeLine{4629 \{}
\DoxyCodeLine{4630    a = (a \& 0x55555555) + ((a >>  1) \& 0x55555555); \textcolor{comment}{// max 2}}
\DoxyCodeLine{4631    a = (a \& 0x33333333) + ((a >>  2) \& 0x33333333); \textcolor{comment}{// max 4}}
\DoxyCodeLine{4632    a = (a + (a >> 4)) \& 0x0f0f0f0f; \textcolor{comment}{// max 8 per 4, now 8 bits}}
\DoxyCodeLine{4633    a = (a + (a >> 8)); \textcolor{comment}{// max 16 per 8 bits}}
\DoxyCodeLine{4634    a = (a + (a >> 16)); \textcolor{comment}{// max 32 per 8 bits}}
\DoxyCodeLine{4635    \textcolor{keywordflow}{return} a \& 0xff;}
\DoxyCodeLine{4636 \}}
\DoxyCodeLine{4637 }
\DoxyCodeLine{4638 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_shiftsigned(\textcolor{keywordtype}{int} v, \textcolor{keywordtype}{int} shift, \textcolor{keywordtype}{int} bits)}
\DoxyCodeLine{4639 \{}
\DoxyCodeLine{4640    \textcolor{keywordtype}{int} result;}
\DoxyCodeLine{4641    \textcolor{keywordtype}{int} z=0;}
\DoxyCodeLine{4642 }
\DoxyCodeLine{4643    \textcolor{keywordflow}{if} (shift < 0) v <<= -\/shift;}
\DoxyCodeLine{4644    \textcolor{keywordflow}{else} v >>= shift;}
\DoxyCodeLine{4645    result = v;}
\DoxyCodeLine{4646 }
\DoxyCodeLine{4647    z = bits;}
\DoxyCodeLine{4648    \textcolor{keywordflow}{while} (z < 8) \{}
\DoxyCodeLine{4649       result += v >> z;}
\DoxyCodeLine{4650       z += bits;}
\DoxyCodeLine{4651    \}}
\DoxyCodeLine{4652    \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{4653 \}}
\DoxyCodeLine{4654 }
\DoxyCodeLine{4655 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_bmp\_load(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{4656 \{}
\DoxyCodeLine{4657    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out;}
\DoxyCodeLine{4658    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} mr=0,mg=0,mb=0,ma=0, all\_a=255;}
\DoxyCodeLine{4659    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} pal[256][4];}
\DoxyCodeLine{4660    \textcolor{keywordtype}{int} psize=0,i,j,compress=0,width;}
\DoxyCodeLine{4661    \textcolor{keywordtype}{int} bpp, flip\_vertically, pad, target, offset, hsz;}
\DoxyCodeLine{4662    \textcolor{keywordflow}{if} (stbi\_\_get8(s) != \textcolor{charliteral}{'B'} || stbi\_\_get8(s) != \textcolor{charliteral}{'M'}) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}not BMP"{}}, \textcolor{stringliteral}{"{}Corrupt BMP"{}});}
\DoxyCodeLine{4663    stbi\_\_get32le(s); \textcolor{comment}{// discard filesize}}
\DoxyCodeLine{4664    stbi\_\_get16le(s); \textcolor{comment}{// discard reserved}}
\DoxyCodeLine{4665    stbi\_\_get16le(s); \textcolor{comment}{// discard reserved}}
\DoxyCodeLine{4666    offset = stbi\_\_get32le(s);}
\DoxyCodeLine{4667    hsz = stbi\_\_get32le(s);}
\DoxyCodeLine{4668    \textcolor{keywordflow}{if} (hsz != 12 \&\& hsz != 40 \&\& hsz != 56 \&\& hsz != 108 \&\& hsz != 124) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}unknown BMP"{}}, \textcolor{stringliteral}{"{}BMP type not supported: unknown"{}});}
\DoxyCodeLine{4669    \textcolor{keywordflow}{if} (hsz == 12) \{}
\DoxyCodeLine{4670       s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} = stbi\_\_get16le(s);}
\DoxyCodeLine{4671       s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}} = stbi\_\_get16le(s);}
\DoxyCodeLine{4672    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4673       s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} = stbi\_\_get32le(s);}
\DoxyCodeLine{4674       s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}} = stbi\_\_get32le(s);}
\DoxyCodeLine{4675    \}}
\DoxyCodeLine{4676    \textcolor{keywordflow}{if} (stbi\_\_get16le(s) != 1) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}bad BMP"{}}, \textcolor{stringliteral}{"{}bad BMP"{}});}
\DoxyCodeLine{4677    bpp = stbi\_\_get16le(s);}
\DoxyCodeLine{4678    \textcolor{keywordflow}{if} (bpp == 1) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}monochrome"{}}, \textcolor{stringliteral}{"{}BMP type not supported: 1-\/bit"{}});}
\DoxyCodeLine{4679    flip\_vertically = ((int) s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}}) > 0;}
\DoxyCodeLine{4680    s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}} = abs((\textcolor{keywordtype}{int}) s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}});}
\DoxyCodeLine{4681    \textcolor{keywordflow}{if} (hsz == 12) \{}
\DoxyCodeLine{4682       \textcolor{keywordflow}{if} (bpp < 24)}
\DoxyCodeLine{4683          psize = (offset -\/ 14 -\/ 24) / 3;}
\DoxyCodeLine{4684    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4685       compress = stbi\_\_get32le(s);}
\DoxyCodeLine{4686       \textcolor{keywordflow}{if} (compress == 1 || compress == 2) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}BMP RLE"{}}, \textcolor{stringliteral}{"{}BMP type not supported: RLE"{}});}
\DoxyCodeLine{4687       stbi\_\_get32le(s); \textcolor{comment}{// discard sizeof}}
\DoxyCodeLine{4688       stbi\_\_get32le(s); \textcolor{comment}{// discard hres}}
\DoxyCodeLine{4689       stbi\_\_get32le(s); \textcolor{comment}{// discard vres}}
\DoxyCodeLine{4690       stbi\_\_get32le(s); \textcolor{comment}{// discard colorsused}}
\DoxyCodeLine{4691       stbi\_\_get32le(s); \textcolor{comment}{// discard max important}}
\DoxyCodeLine{4692       \textcolor{keywordflow}{if} (hsz == 40 || hsz == 56) \{}
\DoxyCodeLine{4693          \textcolor{keywordflow}{if} (hsz == 56) \{}
\DoxyCodeLine{4694             stbi\_\_get32le(s);}
\DoxyCodeLine{4695             stbi\_\_get32le(s);}
\DoxyCodeLine{4696             stbi\_\_get32le(s);}
\DoxyCodeLine{4697             stbi\_\_get32le(s);}
\DoxyCodeLine{4698          \}}
\DoxyCodeLine{4699          \textcolor{keywordflow}{if} (bpp == 16 || bpp == 32) \{}
\DoxyCodeLine{4700             mr = mg = mb = 0;}
\DoxyCodeLine{4701             \textcolor{keywordflow}{if} (compress == 0) \{}
\DoxyCodeLine{4702                \textcolor{keywordflow}{if} (bpp == 32) \{}
\DoxyCodeLine{4703                   mr = 0xffu << 16;}
\DoxyCodeLine{4704                   mg = 0xffu <<  8;}
\DoxyCodeLine{4705                   mb = 0xffu <<  0;}
\DoxyCodeLine{4706                   ma = 0xffu << 24;}
\DoxyCodeLine{4707                   all\_a = 0; \textcolor{comment}{// if all\_a is 0 at end, then we loaded alpha channel but it was all 0}}
\DoxyCodeLine{4708                \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4709                   mr = 31u << 10;}
\DoxyCodeLine{4710                   mg = 31u <<  5;}
\DoxyCodeLine{4711                   mb = 31u <<  0;}
\DoxyCodeLine{4712                \}}
\DoxyCodeLine{4713             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (compress == 3) \{}
\DoxyCodeLine{4714                mr = stbi\_\_get32le(s);}
\DoxyCodeLine{4715                mg = stbi\_\_get32le(s);}
\DoxyCodeLine{4716                mb = stbi\_\_get32le(s);}
\DoxyCodeLine{4717                \textcolor{comment}{// not documented, but generated by photoshop and handled by mspaint}}
\DoxyCodeLine{4718                \textcolor{keywordflow}{if} (mr == mg \&\& mg == mb) \{}
\DoxyCodeLine{4719                   \textcolor{comment}{// ?!?!?}}
\DoxyCodeLine{4720                   \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}bad BMP"{}}, \textcolor{stringliteral}{"{}bad BMP"{}});}
\DoxyCodeLine{4721                \}}
\DoxyCodeLine{4722             \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{4723                \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}bad BMP"{}}, \textcolor{stringliteral}{"{}bad BMP"{}});}
\DoxyCodeLine{4724          \}}
\DoxyCodeLine{4725       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4726          \mbox{\hyperlink{stb__image_8h_abcf0d8bc32a73fd449d918aac2ed3882}{STBI\_ASSERT}}(hsz == 108 || hsz == 124);}
\DoxyCodeLine{4727          mr = stbi\_\_get32le(s);}
\DoxyCodeLine{4728          mg = stbi\_\_get32le(s);}
\DoxyCodeLine{4729          mb = stbi\_\_get32le(s);}
\DoxyCodeLine{4730          ma = stbi\_\_get32le(s);}
\DoxyCodeLine{4731          stbi\_\_get32le(s); \textcolor{comment}{// discard color space}}
\DoxyCodeLine{4732          \textcolor{keywordflow}{for} (i=0; i < 12; ++i)}
\DoxyCodeLine{4733             stbi\_\_get32le(s); \textcolor{comment}{// discard color space parameters}}
\DoxyCodeLine{4734          \textcolor{keywordflow}{if} (hsz == 124) \{}
\DoxyCodeLine{4735             stbi\_\_get32le(s); \textcolor{comment}{// discard rendering intent}}
\DoxyCodeLine{4736             stbi\_\_get32le(s); \textcolor{comment}{// discard offset of profile data}}
\DoxyCodeLine{4737             stbi\_\_get32le(s); \textcolor{comment}{// discard size of profile data}}
\DoxyCodeLine{4738             stbi\_\_get32le(s); \textcolor{comment}{// discard reserved}}
\DoxyCodeLine{4739          \}}
\DoxyCodeLine{4740       \}}
\DoxyCodeLine{4741       \textcolor{keywordflow}{if} (bpp < 16)}
\DoxyCodeLine{4742          psize = (offset -\/ 14 -\/ hsz) >> 2;}
\DoxyCodeLine{4743    \}}
\DoxyCodeLine{4744    s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}} = ma ? 4 : 3;}
\DoxyCodeLine{4745    \textcolor{keywordflow}{if} (req\_comp \&\& req\_comp >= 3) \textcolor{comment}{// we can directly decode 3 or 4}}
\DoxyCodeLine{4746       target = req\_comp;}
\DoxyCodeLine{4747    \textcolor{keywordflow}{else}}
\DoxyCodeLine{4748       target = s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}}; \textcolor{comment}{// if they want monochrome, we'll post-\/convert}}
\DoxyCodeLine{4749    out = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc(target * s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} * s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}});}
\DoxyCodeLine{4750    \textcolor{keywordflow}{if} (!out) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{4751    \textcolor{keywordflow}{if} (bpp < 16) \{}
\DoxyCodeLine{4752       \textcolor{keywordtype}{int} z=0;}
\DoxyCodeLine{4753       \textcolor{keywordflow}{if} (psize == 0 || psize > 256) \{ \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(out); \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}invalid"{}}, \textcolor{stringliteral}{"{}Corrupt BMP"{}}); \}}
\DoxyCodeLine{4754       \textcolor{keywordflow}{for} (i=0; i < psize; ++i) \{}
\DoxyCodeLine{4755          pal[i][2] = stbi\_\_get8(s);}
\DoxyCodeLine{4756          pal[i][1] = stbi\_\_get8(s);}
\DoxyCodeLine{4757          pal[i][0] = stbi\_\_get8(s);}
\DoxyCodeLine{4758          \textcolor{keywordflow}{if} (hsz != 12) stbi\_\_get8(s);}
\DoxyCodeLine{4759          pal[i][3] = 255;}
\DoxyCodeLine{4760       \}}
\DoxyCodeLine{4761       stbi\_\_skip(s, offset -\/ 14 -\/ hsz -\/ psize * (hsz == 12 ? 3 : 4));}
\DoxyCodeLine{4762       \textcolor{keywordflow}{if} (bpp == 4) width = (s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} + 1) >> 1;}
\DoxyCodeLine{4763       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (bpp == 8) width = s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}};}
\DoxyCodeLine{4764       \textcolor{keywordflow}{else} \{ \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(out); \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}bad bpp"{}}, \textcolor{stringliteral}{"{}Corrupt BMP"{}}); \}}
\DoxyCodeLine{4765       pad = (-\/width)\&3;}
\DoxyCodeLine{4766       \textcolor{keywordflow}{for} (j=0; j < (int) s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}}; ++j) \{}
\DoxyCodeLine{4767          \textcolor{keywordflow}{for} (i=0; i < (int) s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}}; i += 2) \{}
\DoxyCodeLine{4768             \textcolor{keywordtype}{int} v=stbi\_\_get8(s),v2=0;}
\DoxyCodeLine{4769             \textcolor{keywordflow}{if} (bpp == 4) \{}
\DoxyCodeLine{4770                v2 = v \& 15;}
\DoxyCodeLine{4771                v >>= 4;}
\DoxyCodeLine{4772             \}}
\DoxyCodeLine{4773             out[z++] = pal[v][0];}
\DoxyCodeLine{4774             out[z++] = pal[v][1];}
\DoxyCodeLine{4775             out[z++] = pal[v][2];}
\DoxyCodeLine{4776             \textcolor{keywordflow}{if} (target == 4) out[z++] = 255;}
\DoxyCodeLine{4777             \textcolor{keywordflow}{if} (i+1 == (\textcolor{keywordtype}{int}) s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}}) \textcolor{keywordflow}{break};}
\DoxyCodeLine{4778             v = (bpp == 8) ? stbi\_\_get8(s) : v2;}
\DoxyCodeLine{4779             out[z++] = pal[v][0];}
\DoxyCodeLine{4780             out[z++] = pal[v][1];}
\DoxyCodeLine{4781             out[z++] = pal[v][2];}
\DoxyCodeLine{4782             \textcolor{keywordflow}{if} (target == 4) out[z++] = 255;}
\DoxyCodeLine{4783          \}}
\DoxyCodeLine{4784          stbi\_\_skip(s, pad);}
\DoxyCodeLine{4785       \}}
\DoxyCodeLine{4786    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4787       \textcolor{keywordtype}{int} rshift=0,gshift=0,bshift=0,ashift=0,rcount=0,gcount=0,bcount=0,acount=0;}
\DoxyCodeLine{4788       \textcolor{keywordtype}{int} z = 0;}
\DoxyCodeLine{4789       \textcolor{keywordtype}{int} easy=0;}
\DoxyCodeLine{4790       stbi\_\_skip(s, offset -\/ 14 -\/ hsz);}
\DoxyCodeLine{4791       \textcolor{keywordflow}{if} (bpp == 24) width = 3 * s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}};}
\DoxyCodeLine{4792       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (bpp == 16) width = 2*s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}};}
\DoxyCodeLine{4793       \textcolor{keywordflow}{else} \textcolor{comment}{/* bpp = 32 and pad = 0 */} width=0;}
\DoxyCodeLine{4794       pad = (-\/width) \& 3;}
\DoxyCodeLine{4795       \textcolor{keywordflow}{if} (bpp == 24) \{}
\DoxyCodeLine{4796          easy = 1;}
\DoxyCodeLine{4797       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (bpp == 32) \{}
\DoxyCodeLine{4798          \textcolor{keywordflow}{if} (mb == 0xff \&\& mg == 0xff00 \&\& mr == 0x00ff0000 \&\& ma == 0xff000000)}
\DoxyCodeLine{4799             easy = 2;}
\DoxyCodeLine{4800       \}}
\DoxyCodeLine{4801       \textcolor{keywordflow}{if} (!easy) \{}
\DoxyCodeLine{4802          \textcolor{keywordflow}{if} (!mr || !mg || !mb) \{ \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(out); \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}bad masks"{}}, \textcolor{stringliteral}{"{}Corrupt BMP"{}}); \}}
\DoxyCodeLine{4803          \textcolor{comment}{// right shift amt to put high bit in position \#7}}
\DoxyCodeLine{4804          rshift = stbi\_\_high\_bit(mr)-\/7; rcount = stbi\_\_bitcount(mr);}
\DoxyCodeLine{4805          gshift = stbi\_\_high\_bit(mg)-\/7; gcount = stbi\_\_bitcount(mg);}
\DoxyCodeLine{4806          bshift = stbi\_\_high\_bit(mb)-\/7; bcount = stbi\_\_bitcount(mb);}
\DoxyCodeLine{4807          ashift = stbi\_\_high\_bit(ma)-\/7; acount = stbi\_\_bitcount(ma);}
\DoxyCodeLine{4808       \}}
\DoxyCodeLine{4809       \textcolor{keywordflow}{for} (j=0; j < (int) s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}}; ++j) \{}
\DoxyCodeLine{4810          \textcolor{keywordflow}{if} (easy) \{}
\DoxyCodeLine{4811             \textcolor{keywordflow}{for} (i=0; i < (int) s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}}; ++i) \{}
\DoxyCodeLine{4812                \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} a;}
\DoxyCodeLine{4813                out[z+2] = stbi\_\_get8(s);}
\DoxyCodeLine{4814                out[z+1] = stbi\_\_get8(s);}
\DoxyCodeLine{4815                out[z+0] = stbi\_\_get8(s);}
\DoxyCodeLine{4816                z += 3;}
\DoxyCodeLine{4817                a = (easy == 2 ? stbi\_\_get8(s) : 255);}
\DoxyCodeLine{4818                all\_a |= a;}
\DoxyCodeLine{4819                \textcolor{keywordflow}{if} (target == 4) out[z++] = a;}
\DoxyCodeLine{4820             \}}
\DoxyCodeLine{4821          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4822             \textcolor{keywordflow}{for} (i=0; i < (int) s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}}; ++i) \{}
\DoxyCodeLine{4823                \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}} v = (bpp == 16 ? (\mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}}) stbi\_\_get16le(s) : stbi\_\_get32le(s));}
\DoxyCodeLine{4824                \textcolor{keywordtype}{int} a;}
\DoxyCodeLine{4825                out[z++] = \mbox{\hyperlink{stb__image_8h_a984e56c100b40a90db2bc9bf0dd8b9d5}{STBI\_\_BYTECAST}}(stbi\_\_shiftsigned(v \& mr, rshift, rcount));}
\DoxyCodeLine{4826                out[z++] = \mbox{\hyperlink{stb__image_8h_a984e56c100b40a90db2bc9bf0dd8b9d5}{STBI\_\_BYTECAST}}(stbi\_\_shiftsigned(v \& mg, gshift, gcount));}
\DoxyCodeLine{4827                out[z++] = \mbox{\hyperlink{stb__image_8h_a984e56c100b40a90db2bc9bf0dd8b9d5}{STBI\_\_BYTECAST}}(stbi\_\_shiftsigned(v \& mb, bshift, bcount));}
\DoxyCodeLine{4828                a = (ma ? stbi\_\_shiftsigned(v \& ma, ashift, acount) : 255);}
\DoxyCodeLine{4829                all\_a |= a;}
\DoxyCodeLine{4830                \textcolor{keywordflow}{if} (target == 4) out[z++] = \mbox{\hyperlink{stb__image_8h_a984e56c100b40a90db2bc9bf0dd8b9d5}{STBI\_\_BYTECAST}}(a);}
\DoxyCodeLine{4831             \}}
\DoxyCodeLine{4832          \}}
\DoxyCodeLine{4833          stbi\_\_skip(s, pad);}
\DoxyCodeLine{4834       \}}
\DoxyCodeLine{4835    \}}
\DoxyCodeLine{4836    }
\DoxyCodeLine{4837    \textcolor{comment}{// if alpha channel is all 0s, replace with all 255s}}
\DoxyCodeLine{4838    \textcolor{keywordflow}{if} (target == 4 \&\& all\_a == 0)}
\DoxyCodeLine{4839       \textcolor{keywordflow}{for} (i=4*s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}}*s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}}-\/1; i >= 0; i -\/= 4)}
\DoxyCodeLine{4840          out[i] = 255;}
\DoxyCodeLine{4841 }
\DoxyCodeLine{4842    \textcolor{keywordflow}{if} (flip\_vertically) \{}
\DoxyCodeLine{4843       \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} t;}
\DoxyCodeLine{4844       \textcolor{keywordflow}{for} (j=0; j < (int) s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}}>>1; ++j) \{}
\DoxyCodeLine{4845          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *p1 = out +      j     *s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}}*target;}
\DoxyCodeLine{4846          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *p2 = out + (s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}}-\/1-\/j)*s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}}*target;}
\DoxyCodeLine{4847          for (i=0; i < (int) s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}}*target; ++i) \{}
\DoxyCodeLine{4848             t = p1[i], p1[i] = p2[i], p2[i] = t;}
\DoxyCodeLine{4849          \}}
\DoxyCodeLine{4850       \}}
\DoxyCodeLine{4851    \}}
\DoxyCodeLine{4852 }
\DoxyCodeLine{4853    \textcolor{keywordflow}{if} (req\_comp \&\& req\_comp != target) \{}
\DoxyCodeLine{4854       out = stbi\_\_convert\_format(out, target, req\_comp, s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}}, s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}});}
\DoxyCodeLine{4855       \textcolor{keywordflow}{if} (out == NULL) \textcolor{keywordflow}{return} out; \textcolor{comment}{// stbi\_\_convert\_format frees input on failure}}
\DoxyCodeLine{4856    \}}
\DoxyCodeLine{4857 }
\DoxyCodeLine{4858    *x = s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}};}
\DoxyCodeLine{4859    *y = s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}};}
\DoxyCodeLine{4860    \textcolor{keywordflow}{if} (comp) *comp = s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}};}
\DoxyCodeLine{4861    \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{4862 \}}
\DoxyCodeLine{4863 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{4864 }
\DoxyCodeLine{4865 \textcolor{comment}{// Targa Truevision -\/ TGA}}
\DoxyCodeLine{4866 \textcolor{comment}{// by Jonathan Dummer}}
\DoxyCodeLine{4867 \textcolor{preprocessor}{\#ifndef STBI\_NO\_TGA}}
\DoxyCodeLine{4868 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_tga\_info(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{4869 \{}
\DoxyCodeLine{4870     \textcolor{keywordtype}{int} tga\_w, tga\_h, tga\_comp;}
\DoxyCodeLine{4871     \textcolor{keywordtype}{int} sz;}
\DoxyCodeLine{4872     stbi\_\_get8(s);                   \textcolor{comment}{// discard Offset}}
\DoxyCodeLine{4873     sz = stbi\_\_get8(s);              \textcolor{comment}{// color type}}
\DoxyCodeLine{4874     \textcolor{keywordflow}{if}( sz > 1 ) \{}
\DoxyCodeLine{4875         stbi\_\_rewind(s);}
\DoxyCodeLine{4876         \textcolor{keywordflow}{return} 0;      \textcolor{comment}{// only RGB or indexed allowed}}
\DoxyCodeLine{4877     \}}
\DoxyCodeLine{4878     sz = stbi\_\_get8(s);              \textcolor{comment}{// image type}}
\DoxyCodeLine{4879     \textcolor{comment}{// only RGB or grey allowed, +/-\/ RLE}}
\DoxyCodeLine{4880     \textcolor{keywordflow}{if} ((sz != 1) \&\& (sz != 2) \&\& (sz != 3) \&\& (sz != 9) \&\& (sz != 10) \&\& (sz != 11)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4881     stbi\_\_skip(s,9);}
\DoxyCodeLine{4882     tga\_w = stbi\_\_get16le(s);}
\DoxyCodeLine{4883     \textcolor{keywordflow}{if}( tga\_w < 1 ) \{}
\DoxyCodeLine{4884         stbi\_\_rewind(s);}
\DoxyCodeLine{4885         \textcolor{keywordflow}{return} 0;   \textcolor{comment}{// test width}}
\DoxyCodeLine{4886     \}}
\DoxyCodeLine{4887     tga\_h = stbi\_\_get16le(s);}
\DoxyCodeLine{4888     \textcolor{keywordflow}{if}( tga\_h < 1 ) \{}
\DoxyCodeLine{4889         stbi\_\_rewind(s);}
\DoxyCodeLine{4890         \textcolor{keywordflow}{return} 0;   \textcolor{comment}{// test height}}
\DoxyCodeLine{4891     \}}
\DoxyCodeLine{4892     sz = stbi\_\_get8(s);               \textcolor{comment}{// bits per pixel}}
\DoxyCodeLine{4893     \textcolor{comment}{// only RGB or RGBA or grey allowed}}
\DoxyCodeLine{4894     \textcolor{keywordflow}{if} ((sz != 8) \&\& (sz != 16) \&\& (sz != 24) \&\& (sz != 32)) \{}
\DoxyCodeLine{4895         stbi\_\_rewind(s);}
\DoxyCodeLine{4896         \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4897     \}}
\DoxyCodeLine{4898     tga\_comp = sz;}
\DoxyCodeLine{4899     \textcolor{keywordflow}{if} (x) *x = tga\_w;}
\DoxyCodeLine{4900     \textcolor{keywordflow}{if} (y) *y = tga\_h;}
\DoxyCodeLine{4901     \textcolor{keywordflow}{if} (comp) *comp = tga\_comp / 8;}
\DoxyCodeLine{4902     \textcolor{keywordflow}{return} 1;                   \textcolor{comment}{// seems to have passed everything}}
\DoxyCodeLine{4903 \}}
\DoxyCodeLine{4904 }
\DoxyCodeLine{4905 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_tga\_test(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s)}
\DoxyCodeLine{4906 \{}
\DoxyCodeLine{4907    \textcolor{keywordtype}{int} res;}
\DoxyCodeLine{4908    \textcolor{keywordtype}{int} sz;}
\DoxyCodeLine{4909    stbi\_\_get8(s);      \textcolor{comment}{//   discard Offset}}
\DoxyCodeLine{4910    sz = stbi\_\_get8(s);   \textcolor{comment}{//   color type}}
\DoxyCodeLine{4911    \textcolor{keywordflow}{if} ( sz > 1 ) \textcolor{keywordflow}{return} 0;   \textcolor{comment}{//   only RGB or indexed allowed}}
\DoxyCodeLine{4912    sz = stbi\_\_get8(s);   \textcolor{comment}{//   image type}}
\DoxyCodeLine{4913    \textcolor{keywordflow}{if} ( (sz != 1) \&\& (sz != 2) \&\& (sz != 3) \&\& (sz != 9) \&\& (sz != 10) \&\& (sz != 11) ) \textcolor{keywordflow}{return} 0;   \textcolor{comment}{//   only RGB or grey allowed, +/-\/ RLE}}
\DoxyCodeLine{4914    stbi\_\_get16be(s);      \textcolor{comment}{//   discard palette start}}
\DoxyCodeLine{4915    stbi\_\_get16be(s);      \textcolor{comment}{//   discard palette length}}
\DoxyCodeLine{4916    stbi\_\_get8(s);         \textcolor{comment}{//   discard bits per palette color entry}}
\DoxyCodeLine{4917    stbi\_\_get16be(s);      \textcolor{comment}{//   discard x origin}}
\DoxyCodeLine{4918    stbi\_\_get16be(s);      \textcolor{comment}{//   discard y origin}}
\DoxyCodeLine{4919    \textcolor{keywordflow}{if} ( stbi\_\_get16be(s) < 1 ) \textcolor{keywordflow}{return} 0;      \textcolor{comment}{//   test width}}
\DoxyCodeLine{4920    \textcolor{keywordflow}{if} ( stbi\_\_get16be(s) < 1 ) \textcolor{keywordflow}{return} 0;      \textcolor{comment}{//   test height}}
\DoxyCodeLine{4921    sz = stbi\_\_get8(s);   \textcolor{comment}{//   bits per pixel}}
\DoxyCodeLine{4922    \textcolor{keywordflow}{if} ( (sz != 8) \&\& (sz != 16) \&\& (sz != 24) \&\& (sz != 32) )}
\DoxyCodeLine{4923       res = 0;}
\DoxyCodeLine{4924    \textcolor{keywordflow}{else}}
\DoxyCodeLine{4925       res = 1;}
\DoxyCodeLine{4926    stbi\_\_rewind(s);}
\DoxyCodeLine{4927    \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{4928 \}}
\DoxyCodeLine{4929 }
\DoxyCodeLine{4930 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_tga\_load(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{4931 \{}
\DoxyCodeLine{4932    \textcolor{comment}{//   read in the TGA header stuff}}
\DoxyCodeLine{4933    \textcolor{keywordtype}{int} tga\_offset = stbi\_\_get8(s);}
\DoxyCodeLine{4934    \textcolor{keywordtype}{int} tga\_indexed = stbi\_\_get8(s);}
\DoxyCodeLine{4935    \textcolor{keywordtype}{int} tga\_image\_type = stbi\_\_get8(s);}
\DoxyCodeLine{4936    \textcolor{keywordtype}{int} tga\_is\_RLE = 0;}
\DoxyCodeLine{4937    \textcolor{keywordtype}{int} tga\_palette\_start = stbi\_\_get16le(s);}
\DoxyCodeLine{4938    \textcolor{keywordtype}{int} tga\_palette\_len = stbi\_\_get16le(s);}
\DoxyCodeLine{4939    \textcolor{keywordtype}{int} tga\_palette\_bits = stbi\_\_get8(s);}
\DoxyCodeLine{4940    \textcolor{keywordtype}{int} tga\_x\_origin = stbi\_\_get16le(s);}
\DoxyCodeLine{4941    \textcolor{keywordtype}{int} tga\_y\_origin = stbi\_\_get16le(s);}
\DoxyCodeLine{4942    \textcolor{keywordtype}{int} tga\_width = stbi\_\_get16le(s);}
\DoxyCodeLine{4943    \textcolor{keywordtype}{int} tga\_height = stbi\_\_get16le(s);}
\DoxyCodeLine{4944    \textcolor{keywordtype}{int} tga\_bits\_per\_pixel = stbi\_\_get8(s);}
\DoxyCodeLine{4945    \textcolor{keywordtype}{int} tga\_comp = tga\_bits\_per\_pixel / 8;}
\DoxyCodeLine{4946    \textcolor{keywordtype}{int} tga\_inverted = stbi\_\_get8(s);}
\DoxyCodeLine{4947    \textcolor{comment}{//   image data}}
\DoxyCodeLine{4948    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *tga\_data;}
\DoxyCodeLine{4949    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *tga\_palette = NULL;}
\DoxyCodeLine{4950    \textcolor{keywordtype}{int} i, j;}
\DoxyCodeLine{4951    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} raw\_data[4];}
\DoxyCodeLine{4952    \textcolor{keywordtype}{int} RLE\_count = 0;}
\DoxyCodeLine{4953    \textcolor{keywordtype}{int} RLE\_repeating = 0;}
\DoxyCodeLine{4954    \textcolor{keywordtype}{int} read\_next\_pixel = 1;}
\DoxyCodeLine{4955 }
\DoxyCodeLine{4956    \textcolor{comment}{//   do a tiny bit of precessing}}
\DoxyCodeLine{4957    \textcolor{keywordflow}{if} ( tga\_image\_type >= 8 )}
\DoxyCodeLine{4958    \{}
\DoxyCodeLine{4959       tga\_image\_type -\/= 8;}
\DoxyCodeLine{4960       tga\_is\_RLE = 1;}
\DoxyCodeLine{4961    \}}
\DoxyCodeLine{4962    \textcolor{comment}{/* int tga\_alpha\_bits = tga\_inverted \& 15; */}}
\DoxyCodeLine{4963    tga\_inverted = 1 -\/ ((tga\_inverted >> 5) \& 1);}
\DoxyCodeLine{4964 }
\DoxyCodeLine{4965    \textcolor{comment}{//   error check}}
\DoxyCodeLine{4966    \textcolor{keywordflow}{if} ( \textcolor{comment}{//(tga\_indexed) ||}}
\DoxyCodeLine{4967       (tga\_width < 1) || (tga\_height < 1) ||}
\DoxyCodeLine{4968       (tga\_image\_type < 1) || (tga\_image\_type > 3) ||}
\DoxyCodeLine{4969       ((tga\_bits\_per\_pixel != 8) \&\& (tga\_bits\_per\_pixel != 16) \&\&}
\DoxyCodeLine{4970       (tga\_bits\_per\_pixel != 24) \&\& (tga\_bits\_per\_pixel != 32))}
\DoxyCodeLine{4971       )}
\DoxyCodeLine{4972    \{}
\DoxyCodeLine{4973       \textcolor{keywordflow}{return} NULL; \textcolor{comment}{// we don't report this as a bad TGA because we don't even know if it's TGA}}
\DoxyCodeLine{4974    \}}
\DoxyCodeLine{4975 }
\DoxyCodeLine{4976    \textcolor{comment}{//   If I'm paletted, then I'll use the number of bits from the palette}}
\DoxyCodeLine{4977    \textcolor{keywordflow}{if} ( tga\_indexed )}
\DoxyCodeLine{4978    \{}
\DoxyCodeLine{4979       tga\_comp = tga\_palette\_bits / 8;}
\DoxyCodeLine{4980    \}}
\DoxyCodeLine{4981 }
\DoxyCodeLine{4982    \textcolor{comment}{//   tga info}}
\DoxyCodeLine{4983    *x = tga\_width;}
\DoxyCodeLine{4984    *y = tga\_height;}
\DoxyCodeLine{4985    \textcolor{keywordflow}{if} (comp) *comp = tga\_comp;}
\DoxyCodeLine{4986 }
\DoxyCodeLine{4987    tga\_data = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}*)stbi\_\_malloc( (\textcolor{keywordtype}{size\_t})tga\_width * tga\_height * tga\_comp );}
\DoxyCodeLine{4988    \textcolor{keywordflow}{if} (!tga\_data) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{4989 }
\DoxyCodeLine{4990    \textcolor{comment}{// skip to the data's starting position (offset usually = 0)}}
\DoxyCodeLine{4991    stbi\_\_skip(s, tga\_offset );}
\DoxyCodeLine{4992 }
\DoxyCodeLine{4993    \textcolor{keywordflow}{if} ( !tga\_indexed \&\& !tga\_is\_RLE) \{}
\DoxyCodeLine{4994       \textcolor{keywordflow}{for} (i=0; i < tga\_height; ++i) \{}
\DoxyCodeLine{4995          \textcolor{keywordtype}{int} row = tga\_inverted ? tga\_height -\/i -\/ 1 : i;}
\DoxyCodeLine{4996          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *tga\_row = tga\_data + row*tga\_width*tga\_comp;}
\DoxyCodeLine{4997          stbi\_\_getn(s, tga\_row, tga\_width * tga\_comp);}
\DoxyCodeLine{4998       \}}
\DoxyCodeLine{4999    \} \textcolor{keywordflow}{else}  \{}
\DoxyCodeLine{5000       \textcolor{comment}{//   do I need to load a palette?}}
\DoxyCodeLine{5001       \textcolor{keywordflow}{if} ( tga\_indexed)}
\DoxyCodeLine{5002       \{}
\DoxyCodeLine{5003          \textcolor{comment}{//   any data to skip? (offset usually = 0)}}
\DoxyCodeLine{5004          stbi\_\_skip(s, tga\_palette\_start );}
\DoxyCodeLine{5005          \textcolor{comment}{//   load the palette}}
\DoxyCodeLine{5006          tga\_palette = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}*)stbi\_\_malloc( tga\_palette\_len * tga\_palette\_bits / 8 );}
\DoxyCodeLine{5007          \textcolor{keywordflow}{if} (!tga\_palette) \{}
\DoxyCodeLine{5008             \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(tga\_data);}
\DoxyCodeLine{5009             \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{5010          \}}
\DoxyCodeLine{5011          \textcolor{keywordflow}{if} (!stbi\_\_getn(s, tga\_palette, tga\_palette\_len * tga\_palette\_bits / 8 )) \{}
\DoxyCodeLine{5012             \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(tga\_data);}
\DoxyCodeLine{5013             \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(tga\_palette);}
\DoxyCodeLine{5014             \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}bad palette"{}}, \textcolor{stringliteral}{"{}Corrupt TGA"{}});}
\DoxyCodeLine{5015          \}}
\DoxyCodeLine{5016       \}}
\DoxyCodeLine{5017       \textcolor{comment}{//   load the data}}
\DoxyCodeLine{5018       \textcolor{keywordflow}{for} (i=0; i < tga\_width * tga\_height; ++i)}
\DoxyCodeLine{5019       \{}
\DoxyCodeLine{5020          \textcolor{comment}{//   if I'm in RLE mode, do I need to get a RLE stbi\_\_pngchunk?}}
\DoxyCodeLine{5021          \textcolor{keywordflow}{if} ( tga\_is\_RLE )}
\DoxyCodeLine{5022          \{}
\DoxyCodeLine{5023             \textcolor{keywordflow}{if} ( RLE\_count == 0 )}
\DoxyCodeLine{5024             \{}
\DoxyCodeLine{5025                \textcolor{comment}{//   yep, get the next byte as a RLE command}}
\DoxyCodeLine{5026                \textcolor{keywordtype}{int} RLE\_cmd = stbi\_\_get8(s);}
\DoxyCodeLine{5027                RLE\_count = 1 + (RLE\_cmd \& 127);}
\DoxyCodeLine{5028                RLE\_repeating = RLE\_cmd >> 7;}
\DoxyCodeLine{5029                read\_next\_pixel = 1;}
\DoxyCodeLine{5030             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( !RLE\_repeating )}
\DoxyCodeLine{5031             \{}
\DoxyCodeLine{5032                read\_next\_pixel = 1;}
\DoxyCodeLine{5033             \}}
\DoxyCodeLine{5034          \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{5035          \{}
\DoxyCodeLine{5036             read\_next\_pixel = 1;}
\DoxyCodeLine{5037          \}}
\DoxyCodeLine{5038          \textcolor{comment}{//   OK, if I need to read a pixel, do it now}}
\DoxyCodeLine{5039          \textcolor{keywordflow}{if} ( read\_next\_pixel )}
\DoxyCodeLine{5040          \{}
\DoxyCodeLine{5041             \textcolor{comment}{//   load however much data we did have}}
\DoxyCodeLine{5042             \textcolor{keywordflow}{if} ( tga\_indexed )}
\DoxyCodeLine{5043             \{}
\DoxyCodeLine{5044                \textcolor{comment}{//   read in 1 byte, then perform the lookup}}
\DoxyCodeLine{5045                \textcolor{keywordtype}{int} pal\_idx = stbi\_\_get8(s);}
\DoxyCodeLine{5046                \textcolor{keywordflow}{if} ( pal\_idx >= tga\_palette\_len )}
\DoxyCodeLine{5047                \{}
\DoxyCodeLine{5048                   \textcolor{comment}{//   invalid index}}
\DoxyCodeLine{5049                   pal\_idx = 0;}
\DoxyCodeLine{5050                \}}
\DoxyCodeLine{5051                pal\_idx *= tga\_bits\_per\_pixel / 8;}
\DoxyCodeLine{5052                \textcolor{keywordflow}{for} (j = 0; j*8 < tga\_bits\_per\_pixel; ++j)}
\DoxyCodeLine{5053                \{}
\DoxyCodeLine{5054                   raw\_data[j] = tga\_palette[pal\_idx+j];}
\DoxyCodeLine{5055                \}}
\DoxyCodeLine{5056             \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{5057             \{}
\DoxyCodeLine{5058                \textcolor{comment}{//   read in the data raw}}
\DoxyCodeLine{5059                \textcolor{keywordflow}{for} (j = 0; j*8 < tga\_bits\_per\_pixel; ++j)}
\DoxyCodeLine{5060                \{}
\DoxyCodeLine{5061                   raw\_data[j] = stbi\_\_get8(s);}
\DoxyCodeLine{5062                \}}
\DoxyCodeLine{5063             \}}
\DoxyCodeLine{5064             \textcolor{comment}{//   clear the reading flag for the next pixel}}
\DoxyCodeLine{5065             read\_next\_pixel = 0;}
\DoxyCodeLine{5066          \} \textcolor{comment}{// end of reading a pixel}}
\DoxyCodeLine{5067 }
\DoxyCodeLine{5068          \textcolor{comment}{// copy data}}
\DoxyCodeLine{5069          \textcolor{keywordflow}{for} (j = 0; j < tga\_comp; ++j)}
\DoxyCodeLine{5070            tga\_data[i*tga\_comp+j] = raw\_data[j];}
\DoxyCodeLine{5071 }
\DoxyCodeLine{5072          \textcolor{comment}{//   in case we're in RLE mode, keep counting down}}
\DoxyCodeLine{5073          -\/-\/RLE\_count;}
\DoxyCodeLine{5074       \}}
\DoxyCodeLine{5075       \textcolor{comment}{//   do I need to invert the image?}}
\DoxyCodeLine{5076       \textcolor{keywordflow}{if} ( tga\_inverted )}
\DoxyCodeLine{5077       \{}
\DoxyCodeLine{5078          \textcolor{keywordflow}{for} (j = 0; j*2 < tga\_height; ++j)}
\DoxyCodeLine{5079          \{}
\DoxyCodeLine{5080             \textcolor{keywordtype}{int} index1 = j * tga\_width * tga\_comp;}
\DoxyCodeLine{5081             \textcolor{keywordtype}{int} index2 = (tga\_height -\/ 1 -\/ j) * tga\_width * tga\_comp;}
\DoxyCodeLine{5082             \textcolor{keywordflow}{for} (i = tga\_width * tga\_comp; i > 0; -\/-\/i)}
\DoxyCodeLine{5083             \{}
\DoxyCodeLine{5084                \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} temp = tga\_data[index1];}
\DoxyCodeLine{5085                tga\_data[index1] = tga\_data[index2];}
\DoxyCodeLine{5086                tga\_data[index2] = temp;}
\DoxyCodeLine{5087                ++index1;}
\DoxyCodeLine{5088                ++index2;}
\DoxyCodeLine{5089             \}}
\DoxyCodeLine{5090          \}}
\DoxyCodeLine{5091       \}}
\DoxyCodeLine{5092       \textcolor{comment}{//   clear my palette, if I had one}}
\DoxyCodeLine{5093       \textcolor{keywordflow}{if} ( tga\_palette != NULL )}
\DoxyCodeLine{5094       \{}
\DoxyCodeLine{5095          \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}( tga\_palette );}
\DoxyCodeLine{5096       \}}
\DoxyCodeLine{5097    \}}
\DoxyCodeLine{5098 }
\DoxyCodeLine{5099    \textcolor{comment}{// swap RGB}}
\DoxyCodeLine{5100    \textcolor{keywordflow}{if} (tga\_comp >= 3)}
\DoxyCodeLine{5101    \{}
\DoxyCodeLine{5102       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}* tga\_pixel = tga\_data;}
\DoxyCodeLine{5103       \textcolor{keywordflow}{for} (i=0; i < tga\_width * tga\_height; ++i)}
\DoxyCodeLine{5104       \{}
\DoxyCodeLine{5105          \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} temp = tga\_pixel[0];}
\DoxyCodeLine{5106          tga\_pixel[0] = tga\_pixel[2];}
\DoxyCodeLine{5107          tga\_pixel[2] = temp;}
\DoxyCodeLine{5108          tga\_pixel += tga\_comp;}
\DoxyCodeLine{5109       \}}
\DoxyCodeLine{5110    \}}
\DoxyCodeLine{5111 }
\DoxyCodeLine{5112    \textcolor{comment}{// convert to target component count}}
\DoxyCodeLine{5113    \textcolor{keywordflow}{if} (req\_comp \&\& req\_comp != tga\_comp)}
\DoxyCodeLine{5114       tga\_data = stbi\_\_convert\_format(tga\_data, tga\_comp, req\_comp, tga\_width, tga\_height);}
\DoxyCodeLine{5115 }
\DoxyCodeLine{5116    \textcolor{comment}{//   the things I do to get rid of an error message, and yet keep}}
\DoxyCodeLine{5117    \textcolor{comment}{//   Microsoft's C compilers happy... [8\string^(}}
\DoxyCodeLine{5118    tga\_palette\_start = tga\_palette\_len = tga\_palette\_bits =}
\DoxyCodeLine{5119          tga\_x\_origin = tga\_y\_origin = 0;}
\DoxyCodeLine{5120    \textcolor{comment}{//   OK, done}}
\DoxyCodeLine{5121    \textcolor{keywordflow}{return} tga\_data;}
\DoxyCodeLine{5122 \}}
\DoxyCodeLine{5123 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{5124 }
\DoxyCodeLine{5125 \textcolor{comment}{// *************************************************************************************************}}
\DoxyCodeLine{5126 \textcolor{comment}{// Photoshop PSD loader -\/-\/ PD by Thatcher Ulrich, integration by Nicolas Schulz, tweaked by STB}}
\DoxyCodeLine{5127 }
\DoxyCodeLine{5128 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PSD}}
\DoxyCodeLine{5129 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_psd\_test(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s)}
\DoxyCodeLine{5130 \{}
\DoxyCodeLine{5131    \textcolor{keywordtype}{int} r = (stbi\_\_get32be(s) == 0x38425053);}
\DoxyCodeLine{5132    stbi\_\_rewind(s);}
\DoxyCodeLine{5133    \textcolor{keywordflow}{return} r;}
\DoxyCodeLine{5134 \}}
\DoxyCodeLine{5135 }
\DoxyCodeLine{5136 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_psd\_load(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{5137 \{}
\DoxyCodeLine{5138    \textcolor{keywordtype}{int}   pixelCount;}
\DoxyCodeLine{5139    \textcolor{keywordtype}{int} channelCount, compression;}
\DoxyCodeLine{5140    \textcolor{keywordtype}{int} channel, i, count, len;}
\DoxyCodeLine{5141    \textcolor{keywordtype}{int} bitdepth;}
\DoxyCodeLine{5142    \textcolor{keywordtype}{int} w,h;}
\DoxyCodeLine{5143    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out;}
\DoxyCodeLine{5144 }
\DoxyCodeLine{5145    \textcolor{comment}{// Check identifier}}
\DoxyCodeLine{5146    \textcolor{keywordflow}{if} (stbi\_\_get32be(s) != 0x38425053)   \textcolor{comment}{// "{}8BPS"{}}}
\DoxyCodeLine{5147       \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}not PSD"{}}, \textcolor{stringliteral}{"{}Corrupt PSD image"{}});}
\DoxyCodeLine{5148 }
\DoxyCodeLine{5149    \textcolor{comment}{// Check file type version.}}
\DoxyCodeLine{5150    \textcolor{keywordflow}{if} (stbi\_\_get16be(s) != 1)}
\DoxyCodeLine{5151       \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}wrong version"{}}, \textcolor{stringliteral}{"{}Unsupported version of PSD image"{}});}
\DoxyCodeLine{5152 }
\DoxyCodeLine{5153    \textcolor{comment}{// Skip 6 reserved bytes.}}
\DoxyCodeLine{5154    stbi\_\_skip(s, 6 );}
\DoxyCodeLine{5155 }
\DoxyCodeLine{5156    \textcolor{comment}{// Read the number of channels (R, G, B, A, etc).}}
\DoxyCodeLine{5157    channelCount = stbi\_\_get16be(s);}
\DoxyCodeLine{5158    \textcolor{keywordflow}{if} (channelCount < 0 || channelCount > 16)}
\DoxyCodeLine{5159       \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}wrong channel count"{}}, \textcolor{stringliteral}{"{}Unsupported number of channels in PSD image"{}});}
\DoxyCodeLine{5160 }
\DoxyCodeLine{5161    \textcolor{comment}{// Read the rows and columns of the image.}}
\DoxyCodeLine{5162    h = stbi\_\_get32be(s);}
\DoxyCodeLine{5163    w = stbi\_\_get32be(s);}
\DoxyCodeLine{5164 }
\DoxyCodeLine{5165    \textcolor{comment}{// Make sure the depth is 8 bits.}}
\DoxyCodeLine{5166    bitdepth = stbi\_\_get16be(s);}
\DoxyCodeLine{5167    \textcolor{keywordflow}{if} (bitdepth != 8 \&\& bitdepth != 16)}
\DoxyCodeLine{5168       \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}unsupported bit depth"{}}, \textcolor{stringliteral}{"{}PSD bit depth is not 8 or 16 bit"{}});}
\DoxyCodeLine{5169 }
\DoxyCodeLine{5170    \textcolor{comment}{// Make sure the color mode is RGB.}}
\DoxyCodeLine{5171    \textcolor{comment}{// Valid options are:}}
\DoxyCodeLine{5172    \textcolor{comment}{//   0: Bitmap}}
\DoxyCodeLine{5173    \textcolor{comment}{//   1: Grayscale}}
\DoxyCodeLine{5174    \textcolor{comment}{//   2: Indexed color}}
\DoxyCodeLine{5175    \textcolor{comment}{//   3: RGB color}}
\DoxyCodeLine{5176    \textcolor{comment}{//   4: CMYK color}}
\DoxyCodeLine{5177    \textcolor{comment}{//   7: Multichannel}}
\DoxyCodeLine{5178    \textcolor{comment}{//   8: Duotone}}
\DoxyCodeLine{5179    \textcolor{comment}{//   9: Lab color}}
\DoxyCodeLine{5180    \textcolor{keywordflow}{if} (stbi\_\_get16be(s) != 3)}
\DoxyCodeLine{5181       \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}wrong color format"{}}, \textcolor{stringliteral}{"{}PSD is not in RGB color format"{}});}
\DoxyCodeLine{5182 }
\DoxyCodeLine{5183    \textcolor{comment}{// Skip the Mode Data.  (It's the palette for indexed color; other info for other modes.)}}
\DoxyCodeLine{5184    stbi\_\_skip(s,stbi\_\_get32be(s) );}
\DoxyCodeLine{5185 }
\DoxyCodeLine{5186    \textcolor{comment}{// Skip the image resources.  (resolution, pen tool paths, etc)}}
\DoxyCodeLine{5187    stbi\_\_skip(s, stbi\_\_get32be(s) );}
\DoxyCodeLine{5188 }
\DoxyCodeLine{5189    \textcolor{comment}{// Skip the reserved data.}}
\DoxyCodeLine{5190    stbi\_\_skip(s, stbi\_\_get32be(s) );}
\DoxyCodeLine{5191 }
\DoxyCodeLine{5192    \textcolor{comment}{// Find out if the data is compressed.}}
\DoxyCodeLine{5193    \textcolor{comment}{// Known values:}}
\DoxyCodeLine{5194    \textcolor{comment}{//   0: no compression}}
\DoxyCodeLine{5195    \textcolor{comment}{//   1: RLE compressed}}
\DoxyCodeLine{5196    compression = stbi\_\_get16be(s);}
\DoxyCodeLine{5197    \textcolor{keywordflow}{if} (compression > 1)}
\DoxyCodeLine{5198       \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}bad compression"{}}, \textcolor{stringliteral}{"{}PSD has an unknown compression format"{}});}
\DoxyCodeLine{5199 }
\DoxyCodeLine{5200    \textcolor{comment}{// Create the destination image.}}
\DoxyCodeLine{5201    out = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc(4 * w*h);}
\DoxyCodeLine{5202    \textcolor{keywordflow}{if} (!out) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{5203    pixelCount = w*h;}
\DoxyCodeLine{5204 }
\DoxyCodeLine{5205    \textcolor{comment}{// Initialize the data to zero.}}
\DoxyCodeLine{5206    \textcolor{comment}{//memset( out, 0, pixelCount * 4 );}}
\DoxyCodeLine{5207 }
\DoxyCodeLine{5208    \textcolor{comment}{// Finally, the image data.}}
\DoxyCodeLine{5209    \textcolor{keywordflow}{if} (compression) \{}
\DoxyCodeLine{5210       \textcolor{comment}{// RLE as used by .PSD and .TIFF}}
\DoxyCodeLine{5211       \textcolor{comment}{// Loop until you get the number of unpacked bytes you are expecting:}}
\DoxyCodeLine{5212       \textcolor{comment}{//     Read the next source byte into n.}}
\DoxyCodeLine{5213       \textcolor{comment}{//     If n is between 0 and 127 inclusive, copy the next n+1 bytes literally.}}
\DoxyCodeLine{5214       \textcolor{comment}{//     Else if n is between -\/127 and -\/1 inclusive, copy the next byte -\/n+1 times.}}
\DoxyCodeLine{5215       \textcolor{comment}{//     Else if n is 128, noop.}}
\DoxyCodeLine{5216       \textcolor{comment}{// Endloop}}
\DoxyCodeLine{5217 }
\DoxyCodeLine{5218       \textcolor{comment}{// The RLE-\/compressed data is preceeded by a 2-\/byte data count for each row in the data,}}
\DoxyCodeLine{5219       \textcolor{comment}{// which we're going to just skip.}}
\DoxyCodeLine{5220       stbi\_\_skip(s, h * channelCount * 2 );}
\DoxyCodeLine{5221 }
\DoxyCodeLine{5222       \textcolor{comment}{// Read the RLE data by channel.}}
\DoxyCodeLine{5223       \textcolor{keywordflow}{for} (channel = 0; channel < 4; channel++) \{}
\DoxyCodeLine{5224          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *p;}
\DoxyCodeLine{5225 }
\DoxyCodeLine{5226          p = out+channel;}
\DoxyCodeLine{5227          \textcolor{keywordflow}{if} (channel >= channelCount) \{}
\DoxyCodeLine{5228             \textcolor{comment}{// Fill this channel with default data.}}
\DoxyCodeLine{5229             \textcolor{keywordflow}{for} (i = 0; i < pixelCount; i++, p += 4)}
\DoxyCodeLine{5230                *p = (channel == 3 ? 255 : 0);}
\DoxyCodeLine{5231          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5232             \textcolor{comment}{// Read the RLE data.}}
\DoxyCodeLine{5233             count = 0;}
\DoxyCodeLine{5234             \textcolor{keywordflow}{while} (count < pixelCount) \{}
\DoxyCodeLine{5235                len = stbi\_\_get8(s);}
\DoxyCodeLine{5236                \textcolor{keywordflow}{if} (len == 128) \{}
\DoxyCodeLine{5237                   \textcolor{comment}{// No-\/op.}}
\DoxyCodeLine{5238                \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (len < 128) \{}
\DoxyCodeLine{5239                   \textcolor{comment}{// Copy next len+1 bytes literally.}}
\DoxyCodeLine{5240                   len++;}
\DoxyCodeLine{5241                   count += len;}
\DoxyCodeLine{5242                   \textcolor{keywordflow}{while} (len) \{}
\DoxyCodeLine{5243                      *p = stbi\_\_get8(s);}
\DoxyCodeLine{5244                      p += 4;}
\DoxyCodeLine{5245                      len-\/-\/;}
\DoxyCodeLine{5246                   \}}
\DoxyCodeLine{5247                \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (len > 128) \{}
\DoxyCodeLine{5248                   \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}   val;}
\DoxyCodeLine{5249                   \textcolor{comment}{// Next -\/len+1 bytes in the dest are replicated from next source byte.}}
\DoxyCodeLine{5250                   \textcolor{comment}{// (Interpret len as a negative 8-\/bit int.)}}
\DoxyCodeLine{5251                   len \string^= 0x0FF;}
\DoxyCodeLine{5252                   len += 2;}
\DoxyCodeLine{5253                   val = stbi\_\_get8(s);}
\DoxyCodeLine{5254                   count += len;}
\DoxyCodeLine{5255                   \textcolor{keywordflow}{while} (len) \{}
\DoxyCodeLine{5256                      *p = val;}
\DoxyCodeLine{5257                      p += 4;}
\DoxyCodeLine{5258                      len-\/-\/;}
\DoxyCodeLine{5259                   \}}
\DoxyCodeLine{5260                \}}
\DoxyCodeLine{5261             \}}
\DoxyCodeLine{5262          \}}
\DoxyCodeLine{5263       \}}
\DoxyCodeLine{5264 }
\DoxyCodeLine{5265    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5266       \textcolor{comment}{// We're at the raw image data.  It's each channel in order (Red, Green, Blue, Alpha, ...)}}
\DoxyCodeLine{5267       \textcolor{comment}{// where each channel consists of an 8-\/bit value for each pixel in the image.}}
\DoxyCodeLine{5268 }
\DoxyCodeLine{5269       \textcolor{comment}{// Read the data by channel.}}
\DoxyCodeLine{5270       \textcolor{keywordflow}{for} (channel = 0; channel < 4; channel++) \{}
\DoxyCodeLine{5271          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *p;}
\DoxyCodeLine{5272 }
\DoxyCodeLine{5273          p = out + channel;}
\DoxyCodeLine{5274          \textcolor{keywordflow}{if} (channel >= channelCount) \{}
\DoxyCodeLine{5275             \textcolor{comment}{// Fill this channel with default data.}}
\DoxyCodeLine{5276             \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} val = channel == 3 ? 255 : 0;}
\DoxyCodeLine{5277             \textcolor{keywordflow}{for} (i = 0; i < pixelCount; i++, p += 4)}
\DoxyCodeLine{5278                *p = val;}
\DoxyCodeLine{5279          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5280             \textcolor{comment}{// Read the data.}}
\DoxyCodeLine{5281             \textcolor{keywordflow}{if} (bitdepth == 16) \{}
\DoxyCodeLine{5282                \textcolor{keywordflow}{for} (i = 0; i < pixelCount; i++, p += 4)}
\DoxyCodeLine{5283                   *p = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) (stbi\_\_get16be(s) >> 8);}
\DoxyCodeLine{5284             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5285                \textcolor{keywordflow}{for} (i = 0; i < pixelCount; i++, p += 4)}
\DoxyCodeLine{5286                   *p = stbi\_\_get8(s);}
\DoxyCodeLine{5287             \}}
\DoxyCodeLine{5288          \}}
\DoxyCodeLine{5289       \}}
\DoxyCodeLine{5290    \}}
\DoxyCodeLine{5291 }
\DoxyCodeLine{5292    \textcolor{keywordflow}{if} (req\_comp \&\& req\_comp != 4) \{}
\DoxyCodeLine{5293       out = stbi\_\_convert\_format(out, 4, req\_comp, w, h);}
\DoxyCodeLine{5294       \textcolor{keywordflow}{if} (out == NULL) \textcolor{keywordflow}{return} out; \textcolor{comment}{// stbi\_\_convert\_format frees input on failure}}
\DoxyCodeLine{5295    \}}
\DoxyCodeLine{5296 }
\DoxyCodeLine{5297    \textcolor{keywordflow}{if} (comp) *comp = 4;}
\DoxyCodeLine{5298    *y = h;}
\DoxyCodeLine{5299    *x = w;}
\DoxyCodeLine{5300 }
\DoxyCodeLine{5301    \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{5302 \}}
\DoxyCodeLine{5303 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{5304 }
\DoxyCodeLine{5305 \textcolor{comment}{// *************************************************************************************************}}
\DoxyCodeLine{5306 \textcolor{comment}{// Softimage PIC loader}}
\DoxyCodeLine{5307 \textcolor{comment}{// by Tom Seddon}}
\DoxyCodeLine{5308 \textcolor{comment}{//}}
\DoxyCodeLine{5309 \textcolor{comment}{// See http://softimage.wiki.softimage.com/index.php/INFO:\_PIC\_file\_format}}
\DoxyCodeLine{5310 \textcolor{comment}{// See http://ozviz.wasp.uwa.edu.au/\string~pbourke/dataformats/softimagepic/}}
\DoxyCodeLine{5311 }
\DoxyCodeLine{5312 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PIC}}
\DoxyCodeLine{5313 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_pic\_is4(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s,\textcolor{keyword}{const} \textcolor{keywordtype}{char} *str)}
\DoxyCodeLine{5314 \{}
\DoxyCodeLine{5315    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{5316    \textcolor{keywordflow}{for} (i=0; i<4; ++i)}
\DoxyCodeLine{5317       \textcolor{keywordflow}{if} (stbi\_\_get8(s) != (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}})str[i])}
\DoxyCodeLine{5318          \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{5319 }
\DoxyCodeLine{5320    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{5321 \}}
\DoxyCodeLine{5322 }
\DoxyCodeLine{5323 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_pic\_test\_core(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s)}
\DoxyCodeLine{5324 \{}
\DoxyCodeLine{5325    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{5326 }
\DoxyCodeLine{5327    \textcolor{keywordflow}{if} (!stbi\_\_pic\_is4(s,\textcolor{stringliteral}{"{}\(\backslash\)x53\(\backslash\)x80\(\backslash\)xF6\(\backslash\)x34"{}}))}
\DoxyCodeLine{5328       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{5329 }
\DoxyCodeLine{5330    \textcolor{keywordflow}{for}(i=0;i<84;++i)}
\DoxyCodeLine{5331       stbi\_\_get8(s);}
\DoxyCodeLine{5332 }
\DoxyCodeLine{5333    \textcolor{keywordflow}{if} (!stbi\_\_pic\_is4(s,\textcolor{stringliteral}{"{}PICT"{}}))}
\DoxyCodeLine{5334       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{5335 }
\DoxyCodeLine{5336    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{5337 \}}
\DoxyCodeLine{5338 }
\DoxyCodeLine{5339 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{5340 \{}
\DoxyCodeLine{5341    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} size,type,\mbox{\hyperlink{structstbi____pic__packet_a7eca789dd148bbdae42844fc4992abb6}{channel}};}
\DoxyCodeLine{5342 \} \mbox{\hyperlink{structstbi____pic__packet}{stbi\_\_pic\_packet}};}
\DoxyCodeLine{5343 }
\DoxyCodeLine{5344 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_readval(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} channel, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *dest)}
\DoxyCodeLine{5345 \{}
\DoxyCodeLine{5346    \textcolor{keywordtype}{int} mask=0x80, i;}
\DoxyCodeLine{5347 }
\DoxyCodeLine{5348    \textcolor{keywordflow}{for} (i=0; i<4; ++i, mask>>=1) \{}
\DoxyCodeLine{5349       \textcolor{keywordflow}{if} (channel \& mask) \{}
\DoxyCodeLine{5350          \textcolor{keywordflow}{if} (stbi\_\_at\_eof(s)) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}bad file"{}},\textcolor{stringliteral}{"{}PIC file too short"{}});}
\DoxyCodeLine{5351          dest[i]=stbi\_\_get8(s);}
\DoxyCodeLine{5352       \}}
\DoxyCodeLine{5353    \}}
\DoxyCodeLine{5354 }
\DoxyCodeLine{5355    \textcolor{keywordflow}{return} dest;}
\DoxyCodeLine{5356 \}}
\DoxyCodeLine{5357 }
\DoxyCodeLine{5358 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_copyval(\textcolor{keywordtype}{int} channel,\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *dest,\textcolor{keyword}{const} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *src)}
\DoxyCodeLine{5359 \{}
\DoxyCodeLine{5360    \textcolor{keywordtype}{int} mask=0x80,i;}
\DoxyCodeLine{5361 }
\DoxyCodeLine{5362    \textcolor{keywordflow}{for} (i=0;i<4; ++i, mask>>=1)}
\DoxyCodeLine{5363       \textcolor{keywordflow}{if} (channel\&mask)}
\DoxyCodeLine{5364          dest[i]=src[i];}
\DoxyCodeLine{5365 \}}
\DoxyCodeLine{5366 }
\DoxyCodeLine{5367 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_pic\_load\_core(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s,\textcolor{keywordtype}{int} width,\textcolor{keywordtype}{int} height,\textcolor{keywordtype}{int} *comp, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *result)}
\DoxyCodeLine{5368 \{}
\DoxyCodeLine{5369    \textcolor{keywordtype}{int} act\_comp=0,num\_packets=0,y,chained;}
\DoxyCodeLine{5370    \mbox{\hyperlink{structstbi____pic__packet}{stbi\_\_pic\_packet}} packets[10];}
\DoxyCodeLine{5371 }
\DoxyCodeLine{5372    \textcolor{comment}{// this will (should...) cater for even some bizarre stuff like having data}}
\DoxyCodeLine{5373     \textcolor{comment}{// for the same channel in multiple packets.}}
\DoxyCodeLine{5374    \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{5375       \mbox{\hyperlink{structstbi____pic__packet}{stbi\_\_pic\_packet}} *packet;}
\DoxyCodeLine{5376 }
\DoxyCodeLine{5377       \textcolor{keywordflow}{if} (num\_packets==\textcolor{keyword}{sizeof}(packets)/\textcolor{keyword}{sizeof}(packets[0]))}
\DoxyCodeLine{5378          \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}bad format"{}},\textcolor{stringliteral}{"{}too many packets"{}});}
\DoxyCodeLine{5379 }
\DoxyCodeLine{5380       packet = \&packets[num\_packets++];}
\DoxyCodeLine{5381 }
\DoxyCodeLine{5382       chained = stbi\_\_get8(s);}
\DoxyCodeLine{5383       packet-\/>\mbox{\hyperlink{structstbi____pic__packet_a2929a685716a20ae3ba4b3243275b217}{size}}    = stbi\_\_get8(s);}
\DoxyCodeLine{5384       packet-\/>\mbox{\hyperlink{structstbi____pic__packet_ab88dc45f5b83d46016b5310cebec69ac}{type}}    = stbi\_\_get8(s);}
\DoxyCodeLine{5385       packet-\/>\mbox{\hyperlink{structstbi____pic__packet_a7eca789dd148bbdae42844fc4992abb6}{channel}} = stbi\_\_get8(s);}
\DoxyCodeLine{5386 }
\DoxyCodeLine{5387       act\_comp |= packet-\/>\mbox{\hyperlink{structstbi____pic__packet_a7eca789dd148bbdae42844fc4992abb6}{channel}};}
\DoxyCodeLine{5388 }
\DoxyCodeLine{5389       \textcolor{keywordflow}{if} (stbi\_\_at\_eof(s))          \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}bad file"{}},\textcolor{stringliteral}{"{}file too short (reading packets)"{}});}
\DoxyCodeLine{5390       \textcolor{keywordflow}{if} (packet-\/>\mbox{\hyperlink{structstbi____pic__packet_a2929a685716a20ae3ba4b3243275b217}{size}} != 8)  \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}bad format"{}},\textcolor{stringliteral}{"{}packet isn't 8bpp"{}});}
\DoxyCodeLine{5391    \} \textcolor{keywordflow}{while} (chained);}
\DoxyCodeLine{5392 }
\DoxyCodeLine{5393    *comp = (act\_comp \& 0x10 ? 4 : 3); \textcolor{comment}{// has alpha channel?}}
\DoxyCodeLine{5394 }
\DoxyCodeLine{5395    \textcolor{keywordflow}{for}(y=0; y<height; ++y) \{}
\DoxyCodeLine{5396       \textcolor{keywordtype}{int} packet\_idx;}
\DoxyCodeLine{5397 }
\DoxyCodeLine{5398       \textcolor{keywordflow}{for}(packet\_idx=0; packet\_idx < num\_packets; ++packet\_idx) \{}
\DoxyCodeLine{5399          \mbox{\hyperlink{structstbi____pic__packet}{stbi\_\_pic\_packet}} *packet = \&packets[packet\_idx];}
\DoxyCodeLine{5400          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *dest = result+y*width*4;}
\DoxyCodeLine{5401 }
\DoxyCodeLine{5402          \textcolor{keywordflow}{switch} (packet-\/>\mbox{\hyperlink{structstbi____pic__packet_ab88dc45f5b83d46016b5310cebec69ac}{type}}) \{}
\DoxyCodeLine{5403             \textcolor{keywordflow}{default}:}
\DoxyCodeLine{5404                \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}bad format"{}},\textcolor{stringliteral}{"{}packet has bad compression type"{}});}
\DoxyCodeLine{5405 }
\DoxyCodeLine{5406             \textcolor{keywordflow}{case} 0: \{\textcolor{comment}{//uncompressed}}
\DoxyCodeLine{5407                \textcolor{keywordtype}{int} x;}
\DoxyCodeLine{5408 }
\DoxyCodeLine{5409                \textcolor{keywordflow}{for}(x=0;x<width;++x, dest+=4)}
\DoxyCodeLine{5410                   \textcolor{keywordflow}{if} (!stbi\_\_readval(s,packet-\/>\mbox{\hyperlink{structstbi____pic__packet_a7eca789dd148bbdae42844fc4992abb6}{channel}},dest))}
\DoxyCodeLine{5411                      \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{5412                \textcolor{keywordflow}{break};}
\DoxyCodeLine{5413             \}}
\DoxyCodeLine{5414 }
\DoxyCodeLine{5415             \textcolor{keywordflow}{case} 1:\textcolor{comment}{//Pure RLE}}
\DoxyCodeLine{5416                \{}
\DoxyCodeLine{5417                   \textcolor{keywordtype}{int} left=width, i;}
\DoxyCodeLine{5418 }
\DoxyCodeLine{5419                   \textcolor{keywordflow}{while} (left>0) \{}
\DoxyCodeLine{5420                      \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} count,value[4];}
\DoxyCodeLine{5421 }
\DoxyCodeLine{5422                      count=stbi\_\_get8(s);}
\DoxyCodeLine{5423                      \textcolor{keywordflow}{if} (stbi\_\_at\_eof(s))   \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}bad file"{}},\textcolor{stringliteral}{"{}file too short (pure read count)"{}});}
\DoxyCodeLine{5424 }
\DoxyCodeLine{5425                      \textcolor{keywordflow}{if} (count > left)}
\DoxyCodeLine{5426                         count = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) left;}
\DoxyCodeLine{5427 }
\DoxyCodeLine{5428                      \textcolor{keywordflow}{if} (!stbi\_\_readval(s,packet-\/>\mbox{\hyperlink{structstbi____pic__packet_a7eca789dd148bbdae42844fc4992abb6}{channel}},value))  \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{5429 }
\DoxyCodeLine{5430                      \textcolor{keywordflow}{for}(i=0; i<count; ++i,dest+=4)}
\DoxyCodeLine{5431                         stbi\_\_copyval(packet-\/>\mbox{\hyperlink{structstbi____pic__packet_a7eca789dd148bbdae42844fc4992abb6}{channel}},dest,value);}
\DoxyCodeLine{5432                      left -\/= count;}
\DoxyCodeLine{5433                   \}}
\DoxyCodeLine{5434                \}}
\DoxyCodeLine{5435                \textcolor{keywordflow}{break};}
\DoxyCodeLine{5436 }
\DoxyCodeLine{5437             \textcolor{keywordflow}{case} 2: \{\textcolor{comment}{//Mixed RLE}}
\DoxyCodeLine{5438                \textcolor{keywordtype}{int} left=width;}
\DoxyCodeLine{5439                \textcolor{keywordflow}{while} (left>0) \{}
\DoxyCodeLine{5440                   \textcolor{keywordtype}{int} count = stbi\_\_get8(s), i;}
\DoxyCodeLine{5441                   \textcolor{keywordflow}{if} (stbi\_\_at\_eof(s))  \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}bad file"{}},\textcolor{stringliteral}{"{}file too short (mixed read count)"{}});}
\DoxyCodeLine{5442 }
\DoxyCodeLine{5443                   \textcolor{keywordflow}{if} (count >= 128) \{ \textcolor{comment}{// Repeated}}
\DoxyCodeLine{5444                      \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} value[4];}
\DoxyCodeLine{5445 }
\DoxyCodeLine{5446                      \textcolor{keywordflow}{if} (count==128)}
\DoxyCodeLine{5447                         count = stbi\_\_get16be(s);}
\DoxyCodeLine{5448                      \textcolor{keywordflow}{else}}
\DoxyCodeLine{5449                         count -\/= 127;}
\DoxyCodeLine{5450                      \textcolor{keywordflow}{if} (count > left)}
\DoxyCodeLine{5451                         \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}bad file"{}},\textcolor{stringliteral}{"{}scanline overrun"{}});}
\DoxyCodeLine{5452 }
\DoxyCodeLine{5453                      \textcolor{keywordflow}{if} (!stbi\_\_readval(s,packet-\/>\mbox{\hyperlink{structstbi____pic__packet_a7eca789dd148bbdae42844fc4992abb6}{channel}},value))}
\DoxyCodeLine{5454                         \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{5455 }
\DoxyCodeLine{5456                      \textcolor{keywordflow}{for}(i=0;i<count;++i, dest += 4)}
\DoxyCodeLine{5457                         stbi\_\_copyval(packet-\/>\mbox{\hyperlink{structstbi____pic__packet_a7eca789dd148bbdae42844fc4992abb6}{channel}},dest,value);}
\DoxyCodeLine{5458                   \} \textcolor{keywordflow}{else} \{ \textcolor{comment}{// Raw}}
\DoxyCodeLine{5459                      ++count;}
\DoxyCodeLine{5460                      \textcolor{keywordflow}{if} (count>left) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}bad file"{}},\textcolor{stringliteral}{"{}scanline overrun"{}});}
\DoxyCodeLine{5461 }
\DoxyCodeLine{5462                      \textcolor{keywordflow}{for}(i=0;i<count;++i, dest+=4)}
\DoxyCodeLine{5463                         \textcolor{keywordflow}{if} (!stbi\_\_readval(s,packet-\/>\mbox{\hyperlink{structstbi____pic__packet_a7eca789dd148bbdae42844fc4992abb6}{channel}},dest))}
\DoxyCodeLine{5464                            \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{5465                   \}}
\DoxyCodeLine{5466                   left-\/=count;}
\DoxyCodeLine{5467                \}}
\DoxyCodeLine{5468                \textcolor{keywordflow}{break};}
\DoxyCodeLine{5469             \}}
\DoxyCodeLine{5470          \}}
\DoxyCodeLine{5471       \}}
\DoxyCodeLine{5472    \}}
\DoxyCodeLine{5473 }
\DoxyCodeLine{5474    \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{5475 \}}
\DoxyCodeLine{5476 }
\DoxyCodeLine{5477 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_pic\_load(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s,\textcolor{keywordtype}{int} *px,\textcolor{keywordtype}{int} *py,\textcolor{keywordtype}{int} *comp,\textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{5478 \{}
\DoxyCodeLine{5479    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *result;}
\DoxyCodeLine{5480    \textcolor{keywordtype}{int} i, x,y;}
\DoxyCodeLine{5481 }
\DoxyCodeLine{5482    \textcolor{keywordflow}{for} (i=0; i<92; ++i)}
\DoxyCodeLine{5483       stbi\_\_get8(s);}
\DoxyCodeLine{5484 }
\DoxyCodeLine{5485    x = stbi\_\_get16be(s);}
\DoxyCodeLine{5486    y = stbi\_\_get16be(s);}
\DoxyCodeLine{5487    \textcolor{keywordflow}{if} (stbi\_\_at\_eof(s))  \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}bad file"{}},\textcolor{stringliteral}{"{}file too short (pic header)"{}});}
\DoxyCodeLine{5488    \textcolor{keywordflow}{if} ((1 << 28) / x < y) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}too large"{}}, \textcolor{stringliteral}{"{}Image too large to decode"{}});}
\DoxyCodeLine{5489 }
\DoxyCodeLine{5490    stbi\_\_get32be(s); \textcolor{comment}{//skip `ratio'}}
\DoxyCodeLine{5491    stbi\_\_get16be(s); \textcolor{comment}{//skip `fields'}}
\DoxyCodeLine{5492    stbi\_\_get16be(s); \textcolor{comment}{//skip `pad'}}
\DoxyCodeLine{5493 }
\DoxyCodeLine{5494    \textcolor{comment}{// intermediate buffer is RGBA}}
\DoxyCodeLine{5495    result = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc(x*y*4);}
\DoxyCodeLine{5496    memset(result, 0xff, x*y*4);}
\DoxyCodeLine{5497 }
\DoxyCodeLine{5498    \textcolor{keywordflow}{if} (!stbi\_\_pic\_load\_core(s,x,y,comp, result)) \{}
\DoxyCodeLine{5499       \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(result);}
\DoxyCodeLine{5500       result=0;}
\DoxyCodeLine{5501    \}}
\DoxyCodeLine{5502    *px = x;}
\DoxyCodeLine{5503    *py = y;}
\DoxyCodeLine{5504    \textcolor{keywordflow}{if} (req\_comp == 0) req\_comp = *comp;}
\DoxyCodeLine{5505    result=stbi\_\_convert\_format(result,4,req\_comp,x,y);}
\DoxyCodeLine{5506 }
\DoxyCodeLine{5507    \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{5508 \}}
\DoxyCodeLine{5509 }
\DoxyCodeLine{5510 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_pic\_test(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s)}
\DoxyCodeLine{5511 \{}
\DoxyCodeLine{5512    \textcolor{keywordtype}{int} r = stbi\_\_pic\_test\_core(s);}
\DoxyCodeLine{5513    stbi\_\_rewind(s);}
\DoxyCodeLine{5514    \textcolor{keywordflow}{return} r;}
\DoxyCodeLine{5515 \}}
\DoxyCodeLine{5516 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{5517 }
\DoxyCodeLine{5518 \textcolor{comment}{// *************************************************************************************************}}
\DoxyCodeLine{5519 \textcolor{comment}{// GIF loader -\/-\/ public domain by Jean-\/Marc Lienher -\/-\/ simplified/shrunk by stb}}
\DoxyCodeLine{5520 }
\DoxyCodeLine{5521 \textcolor{preprocessor}{\#ifndef STBI\_NO\_GIF}}
\DoxyCodeLine{5522 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{5523 \{}
\DoxyCodeLine{5524    \mbox{\hyperlink{stb__image_8h_ae4cbd54705261d6f2d44b97ca536f14f}{stbi\_\_int16}} \mbox{\hyperlink{structstbi____gif__lzw_aca7e15994431bfec4a3805a9d34f9032}{prefix}};}
\DoxyCodeLine{5525    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \mbox{\hyperlink{structstbi____gif__lzw_ab6a463f784e4be55eee19e485bc25e97}{first}};}
\DoxyCodeLine{5526    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \mbox{\hyperlink{structstbi____gif__lzw_a81a4ae6fed75092ccabd00909a53b574}{suffix}};}
\DoxyCodeLine{5527 \} \mbox{\hyperlink{structstbi____gif__lzw}{stbi\_\_gif\_lzw}};}
\DoxyCodeLine{5528 }
\DoxyCodeLine{5529 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{5530 \{}
\DoxyCodeLine{5531    \textcolor{keywordtype}{int} w,\mbox{\hyperlink{structstbi____gif_a52e0b8fb05bfbbf42b5a627945e64283}{h}};}
\DoxyCodeLine{5532    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out, *\mbox{\hyperlink{structstbi____gif_add3a5b49ee3a7fc0906e21a1559c756c}{old\_out}};             \textcolor{comment}{// output buffer (always 4 components)}}
\DoxyCodeLine{5533    \textcolor{keywordtype}{int} flags, \mbox{\hyperlink{structstbi____gif_acac0ac2c002c87d1b42599bf9fbf089d}{bgindex}}, ratio, transparent, eflags, delay;}
\DoxyCodeLine{5534    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}  pal[256][4];}
\DoxyCodeLine{5535    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} lpal[256][4];}
\DoxyCodeLine{5536    \mbox{\hyperlink{structstbi____gif__lzw}{stbi\_\_gif\_lzw}} codes[4096];}
\DoxyCodeLine{5537    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *\mbox{\hyperlink{structstbi____gif_a60f7b60a1de4ce039c084994b3f063e5}{color\_table}};}
\DoxyCodeLine{5538    \textcolor{keywordtype}{int} \mbox{\hyperlink{structstbi____gif_acdfc13e46fcd8bc618c87d8bebb75cc8}{parse}}, step;}
\DoxyCodeLine{5539    \textcolor{keywordtype}{int} \mbox{\hyperlink{structstbi____gif_af6fe14839dff03995f58e51150c0e20e}{lflags}};}
\DoxyCodeLine{5540    \textcolor{keywordtype}{int} \mbox{\hyperlink{structstbi____gif_a69c004ae01c2eff68c2e7941bc45e830}{start\_x}}, start\_y;}
\DoxyCodeLine{5541    \textcolor{keywordtype}{int} \mbox{\hyperlink{structstbi____gif_a3d1c32dbf7501745bf171dd1352f5342}{max\_x}}, max\_y;}
\DoxyCodeLine{5542    \textcolor{keywordtype}{int} \mbox{\hyperlink{structstbi____gif_a1a7d790c5e2be2541e0199981caf28b7}{cur\_x}}, cur\_y;}
\DoxyCodeLine{5543    \textcolor{keywordtype}{int} \mbox{\hyperlink{structstbi____gif_a7798e637a0ab4da2e8cfd62191d620b5}{line\_size}};}
\DoxyCodeLine{5544 \} \mbox{\hyperlink{structstbi____gif}{stbi\_\_gif}};}
\DoxyCodeLine{5545 }
\DoxyCodeLine{5546 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_gif\_test\_raw(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s)}
\DoxyCodeLine{5547 \{}
\DoxyCodeLine{5548    \textcolor{keywordtype}{int} sz;}
\DoxyCodeLine{5549    \textcolor{keywordflow}{if} (stbi\_\_get8(s) != \textcolor{charliteral}{'G'} || stbi\_\_get8(s) != \textcolor{charliteral}{'I'} || stbi\_\_get8(s) != \textcolor{charliteral}{'F'} || stbi\_\_get8(s) != \textcolor{charliteral}{'8'}) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{5550    sz = stbi\_\_get8(s);}
\DoxyCodeLine{5551    \textcolor{keywordflow}{if} (sz != \textcolor{charliteral}{'9'} \&\& sz != \textcolor{charliteral}{'7'}) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{5552    \textcolor{keywordflow}{if} (stbi\_\_get8(s) != \textcolor{charliteral}{'a'}) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{5553    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{5554 \}}
\DoxyCodeLine{5555 }
\DoxyCodeLine{5556 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_gif\_test(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s)}
\DoxyCodeLine{5557 \{}
\DoxyCodeLine{5558    \textcolor{keywordtype}{int} r = stbi\_\_gif\_test\_raw(s);}
\DoxyCodeLine{5559    stbi\_\_rewind(s);}
\DoxyCodeLine{5560    \textcolor{keywordflow}{return} r;}
\DoxyCodeLine{5561 \}}
\DoxyCodeLine{5562 }
\DoxyCodeLine{5563 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_gif\_parse\_colortable(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} pal[256][4], \textcolor{keywordtype}{int} num\_entries, \textcolor{keywordtype}{int} transp)}
\DoxyCodeLine{5564 \{}
\DoxyCodeLine{5565    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{5566    \textcolor{keywordflow}{for} (i=0; i < num\_entries; ++i) \{}
\DoxyCodeLine{5567       pal[i][2] = stbi\_\_get8(s);}
\DoxyCodeLine{5568       pal[i][1] = stbi\_\_get8(s);}
\DoxyCodeLine{5569       pal[i][0] = stbi\_\_get8(s);}
\DoxyCodeLine{5570       pal[i][3] = transp == i ? 0 : 255;}
\DoxyCodeLine{5571    \}}
\DoxyCodeLine{5572 \}}
\DoxyCodeLine{5573 }
\DoxyCodeLine{5574 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_gif\_header(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \mbox{\hyperlink{structstbi____gif}{stbi\_\_gif}} *g, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} is\_info)}
\DoxyCodeLine{5575 \{}
\DoxyCodeLine{5576    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} version;}
\DoxyCodeLine{5577    \textcolor{keywordflow}{if} (stbi\_\_get8(s) != \textcolor{charliteral}{'G'} || stbi\_\_get8(s) != \textcolor{charliteral}{'I'} || stbi\_\_get8(s) != \textcolor{charliteral}{'F'} || stbi\_\_get8(s) != \textcolor{charliteral}{'8'})}
\DoxyCodeLine{5578       \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}not GIF"{}}, \textcolor{stringliteral}{"{}Corrupt GIF"{}});}
\DoxyCodeLine{5579 }
\DoxyCodeLine{5580    version = stbi\_\_get8(s);}
\DoxyCodeLine{5581    \textcolor{keywordflow}{if} (version != \textcolor{charliteral}{'7'} \&\& version != \textcolor{charliteral}{'9'})    \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}not GIF"{}}, \textcolor{stringliteral}{"{}Corrupt GIF"{}});}
\DoxyCodeLine{5582    \textcolor{keywordflow}{if} (stbi\_\_get8(s) != \textcolor{charliteral}{'a'})                \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}not GIF"{}}, \textcolor{stringliteral}{"{}Corrupt GIF"{}});}
\DoxyCodeLine{5583 }
\DoxyCodeLine{5584    stbi\_\_g\_failure\_reason = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{5585    g-\/>\mbox{\hyperlink{structstbi____gif_aa6d5cf40a87ac221381596112c5b9db7}{w}} = stbi\_\_get16le(s);}
\DoxyCodeLine{5586    g-\/>\mbox{\hyperlink{structstbi____gif_a52e0b8fb05bfbbf42b5a627945e64283}{h}} = stbi\_\_get16le(s);}
\DoxyCodeLine{5587    g-\/>\mbox{\hyperlink{structstbi____gif_af1678b58c9414ac7ea94687ab95f0617}{flags}} = stbi\_\_get8(s);}
\DoxyCodeLine{5588    g-\/>\mbox{\hyperlink{structstbi____gif_acac0ac2c002c87d1b42599bf9fbf089d}{bgindex}} = stbi\_\_get8(s);}
\DoxyCodeLine{5589    g-\/>\mbox{\hyperlink{structstbi____gif_aaa916cafa9b17ea26960b219d3459702}{ratio}} = stbi\_\_get8(s);}
\DoxyCodeLine{5590    g-\/>\mbox{\hyperlink{structstbi____gif_a7e82257a52c4eac0b615e228881e2174}{transparent}} = -\/1;}
\DoxyCodeLine{5591 }
\DoxyCodeLine{5592    \textcolor{keywordflow}{if} (comp != 0) *comp = 4;  \textcolor{comment}{// can't actually tell whether it's 3 or 4 until we parse the comments}}
\DoxyCodeLine{5593 }
\DoxyCodeLine{5594    \textcolor{keywordflow}{if} (is\_info) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{5595 }
\DoxyCodeLine{5596    \textcolor{keywordflow}{if} (g-\/>\mbox{\hyperlink{structstbi____gif_af1678b58c9414ac7ea94687ab95f0617}{flags}} \& 0x80)}
\DoxyCodeLine{5597       stbi\_\_gif\_parse\_colortable(s,g-\/>\mbox{\hyperlink{structstbi____gif_a2af70d0e97e9b9f3962b411ca59c431e}{pal}}, 2 << (g-\/>\mbox{\hyperlink{structstbi____gif_af1678b58c9414ac7ea94687ab95f0617}{flags}} \& 7), -\/1);}
\DoxyCodeLine{5598 }
\DoxyCodeLine{5599    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{5600 \}}
\DoxyCodeLine{5601 }
\DoxyCodeLine{5602 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_gif\_info\_raw(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{5603 \{}
\DoxyCodeLine{5604    \mbox{\hyperlink{structstbi____gif}{stbi\_\_gif}} g;}
\DoxyCodeLine{5605    \textcolor{keywordflow}{if} (!stbi\_\_gif\_header(s, \&g, comp, 1)) \{}
\DoxyCodeLine{5606       stbi\_\_rewind( s );}
\DoxyCodeLine{5607       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{5608    \}}
\DoxyCodeLine{5609    \textcolor{keywordflow}{if} (x) *x = g.\mbox{\hyperlink{structstbi____gif_aa6d5cf40a87ac221381596112c5b9db7}{w}};}
\DoxyCodeLine{5610    \textcolor{keywordflow}{if} (y) *y = g.\mbox{\hyperlink{structstbi____gif_a52e0b8fb05bfbbf42b5a627945e64283}{h}};}
\DoxyCodeLine{5611    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{5612 \}}
\DoxyCodeLine{5613 }
\DoxyCodeLine{5614 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_out\_gif\_code(\mbox{\hyperlink{structstbi____gif}{stbi\_\_gif}} *g, \mbox{\hyperlink{stb__image_8h_a38c41d822de912df31fb56df26a9cb8c}{stbi\_\_uint16}} code)}
\DoxyCodeLine{5615 \{}
\DoxyCodeLine{5616    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *p, *c;}
\DoxyCodeLine{5617 }
\DoxyCodeLine{5618    \textcolor{comment}{// recurse to decode the prefixes, since the linked-\/list is backwards,}}
\DoxyCodeLine{5619    \textcolor{comment}{// and working backwards through an interleaved image would be nasty}}
\DoxyCodeLine{5620    \textcolor{keywordflow}{if} (g-\/>\mbox{\hyperlink{structstbi____gif_a1c84fac79558de01c9990c5e0c74b46d}{codes}}[code].\mbox{\hyperlink{structstbi____gif__lzw_aca7e15994431bfec4a3805a9d34f9032}{prefix}} >= 0)}
\DoxyCodeLine{5621       stbi\_\_out\_gif\_code(g, g-\/>\mbox{\hyperlink{structstbi____gif_a1c84fac79558de01c9990c5e0c74b46d}{codes}}[code].\mbox{\hyperlink{structstbi____gif__lzw_aca7e15994431bfec4a3805a9d34f9032}{prefix}});}
\DoxyCodeLine{5622 }
\DoxyCodeLine{5623    \textcolor{keywordflow}{if} (g-\/>\mbox{\hyperlink{structstbi____gif_ab8889ac8a3518775c72c075954684a0b}{cur\_y}} >= g-\/>\mbox{\hyperlink{structstbi____gif_ad7f06feba8837656a05cd6b9825864de}{max\_y}}) \textcolor{keywordflow}{return};}
\DoxyCodeLine{5624 }
\DoxyCodeLine{5625    p = \&g-\/>\mbox{\hyperlink{structstbi____gif_afb80bca5a7a657929511cf3fb2eb011a}{out}}[g-\/>\mbox{\hyperlink{structstbi____gif_a1a7d790c5e2be2541e0199981caf28b7}{cur\_x}} + g-\/>\mbox{\hyperlink{structstbi____gif_ab8889ac8a3518775c72c075954684a0b}{cur\_y}}];}
\DoxyCodeLine{5626    c = \&g-\/>\mbox{\hyperlink{structstbi____gif_a60f7b60a1de4ce039c084994b3f063e5}{color\_table}}[g-\/>\mbox{\hyperlink{structstbi____gif_a1c84fac79558de01c9990c5e0c74b46d}{codes}}[code].\mbox{\hyperlink{structstbi____gif__lzw_a81a4ae6fed75092ccabd00909a53b574}{suffix}} * 4];}
\DoxyCodeLine{5627 }
\DoxyCodeLine{5628    \textcolor{keywordflow}{if} (c[3] >= 128) \{}
\DoxyCodeLine{5629       p[0] = c[2];}
\DoxyCodeLine{5630       p[1] = c[1];}
\DoxyCodeLine{5631       p[2] = c[0];}
\DoxyCodeLine{5632       p[3] = c[3];}
\DoxyCodeLine{5633    \}}
\DoxyCodeLine{5634    g-\/>\mbox{\hyperlink{structstbi____gif_a1a7d790c5e2be2541e0199981caf28b7}{cur\_x}} += 4;}
\DoxyCodeLine{5635 }
\DoxyCodeLine{5636    \textcolor{keywordflow}{if} (g-\/>\mbox{\hyperlink{structstbi____gif_a1a7d790c5e2be2541e0199981caf28b7}{cur\_x}} >= g-\/>\mbox{\hyperlink{structstbi____gif_a3d1c32dbf7501745bf171dd1352f5342}{max\_x}}) \{}
\DoxyCodeLine{5637       g-\/>\mbox{\hyperlink{structstbi____gif_a1a7d790c5e2be2541e0199981caf28b7}{cur\_x}} = g-\/>\mbox{\hyperlink{structstbi____gif_a69c004ae01c2eff68c2e7941bc45e830}{start\_x}};}
\DoxyCodeLine{5638       g-\/>\mbox{\hyperlink{structstbi____gif_ab8889ac8a3518775c72c075954684a0b}{cur\_y}} += g-\/>\mbox{\hyperlink{structstbi____gif_a45195d6bf3b773a9246361bf2ea24780}{step}};}
\DoxyCodeLine{5639 }
\DoxyCodeLine{5640       \textcolor{keywordflow}{while} (g-\/>\mbox{\hyperlink{structstbi____gif_ab8889ac8a3518775c72c075954684a0b}{cur\_y}} >= g-\/>\mbox{\hyperlink{structstbi____gif_ad7f06feba8837656a05cd6b9825864de}{max\_y}} \&\& g-\/>\mbox{\hyperlink{structstbi____gif_acdfc13e46fcd8bc618c87d8bebb75cc8}{parse}} > 0) \{}
\DoxyCodeLine{5641          g-\/>\mbox{\hyperlink{structstbi____gif_a45195d6bf3b773a9246361bf2ea24780}{step}} = (1 << g-\/>\mbox{\hyperlink{structstbi____gif_acdfc13e46fcd8bc618c87d8bebb75cc8}{parse}}) * g-\/>\mbox{\hyperlink{structstbi____gif_a7798e637a0ab4da2e8cfd62191d620b5}{line\_size}};}
\DoxyCodeLine{5642          g-\/>\mbox{\hyperlink{structstbi____gif_ab8889ac8a3518775c72c075954684a0b}{cur\_y}} = g-\/>\mbox{\hyperlink{structstbi____gif_aebe43c809d3d9820afebb27ef71eb8e6}{start\_y}} + (g-\/>\mbox{\hyperlink{structstbi____gif_a45195d6bf3b773a9246361bf2ea24780}{step}} >> 1);}
\DoxyCodeLine{5643          -\/-\/g-\/>\mbox{\hyperlink{structstbi____gif_acdfc13e46fcd8bc618c87d8bebb75cc8}{parse}};}
\DoxyCodeLine{5644       \}}
\DoxyCodeLine{5645    \}}
\DoxyCodeLine{5646 \}}
\DoxyCodeLine{5647 }
\DoxyCodeLine{5648 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_process\_gif\_raster(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \mbox{\hyperlink{structstbi____gif}{stbi\_\_gif}} *g)}
\DoxyCodeLine{5649 \{}
\DoxyCodeLine{5650    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} lzw\_cs;}
\DoxyCodeLine{5651    \mbox{\hyperlink{stb__image_8h_aa22ffdc0f962b06610737eaab3ac6b63}{stbi\_\_int32}} len, init\_code;}
\DoxyCodeLine{5652    \mbox{\hyperlink{stb__image_8h_a9f4c7fe585bda3cc749e576bcf341d7e}{stbi\_\_uint32}} first;}
\DoxyCodeLine{5653    \mbox{\hyperlink{stb__image_8h_aa22ffdc0f962b06610737eaab3ac6b63}{stbi\_\_int32}} codesize, codemask, avail, oldcode, bits, valid\_bits, clear;}
\DoxyCodeLine{5654    \mbox{\hyperlink{structstbi____gif__lzw}{stbi\_\_gif\_lzw}} *p;}
\DoxyCodeLine{5655 }
\DoxyCodeLine{5656    lzw\_cs = stbi\_\_get8(s);}
\DoxyCodeLine{5657    \textcolor{keywordflow}{if} (lzw\_cs > 12) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{5658    clear = 1 << lzw\_cs;}
\DoxyCodeLine{5659    first = 1;}
\DoxyCodeLine{5660    codesize = lzw\_cs + 1;}
\DoxyCodeLine{5661    codemask = (1 << codesize) -\/ 1;}
\DoxyCodeLine{5662    bits = 0;}
\DoxyCodeLine{5663    valid\_bits = 0;}
\DoxyCodeLine{5664    \textcolor{keywordflow}{for} (init\_code = 0; init\_code < clear; init\_code++) \{}
\DoxyCodeLine{5665       g-\/>\mbox{\hyperlink{structstbi____gif_a1c84fac79558de01c9990c5e0c74b46d}{codes}}[init\_code].\mbox{\hyperlink{structstbi____gif__lzw_aca7e15994431bfec4a3805a9d34f9032}{prefix}} = -\/1;}
\DoxyCodeLine{5666       g-\/>\mbox{\hyperlink{structstbi____gif_a1c84fac79558de01c9990c5e0c74b46d}{codes}}[init\_code].\mbox{\hyperlink{structstbi____gif__lzw_ab6a463f784e4be55eee19e485bc25e97}{first}} = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) init\_code;}
\DoxyCodeLine{5667       g-\/>\mbox{\hyperlink{structstbi____gif_a1c84fac79558de01c9990c5e0c74b46d}{codes}}[init\_code].\mbox{\hyperlink{structstbi____gif__lzw_a81a4ae6fed75092ccabd00909a53b574}{suffix}} = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) init\_code;}
\DoxyCodeLine{5668    \}}
\DoxyCodeLine{5669 }
\DoxyCodeLine{5670    \textcolor{comment}{// support no starting clear code}}
\DoxyCodeLine{5671    avail = clear+2;}
\DoxyCodeLine{5672    oldcode = -\/1;}
\DoxyCodeLine{5673 }
\DoxyCodeLine{5674    len = 0;}
\DoxyCodeLine{5675    \textcolor{keywordflow}{for}(;;) \{}
\DoxyCodeLine{5676       \textcolor{keywordflow}{if} (valid\_bits < codesize) \{}
\DoxyCodeLine{5677          \textcolor{keywordflow}{if} (len == 0) \{}
\DoxyCodeLine{5678             len = stbi\_\_get8(s); \textcolor{comment}{// start new block}}
\DoxyCodeLine{5679             \textcolor{keywordflow}{if} (len == 0)}
\DoxyCodeLine{5680                \textcolor{keywordflow}{return} g-\/>\mbox{\hyperlink{structstbi____gif_afb80bca5a7a657929511cf3fb2eb011a}{out}};}
\DoxyCodeLine{5681          \}}
\DoxyCodeLine{5682          -\/-\/len;}
\DoxyCodeLine{5683          bits |= (\mbox{\hyperlink{stb__image_8h_aa22ffdc0f962b06610737eaab3ac6b63}{stbi\_\_int32}}) stbi\_\_get8(s) << valid\_bits;}
\DoxyCodeLine{5684          valid\_bits += 8;}
\DoxyCodeLine{5685       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5686          \mbox{\hyperlink{stb__image_8h_aa22ffdc0f962b06610737eaab3ac6b63}{stbi\_\_int32}} code = bits \& codemask;}
\DoxyCodeLine{5687          bits >>= codesize;}
\DoxyCodeLine{5688          valid\_bits -\/= codesize;}
\DoxyCodeLine{5689          \textcolor{comment}{// @OPTIMIZE: is there some way we can accelerate the non-\/clear path?}}
\DoxyCodeLine{5690          \textcolor{keywordflow}{if} (code == clear) \{  \textcolor{comment}{// clear code}}
\DoxyCodeLine{5691             codesize = lzw\_cs + 1;}
\DoxyCodeLine{5692             codemask = (1 << codesize) -\/ 1;}
\DoxyCodeLine{5693             avail = clear + 2;}
\DoxyCodeLine{5694             oldcode = -\/1;}
\DoxyCodeLine{5695             first = 0;}
\DoxyCodeLine{5696          \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (code == clear + 1) \{ \textcolor{comment}{// end of stream code}}
\DoxyCodeLine{5697             stbi\_\_skip(s, len);}
\DoxyCodeLine{5698             \textcolor{keywordflow}{while} ((len = stbi\_\_get8(s)) > 0)}
\DoxyCodeLine{5699                stbi\_\_skip(s,len);}
\DoxyCodeLine{5700             \textcolor{keywordflow}{return} g-\/>\mbox{\hyperlink{structstbi____gif_afb80bca5a7a657929511cf3fb2eb011a}{out}};}
\DoxyCodeLine{5701          \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (code <= avail) \{}
\DoxyCodeLine{5702             \textcolor{keywordflow}{if} (first) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}no clear code"{}}, \textcolor{stringliteral}{"{}Corrupt GIF"{}});}
\DoxyCodeLine{5703 }
\DoxyCodeLine{5704             \textcolor{keywordflow}{if} (oldcode >= 0) \{}
\DoxyCodeLine{5705                p = \&g-\/>\mbox{\hyperlink{structstbi____gif_a1c84fac79558de01c9990c5e0c74b46d}{codes}}[avail++];}
\DoxyCodeLine{5706                \textcolor{keywordflow}{if} (avail > 4096)        \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}too many codes"{}}, \textcolor{stringliteral}{"{}Corrupt GIF"{}});}
\DoxyCodeLine{5707                p-\/>\mbox{\hyperlink{structstbi____gif__lzw_aca7e15994431bfec4a3805a9d34f9032}{prefix}} = (\mbox{\hyperlink{stb__image_8h_ae4cbd54705261d6f2d44b97ca536f14f}{stbi\_\_int16}}) oldcode;}
\DoxyCodeLine{5708                p-\/>\mbox{\hyperlink{structstbi____gif__lzw_ab6a463f784e4be55eee19e485bc25e97}{first}} = g-\/>\mbox{\hyperlink{structstbi____gif_a1c84fac79558de01c9990c5e0c74b46d}{codes}}[oldcode].\mbox{\hyperlink{structstbi____gif__lzw_ab6a463f784e4be55eee19e485bc25e97}{first}};}
\DoxyCodeLine{5709                p-\/>\mbox{\hyperlink{structstbi____gif__lzw_a81a4ae6fed75092ccabd00909a53b574}{suffix}} = (code == avail) ? p-\/>\mbox{\hyperlink{structstbi____gif__lzw_ab6a463f784e4be55eee19e485bc25e97}{first}} : g-\/>\mbox{\hyperlink{structstbi____gif_a1c84fac79558de01c9990c5e0c74b46d}{codes}}[code].\mbox{\hyperlink{structstbi____gif__lzw_ab6a463f784e4be55eee19e485bc25e97}{first}};}
\DoxyCodeLine{5710             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (code == avail)}
\DoxyCodeLine{5711                \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}illegal code in raster"{}}, \textcolor{stringliteral}{"{}Corrupt GIF"{}});}
\DoxyCodeLine{5712 }
\DoxyCodeLine{5713             stbi\_\_out\_gif\_code(g, (\mbox{\hyperlink{stb__image_8h_a38c41d822de912df31fb56df26a9cb8c}{stbi\_\_uint16}}) code);}
\DoxyCodeLine{5714 }
\DoxyCodeLine{5715             \textcolor{keywordflow}{if} ((avail \& codemask) == 0 \&\& avail <= 0x0FFF) \{}
\DoxyCodeLine{5716                codesize++;}
\DoxyCodeLine{5717                codemask = (1 << codesize) -\/ 1;}
\DoxyCodeLine{5718             \}}
\DoxyCodeLine{5719 }
\DoxyCodeLine{5720             oldcode = code;}
\DoxyCodeLine{5721          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5722             \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}illegal code in raster"{}}, \textcolor{stringliteral}{"{}Corrupt GIF"{}});}
\DoxyCodeLine{5723          \}}
\DoxyCodeLine{5724       \}}
\DoxyCodeLine{5725    \}}
\DoxyCodeLine{5726 \}}
\DoxyCodeLine{5727 }
\DoxyCodeLine{5728 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_fill\_gif\_background(\mbox{\hyperlink{structstbi____gif}{stbi\_\_gif}} *g, \textcolor{keywordtype}{int} x0, \textcolor{keywordtype}{int} y0, \textcolor{keywordtype}{int} x1, \textcolor{keywordtype}{int} y1)}
\DoxyCodeLine{5729 \{}
\DoxyCodeLine{5730    \textcolor{keywordtype}{int} x, y;}
\DoxyCodeLine{5731    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *c = g-\/>\mbox{\hyperlink{structstbi____gif_a2af70d0e97e9b9f3962b411ca59c431e}{pal}}[g-\/>\mbox{\hyperlink{structstbi____gif_acac0ac2c002c87d1b42599bf9fbf089d}{bgindex}}];}
\DoxyCodeLine{5732    \textcolor{keywordflow}{for} (y = y0; y < y1; y += 4 * g-\/>\mbox{\hyperlink{structstbi____gif_aa6d5cf40a87ac221381596112c5b9db7}{w}}) \{}
\DoxyCodeLine{5733       \textcolor{keywordflow}{for} (x = x0; x < x1; x += 4) \{}
\DoxyCodeLine{5734          \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *p  = \&g-\/>\mbox{\hyperlink{structstbi____gif_afb80bca5a7a657929511cf3fb2eb011a}{out}}[y + x];}
\DoxyCodeLine{5735          p[0] = c[2];}
\DoxyCodeLine{5736          p[1] = c[1];}
\DoxyCodeLine{5737          p[2] = c[0];}
\DoxyCodeLine{5738          p[3] = 0;}
\DoxyCodeLine{5739       \}}
\DoxyCodeLine{5740    \}}
\DoxyCodeLine{5741 \}}
\DoxyCodeLine{5742 }
\DoxyCodeLine{5743 \textcolor{comment}{// this function is designed to support animated gifs, although stb\_image doesn't support it}}
\DoxyCodeLine{5744 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_gif\_load\_next(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \mbox{\hyperlink{structstbi____gif}{stbi\_\_gif}} *g, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{5745 \{}
\DoxyCodeLine{5746    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{5747    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *prev\_out = 0;}
\DoxyCodeLine{5748 }
\DoxyCodeLine{5749    \textcolor{keywordflow}{if} (g-\/>\mbox{\hyperlink{structstbi____gif_afb80bca5a7a657929511cf3fb2eb011a}{out}} == 0 \&\& !stbi\_\_gif\_header(s, g, comp,0))}
\DoxyCodeLine{5750       \textcolor{keywordflow}{return} 0; \textcolor{comment}{// stbi\_\_g\_failure\_reason set by stbi\_\_gif\_header}}
\DoxyCodeLine{5751 }
\DoxyCodeLine{5752    prev\_out = g-\/>\mbox{\hyperlink{structstbi____gif_afb80bca5a7a657929511cf3fb2eb011a}{out}};}
\DoxyCodeLine{5753    g-\/>\mbox{\hyperlink{structstbi____gif_afb80bca5a7a657929511cf3fb2eb011a}{out}} = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc(4 * g-\/>\mbox{\hyperlink{structstbi____gif_aa6d5cf40a87ac221381596112c5b9db7}{w}} * g-\/>\mbox{\hyperlink{structstbi____gif_a52e0b8fb05bfbbf42b5a627945e64283}{h}});}
\DoxyCodeLine{5754    \textcolor{keywordflow}{if} (g-\/>\mbox{\hyperlink{structstbi____gif_afb80bca5a7a657929511cf3fb2eb011a}{out}} == 0) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{5755 }
\DoxyCodeLine{5756    \textcolor{keywordflow}{switch} ((g-\/>\mbox{\hyperlink{structstbi____gif_a6e787561b2f74045adeef981438fea0d}{eflags}} \& 0x1C) >> 2) \{}
\DoxyCodeLine{5757       \textcolor{keywordflow}{case} 0: \textcolor{comment}{// unspecified (also always used on 1st frame)}}
\DoxyCodeLine{5758          stbi\_\_fill\_gif\_background(g, 0, 0, 4 * g-\/>\mbox{\hyperlink{structstbi____gif_aa6d5cf40a87ac221381596112c5b9db7}{w}}, 4 * g-\/>\mbox{\hyperlink{structstbi____gif_aa6d5cf40a87ac221381596112c5b9db7}{w}} * g-\/>\mbox{\hyperlink{structstbi____gif_a52e0b8fb05bfbbf42b5a627945e64283}{h}});}
\DoxyCodeLine{5759          \textcolor{keywordflow}{break};}
\DoxyCodeLine{5760       \textcolor{keywordflow}{case} 1: \textcolor{comment}{// do not dispose}}
\DoxyCodeLine{5761          \textcolor{keywordflow}{if} (prev\_out) memcpy(g-\/>\mbox{\hyperlink{structstbi____gif_afb80bca5a7a657929511cf3fb2eb011a}{out}}, prev\_out, 4 * g-\/>\mbox{\hyperlink{structstbi____gif_aa6d5cf40a87ac221381596112c5b9db7}{w}} * g-\/>\mbox{\hyperlink{structstbi____gif_a52e0b8fb05bfbbf42b5a627945e64283}{h}});}
\DoxyCodeLine{5762          g-\/>\mbox{\hyperlink{structstbi____gif_add3a5b49ee3a7fc0906e21a1559c756c}{old\_out}} = prev\_out;}
\DoxyCodeLine{5763          \textcolor{keywordflow}{break};}
\DoxyCodeLine{5764       \textcolor{keywordflow}{case} 2: \textcolor{comment}{// dispose to background}}
\DoxyCodeLine{5765          \textcolor{keywordflow}{if} (prev\_out) memcpy(g-\/>\mbox{\hyperlink{structstbi____gif_afb80bca5a7a657929511cf3fb2eb011a}{out}}, prev\_out, 4 * g-\/>\mbox{\hyperlink{structstbi____gif_aa6d5cf40a87ac221381596112c5b9db7}{w}} * g-\/>\mbox{\hyperlink{structstbi____gif_a52e0b8fb05bfbbf42b5a627945e64283}{h}});}
\DoxyCodeLine{5766          stbi\_\_fill\_gif\_background(g, g-\/>\mbox{\hyperlink{structstbi____gif_a69c004ae01c2eff68c2e7941bc45e830}{start\_x}}, g-\/>\mbox{\hyperlink{structstbi____gif_aebe43c809d3d9820afebb27ef71eb8e6}{start\_y}}, g-\/>\mbox{\hyperlink{structstbi____gif_a3d1c32dbf7501745bf171dd1352f5342}{max\_x}}, g-\/>\mbox{\hyperlink{structstbi____gif_ad7f06feba8837656a05cd6b9825864de}{max\_y}});}
\DoxyCodeLine{5767          \textcolor{keywordflow}{break};}
\DoxyCodeLine{5768       \textcolor{keywordflow}{case} 3: \textcolor{comment}{// dispose to previous}}
\DoxyCodeLine{5769          \textcolor{keywordflow}{if} (g-\/>\mbox{\hyperlink{structstbi____gif_add3a5b49ee3a7fc0906e21a1559c756c}{old\_out}}) \{}
\DoxyCodeLine{5770             \textcolor{keywordflow}{for} (i = g-\/>\mbox{\hyperlink{structstbi____gif_aebe43c809d3d9820afebb27ef71eb8e6}{start\_y}}; i < g-\/>max\_y; i += 4 * g-\/>\mbox{\hyperlink{structstbi____gif_aa6d5cf40a87ac221381596112c5b9db7}{w}})}
\DoxyCodeLine{5771                memcpy(\&g-\/>\mbox{\hyperlink{structstbi____gif_afb80bca5a7a657929511cf3fb2eb011a}{out}}[i + g-\/>\mbox{\hyperlink{structstbi____gif_a69c004ae01c2eff68c2e7941bc45e830}{start\_x}}], \&g-\/>\mbox{\hyperlink{structstbi____gif_add3a5b49ee3a7fc0906e21a1559c756c}{old\_out}}[i + g-\/>\mbox{\hyperlink{structstbi____gif_a69c004ae01c2eff68c2e7941bc45e830}{start\_x}}], g-\/>\mbox{\hyperlink{structstbi____gif_a3d1c32dbf7501745bf171dd1352f5342}{max\_x}} -\/ g-\/>\mbox{\hyperlink{structstbi____gif_a69c004ae01c2eff68c2e7941bc45e830}{start\_x}});}
\DoxyCodeLine{5772          \}}
\DoxyCodeLine{5773          \textcolor{keywordflow}{break};}
\DoxyCodeLine{5774    \}}
\DoxyCodeLine{5775 }
\DoxyCodeLine{5776    \textcolor{keywordflow}{for} (;;) \{}
\DoxyCodeLine{5777       \textcolor{keywordflow}{switch} (stbi\_\_get8(s)) \{}
\DoxyCodeLine{5778          \textcolor{keywordflow}{case} 0x2C: \textcolor{comment}{/* Image Descriptor */}}
\DoxyCodeLine{5779          \{}
\DoxyCodeLine{5780             \textcolor{keywordtype}{int} prev\_trans = -\/1;}
\DoxyCodeLine{5781             \mbox{\hyperlink{stb__image_8h_aa22ffdc0f962b06610737eaab3ac6b63}{stbi\_\_int32}} x, y, w, h;}
\DoxyCodeLine{5782             \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *o;}
\DoxyCodeLine{5783 }
\DoxyCodeLine{5784             x = stbi\_\_get16le(s);}
\DoxyCodeLine{5785             y = stbi\_\_get16le(s);}
\DoxyCodeLine{5786             w = stbi\_\_get16le(s);}
\DoxyCodeLine{5787             h = stbi\_\_get16le(s);}
\DoxyCodeLine{5788             \textcolor{keywordflow}{if} (((x + w) > (g-\/>\mbox{\hyperlink{structstbi____gif_aa6d5cf40a87ac221381596112c5b9db7}{w}})) || ((y + h) > (g-\/>\mbox{\hyperlink{structstbi____gif_a52e0b8fb05bfbbf42b5a627945e64283}{h}})))}
\DoxyCodeLine{5789                \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}bad Image Descriptor"{}}, \textcolor{stringliteral}{"{}Corrupt GIF"{}});}
\DoxyCodeLine{5790 }
\DoxyCodeLine{5791             g-\/>\mbox{\hyperlink{structstbi____gif_a7798e637a0ab4da2e8cfd62191d620b5}{line\_size}} = g-\/>\mbox{\hyperlink{structstbi____gif_aa6d5cf40a87ac221381596112c5b9db7}{w}} * 4;}
\DoxyCodeLine{5792             g-\/>\mbox{\hyperlink{structstbi____gif_a69c004ae01c2eff68c2e7941bc45e830}{start\_x}} = x * 4;}
\DoxyCodeLine{5793             g-\/>\mbox{\hyperlink{structstbi____gif_aebe43c809d3d9820afebb27ef71eb8e6}{start\_y}} = y * g-\/>\mbox{\hyperlink{structstbi____gif_a7798e637a0ab4da2e8cfd62191d620b5}{line\_size}};}
\DoxyCodeLine{5794             g-\/>\mbox{\hyperlink{structstbi____gif_a3d1c32dbf7501745bf171dd1352f5342}{max\_x}}   = g-\/>\mbox{\hyperlink{structstbi____gif_a69c004ae01c2eff68c2e7941bc45e830}{start\_x}} + w * 4;}
\DoxyCodeLine{5795             g-\/>\mbox{\hyperlink{structstbi____gif_ad7f06feba8837656a05cd6b9825864de}{max\_y}}   = g-\/>\mbox{\hyperlink{structstbi____gif_aebe43c809d3d9820afebb27ef71eb8e6}{start\_y}} + h * g-\/>\mbox{\hyperlink{structstbi____gif_a7798e637a0ab4da2e8cfd62191d620b5}{line\_size}};}
\DoxyCodeLine{5796             g-\/>\mbox{\hyperlink{structstbi____gif_a1a7d790c5e2be2541e0199981caf28b7}{cur\_x}}   = g-\/>\mbox{\hyperlink{structstbi____gif_a69c004ae01c2eff68c2e7941bc45e830}{start\_x}};}
\DoxyCodeLine{5797             g-\/>\mbox{\hyperlink{structstbi____gif_ab8889ac8a3518775c72c075954684a0b}{cur\_y}}   = g-\/>\mbox{\hyperlink{structstbi____gif_aebe43c809d3d9820afebb27ef71eb8e6}{start\_y}};}
\DoxyCodeLine{5798 }
\DoxyCodeLine{5799             g-\/>\mbox{\hyperlink{structstbi____gif_af6fe14839dff03995f58e51150c0e20e}{lflags}} = stbi\_\_get8(s);}
\DoxyCodeLine{5800 }
\DoxyCodeLine{5801             \textcolor{keywordflow}{if} (g-\/>\mbox{\hyperlink{structstbi____gif_af6fe14839dff03995f58e51150c0e20e}{lflags}} \& 0x40) \{}
\DoxyCodeLine{5802                g-\/>\mbox{\hyperlink{structstbi____gif_a45195d6bf3b773a9246361bf2ea24780}{step}} = 8 * g-\/>\mbox{\hyperlink{structstbi____gif_a7798e637a0ab4da2e8cfd62191d620b5}{line\_size}}; \textcolor{comment}{// first interlaced spacing}}
\DoxyCodeLine{5803                g-\/>\mbox{\hyperlink{structstbi____gif_acdfc13e46fcd8bc618c87d8bebb75cc8}{parse}} = 3;}
\DoxyCodeLine{5804             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5805                g-\/>\mbox{\hyperlink{structstbi____gif_a45195d6bf3b773a9246361bf2ea24780}{step}} = g-\/>\mbox{\hyperlink{structstbi____gif_a7798e637a0ab4da2e8cfd62191d620b5}{line\_size}};}
\DoxyCodeLine{5806                g-\/>\mbox{\hyperlink{structstbi____gif_acdfc13e46fcd8bc618c87d8bebb75cc8}{parse}} = 0;}
\DoxyCodeLine{5807             \}}
\DoxyCodeLine{5808 }
\DoxyCodeLine{5809             \textcolor{keywordflow}{if} (g-\/>\mbox{\hyperlink{structstbi____gif_af6fe14839dff03995f58e51150c0e20e}{lflags}} \& 0x80) \{}
\DoxyCodeLine{5810                stbi\_\_gif\_parse\_colortable(s,g-\/>\mbox{\hyperlink{structstbi____gif_a5262450406d61b5bfcdaed38d3aba778}{lpal}}, 2 << (g-\/>\mbox{\hyperlink{structstbi____gif_af6fe14839dff03995f58e51150c0e20e}{lflags}} \& 7), g-\/>\mbox{\hyperlink{structstbi____gif_a6e787561b2f74045adeef981438fea0d}{eflags}} \& 0x01 ? g-\/>\mbox{\hyperlink{structstbi____gif_a7e82257a52c4eac0b615e228881e2174}{transparent}} : -\/1);}
\DoxyCodeLine{5811                g-\/>\mbox{\hyperlink{structstbi____gif_a60f7b60a1de4ce039c084994b3f063e5}{color\_table}} = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) g-\/>\mbox{\hyperlink{structstbi____gif_a5262450406d61b5bfcdaed38d3aba778}{lpal}};}
\DoxyCodeLine{5812             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (g-\/>\mbox{\hyperlink{structstbi____gif_af1678b58c9414ac7ea94687ab95f0617}{flags}} \& 0x80) \{}
\DoxyCodeLine{5813                \textcolor{keywordflow}{if} (g-\/>\mbox{\hyperlink{structstbi____gif_a7e82257a52c4eac0b615e228881e2174}{transparent}} >= 0 \&\& (g-\/>\mbox{\hyperlink{structstbi____gif_a6e787561b2f74045adeef981438fea0d}{eflags}} \& 0x01)) \{}
\DoxyCodeLine{5814                   prev\_trans = g-\/>\mbox{\hyperlink{structstbi____gif_a2af70d0e97e9b9f3962b411ca59c431e}{pal}}[g-\/>\mbox{\hyperlink{structstbi____gif_a7e82257a52c4eac0b615e228881e2174}{transparent}}][3];}
\DoxyCodeLine{5815                   g-\/>\mbox{\hyperlink{structstbi____gif_a2af70d0e97e9b9f3962b411ca59c431e}{pal}}[g-\/>\mbox{\hyperlink{structstbi____gif_a7e82257a52c4eac0b615e228881e2174}{transparent}}][3] = 0;}
\DoxyCodeLine{5816                \}}
\DoxyCodeLine{5817                g-\/>\mbox{\hyperlink{structstbi____gif_a60f7b60a1de4ce039c084994b3f063e5}{color\_table}} = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) g-\/>\mbox{\hyperlink{structstbi____gif_a2af70d0e97e9b9f3962b411ca59c431e}{pal}};}
\DoxyCodeLine{5818             \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{5819                \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}missing color table"{}}, \textcolor{stringliteral}{"{}Corrupt GIF"{}});}
\DoxyCodeLine{5820 }
\DoxyCodeLine{5821             o = stbi\_\_process\_gif\_raster(s, g);}
\DoxyCodeLine{5822             \textcolor{keywordflow}{if} (o == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{5823 }
\DoxyCodeLine{5824             \textcolor{keywordflow}{if} (prev\_trans != -\/1)}
\DoxyCodeLine{5825                g-\/>\mbox{\hyperlink{structstbi____gif_a2af70d0e97e9b9f3962b411ca59c431e}{pal}}[g-\/>\mbox{\hyperlink{structstbi____gif_a7e82257a52c4eac0b615e228881e2174}{transparent}}][3] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) prev\_trans;}
\DoxyCodeLine{5826 }
\DoxyCodeLine{5827             \textcolor{keywordflow}{return} o;}
\DoxyCodeLine{5828          \}}
\DoxyCodeLine{5829 }
\DoxyCodeLine{5830          \textcolor{keywordflow}{case} 0x21: \textcolor{comment}{// Comment Extension.}}
\DoxyCodeLine{5831          \{}
\DoxyCodeLine{5832             \textcolor{keywordtype}{int} len;}
\DoxyCodeLine{5833             \textcolor{keywordflow}{if} (stbi\_\_get8(s) == 0xF9) \{ \textcolor{comment}{// Graphic Control Extension.}}
\DoxyCodeLine{5834                len = stbi\_\_get8(s);}
\DoxyCodeLine{5835                \textcolor{keywordflow}{if} (len == 4) \{}
\DoxyCodeLine{5836                   g-\/>\mbox{\hyperlink{structstbi____gif_a6e787561b2f74045adeef981438fea0d}{eflags}} = stbi\_\_get8(s);}
\DoxyCodeLine{5837                   g-\/>\mbox{\hyperlink{structstbi____gif_a30d56d8b0a408947aadef2adbe58d1f1}{delay}} = stbi\_\_get16le(s);}
\DoxyCodeLine{5838                   g-\/>\mbox{\hyperlink{structstbi____gif_a7e82257a52c4eac0b615e228881e2174}{transparent}} = stbi\_\_get8(s);}
\DoxyCodeLine{5839                \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5840                   stbi\_\_skip(s, len);}
\DoxyCodeLine{5841                   \textcolor{keywordflow}{break};}
\DoxyCodeLine{5842                \}}
\DoxyCodeLine{5843             \}}
\DoxyCodeLine{5844             \textcolor{keywordflow}{while} ((len = stbi\_\_get8(s)) != 0)}
\DoxyCodeLine{5845                stbi\_\_skip(s, len);}
\DoxyCodeLine{5846             \textcolor{keywordflow}{break};}
\DoxyCodeLine{5847          \}}
\DoxyCodeLine{5848 }
\DoxyCodeLine{5849          \textcolor{keywordflow}{case} 0x3B: \textcolor{comment}{// gif stream termination code}}
\DoxyCodeLine{5850             \textcolor{keywordflow}{return} (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) s; \textcolor{comment}{// using '1' causes warning on some compilers}}
\DoxyCodeLine{5851 }
\DoxyCodeLine{5852          \textcolor{keywordflow}{default}:}
\DoxyCodeLine{5853             \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}unknown code"{}}, \textcolor{stringliteral}{"{}Corrupt GIF"{}});}
\DoxyCodeLine{5854       \}}
\DoxyCodeLine{5855    \}}
\DoxyCodeLine{5856 }
\DoxyCodeLine{5857    \mbox{\hyperlink{stb__image_8h_a3970ebac9a09e8116fa5855b334ca6ab}{STBI\_NOTUSED}}(req\_comp);}
\DoxyCodeLine{5858 \}}
\DoxyCodeLine{5859 }
\DoxyCodeLine{5860 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_gif\_load(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{5861 \{}
\DoxyCodeLine{5862    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *u = 0;}
\DoxyCodeLine{5863    \mbox{\hyperlink{structstbi____gif}{stbi\_\_gif}} g;}
\DoxyCodeLine{5864    memset(\&g, 0, \textcolor{keyword}{sizeof}(g));}
\DoxyCodeLine{5865 }
\DoxyCodeLine{5866    u = stbi\_\_gif\_load\_next(s, \&g, comp, req\_comp);}
\DoxyCodeLine{5867    \textcolor{keywordflow}{if} (u == (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) s) u = 0;  \textcolor{comment}{// end of animated gif marker}}
\DoxyCodeLine{5868    \textcolor{keywordflow}{if} (u) \{}
\DoxyCodeLine{5869       *x = g.\mbox{\hyperlink{structstbi____gif_aa6d5cf40a87ac221381596112c5b9db7}{w}};}
\DoxyCodeLine{5870       *y = g.\mbox{\hyperlink{structstbi____gif_a52e0b8fb05bfbbf42b5a627945e64283}{h}};}
\DoxyCodeLine{5871       \textcolor{keywordflow}{if} (req\_comp \&\& req\_comp != 4)}
\DoxyCodeLine{5872          u = stbi\_\_convert\_format(u, 4, req\_comp, g.\mbox{\hyperlink{structstbi____gif_aa6d5cf40a87ac221381596112c5b9db7}{w}}, g.\mbox{\hyperlink{structstbi____gif_a52e0b8fb05bfbbf42b5a627945e64283}{h}});}
\DoxyCodeLine{5873    \}}
\DoxyCodeLine{5874    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (g.\mbox{\hyperlink{structstbi____gif_afb80bca5a7a657929511cf3fb2eb011a}{out}})}
\DoxyCodeLine{5875       \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(g.\mbox{\hyperlink{structstbi____gif_afb80bca5a7a657929511cf3fb2eb011a}{out}});}
\DoxyCodeLine{5876 }
\DoxyCodeLine{5877    \textcolor{keywordflow}{return} u;}
\DoxyCodeLine{5878 \}}
\DoxyCodeLine{5879 }
\DoxyCodeLine{5880 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_gif\_info(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{5881 \{}
\DoxyCodeLine{5882    \textcolor{keywordflow}{return} stbi\_\_gif\_info\_raw(s,x,y,comp);}
\DoxyCodeLine{5883 \}}
\DoxyCodeLine{5884 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{5885 }
\DoxyCodeLine{5886 \textcolor{comment}{// *************************************************************************************************}}
\DoxyCodeLine{5887 \textcolor{comment}{// Radiance RGBE HDR loader}}
\DoxyCodeLine{5888 \textcolor{comment}{// originally by Nicolas Schulz}}
\DoxyCodeLine{5889 \textcolor{preprocessor}{\#ifndef STBI\_NO\_HDR}}
\DoxyCodeLine{5890 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_hdr\_test\_core(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s)}
\DoxyCodeLine{5891 \{}
\DoxyCodeLine{5892    \textcolor{keyword}{const} \textcolor{keywordtype}{char} *signature = \textcolor{stringliteral}{"{}\#?RADIANCE\(\backslash\)n"{}};}
\DoxyCodeLine{5893    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{5894    \textcolor{keywordflow}{for} (i=0; signature[i]; ++i)}
\DoxyCodeLine{5895       \textcolor{keywordflow}{if} (stbi\_\_get8(s) != signature[i])}
\DoxyCodeLine{5896          \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{5897    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{5898 \}}
\DoxyCodeLine{5899 }
\DoxyCodeLine{5900 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_hdr\_test(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}}* s)}
\DoxyCodeLine{5901 \{}
\DoxyCodeLine{5902    \textcolor{keywordtype}{int} r = stbi\_\_hdr\_test\_core(s);}
\DoxyCodeLine{5903    stbi\_\_rewind(s);}
\DoxyCodeLine{5904    \textcolor{keywordflow}{return} r;}
\DoxyCodeLine{5905 \}}
\DoxyCodeLine{5906 }
\DoxyCodeLine{5907 \textcolor{preprocessor}{\#define STBI\_\_HDR\_BUFLEN  1024}}
\DoxyCodeLine{5908 \textcolor{keyword}{static} \textcolor{keywordtype}{char} *stbi\_\_hdr\_gettoken(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *z, \textcolor{keywordtype}{char} *buffer)}
\DoxyCodeLine{5909 \{}
\DoxyCodeLine{5910    \textcolor{keywordtype}{int} len=0;}
\DoxyCodeLine{5911    \textcolor{keywordtype}{char} c = \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{5912 }
\DoxyCodeLine{5913    c = (char) stbi\_\_get8(z);}
\DoxyCodeLine{5914 }
\DoxyCodeLine{5915    \textcolor{keywordflow}{while} (!stbi\_\_at\_eof(z) \&\& c != \textcolor{charliteral}{'\(\backslash\)n'}) \{}
\DoxyCodeLine{5916       buffer[len++] = c;}
\DoxyCodeLine{5917       \textcolor{keywordflow}{if} (len == \mbox{\hyperlink{stb__image_8h_a1676c3903e90ebc826bfcc6514e00f33}{STBI\_\_HDR\_BUFLEN}}-\/1) \{}
\DoxyCodeLine{5918          \textcolor{comment}{// flush to end of line}}
\DoxyCodeLine{5919          \textcolor{keywordflow}{while} (!stbi\_\_at\_eof(z) \&\& stbi\_\_get8(z) != \textcolor{charliteral}{'\(\backslash\)n'})}
\DoxyCodeLine{5920             ;}
\DoxyCodeLine{5921          \textcolor{keywordflow}{break};}
\DoxyCodeLine{5922       \}}
\DoxyCodeLine{5923       c = (char) stbi\_\_get8(z);}
\DoxyCodeLine{5924    \}}
\DoxyCodeLine{5925 }
\DoxyCodeLine{5926    buffer[len] = 0;}
\DoxyCodeLine{5927    \textcolor{keywordflow}{return} buffer;}
\DoxyCodeLine{5928 \}}
\DoxyCodeLine{5929 }
\DoxyCodeLine{5930 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbi\_\_hdr\_convert(\textcolor{keywordtype}{float} *output, \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *input, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{5931 \{}
\DoxyCodeLine{5932    \textcolor{keywordflow}{if} ( input[3] != 0 ) \{}
\DoxyCodeLine{5933       \textcolor{keywordtype}{float} f1;}
\DoxyCodeLine{5934       \textcolor{comment}{// Exponent}}
\DoxyCodeLine{5935       f1 = (float) ldexp(1.0f, input[3] -\/ (\textcolor{keywordtype}{int})(128 + 8));}
\DoxyCodeLine{5936       \textcolor{keywordflow}{if} (req\_comp <= 2)}
\DoxyCodeLine{5937          output[0] = (input[0] + input[1] + input[2]) * f1 / 3;}
\DoxyCodeLine{5938       \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5939          output[0] = input[0] * f1;}
\DoxyCodeLine{5940          output[1] = input[1] * f1;}
\DoxyCodeLine{5941          output[2] = input[2] * f1;}
\DoxyCodeLine{5942       \}}
\DoxyCodeLine{5943       \textcolor{keywordflow}{if} (req\_comp == 2) output[1] = 1;}
\DoxyCodeLine{5944       \textcolor{keywordflow}{if} (req\_comp == 4) output[3] = 1;}
\DoxyCodeLine{5945    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{5946       \textcolor{keywordflow}{switch} (req\_comp) \{}
\DoxyCodeLine{5947          \textcolor{keywordflow}{case} 4: output[3] = 1; \textcolor{comment}{/* fallthrough */}}
\DoxyCodeLine{5948          \textcolor{keywordflow}{case} 3: output[0] = output[1] = output[2] = 0;}
\DoxyCodeLine{5949                  \textcolor{keywordflow}{break};}
\DoxyCodeLine{5950          \textcolor{keywordflow}{case} 2: output[1] = 1; \textcolor{comment}{/* fallthrough */}}
\DoxyCodeLine{5951          \textcolor{keywordflow}{case} 1: output[0] = 0;}
\DoxyCodeLine{5952                  \textcolor{keywordflow}{break};}
\DoxyCodeLine{5953       \}}
\DoxyCodeLine{5954    \}}
\DoxyCodeLine{5955 \}}
\DoxyCodeLine{5956 }
\DoxyCodeLine{5957 \textcolor{keyword}{static} \textcolor{keywordtype}{float} *stbi\_\_hdr\_load(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{5958 \{}
\DoxyCodeLine{5959    \textcolor{keywordtype}{char} buffer[\mbox{\hyperlink{stb__image_8h_a1676c3903e90ebc826bfcc6514e00f33}{STBI\_\_HDR\_BUFLEN}}];}
\DoxyCodeLine{5960    \textcolor{keywordtype}{char} *token;}
\DoxyCodeLine{5961    \textcolor{keywordtype}{int} valid = 0;}
\DoxyCodeLine{5962    \textcolor{keywordtype}{int} width, height;}
\DoxyCodeLine{5963    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *scanline;}
\DoxyCodeLine{5964    \textcolor{keywordtype}{float} *hdr\_data;}
\DoxyCodeLine{5965    \textcolor{keywordtype}{int} len;}
\DoxyCodeLine{5966    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} count, value;}
\DoxyCodeLine{5967    \textcolor{keywordtype}{int} i, j, k, c1,c2, z;}
\DoxyCodeLine{5968 }
\DoxyCodeLine{5969 }
\DoxyCodeLine{5970    \textcolor{comment}{// Check identifier}}
\DoxyCodeLine{5971    \textcolor{keywordflow}{if} (strcmp(stbi\_\_hdr\_gettoken(s,buffer), \textcolor{stringliteral}{"{}\#?RADIANCE"{}}) != 0)}
\DoxyCodeLine{5972       \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a747dfce8ff8728cf2d043dcb4df0757a}{stbi\_\_errpf}}(\textcolor{stringliteral}{"{}not HDR"{}}, \textcolor{stringliteral}{"{}Corrupt HDR image"{}});}
\DoxyCodeLine{5973 }
\DoxyCodeLine{5974    \textcolor{comment}{// Parse header}}
\DoxyCodeLine{5975    \textcolor{keywordflow}{for}(;;) \{}
\DoxyCodeLine{5976       token = stbi\_\_hdr\_gettoken(s,buffer);}
\DoxyCodeLine{5977       \textcolor{keywordflow}{if} (token[0] == 0) \textcolor{keywordflow}{break};}
\DoxyCodeLine{5978       \textcolor{keywordflow}{if} (strcmp(token, \textcolor{stringliteral}{"{}FORMAT=32-\/bit\_rle\_rgbe"{}}) == 0) valid = 1;}
\DoxyCodeLine{5979    \}}
\DoxyCodeLine{5980 }
\DoxyCodeLine{5981    \textcolor{keywordflow}{if} (!valid)    \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a747dfce8ff8728cf2d043dcb4df0757a}{stbi\_\_errpf}}(\textcolor{stringliteral}{"{}unsupported format"{}}, \textcolor{stringliteral}{"{}Unsupported HDR format"{}});}
\DoxyCodeLine{5982 }
\DoxyCodeLine{5983    \textcolor{comment}{// Parse width and height}}
\DoxyCodeLine{5984    \textcolor{comment}{// can't use sscanf() if we're not using stdio!}}
\DoxyCodeLine{5985    token = stbi\_\_hdr\_gettoken(s,buffer);}
\DoxyCodeLine{5986    \textcolor{keywordflow}{if} (strncmp(token, \textcolor{stringliteral}{"{}-\/Y "{}}, 3))  \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a747dfce8ff8728cf2d043dcb4df0757a}{stbi\_\_errpf}}(\textcolor{stringliteral}{"{}unsupported data layout"{}}, \textcolor{stringliteral}{"{}Unsupported HDR format"{}});}
\DoxyCodeLine{5987    token += 3;}
\DoxyCodeLine{5988    height = (int) strtol(token, \&token, 10);}
\DoxyCodeLine{5989    \textcolor{keywordflow}{while} (*token == \textcolor{charliteral}{' '}) ++token;}
\DoxyCodeLine{5990    \textcolor{keywordflow}{if} (strncmp(token, \textcolor{stringliteral}{"{}+X "{}}, 3))  \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a747dfce8ff8728cf2d043dcb4df0757a}{stbi\_\_errpf}}(\textcolor{stringliteral}{"{}unsupported data layout"{}}, \textcolor{stringliteral}{"{}Unsupported HDR format"{}});}
\DoxyCodeLine{5991    token += 3;}
\DoxyCodeLine{5992    width = (int) strtol(token, NULL, 10);}
\DoxyCodeLine{5993 }
\DoxyCodeLine{5994    *x = width;}
\DoxyCodeLine{5995    *y = height;}
\DoxyCodeLine{5996 }
\DoxyCodeLine{5997    \textcolor{keywordflow}{if} (comp) *comp = 3;}
\DoxyCodeLine{5998    \textcolor{keywordflow}{if} (req\_comp == 0) req\_comp = 3;}
\DoxyCodeLine{5999 }
\DoxyCodeLine{6000    \textcolor{comment}{// Read data}}
\DoxyCodeLine{6001    hdr\_data = (\textcolor{keywordtype}{float} *) stbi\_\_malloc(height * width * req\_comp * \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float}));}
\DoxyCodeLine{6002 }
\DoxyCodeLine{6003    \textcolor{comment}{// Load image data}}
\DoxyCodeLine{6004    \textcolor{comment}{// image data is stored as some number of sca}}
\DoxyCodeLine{6005    \textcolor{keywordflow}{if} ( width < 8 || width >= 32768) \{}
\DoxyCodeLine{6006       \textcolor{comment}{// Read flat data}}
\DoxyCodeLine{6007       \textcolor{keywordflow}{for} (j=0; j < height; ++j) \{}
\DoxyCodeLine{6008          \textcolor{keywordflow}{for} (i=0; i < width; ++i) \{}
\DoxyCodeLine{6009             \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} rgbe[4];}
\DoxyCodeLine{6010            main\_decode\_loop:}
\DoxyCodeLine{6011             stbi\_\_getn(s, rgbe, 4);}
\DoxyCodeLine{6012             stbi\_\_hdr\_convert(hdr\_data + j * width * req\_comp + i * req\_comp, rgbe, req\_comp);}
\DoxyCodeLine{6013          \}}
\DoxyCodeLine{6014       \}}
\DoxyCodeLine{6015    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{6016       \textcolor{comment}{// Read RLE-\/encoded data}}
\DoxyCodeLine{6017       scanline = NULL;}
\DoxyCodeLine{6018 }
\DoxyCodeLine{6019       \textcolor{keywordflow}{for} (j = 0; j < height; ++j) \{}
\DoxyCodeLine{6020          c1 = stbi\_\_get8(s);}
\DoxyCodeLine{6021          c2 = stbi\_\_get8(s);}
\DoxyCodeLine{6022          len = stbi\_\_get8(s);}
\DoxyCodeLine{6023          \textcolor{keywordflow}{if} (c1 != 2 || c2 != 2 || (len \& 0x80)) \{}
\DoxyCodeLine{6024             \textcolor{comment}{// not run-\/length encoded, so we have to actually use THIS data as a decoded}}
\DoxyCodeLine{6025             \textcolor{comment}{// pixel (note this can't be a valid pixel-\/-\/one of RGB must be >= 128)}}
\DoxyCodeLine{6026             \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} rgbe[4];}
\DoxyCodeLine{6027             rgbe[0] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) c1;}
\DoxyCodeLine{6028             rgbe[1] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) c2;}
\DoxyCodeLine{6029             rgbe[2] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) len;}
\DoxyCodeLine{6030             rgbe[3] = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}}) stbi\_\_get8(s);}
\DoxyCodeLine{6031             stbi\_\_hdr\_convert(hdr\_data, rgbe, req\_comp);}
\DoxyCodeLine{6032             i = 1;}
\DoxyCodeLine{6033             j = 0;}
\DoxyCodeLine{6034             \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(scanline);}
\DoxyCodeLine{6035             \textcolor{keywordflow}{goto} main\_decode\_loop; \textcolor{comment}{// yes, this makes no sense}}
\DoxyCodeLine{6036          \}}
\DoxyCodeLine{6037          len <<= 8;}
\DoxyCodeLine{6038          len |= stbi\_\_get8(s);}
\DoxyCodeLine{6039          \textcolor{keywordflow}{if} (len != width) \{ \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(hdr\_data); \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(scanline); \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a747dfce8ff8728cf2d043dcb4df0757a}{stbi\_\_errpf}}(\textcolor{stringliteral}{"{}invalid decoded scanline length"{}}, \textcolor{stringliteral}{"{}corrupt HDR"{}}); \}}
\DoxyCodeLine{6040          \textcolor{keywordflow}{if} (scanline == NULL) scanline = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc(width * 4);}
\DoxyCodeLine{6041 }
\DoxyCodeLine{6042          \textcolor{keywordflow}{for} (k = 0; k < 4; ++k) \{}
\DoxyCodeLine{6043             i = 0;}
\DoxyCodeLine{6044             \textcolor{keywordflow}{while} (i < width) \{}
\DoxyCodeLine{6045                count = stbi\_\_get8(s);}
\DoxyCodeLine{6046                \textcolor{keywordflow}{if} (count > 128) \{}
\DoxyCodeLine{6047                   \textcolor{comment}{// Run}}
\DoxyCodeLine{6048                   value = stbi\_\_get8(s);}
\DoxyCodeLine{6049                   count -\/= 128;}
\DoxyCodeLine{6050                   \textcolor{keywordflow}{for} (z = 0; z < count; ++z)}
\DoxyCodeLine{6051                      scanline[i++ * 4 + k] = value;}
\DoxyCodeLine{6052                \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{6053                   \textcolor{comment}{// Dump}}
\DoxyCodeLine{6054                   \textcolor{keywordflow}{for} (z = 0; z < count; ++z)}
\DoxyCodeLine{6055                      scanline[i++ * 4 + k] = stbi\_\_get8(s);}
\DoxyCodeLine{6056                \}}
\DoxyCodeLine{6057             \}}
\DoxyCodeLine{6058          \}}
\DoxyCodeLine{6059          \textcolor{keywordflow}{for} (i=0; i < width; ++i)}
\DoxyCodeLine{6060             stbi\_\_hdr\_convert(hdr\_data+(j*width + i)*req\_comp, scanline + i*4, req\_comp);}
\DoxyCodeLine{6061       \}}
\DoxyCodeLine{6062       \mbox{\hyperlink{stb__image_8h_a07af50300e5cc077c6b31a4d2e8af32a}{STBI\_FREE}}(scanline);}
\DoxyCodeLine{6063    \}}
\DoxyCodeLine{6064 }
\DoxyCodeLine{6065    \textcolor{keywordflow}{return} hdr\_data;}
\DoxyCodeLine{6066 \}}
\DoxyCodeLine{6067 }
\DoxyCodeLine{6068 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_hdr\_info(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{6069 \{}
\DoxyCodeLine{6070    \textcolor{keywordtype}{char} buffer[\mbox{\hyperlink{stb__image_8h_a1676c3903e90ebc826bfcc6514e00f33}{STBI\_\_HDR\_BUFLEN}}];}
\DoxyCodeLine{6071    \textcolor{keywordtype}{char} *token;}
\DoxyCodeLine{6072    \textcolor{keywordtype}{int} valid = 0;}
\DoxyCodeLine{6073 }
\DoxyCodeLine{6074    \textcolor{keywordflow}{if} (strcmp(stbi\_\_hdr\_gettoken(s,buffer), \textcolor{stringliteral}{"{}\#?RADIANCE"{}}) != 0) \{}
\DoxyCodeLine{6075        stbi\_\_rewind( s );}
\DoxyCodeLine{6076        \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6077    \}}
\DoxyCodeLine{6078 }
\DoxyCodeLine{6079    \textcolor{keywordflow}{for}(;;) \{}
\DoxyCodeLine{6080       token = stbi\_\_hdr\_gettoken(s,buffer);}
\DoxyCodeLine{6081       \textcolor{keywordflow}{if} (token[0] == 0) \textcolor{keywordflow}{break};}
\DoxyCodeLine{6082       \textcolor{keywordflow}{if} (strcmp(token, \textcolor{stringliteral}{"{}FORMAT=32-\/bit\_rle\_rgbe"{}}) == 0) valid = 1;}
\DoxyCodeLine{6083    \}}
\DoxyCodeLine{6084 }
\DoxyCodeLine{6085    \textcolor{keywordflow}{if} (!valid) \{}
\DoxyCodeLine{6086        stbi\_\_rewind( s );}
\DoxyCodeLine{6087        \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6088    \}}
\DoxyCodeLine{6089    token = stbi\_\_hdr\_gettoken(s,buffer);}
\DoxyCodeLine{6090    \textcolor{keywordflow}{if} (strncmp(token, \textcolor{stringliteral}{"{}-\/Y "{}}, 3)) \{}
\DoxyCodeLine{6091        stbi\_\_rewind( s );}
\DoxyCodeLine{6092        \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6093    \}}
\DoxyCodeLine{6094    token += 3;}
\DoxyCodeLine{6095    *y = (int) strtol(token, \&token, 10);}
\DoxyCodeLine{6096    \textcolor{keywordflow}{while} (*token == \textcolor{charliteral}{' '}) ++token;}
\DoxyCodeLine{6097    \textcolor{keywordflow}{if} (strncmp(token, \textcolor{stringliteral}{"{}+X "{}}, 3)) \{}
\DoxyCodeLine{6098        stbi\_\_rewind( s );}
\DoxyCodeLine{6099        \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6100    \}}
\DoxyCodeLine{6101    token += 3;}
\DoxyCodeLine{6102    *x = (int) strtol(token, NULL, 10);}
\DoxyCodeLine{6103    *comp = 3;}
\DoxyCodeLine{6104    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6105 \}}
\DoxyCodeLine{6106 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STBI\_NO\_HDR}}
\DoxyCodeLine{6107 }
\DoxyCodeLine{6108 \textcolor{preprocessor}{\#ifndef STBI\_NO\_BMP}}
\DoxyCodeLine{6109 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_bmp\_info(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{6110 \{}
\DoxyCodeLine{6111    \textcolor{keywordtype}{int} hsz;}
\DoxyCodeLine{6112    \textcolor{keywordflow}{if} (stbi\_\_get8(s) != \textcolor{charliteral}{'B'} || stbi\_\_get8(s) != \textcolor{charliteral}{'M'}) \{}
\DoxyCodeLine{6113        stbi\_\_rewind( s );}
\DoxyCodeLine{6114        \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6115    \}}
\DoxyCodeLine{6116    stbi\_\_skip(s,12);}
\DoxyCodeLine{6117    hsz = stbi\_\_get32le(s);}
\DoxyCodeLine{6118    \textcolor{keywordflow}{if} (hsz != 12 \&\& hsz != 40 \&\& hsz != 56 \&\& hsz != 108 \&\& hsz != 124) \{}
\DoxyCodeLine{6119        stbi\_\_rewind( s );}
\DoxyCodeLine{6120        \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6121    \}}
\DoxyCodeLine{6122    \textcolor{keywordflow}{if} (hsz == 12) \{}
\DoxyCodeLine{6123       *x = stbi\_\_get16le(s);}
\DoxyCodeLine{6124       *y = stbi\_\_get16le(s);}
\DoxyCodeLine{6125    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{6126       *x = stbi\_\_get32le(s);}
\DoxyCodeLine{6127       *y = stbi\_\_get32le(s);}
\DoxyCodeLine{6128    \}}
\DoxyCodeLine{6129    \textcolor{keywordflow}{if} (stbi\_\_get16le(s) != 1) \{}
\DoxyCodeLine{6130        stbi\_\_rewind( s );}
\DoxyCodeLine{6131        \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6132    \}}
\DoxyCodeLine{6133    *comp = stbi\_\_get16le(s) / 8;}
\DoxyCodeLine{6134    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6135 \}}
\DoxyCodeLine{6136 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{6137 }
\DoxyCodeLine{6138 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PSD}}
\DoxyCodeLine{6139 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_psd\_info(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{6140 \{}
\DoxyCodeLine{6141    \textcolor{keywordtype}{int} channelCount;}
\DoxyCodeLine{6142    \textcolor{keywordflow}{if} (stbi\_\_get32be(s) != 0x38425053) \{}
\DoxyCodeLine{6143        stbi\_\_rewind( s );}
\DoxyCodeLine{6144        \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6145    \}}
\DoxyCodeLine{6146    \textcolor{keywordflow}{if} (stbi\_\_get16be(s) != 1) \{}
\DoxyCodeLine{6147        stbi\_\_rewind( s );}
\DoxyCodeLine{6148        \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6149    \}}
\DoxyCodeLine{6150    stbi\_\_skip(s, 6);}
\DoxyCodeLine{6151    channelCount = stbi\_\_get16be(s);}
\DoxyCodeLine{6152    \textcolor{keywordflow}{if} (channelCount < 0 || channelCount > 16) \{}
\DoxyCodeLine{6153        stbi\_\_rewind( s );}
\DoxyCodeLine{6154        \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6155    \}}
\DoxyCodeLine{6156    *y = stbi\_\_get32be(s);}
\DoxyCodeLine{6157    *x = stbi\_\_get32be(s);}
\DoxyCodeLine{6158    \textcolor{keywordflow}{if} (stbi\_\_get16be(s) != 8) \{}
\DoxyCodeLine{6159        stbi\_\_rewind( s );}
\DoxyCodeLine{6160        \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6161    \}}
\DoxyCodeLine{6162    \textcolor{keywordflow}{if} (stbi\_\_get16be(s) != 3) \{}
\DoxyCodeLine{6163        stbi\_\_rewind( s );}
\DoxyCodeLine{6164        \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6165    \}}
\DoxyCodeLine{6166    *comp = 4;}
\DoxyCodeLine{6167    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6168 \}}
\DoxyCodeLine{6169 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{6170 }
\DoxyCodeLine{6171 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PIC}}
\DoxyCodeLine{6172 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_pic\_info(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{6173 \{}
\DoxyCodeLine{6174    \textcolor{keywordtype}{int} act\_comp=0,num\_packets=0,chained;}
\DoxyCodeLine{6175    \mbox{\hyperlink{structstbi____pic__packet}{stbi\_\_pic\_packet}} packets[10];}
\DoxyCodeLine{6176 }
\DoxyCodeLine{6177    \textcolor{keywordflow}{if} (!stbi\_\_pic\_is4(s,\textcolor{stringliteral}{"{}\(\backslash\)x53\(\backslash\)x80\(\backslash\)xF6\(\backslash\)x34"{}})) \{}
\DoxyCodeLine{6178       stbi\_\_rewind(s);}
\DoxyCodeLine{6179       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6180    \}}
\DoxyCodeLine{6181 }
\DoxyCodeLine{6182    stbi\_\_skip(s, 88);}
\DoxyCodeLine{6183 }
\DoxyCodeLine{6184    *x = stbi\_\_get16be(s);}
\DoxyCodeLine{6185    *y = stbi\_\_get16be(s);}
\DoxyCodeLine{6186    \textcolor{keywordflow}{if} (stbi\_\_at\_eof(s)) \{}
\DoxyCodeLine{6187       stbi\_\_rewind( s);}
\DoxyCodeLine{6188       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6189    \}}
\DoxyCodeLine{6190    \textcolor{keywordflow}{if} ( (*x) != 0 \&\& (1 << 28) / (*x) < (*y)) \{}
\DoxyCodeLine{6191       stbi\_\_rewind( s );}
\DoxyCodeLine{6192       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6193    \}}
\DoxyCodeLine{6194 }
\DoxyCodeLine{6195    stbi\_\_skip(s, 8);}
\DoxyCodeLine{6196 }
\DoxyCodeLine{6197    \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{6198       \mbox{\hyperlink{structstbi____pic__packet}{stbi\_\_pic\_packet}} *packet;}
\DoxyCodeLine{6199 }
\DoxyCodeLine{6200       \textcolor{keywordflow}{if} (num\_packets==\textcolor{keyword}{sizeof}(packets)/\textcolor{keyword}{sizeof}(packets[0]))}
\DoxyCodeLine{6201          \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6202 }
\DoxyCodeLine{6203       packet = \&packets[num\_packets++];}
\DoxyCodeLine{6204       chained = stbi\_\_get8(s);}
\DoxyCodeLine{6205       packet-\/>\mbox{\hyperlink{structstbi____pic__packet_a2929a685716a20ae3ba4b3243275b217}{size}}    = stbi\_\_get8(s);}
\DoxyCodeLine{6206       packet-\/>\mbox{\hyperlink{structstbi____pic__packet_ab88dc45f5b83d46016b5310cebec69ac}{type}}    = stbi\_\_get8(s);}
\DoxyCodeLine{6207       packet-\/>\mbox{\hyperlink{structstbi____pic__packet_a7eca789dd148bbdae42844fc4992abb6}{channel}} = stbi\_\_get8(s);}
\DoxyCodeLine{6208       act\_comp |= packet-\/>\mbox{\hyperlink{structstbi____pic__packet_a7eca789dd148bbdae42844fc4992abb6}{channel}};}
\DoxyCodeLine{6209 }
\DoxyCodeLine{6210       \textcolor{keywordflow}{if} (stbi\_\_at\_eof(s)) \{}
\DoxyCodeLine{6211           stbi\_\_rewind( s );}
\DoxyCodeLine{6212           \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6213       \}}
\DoxyCodeLine{6214       \textcolor{keywordflow}{if} (packet-\/>\mbox{\hyperlink{structstbi____pic__packet_a2929a685716a20ae3ba4b3243275b217}{size}} != 8) \{}
\DoxyCodeLine{6215           stbi\_\_rewind( s );}
\DoxyCodeLine{6216           \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6217       \}}
\DoxyCodeLine{6218    \} \textcolor{keywordflow}{while} (chained);}
\DoxyCodeLine{6219 }
\DoxyCodeLine{6220    *comp = (act\_comp \& 0x10 ? 4 : 3);}
\DoxyCodeLine{6221 }
\DoxyCodeLine{6222    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6223 \}}
\DoxyCodeLine{6224 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{6225 }
\DoxyCodeLine{6226 \textcolor{comment}{// *************************************************************************************************}}
\DoxyCodeLine{6227 \textcolor{comment}{// Portable Gray Map and Portable Pixel Map loader}}
\DoxyCodeLine{6228 \textcolor{comment}{// by Ken Miller}}
\DoxyCodeLine{6229 \textcolor{comment}{//}}
\DoxyCodeLine{6230 \textcolor{comment}{// PGM: http://netpbm.sourceforge.net/doc/pgm.html}}
\DoxyCodeLine{6231 \textcolor{comment}{// PPM: http://netpbm.sourceforge.net/doc/ppm.html}}
\DoxyCodeLine{6232 \textcolor{comment}{//}}
\DoxyCodeLine{6233 \textcolor{comment}{// Known limitations:}}
\DoxyCodeLine{6234 \textcolor{comment}{//    Does not support comments in the header section}}
\DoxyCodeLine{6235 \textcolor{comment}{//    Does not support ASCII image data (formats P2 and P3)}}
\DoxyCodeLine{6236 \textcolor{comment}{//    Does not support 16-\/bit-\/per-\/channel}}
\DoxyCodeLine{6237 }
\DoxyCodeLine{6238 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PNM}}
\DoxyCodeLine{6239 }
\DoxyCodeLine{6240 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_pnm\_test(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s)}
\DoxyCodeLine{6241 \{}
\DoxyCodeLine{6242    \textcolor{keywordtype}{char} p, t;}
\DoxyCodeLine{6243    p = (char) stbi\_\_get8(s);}
\DoxyCodeLine{6244    t = (char) stbi\_\_get8(s);}
\DoxyCodeLine{6245    \textcolor{keywordflow}{if} (p != \textcolor{charliteral}{'P'} || (t != \textcolor{charliteral}{'5'} \&\& t != \textcolor{charliteral}{'6'})) \{}
\DoxyCodeLine{6246        stbi\_\_rewind( s );}
\DoxyCodeLine{6247        \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6248    \}}
\DoxyCodeLine{6249    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6250 \}}
\DoxyCodeLine{6251 }
\DoxyCodeLine{6252 \textcolor{keyword}{static} \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *stbi\_\_pnm\_load(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp, \textcolor{keywordtype}{int} req\_comp)}
\DoxyCodeLine{6253 \{}
\DoxyCodeLine{6254    \mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *out;}
\DoxyCodeLine{6255    \textcolor{keywordflow}{if} (!stbi\_\_pnm\_info(s, (\textcolor{keywordtype}{int} *)\&s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}}, (\textcolor{keywordtype}{int} *)\&s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}}, (\textcolor{keywordtype}{int} *)\&s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}}))}
\DoxyCodeLine{6256       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6257    *x = s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}};}
\DoxyCodeLine{6258    *y = s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}};}
\DoxyCodeLine{6259    *comp = s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}};}
\DoxyCodeLine{6260 }
\DoxyCodeLine{6261    out = (\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} *) stbi\_\_malloc(s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}} * s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} * s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}});}
\DoxyCodeLine{6262    \textcolor{keywordflow}{if} (!out) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_a8e835b04a3491ba3f6fec408723faac7}{stbi\_\_errpuc}}(\textcolor{stringliteral}{"{}outofmem"{}}, \textcolor{stringliteral}{"{}Out of memory"{}});}
\DoxyCodeLine{6263    stbi\_\_getn(s, out, s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}} * s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}} * s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}});}
\DoxyCodeLine{6264 }
\DoxyCodeLine{6265    \textcolor{keywordflow}{if} (req\_comp \&\& req\_comp != s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}}) \{}
\DoxyCodeLine{6266       out = stbi\_\_convert\_format(out, s-\/>\mbox{\hyperlink{structstbi____context_afc068268e1f91a33627f2e7ce3b84e26}{img\_n}}, req\_comp, s-\/>\mbox{\hyperlink{structstbi____context_a1ef0d00dcf3fbc9ea468995b1b53fbeb}{img\_x}}, s-\/>\mbox{\hyperlink{structstbi____context_a5392767d41a587c3773d70ad2f8f33be}{img\_y}});}
\DoxyCodeLine{6267       \textcolor{keywordflow}{if} (out == NULL) \textcolor{keywordflow}{return} out; \textcolor{comment}{// stbi\_\_convert\_format frees input on failure}}
\DoxyCodeLine{6268    \}}
\DoxyCodeLine{6269    \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{6270 \}}
\DoxyCodeLine{6271 }
\DoxyCodeLine{6272 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_pnm\_isspace(\textcolor{keywordtype}{char} c)}
\DoxyCodeLine{6273 \{}
\DoxyCodeLine{6274    \textcolor{keywordflow}{return} c == \textcolor{charliteral}{' '} || c == \textcolor{charliteral}{'\(\backslash\)t'} || c == \textcolor{charliteral}{'\(\backslash\)n'} || c == \textcolor{charliteral}{'\(\backslash\)v'} || c == \textcolor{charliteral}{'\(\backslash\)f'} || c == \textcolor{charliteral}{'\(\backslash\)r'};}
\DoxyCodeLine{6275 \}}
\DoxyCodeLine{6276 }
\DoxyCodeLine{6277 \textcolor{keyword}{static} \textcolor{keywordtype}{void}     stbi\_\_pnm\_skip\_whitespace(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{char} *c)}
\DoxyCodeLine{6278 \{}
\DoxyCodeLine{6279    \textcolor{keywordflow}{while} (!stbi\_\_at\_eof(s) \&\& stbi\_\_pnm\_isspace(*c))}
\DoxyCodeLine{6280       *c = (char) stbi\_\_get8(s);}
\DoxyCodeLine{6281 \}}
\DoxyCodeLine{6282 }
\DoxyCodeLine{6283 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_pnm\_isdigit(\textcolor{keywordtype}{char} c)}
\DoxyCodeLine{6284 \{}
\DoxyCodeLine{6285    \textcolor{keywordflow}{return} c >= \textcolor{charliteral}{'0'} \&\& c <= \textcolor{charliteral}{'9'};}
\DoxyCodeLine{6286 \}}
\DoxyCodeLine{6287 }
\DoxyCodeLine{6288 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_pnm\_getinteger(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{char} *c)}
\DoxyCodeLine{6289 \{}
\DoxyCodeLine{6290    \textcolor{keywordtype}{int} value = 0;}
\DoxyCodeLine{6291 }
\DoxyCodeLine{6292    \textcolor{keywordflow}{while} (!stbi\_\_at\_eof(s) \&\& stbi\_\_pnm\_isdigit(*c)) \{}
\DoxyCodeLine{6293       value = value*10 + (*c -\/ \textcolor{charliteral}{'0'});}
\DoxyCodeLine{6294       *c = (char) stbi\_\_get8(s);}
\DoxyCodeLine{6295    \}}
\DoxyCodeLine{6296 }
\DoxyCodeLine{6297    \textcolor{keywordflow}{return} value;}
\DoxyCodeLine{6298 \}}
\DoxyCodeLine{6299 }
\DoxyCodeLine{6300 \textcolor{keyword}{static} \textcolor{keywordtype}{int}      stbi\_\_pnm\_info(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{6301 \{}
\DoxyCodeLine{6302    \textcolor{keywordtype}{int} maxv;}
\DoxyCodeLine{6303    \textcolor{keywordtype}{char} c, p, t;}
\DoxyCodeLine{6304 }
\DoxyCodeLine{6305    stbi\_\_rewind( s );}
\DoxyCodeLine{6306 }
\DoxyCodeLine{6307    \textcolor{comment}{// Get identifier}}
\DoxyCodeLine{6308    p = (char) stbi\_\_get8(s);}
\DoxyCodeLine{6309    t = (char) stbi\_\_get8(s);}
\DoxyCodeLine{6310    \textcolor{keywordflow}{if} (p != \textcolor{charliteral}{'P'} || (t != \textcolor{charliteral}{'5'} \&\& t != \textcolor{charliteral}{'6'})) \{}
\DoxyCodeLine{6311        stbi\_\_rewind( s );}
\DoxyCodeLine{6312        \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{6313    \}}
\DoxyCodeLine{6314 }
\DoxyCodeLine{6315    *comp = (t == \textcolor{charliteral}{'6'}) ? 3 : 1;  \textcolor{comment}{// '5' is 1-\/component .pgm; '6' is 3-\/component .ppm}}
\DoxyCodeLine{6316 }
\DoxyCodeLine{6317    c = (char) stbi\_\_get8(s);}
\DoxyCodeLine{6318    stbi\_\_pnm\_skip\_whitespace(s, \&c);}
\DoxyCodeLine{6319 }
\DoxyCodeLine{6320    *x = stbi\_\_pnm\_getinteger(s, \&c); \textcolor{comment}{// read width}}
\DoxyCodeLine{6321    stbi\_\_pnm\_skip\_whitespace(s, \&c);}
\DoxyCodeLine{6322 }
\DoxyCodeLine{6323    *y = stbi\_\_pnm\_getinteger(s, \&c); \textcolor{comment}{// read height}}
\DoxyCodeLine{6324    stbi\_\_pnm\_skip\_whitespace(s, \&c);}
\DoxyCodeLine{6325 }
\DoxyCodeLine{6326    maxv = stbi\_\_pnm\_getinteger(s, \&c);  \textcolor{comment}{// read max value}}
\DoxyCodeLine{6327 }
\DoxyCodeLine{6328    \textcolor{keywordflow}{if} (maxv > 255)}
\DoxyCodeLine{6329       \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}max value > 255"{}}, \textcolor{stringliteral}{"{}PPM image not 8-\/bit"{}});}
\DoxyCodeLine{6330    \textcolor{keywordflow}{else}}
\DoxyCodeLine{6331       \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6332 \}}
\DoxyCodeLine{6333 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{6334 }
\DoxyCodeLine{6335 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbi\_\_info\_main(\mbox{\hyperlink{structstbi____context}{stbi\_\_context}} *s, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{6336 \{}
\DoxyCodeLine{6337 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_JPEG}}
\DoxyCodeLine{6338    \textcolor{keywordflow}{if} (stbi\_\_jpeg\_info(s, x, y, comp)) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6339 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{6340 }
\DoxyCodeLine{6341 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_PNG}}
\DoxyCodeLine{6342    \textcolor{keywordflow}{if} (stbi\_\_png\_info(s, x, y, comp))  \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6343 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{6344 }
\DoxyCodeLine{6345 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_GIF}}
\DoxyCodeLine{6346    \textcolor{keywordflow}{if} (stbi\_\_gif\_info(s, x, y, comp))  \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6347 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{6348 }
\DoxyCodeLine{6349 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_BMP}}
\DoxyCodeLine{6350    \textcolor{keywordflow}{if} (stbi\_\_bmp\_info(s, x, y, comp))  \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6351 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{6352 }
\DoxyCodeLine{6353 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_PSD}}
\DoxyCodeLine{6354    \textcolor{keywordflow}{if} (stbi\_\_psd\_info(s, x, y, comp))  \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6355 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{6356 }
\DoxyCodeLine{6357 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_PIC}}
\DoxyCodeLine{6358    \textcolor{keywordflow}{if} (stbi\_\_pic\_info(s, x, y, comp))  \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6359 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{6360 }
\DoxyCodeLine{6361 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_PNM}}
\DoxyCodeLine{6362    \textcolor{keywordflow}{if} (stbi\_\_pnm\_info(s, x, y, comp))  \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6363 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{6364 }
\DoxyCodeLine{6365 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_HDR}}
\DoxyCodeLine{6366    \textcolor{keywordflow}{if} (stbi\_\_hdr\_info(s, x, y, comp))  \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6367 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{6368 }
\DoxyCodeLine{6369    \textcolor{comment}{// test tga last because it's a crappy test!}}
\DoxyCodeLine{6370 \textcolor{preprocessor}{   \#ifndef STBI\_NO\_TGA}}
\DoxyCodeLine{6371    \textcolor{keywordflow}{if} (stbi\_\_tga\_info(s, x, y, comp))}
\DoxyCodeLine{6372        \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{6373 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{6374    \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}unknown image type"{}}, \textcolor{stringliteral}{"{}Image not of any known type, or corrupt"{}});}
\DoxyCodeLine{6375 \}}
\DoxyCodeLine{6376 }
\DoxyCodeLine{6377 \textcolor{preprocessor}{\#ifndef STBI\_NO\_STDIO}}
\DoxyCodeLine{6378 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int} \mbox{\hyperlink{stb__image_8h_aede708cca1304520b2afcf4d5eb61d70}{stbi\_info}}(\textcolor{keywordtype}{char} \textcolor{keyword}{const} *filename, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{6379 \{}
\DoxyCodeLine{6380     FILE *f = stbi\_\_fopen(filename, \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{6381     \textcolor{keywordtype}{int} result;}
\DoxyCodeLine{6382     \textcolor{keywordflow}{if} (!f) \textcolor{keywordflow}{return} \mbox{\hyperlink{stb__image_8h_ab1fd197fed55b1e611916fb03170e370}{stbi\_\_err}}(\textcolor{stringliteral}{"{}can't fopen"{}}, \textcolor{stringliteral}{"{}Unable to open file"{}});}
\DoxyCodeLine{6383     result = \mbox{\hyperlink{stb__image_8h_a28abedef4a0a93909332080df6be0021}{stbi\_info\_from\_file}}(f, x, y, comp);}
\DoxyCodeLine{6384     fclose(f);}
\DoxyCodeLine{6385     \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{6386 \}}
\DoxyCodeLine{6387 }
\DoxyCodeLine{6388 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int} \mbox{\hyperlink{stb__image_8h_a28abedef4a0a93909332080df6be0021}{stbi\_info\_from\_file}}(FILE *f, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{6389 \{}
\DoxyCodeLine{6390    \textcolor{keywordtype}{int} r;}
\DoxyCodeLine{6391    \mbox{\hyperlink{structstbi____context}{stbi\_\_context}} s;}
\DoxyCodeLine{6392    \textcolor{keywordtype}{long} pos = ftell(f);}
\DoxyCodeLine{6393    stbi\_\_start\_file(\&s, f);}
\DoxyCodeLine{6394    r = stbi\_\_info\_main(\&s,x,y,comp);}
\DoxyCodeLine{6395    fseek(f,pos,SEEK\_SET);}
\DoxyCodeLine{6396    \textcolor{keywordflow}{return} r;}
\DoxyCodeLine{6397 \}}
\DoxyCodeLine{6398 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// !STBI\_NO\_STDIO}}
\DoxyCodeLine{6399 }
\DoxyCodeLine{6400 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int} \mbox{\hyperlink{stb__image_8h_acfef077febce3bc3f1f339de478f3315}{stbi\_info\_from\_memory}}(\mbox{\hyperlink{stb__image_8h_a28eb51a1512ce382ee50f20e1d04d50d}{stbi\_uc}} \textcolor{keyword}{const} *buffer, \textcolor{keywordtype}{int} len, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{6401 \{}
\DoxyCodeLine{6402    \mbox{\hyperlink{structstbi____context}{stbi\_\_context}} s;}
\DoxyCodeLine{6403    stbi\_\_start\_mem(\&s,buffer,len);}
\DoxyCodeLine{6404    \textcolor{keywordflow}{return} stbi\_\_info\_main(\&s,x,y,comp);}
\DoxyCodeLine{6405 \}}
\DoxyCodeLine{6406 }
\DoxyCodeLine{6407 \mbox{\hyperlink{stb__image_8h_a2d9ec9850cd12aefe7641b456266a4c2}{STBIDEF}} \textcolor{keywordtype}{int} \mbox{\hyperlink{stb__image_8h_a86291c64cb663f41a34647d5e1abf363}{stbi\_info\_from\_callbacks}}(\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} \textcolor{keyword}{const} *c, \textcolor{keywordtype}{void} *user, \textcolor{keywordtype}{int} *x, \textcolor{keywordtype}{int} *y, \textcolor{keywordtype}{int} *comp)}
\DoxyCodeLine{6408 \{}
\DoxyCodeLine{6409    \mbox{\hyperlink{structstbi____context}{stbi\_\_context}} s;}
\DoxyCodeLine{6410    stbi\_\_start\_callbacks(\&s, (\mbox{\hyperlink{structstbi__io__callbacks}{stbi\_io\_callbacks}} *) c, user);}
\DoxyCodeLine{6411    \textcolor{keywordflow}{return} stbi\_\_info\_main(\&s,x,y,comp);}
\DoxyCodeLine{6412 \}}
\DoxyCodeLine{6413 }
\DoxyCodeLine{6414 \textcolor{comment}{// add in my DDS loading support}}
\DoxyCodeLine{6415 \textcolor{preprocessor}{\#ifndef STBI\_NO\_DDS}}
\DoxyCodeLine{6416 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{stbi___d_d_s__c_8h}{stbi\_DDS\_c.h}}"{}}}
\DoxyCodeLine{6417 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{6418 }
\DoxyCodeLine{6419 \textcolor{comment}{// add in my pvr loading support}}
\DoxyCodeLine{6420 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PVR}}
\DoxyCodeLine{6421 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{stbi__pvr__c_8h}{stbi\_pvr\_c.h}}"{}}}
\DoxyCodeLine{6422 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{6423 }
\DoxyCodeLine{6424 \textcolor{comment}{// add in my pkm ( ETC1 ) loading support}}
\DoxyCodeLine{6425 \textcolor{preprocessor}{\#ifndef STBI\_NO\_PKM}}
\DoxyCodeLine{6426 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{stbi__pkm__c_8h}{stbi\_pkm\_c.h}}"{}}}
\DoxyCodeLine{6427 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{6428 }
\DoxyCodeLine{6429 \textcolor{preprocessor}{\#ifndef STBI\_NO\_EXT}}
\DoxyCodeLine{6430 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{stbi__ext__c_8h}{stbi\_ext\_c.h}}"{}}}
\DoxyCodeLine{6431 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{6432 }
\DoxyCodeLine{6433 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STB\_IMAGE\_IMPLEMENTATION}}
\DoxyCodeLine{6434 }
\DoxyCodeLine{6435 \textcolor{comment}{/*}}
\DoxyCodeLine{6436 \textcolor{comment}{   revision history:}}
\DoxyCodeLine{6437 \textcolor{comment}{      2.08  (2015-\/09-\/13) fix to 2.07 cleanup, reading RGB PSD as RGBA}}
\DoxyCodeLine{6438 \textcolor{comment}{      2.07  (2015-\/09-\/13) fix compiler warnings}}
\DoxyCodeLine{6439 \textcolor{comment}{                         partial animated GIF support}}
\DoxyCodeLine{6440 \textcolor{comment}{                         limited 16-\/bit PSD support}}
\DoxyCodeLine{6441 \textcolor{comment}{                         \#ifdef unused functions}}
\DoxyCodeLine{6442 \textcolor{comment}{                         bug with < 92 byte PIC,PNM,HDR,TGA}}
\DoxyCodeLine{6443 \textcolor{comment}{      2.06  (2015-\/04-\/19) fix bug where PSD returns wrong '*comp' value}}
\DoxyCodeLine{6444 \textcolor{comment}{      2.05  (2015-\/04-\/19) fix bug in progressive JPEG handling, fix warning}}
\DoxyCodeLine{6445 \textcolor{comment}{      2.04  (2015-\/04-\/15) try to re-\/enable SIMD on MinGW 64-\/bit}}
\DoxyCodeLine{6446 \textcolor{comment}{      2.03  (2015-\/04-\/12) extra corruption checking (mmozeiko)}}
\DoxyCodeLine{6447 \textcolor{comment}{                         stbi\_set\_flip\_vertically\_on\_load (nguillemot)}}
\DoxyCodeLine{6448 \textcolor{comment}{                         fix NEON support; fix mingw support}}
\DoxyCodeLine{6449 \textcolor{comment}{      2.02  (2015-\/01-\/19) fix incorrect assert, fix warning}}
\DoxyCodeLine{6450 \textcolor{comment}{      2.01  (2015-\/01-\/17) fix various warnings; suppress SIMD on gcc 32-\/bit without -\/msse2}}
\DoxyCodeLine{6451 \textcolor{comment}{      2.00b (2014-\/12-\/25) fix STBI\_MALLOC in progressive JPEG}}
\DoxyCodeLine{6452 \textcolor{comment}{      2.00  (2014-\/12-\/25) optimize JPG, including x86 SSE2 \& NEON SIMD (ryg)}}
\DoxyCodeLine{6453 \textcolor{comment}{                         progressive JPEG (stb)}}
\DoxyCodeLine{6454 \textcolor{comment}{                         PGM/PPM support (Ken Miller)}}
\DoxyCodeLine{6455 \textcolor{comment}{                         STBI\_MALLOC,STBI\_REALLOC,STBI\_FREE}}
\DoxyCodeLine{6456 \textcolor{comment}{                         GIF bugfix -\/-\/ seemingly never worked}}
\DoxyCodeLine{6457 \textcolor{comment}{                         STBI\_NO\_*, STBI\_ONLY\_*}}
\DoxyCodeLine{6458 \textcolor{comment}{      1.48  (2014-\/12-\/14) fix incorrectly-\/named assert()}}
\DoxyCodeLine{6459 \textcolor{comment}{      1.47  (2014-\/12-\/14) 1/2/4-\/bit PNG support, both direct and paletted (Omar Cornut \& stb)}}
\DoxyCodeLine{6460 \textcolor{comment}{                         optimize PNG (ryg)}}
\DoxyCodeLine{6461 \textcolor{comment}{                         fix bug in interlaced PNG with user-\/specified channel count (stb)}}
\DoxyCodeLine{6462 \textcolor{comment}{      1.46  (2014-\/08-\/26)}}
\DoxyCodeLine{6463 \textcolor{comment}{              fix broken tRNS chunk (colorkey-\/style transparency) in non-\/paletted PNG}}
\DoxyCodeLine{6464 \textcolor{comment}{      1.45  (2014-\/08-\/16)}}
\DoxyCodeLine{6465 \textcolor{comment}{              fix MSVC-\/ARM internal compiler error by wrapping malloc}}
\DoxyCodeLine{6466 \textcolor{comment}{      1.44  (2014-\/08-\/07)}}
\DoxyCodeLine{6467 \textcolor{comment}{              various warning fixes from Ronny Chevalier}}
\DoxyCodeLine{6468 \textcolor{comment}{      1.43  (2014-\/07-\/15)}}
\DoxyCodeLine{6469 \textcolor{comment}{              fix MSVC-\/only compiler problem in code changed in 1.42}}
\DoxyCodeLine{6470 \textcolor{comment}{      1.42  (2014-\/07-\/09)}}
\DoxyCodeLine{6471 \textcolor{comment}{              don't define \_CRT\_SECURE\_NO\_WARNINGS (affects user code)}}
\DoxyCodeLine{6472 \textcolor{comment}{              fixes to stbi\_\_cleanup\_jpeg path}}
\DoxyCodeLine{6473 \textcolor{comment}{              added STBI\_ASSERT to avoid requiring assert.h}}
\DoxyCodeLine{6474 \textcolor{comment}{      1.41  (2014-\/06-\/25)}}
\DoxyCodeLine{6475 \textcolor{comment}{              fix search\&replace from 1.36 that messed up comments/error messages}}
\DoxyCodeLine{6476 \textcolor{comment}{      1.40  (2014-\/06-\/22)}}
\DoxyCodeLine{6477 \textcolor{comment}{              fix gcc struct-\/initialization warning}}
\DoxyCodeLine{6478 \textcolor{comment}{      1.39  (2014-\/06-\/15)}}
\DoxyCodeLine{6479 \textcolor{comment}{              fix to TGA optimization when req\_comp != number of components in TGA;}}
\DoxyCodeLine{6480 \textcolor{comment}{              fix to GIF loading because BMP wasn't rewinding (whoops, no GIFs in my test suite)}}
\DoxyCodeLine{6481 \textcolor{comment}{              add support for BMP version 5 (more ignored fields)}}
\DoxyCodeLine{6482 \textcolor{comment}{      1.38  (2014-\/06-\/06)}}
\DoxyCodeLine{6483 \textcolor{comment}{              suppress MSVC warnings on integer casts truncating values}}
\DoxyCodeLine{6484 \textcolor{comment}{              fix accidental rename of 'skip' field of I/O}}
\DoxyCodeLine{6485 \textcolor{comment}{      1.37  (2014-\/06-\/04)}}
\DoxyCodeLine{6486 \textcolor{comment}{              remove duplicate typedef}}
\DoxyCodeLine{6487 \textcolor{comment}{      1.36  (2014-\/06-\/03)}}
\DoxyCodeLine{6488 \textcolor{comment}{              convert to header file single-\/file library}}
\DoxyCodeLine{6489 \textcolor{comment}{              if de-\/iphone isn't set, load iphone images color-\/swapped instead of returning NULL}}
\DoxyCodeLine{6490 \textcolor{comment}{      1.35  (2014-\/05-\/27)}}
\DoxyCodeLine{6491 \textcolor{comment}{              various warnings}}
\DoxyCodeLine{6492 \textcolor{comment}{              fix broken STBI\_SIMD path}}
\DoxyCodeLine{6493 \textcolor{comment}{              fix bug where stbi\_load\_from\_file no longer left file pointer in correct place}}
\DoxyCodeLine{6494 \textcolor{comment}{              fix broken non-\/easy path for 32-\/bit BMP (possibly never used)}}
\DoxyCodeLine{6495 \textcolor{comment}{              TGA optimization by Arseny Kapoulkine}}
\DoxyCodeLine{6496 \textcolor{comment}{      1.34  (unknown)}}
\DoxyCodeLine{6497 \textcolor{comment}{              use STBI\_NOTUSED in stbi\_\_resample\_row\_generic(), fix one more leak in tga failure case}}
\DoxyCodeLine{6498 \textcolor{comment}{      1.33  (2011-\/07-\/14)}}
\DoxyCodeLine{6499 \textcolor{comment}{              make stbi\_is\_hdr work in STBI\_NO\_HDR (as specified), minor compiler-\/friendly improvements}}
\DoxyCodeLine{6500 \textcolor{comment}{      1.32  (2011-\/07-\/13)}}
\DoxyCodeLine{6501 \textcolor{comment}{              support for "{}info"{} function for all supported filetypes (SpartanJ)}}
\DoxyCodeLine{6502 \textcolor{comment}{      1.31  (2011-\/06-\/20)}}
\DoxyCodeLine{6503 \textcolor{comment}{              a few more leak fixes, bug in PNG handling (SpartanJ)}}
\DoxyCodeLine{6504 \textcolor{comment}{      1.30  (2011-\/06-\/11)}}
\DoxyCodeLine{6505 \textcolor{comment}{              added ability to load files via callbacks to accomidate custom input streams (Ben Wenger)}}
\DoxyCodeLine{6506 \textcolor{comment}{              removed deprecated format-\/specific test/load functions}}
\DoxyCodeLine{6507 \textcolor{comment}{              removed support for installable file formats (stbi\_loader) -\/-\/ would have been broken for IO callbacks anyway}}
\DoxyCodeLine{6508 \textcolor{comment}{              error cases in bmp and tga give messages and don't leak (Raymond Barbiero, grisha)}}
\DoxyCodeLine{6509 \textcolor{comment}{              fix inefficiency in decoding 32-\/bit BMP (David Woo)}}
\DoxyCodeLine{6510 \textcolor{comment}{      1.29  (2010-\/08-\/16)}}
\DoxyCodeLine{6511 \textcolor{comment}{              various warning fixes from Aurelien Pocheville}}
\DoxyCodeLine{6512 \textcolor{comment}{      1.28  (2010-\/08-\/01)}}
\DoxyCodeLine{6513 \textcolor{comment}{              fix bug in GIF palette transparency (SpartanJ)}}
\DoxyCodeLine{6514 \textcolor{comment}{      1.27  (2010-\/08-\/01)}}
\DoxyCodeLine{6515 \textcolor{comment}{              cast-\/to-\/stbi\_uc to fix warnings}}
\DoxyCodeLine{6516 \textcolor{comment}{      1.26  (2010-\/07-\/24)}}
\DoxyCodeLine{6517 \textcolor{comment}{              fix bug in file buffering for PNG reported by SpartanJ}}
\DoxyCodeLine{6518 \textcolor{comment}{      1.25  (2010-\/07-\/17)}}
\DoxyCodeLine{6519 \textcolor{comment}{              refix trans\_data warning (Won Chun)}}
\DoxyCodeLine{6520 \textcolor{comment}{      1.24  (2010-\/07-\/12)}}
\DoxyCodeLine{6521 \textcolor{comment}{              perf improvements reading from files on platforms with lock-\/heavy fgetc()}}
\DoxyCodeLine{6522 \textcolor{comment}{              minor perf improvements for jpeg}}
\DoxyCodeLine{6523 \textcolor{comment}{              deprecated type-\/specific functions so we'll get feedback if they're needed}}
\DoxyCodeLine{6524 \textcolor{comment}{              attempt to fix trans\_data warning (Won Chun)}}
\DoxyCodeLine{6525 \textcolor{comment}{      1.23    fixed bug in iPhone support}}
\DoxyCodeLine{6526 \textcolor{comment}{      1.22  (2010-\/07-\/10)}}
\DoxyCodeLine{6527 \textcolor{comment}{              removed image *writing* support}}
\DoxyCodeLine{6528 \textcolor{comment}{              stbi\_info support from Jetro Lauha}}
\DoxyCodeLine{6529 \textcolor{comment}{              GIF support from Jean-\/Marc Lienher}}
\DoxyCodeLine{6530 \textcolor{comment}{              iPhone PNG-\/extensions from James Brown}}
\DoxyCodeLine{6531 \textcolor{comment}{              warning-\/fixes from Nicolas Schulz and Janez Zemva (i.stbi\_\_err. Janez (U+017D)emva)}}
\DoxyCodeLine{6532 \textcolor{comment}{      1.21    fix use of 'stbi\_uc' in header (reported by jon blow)}}
\DoxyCodeLine{6533 \textcolor{comment}{      1.20    added support for Softimage PIC, by Tom Seddon}}
\DoxyCodeLine{6534 \textcolor{comment}{      1.19    bug in interlaced PNG corruption check (found by ryg)}}
\DoxyCodeLine{6535 \textcolor{comment}{      1.18  (2008-\/08-\/02)}}
\DoxyCodeLine{6536 \textcolor{comment}{              fix a threading bug (local mutable static)}}
\DoxyCodeLine{6537 \textcolor{comment}{      1.17    support interlaced PNG}}
\DoxyCodeLine{6538 \textcolor{comment}{      1.16    major bugfix -\/ stbi\_\_convert\_format converted one too many pixels}}
\DoxyCodeLine{6539 \textcolor{comment}{      1.15    initialize some fields for thread safety}}
\DoxyCodeLine{6540 \textcolor{comment}{      1.14    fix threadsafe conversion bug}}
\DoxyCodeLine{6541 \textcolor{comment}{              header-\/file-\/only version (\#define STBI\_HEADER\_FILE\_ONLY before including)}}
\DoxyCodeLine{6542 \textcolor{comment}{      1.13    threadsafe}}
\DoxyCodeLine{6543 \textcolor{comment}{      1.12    const qualifiers in the API}}
\DoxyCodeLine{6544 \textcolor{comment}{      1.11    Support installable IDCT, colorspace conversion routines}}
\DoxyCodeLine{6545 \textcolor{comment}{      1.10    Fixes for 64-\/bit (don't use "{}unsigned long"{})}}
\DoxyCodeLine{6546 \textcolor{comment}{              optimized upsampling by Fabian "{}ryg"{} Giesen}}
\DoxyCodeLine{6547 \textcolor{comment}{      1.09    Fix format-\/conversion for PSD code (bad global variables!)}}
\DoxyCodeLine{6548 \textcolor{comment}{      1.08    Thatcher Ulrich's PSD code integrated by Nicolas Schulz}}
\DoxyCodeLine{6549 \textcolor{comment}{      1.07    attempt to fix C++ warning/errors again}}
\DoxyCodeLine{6550 \textcolor{comment}{      1.06    attempt to fix C++ warning/errors again}}
\DoxyCodeLine{6551 \textcolor{comment}{      1.05    fix TGA loading to return correct *comp and use good luminance calc}}
\DoxyCodeLine{6552 \textcolor{comment}{      1.04    default float alpha is 1, not 255; use 'void *' for stbi\_image\_free}}
\DoxyCodeLine{6553 \textcolor{comment}{      1.03    bugfixes to STBI\_NO\_STDIO, STBI\_NO\_HDR}}
\DoxyCodeLine{6554 \textcolor{comment}{      1.02    support for (subset of) HDR files, float interface for preferred access to them}}
\DoxyCodeLine{6555 \textcolor{comment}{      1.01    fix bug: possible bug in handling right-\/side up bmps... not sure}}
\DoxyCodeLine{6556 \textcolor{comment}{              fix bug: the stbi\_\_bmp\_load() and stbi\_\_tga\_load() functions didn't work at all}}
\DoxyCodeLine{6557 \textcolor{comment}{      1.00    interface to zlib that skips zlib header}}
\DoxyCodeLine{6558 \textcolor{comment}{      0.99    correct handling of alpha in palette}}
\DoxyCodeLine{6559 \textcolor{comment}{      0.98    TGA loader by lonesock; dynamically add loaders (untested)}}
\DoxyCodeLine{6560 \textcolor{comment}{      0.97    jpeg errors on too large a file; also catch another malloc failure}}
\DoxyCodeLine{6561 \textcolor{comment}{      0.96    fix detection of invalid v value -\/ particleman@mollyrocket forum}}
\DoxyCodeLine{6562 \textcolor{comment}{      0.95    during header scan, seek to markers in case of padding}}
\DoxyCodeLine{6563 \textcolor{comment}{      0.94    STBI\_NO\_STDIO to disable stdio usage; rename all \#defines the same}}
\DoxyCodeLine{6564 \textcolor{comment}{      0.93    handle jpegtran output; verbose errors}}
\DoxyCodeLine{6565 \textcolor{comment}{      0.92    read 4,8,16,24,32-\/bit BMP files of several formats}}
\DoxyCodeLine{6566 \textcolor{comment}{      0.91    output 24-\/bit Windows 3.0 BMP files}}
\DoxyCodeLine{6567 \textcolor{comment}{      0.90    fix a few more warnings; bump version number to approach 1.0}}
\DoxyCodeLine{6568 \textcolor{comment}{      0.61    bugfixes due to Marc LeBlanc, Christopher Lloyd}}
\DoxyCodeLine{6569 \textcolor{comment}{      0.60    fix compiling as c++}}
\DoxyCodeLine{6570 \textcolor{comment}{      0.59    fix warnings: merge Dave Moore's -\/Wall fixes}}
\DoxyCodeLine{6571 \textcolor{comment}{      0.58    fix bug: zlib uncompressed mode len/nlen was wrong endian}}
\DoxyCodeLine{6572 \textcolor{comment}{      0.57    fix bug: jpg last huffman symbol before marker was >9 bits but less than 16 available}}
\DoxyCodeLine{6573 \textcolor{comment}{      0.56    fix bug: zlib uncompressed mode len vs. nlen}}
\DoxyCodeLine{6574 \textcolor{comment}{      0.55    fix bug: restart\_interval not initialized to 0}}
\DoxyCodeLine{6575 \textcolor{comment}{      0.54    allow NULL for 'int *comp'}}
\DoxyCodeLine{6576 \textcolor{comment}{      0.53    fix bug in png 3-\/>4; speedup png decoding}}
\DoxyCodeLine{6577 \textcolor{comment}{      0.52    png handles req\_comp=3,4 directly; minor cleanup; jpeg comments}}
\DoxyCodeLine{6578 \textcolor{comment}{      0.51    obey req\_comp requests, 1-\/component jpegs return as 1-\/component,}}
\DoxyCodeLine{6579 \textcolor{comment}{              on 'test' only check type, not whether we support this variant}}
\DoxyCodeLine{6580 \textcolor{comment}{      0.50  (2006-\/11-\/19)}}
\DoxyCodeLine{6581 \textcolor{comment}{              first released version}}
\DoxyCodeLine{6582 \textcolor{comment}{*/}}

\end{DoxyCode}
